import{j as e,x as q,f as Z,t as ye,p as be,c as xe,z as _e}from"./index-CJ3EbEQl.js";import{Document as je,Page as K,StyleSheet as ze,View as l,Image as F,Text as i}from"./react-pdf.browser-C0FYxKaf.js";const t=ze.create({page:{padding:34,fontSize:11,color:"#111"},row:{flexDirection:"row"},col:{flexGrow:1},h1:{fontSize:32,fontWeight:700,marginBottom:4},h2:{fontSize:13,fontWeight:700,marginTop:7,marginBottom:4},h2Tight:{fontSize:13,fontWeight:700,marginTop:0,marginBottom:4},label:{color:"#555"},box:{borderWidth:1,borderStyle:"solid",borderColor:"#e6e6e6",borderRadius:6,padding:8},table:{borderWidth:1,borderStyle:"solid",borderColor:"#e6e6e6",borderRadius:6,marginTop:2},tr:{flexDirection:"row",borderBottomWidth:1,borderStyle:"solid",borderColor:"#e0e0e0"},th:{flex:1,fontWeight:700,fontSize:11,padding:8,backgroundColor:"#f7f7f7"},td:{flex:1,padding:8,fontSize:11},right:{textAlign:"right"},small:{fontSize:10,color:"#555"},logo:{width:140,height:55,objectFit:"contain",marginBottom:0,marginTop:-20},companyDetails:{fontSize:9,color:"#555",lineHeight:1.4},sep:{height:8},footerNote:{marginTop:14,fontSize:9,color:"#555"},block:{marginTop:6},pastelGreen:{backgroundColor:"#e8f7ec"},strike:{textDecoration:"line-through",color:"#777"},itemCard:{backgroundColor:"#f5f6f8",borderRadius:8,padding:14,marginBottom:10,flexDirection:"row"},itemPhotoWrap:{width:170,height:170,backgroundColor:"transparent",borderRadius:6,alignItems:"center",justifyContent:"center",padding:6,position:"relative",marginRight:12},dimW:{position:"absolute",bottom:-18,left:0,right:0,textAlign:"center",fontSize:10,color:"#333",paddingVertical:3},dimHWrap:{position:"absolute",top:0,bottom:0,left:-20,alignItems:"center",justifyContent:"center"},dimH:{fontSize:10,color:"#333",transform:"rotate(-90deg)",paddingVertical:3,paddingHorizontal:3},photo:{width:"100%",height:"100%",objectFit:"contain"},itemContent:{flex:1,paddingLeft:14},itemHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:6},itemKind:{fontSize:13,fontWeight:700,color:"#111"},itemDims:{fontSize:9,color:"#666",marginLeft:6},itemQty:{fontSize:11,color:"#555",fontWeight:500},itemDescription:{fontSize:9,color:"#666",marginBottom:4},itemRef:{fontSize:9,color:"#666",marginTop:2,marginBottom:6},hr:{height:1,backgroundColor:"#e0e0e0",marginVertical:12},detailGrid:{},detailRow:{flexDirection:"row",marginBottom:2,marginTop:6},detailLabel:{width:"45%",color:"#555",paddingRight:5,fontSize:11},detailValue:{flex:1,fontWeight:500,color:"#111",fontSize:11},piecesNote:{color:"#777",fontSize:10},headerGrid:{flexDirection:"row",marginTop:2},colThird:{flex:1,paddingLeft:6,paddingRight:6},card:{borderWidth:1,borderStyle:"solid",borderColor:"#e6e6e6",borderRadius:8,padding:10,backgroundColor:"#ffffff"},brandCard:{backgroundColor:"transparent",padding:0},clientCard:{backgroundColor:"#fdfdfd",borderWidth:1,borderStyle:"solid",borderColor:"#efefef",borderRadius:8,padding:10},stampCard:{backgroundColor:"#fbfbfb",borderWidth:1,borderStyle:"dashed",borderColor:"#d1d5db",borderRadius:10,padding:10},stampTitle:{fontSize:11,fontWeight:700,marginBottom:2,color:"#111"},overline:{fontSize:8,color:"#6b7280",marginBottom:2},metaRow:{fontSize:10,color:"#0b0b0b",marginTop:2},metaLabel:{fontSize:8,color:"#6b7280",marginRight:4},poBlock:{marginTop:12,marginBottom:0},poInlineRow:{flexDirection:"row",alignItems:"center"},poImageSmall:{width:60,height:60,objectFit:"contain",borderRadius:6,alignSelf:"flex-start",marginRight:10},poGrid:{flexDirection:"row",flexWrap:"wrap",marginTop:6},poCol:{width:"50%",paddingRight:8,paddingLeft:2,paddingVertical:4},poFirstCol:{position:"relative",paddingRight:112},poEyebrow:{color:"#6b7280",fontSize:11,fontWeight:400,marginBottom:2},poTitle:{fontSize:16,fontWeight:600,color:"#0b0b0b",marginBottom:2},poDesc:{color:"#6b7280",fontSize:11,fontWeight:400,lineHeight:1.25,maxWidth:"220px"},poDivider:{width:80,height:2,backgroundColor:"#3fb26b",marginTop:6,marginBottom:6,alignSelf:"flex-start"},poTitleRow:{flexDirection:"row",alignItems:"center",marginBottom:2},poImageTiny:{width:60,height:60,objectFit:"contain",borderRadius:6,marginLeft:6},poTitleText:{lineHeight:1.05,marginRight:6},poTitleRowTight:{flexDirection:"row",alignItems:"flex-end",marginBottom:2},poImageInline:{width:50,height:50,objectFit:"contain",borderRadius:4,marginLeft:6,marginBottom:1},poHeroAbsWrap:{position:"absolute",top:0,bottom:0,right:8,width:96,justifyContent:"center",alignItems:"flex-end"},poHeroAbs:{width:96,height:96,objectFit:"contain",borderRadius:4}});function $(o){const n=typeof o=="number"&&Number.isFinite(o)?o:0;return new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(n)}function _(o,n="—"){return typeof o=="string"&&o.trim().length>0?o:n}function Se(o){if(!o)return"—";const n=String(o).match(/^(\d{4})-(\d{2})-(\d{2})/);if(n){const[,c,T,I]=n;return`${I}-${T}-${c}`}return String(o)}function we(o){return(Array.isArray(o)?o:[]).map(c=>({category:_(c?.label??c?.category??"","-"),amount:typeof c?.amount=="number"&&Number.isFinite(c.amount)?c.amount:0,pieces:typeof c?.pieces=="number"&&Number.isFinite(c.pieces)&&c.pieces>0?c.pieces:null}))}function Ce(o){return Array.isArray(o)?o.filter(Boolean):o&&typeof o=="object"?Object.values(o).filter(Boolean):[]}function Te(o){if(!o||typeof o!="object")return"";const n=o.width_mm||o.larghezza_mm||o.larghezza,c=o.height_mm||o.altezza_mm||o.altezza;return n&&c?`L ${n} × H ${c} mm`:n?`L ${n} mm`:c?`H ${c} mm`:""}function Ne(o){switch(o){case"finestra":return Z;case"zanzariera":return _e;case"cassonetto":return xe;case"persiana":return be;case"tapparella":return ye;default:return Z}}function h(o,n){for(const c of n)if(o[c]!==void 0&&o[c]!==null&&String(o[c]).toString().trim()!=="")return o[c]}function ee(o,n="Sì",c="No"){if(typeof o=="boolean")return o?n:c;if(typeof o=="string"){const T=o.trim().toLowerCase();if(["si","sì","yes","true","1","on"].includes(T))return n;if(["no","false","0","off"].includes(T))return c}}function Ae(o){if(!o||typeof o!="object")return[];const n=[],c=Number(o.width_mm??o.larghezza_mm??o.larghezza),T=Number(o.height_mm??o.altezza_mm??o.altezza),I=Number.isFinite(c)&&Number.isFinite(T)?c*T/1e6:void 0;switch(o.kind){case"finestra":case"portafinestra":case"scorrevole":{if(typeof I=="number"){const x=Number(o.qty),B=(Number.isFinite(x)?I*x:I).toFixed(2);n.push(["Superficie totale",`${B} m²`])}const d=h(o,["profile_system","system_profile"]);d&&n.push(["Sistema profilo",String(d)]);const a=h(o,["color","colore","profilo_colore"]);a&&n.push(["Colore",String(a)]);const p=h(o,["glass","vetro","glazing"]);let g=null;try{const x=o?.options?.gridWindow?.rows,z=typeof o?.options?.gridWindow?.glazing=="string"&&o.options.gridWindow.glazing.trim()?o.options.gridWindow.glazing.trim():null,B=typeof p=="string"&&String(p).trim()?String(p).trim():null;if(Array.isArray(x)&&x.length>0){const P={};for(const W of x){const R=Array.isArray(W?.cols)?W.cols:[];for(const f of R){const S=f?.leaf&&typeof f.leaf.glazing=="string"&&f.leaf.glazing.trim()?f.leaf.glazing.trim():typeof f?.glazing=="string"&&f.glazing.trim()?f.glazing.trim():z||B;if(S){const w=S.toLowerCase();P[w]=(P[w]||0)+1}}}const k=Object.entries(P);if(k.length>0){const W=["singolo","doppio","triplo","satinato"],R={singolo:"Singolo",doppio:"Doppio",triplo:"Triplo",satinato:"Satinato"};if(k.sort((f,S)=>{const w=W.indexOf(f[0].toLowerCase()),D=W.indexOf(S[0].toLowerCase());return w===-1&&D===-1?f[0].localeCompare(S[0]):w===-1?1:D===-1?-1:w-D}),k.length===1){const[f]=k[0];g=R[f.toLowerCase()]||f.charAt(0).toUpperCase()+f.slice(1)}else g=k.map(([f,S])=>`x${S} ${R[f.toLowerCase()]||f.charAt(0).toUpperCase()+f.slice(1)}`).join(", ")}}}catch{}!g&&p&&(g=String(p)),g&&n.push(["Vetro",g]);const u=h(o,["uw"]);if(u!=null&&String(u).trim()!==""){const x=Number(u),z=Number.isFinite(x)?`<= ${x} W/m²K`:`<= ${String(u)} W/m²K`;n.push(["Uw",z])}const M=h(o,["glass_spec","vetro_stratigrafia","stratigrafia_vetro"]);M&&n.push(["Stratigrafia vetro",String(M)]);const U=h(o,["hinge_color","colore_cerniere"]);U&&n.push(["Colore cerniere",String(U)]);break}case"zanzariera":{const d=h(o,["modello"]);d&&n.push(["Modello",String(d)]);const a=h(o,["tipologia"]);a&&n.push(["Tipologia",String(a)]);const p=h(o,["rete_colore","rete_tipo","tipo_rete","mesh"]);if(p){const u=String(p).replace(/^mesh\s*/i,"").trim();n.push(["Colore rete",u])}const g=ee(h(o,["deceleratore","has_deceleratore","con_deceleratore"]));g&&n.push(["Deceleratore",g]);break}case"cassonetto":{const d=h(o,["material","materiale"]);d&&n.push(["Materiale",String(d)]);const a=h(o,["depth_mm","profondita_mm","profondità_mm"]);a&&n.push(["Profondità",`${a} mm`]);const p=h(o,["celino_mm","spalletta_mm","extension_mm","spalletta"]);p&&n.push(["Celino",`${p} mm`]);const g=h(o,["color","colore"]);g&&n.push(["Colore",String(g)]);break}case"persiana":{n.push(["Materiale","Alluminio"]);const d=h(o,["lamelle_type","lamelle"]);d&&n.push(["Lamelle",String(d)]);const a=ee(h(o,["con_telaio","telaio"]),"Con telaio","Senza telaio");a&&n.push(["Telaio",a]);const p=h(o,["color","colore"]);p&&n.push(["Colore",String(p)]);break}case"tapparella":{const d=h(o,["material","materiale"]);d&&n.push(["Materiale",String(d)]);const a=h(o,["color","colore"]);a&&n.push(["Colore",String(a)]);break}case"custom":{const d=h(o,["label","title"]);d&&n.push(["Titolo",String(d)]);const a=h(o,["note","descrizione"]);a&&n.push(["Note",String(a)]);break}}const O=new Set(n.map(([d])=>d.toLowerCase())),j=new Set(["id","kind","qty","title","label","width_mm","height_mm","larghezza_mm","altezza_mm","larghezza","altezza","price_mode","price_total","price_per_mq","unit_price","unitPrice","price","prezzo","misura_tipo","accessori_colore","reference","riferimento","image_url","imageUrl"]);for(const[d,a]of Object.entries(o)){if(a==null||String(a).trim()===""||typeof a=="object"||typeof a=="function"||j.has(d))continue;const g={profile_system:"Sistema profilo",system_profile:"Sistema profilo",color:"Colore",colore:"Colore",profilo_colore:"Colore profilo",glass:"Vetro",vetro:"Vetro",glazing:"Vetro",uw:"Uw",modello:"Modello",tipologia:"Tipologia",rete_colore:"Colore rete",rete_tipo:"Colore rete",tipo_rete:"Colore rete",mesh:"Colore rete",deceleratore:"Deceleratore",has_deceleratore:"Deceleratore",con_deceleratore:"Deceleratore",material:"Materiale",materiale:"Materiale",depth_mm:"Profondità",profondita_mm:"Profondità",celino_mm:"Celino",spalletta_mm:"Celino",extension_mm:"Celino",lamelle_type:"Lamelle",lamelle:"Lamelle",con_telaio:"Telaio",hinge_color:"Colore cerniere",hinges_color:"Colore cerniere",glass_spec:"Stratigrafia vetro",vetro_stratigrafia:"Stratigrafia vetro",stratigrafia_vetro:"Stratigrafia vetro"}[d]||d;if(!O.has(g.toLowerCase())){let u=String(a);(g==="Profondità"||g==="Spalletta"||g==="Celino")&&(/mm\b/i.test(u)||(u=`${u} mm`)),g==="Colore rete"&&(u=u.replace(/^mesh\s*/i,"").trim()),n.push([g,u]),O.add(g.toLowerCase())}}return n}function Be(o){const{companyLogoUrl:n,quoteNumber:c,issueDate:T,installTime:I,showShippingIncluded:O,customer:j,catTotals:d,mountingCost:a,totalExcluded:p,validityLabel:g,validityDays:u,terms:M,items:U,profileOverview:x}=o||{},z=Ce(U),B=O!==!1,P=z.some(r=>{const s=String(r?.kind||"").toLowerCase();return s==="finestra"||s==="portafinestra"||s==="scorrevole"||/serrament/i.test(s)}),k=z.reduce((r,s)=>{const y=String(s?.kind||"").toLowerCase();if(!["finestra","portafinestra","scorrevole"].includes(y))return r;const N=Number(s?.width_mm??s?.larghezza_mm??s?.larghezza),A=Number(s?.height_mm??s?.altezza_mm??s?.altezza),C=Number(s?.qty??1);if(Number.isFinite(N)&&Number.isFinite(A)){const b=N*A/1e6;return r+(Number.isFinite(C)?b*C:b)}return r},0),W=z.reduce((r,s)=>{const y=String(s?.kind||"").toLowerCase();if(!["persiana","tapparella"].includes(y))return r;const N=Number(s?.width_mm??s?.larghezza_mm??s?.larghezza),A=Number(s?.height_mm??s?.altezza_mm??s?.altezza),C=Number(s?.qty??1);if(Number.isFinite(N)&&Number.isFinite(A)){const b=N*A/1e6;return r+(Number.isFinite(C)?b*C:b)}return r},0),R=we(d),f=typeof a=="number"&&Number.isFinite(a)?a:0,S=R.reduce((r,s)=>r+s.amount,0)+f,w=!!(o?.discount&&typeof o.discount.discountedTotal=="number"&&o.discount.discountedTotal>=0&&o.discount.discountedTotal<(o.discount.originalTotal??1/0)),D=w?o.discount?.originalTotal??S:typeof p=="number"&&Number.isFinite(p)?p:S,te=w?o.discount.discountedTotal:D,G=typeof u=="number"&&isFinite(u)?`VALIDITÀ OFFERTA: ${u} giorni`:_(g),oe=G&&G!=="—"?G.replace(/VALIDIT[ÀA][’']?\s*OFFERTA\s*:\s*/i,"").trim():"—",H=x&&x||null,Q=Array.isArray(H?.features)?H.features.filter(Boolean):[];return e.jsxs(je,{children:[e.jsxs(K,{size:"A4",style:t.page,children:[e.jsxs(l,{style:[t.headerGrid],children:[e.jsx(l,{style:t.colThird,children:e.jsxs(l,{style:t.brandCard,children:[n&&n.trim()?e.jsx(F,{src:n,style:t.logo}):e.jsx(F,{src:q,style:t.logo}),e.jsxs(i,{style:t.companyDetails,children:["X S.R.L.",`
`,"P.IVA 04062850120",`
`,"sede legale - Saronno (VA) 21047",`
`,"Via San Giuseppe, 95",`
`,"info@xinfissi.it · www.xinfissi.it · +39 345 457 3328"]})]})}),e.jsx(l,{style:t.colThird,children:e.jsxs(l,{style:t.clientCard,children:[e.jsx(i,{style:t.h2Tight,children:"Spettabile"}),e.jsx(i,{children:_(j?.name)}),_(j?.address,"")!==""?e.jsx(i,{children:_(j?.address)}):null,(()=>{const r=[_(j?.email,""),_(j?.phone,""),j?.vat&&j.vat.trim()?`P.IVA ${j.vat.trim()}`:""].filter(s=>s&&s.trim()!=="");return r.length>0?e.jsx(i,{style:t.small,children:r.join(" · ")}):null})()]})}),e.jsx(l,{style:t.colThird,children:e.jsxs(l,{style:t.stampCard,children:[e.jsxs(i,{style:t.stampTitle,children:["Offerta n° ",_(c,"-")]}),e.jsxs(i,{style:t.metaRow,children:[e.jsx(i,{style:t.metaLabel,children:"Emesso:"})," ",Se(T)]}),e.jsxs(i,{style:t.metaRow,children:[e.jsx(i,{style:t.metaLabel,children:"Validità:"})," ",oe]}),e.jsxs(i,{style:t.metaRow,children:[e.jsx(i,{style:t.metaLabel,children:"Termini completamento:"})," ",_(I)]})]})})]}),e.jsx(l,{style:t.block,children:e.jsx(l,{style:[t.box],children:P&&e.jsxs(l,{style:[t.row,{marginTop:0}],children:[e.jsxs(l,{style:{flex:1,paddingRight:8},children:[e.jsx(i,{style:t.label,children:"Ferramenta"}),e.jsx(i,{wrap:!1,children:"WINKHAUS + HOPPE"})]}),B&&e.jsxs(l,{style:{flex:1,paddingLeft:8},children:[e.jsx(i,{style:t.label,children:"Servizi"}),e.jsx(i,{wrap:!1,children:"Trasporto incluso"})]})]})})}),(H?.imageUrl||Q.length>0)&&e.jsx(l,{style:[t.block,t.poBlock,{paddingTop:2,paddingBottom:2}],children:e.jsx(l,{style:t.poGrid,children:Q.map((r,s)=>{const y=s===0;return e.jsxs(l,{style:y?[t.poCol,t.poFirstCol]:[t.poCol],wrap:!1,children:[r.eyebrow?e.jsx(i,{style:t.poEyebrow,children:String(r.eyebrow)}):null,r.title?e.jsx(i,{style:[t.poTitle,t.poTitleText],children:String(r.title)}):null,y&&H?.imageUrl?e.jsx(l,{style:t.poHeroAbsWrap,children:e.jsx(F,{src:H.imageUrl,style:t.poHeroAbs})}):null,r.description?e.jsx(i,{style:t.poDesc,children:String(r.description)}):null,e.jsx(l,{style:t.poDivider})]},`pof-${s}`)})})}),e.jsx(l,{style:{height:0}}),e.jsxs(l,{style:t.block,children:[e.jsx(i,{style:t.h2,children:"Riepilogo preventivo"}),e.jsxs(l,{style:t.table,children:[e.jsxs(l,{style:t.tr,children:[e.jsx(i,{style:[t.th,{flex:2}],children:"Categoria"}),e.jsx(i,{style:[t.th,t.right],children:"Importo"})]}),R.length>0?R.map((r,s)=>{const y=_(r.category,"-"),N=`row-${y}-${Number.isFinite(r.amount)?r.amount:0}-${s}`,A=/finestr|serramenti/i.test(y)&&k>0,C=/(persian|serrand|tapparell|avvolgibil)/i.test(y)&&W>0,b=r.pieces;return e.jsxs(l,{style:t.tr,children:[e.jsxs(i,{style:[t.td,{flex:2}],children:[e.jsx(i,{children:y}),typeof b=="number"&&b>0?e.jsxs(i,{style:t.piecesNote,children:[" · ",b," pezzi "]}):null,A?e.jsxs(i,{style:t.piecesNote,children:[" · ",k.toFixed(2)," m²"]}):null,C?e.jsxs(i,{style:t.piecesNote,children:[" · ",W.toFixed(2)," m²"]}):null]}),e.jsx(i,{style:[t.td,t.right],children:$(r.amount)})]},N)}):e.jsxs(l,{style:t.tr,children:[e.jsx(i,{style:[t.td,{flex:2,color:"#777"}],children:"—"}),e.jsx(i,{style:[t.td,t.right,{color:"#777"}],children:"—"})]}),typeof a=="number"&&Number.isFinite(a)&&e.jsxs(l,{style:t.tr,children:[e.jsx(i,{style:[t.td,{flex:2}],children:"Montaggio"}),e.jsx(i,{style:[t.td,t.right],children:$(a)})]}),w?e.jsxs(e.Fragment,{children:[e.jsxs(l,{style:[t.tr],children:[e.jsx(i,{style:[t.td,{flex:2,fontWeight:700,backgroundColor:"#f7f7f7"}],children:"TOTALE (IVA ESCLUSA)"}),e.jsx(i,{style:[t.td,t.right,{fontWeight:700,backgroundColor:"#f7f7f7"}],children:$(D)})]}),e.jsxs(l,{style:[t.tr,t.pastelGreen,{borderBottomWidth:0}],children:[e.jsx(i,{style:[t.td,{flex:2,fontWeight:700}],children:o.discount?.mode==="pct"&&typeof o.discount?.pct=="number"&&o.discount.pct>0?`TOTALE SCONTATO DEL ${o.discount.pct}% (IVA ESCLUSA)`:"TOTALE SCONTATO (IVA ESCLUSA)"}),e.jsx(i,{style:[t.td,t.right,{fontWeight:700}],children:$(te)})]})]}):e.jsxs(l,{style:[t.tr,{borderBottomWidth:0}],children:[e.jsx(i,{style:[t.td,{flex:2,fontWeight:700,backgroundColor:"#f7f7f7"}],children:"TOTALE (IVA ESCLUSA)"}),e.jsx(i,{style:[t.td,t.right,{fontWeight:700,backgroundColor:"#f7f7f7"}],children:$(D)})]})]})]})]}),e.jsxs(K,{size:"A4",style:t.page,children:[n&&n.trim()?e.jsx(F,{src:n,style:t.logo}):e.jsx(F,{src:q,style:t.logo}),e.jsxs(l,{style:t.block,children:[e.jsx(i,{style:t.h2,children:"Dettaglio voci"}),z.length>0?z.map((r,s)=>{const y=r?.kind==="custom",N=s>0&&s%2===0,A=y?[]:Ae(r),C=Array.isArray(r?.custom_fields)?r.custom_fields.filter(m=>{const L=m?.name??m?.label??m?.key,v=m?.value;return L&&String(L).trim()&&v!=null&&String(v).trim()}).map(m=>[String(m?.name??m?.label??m?.key).trim(),String(m?.value).trim()]):[],b=y?C:[...A,...C],re=(()=>{if(r?.title&&r.title.trim())return r.title.trim();const m=String(r?.kind||"Voce").trim();return m.charAt(0).toUpperCase()+m.slice(1)})(),ie=`Q.tà ${Number.isFinite(Number(r?.qty))?String(r.qty):"1"}`,ne=Te(r),le=b.length,se=Math.max(260,80+Math.min(40,le*7)),X=typeof r?.reference=="string"&&r.reference.trim()?r.reference.trim():typeof r?.riferimento=="string"&&r.riferimento.trim()?r.riferimento.trim():"";return e.jsxs(l,{wrap:!1,break:N,style:[t.itemCard,{minHeight:se}],children:[e.jsxs(l,{style:t.itemPhotoWrap,children:[(()=>{const m=typeof r?.image_url=="string"?r.image_url:"",L=m&&!m.startsWith("blob:")?m:Ne(r?.kind);return e.jsx(F,{src:L,style:t.photo})})(),(()=>{const m=String(r?.kind||"").toLowerCase(),L=r?.width_mm??r?.larghezza_mm??r?.larghezza?String(r?.width_mm??r?.larghezza_mm??r?.larghezza):"—",v=r?.height_mm??r?.altezza_mm??r?.altezza?String(r?.height_mm??r?.altezza_mm??r?.altezza):"—";if(!(m==="finestra"||m==="cassonetto"))return e.jsxs(e.Fragment,{children:[e.jsx(i,{style:t.dimW,children:L}),e.jsx(l,{style:t.dimHWrap,children:e.jsx(i,{style:t.dimH,children:v})})]});if(m==="cassonetto"){const V=Number(r?.width_mm??r?.larghezza_mm??r?.larghezza),E=Number(r?.height_mm??r?.altezza_mm??r?.altezza),ae=Number.isFinite(V)&&Number.isFinite(E)&&V>0&&E>0;let Y=0;if(ae){const J=V/E,pe=158/158;if(J>=pe){const ue=158/J;Y=Math.max(0,(158-ue)/2)}}const ce=4,de=170/2,me=6+158/2,ge=6+(158-Y)+ce+6,he=Number.isFinite(V)?String(Math.round(V)):"—",fe=Number.isFinite(E)?String(Math.round(E)):"—";return e.jsxs(e.Fragment,{children:[e.jsx(i,{style:{position:"absolute",top:ge,left:de-48,width:96,textAlign:"center",fontSize:12,color:"#333"},children:he}),e.jsx(l,{style:{position:"absolute",left:-10,top:me,transform:"rotate(-90deg)"},children:e.jsx(i,{style:{fontSize:12,color:"#333"},children:fe})})]})}return null})()]}),e.jsxs(l,{style:t.itemContent,children:[e.jsxs(l,{style:t.itemHeader,children:[e.jsxs(l,{style:{flexDirection:"row",alignItems:"center",flexShrink:1},children:[e.jsx(i,{style:t.itemKind,children:re}),(()=>{const m=ne;return m?e.jsxs(i,{style:t.itemDims,children:["· ",m]}):null})()]}),e.jsx(i,{style:t.itemQty,children:ie})]}),X?e.jsx(i,{style:t.itemRef,children:X}):null,b.length>0&&e.jsx(l,{style:t.hr}),e.jsx(l,{style:t.detailGrid,children:b.map(([m,L],v)=>e.jsxs(l,{style:t.detailRow,children:[e.jsx(i,{style:t.detailLabel,children:m}),e.jsx(i,{style:t.detailValue,children:L})]},`kv-${v}`))})]})]},`card-${r?.id||r?.kind||"k"}-${s}`)}):e.jsx(l,{style:[t.itemCard,{justifyContent:"center"}],children:e.jsx(i,{style:{color:"#666"},children:"— Nessuna voce inserita —"})})]})]}),e.jsxs(K,{size:"A4",style:t.page,children:[n&&n.trim()?e.jsx(F,{src:n,style:t.logo}):e.jsx(F,{src:q,style:t.logo}),e.jsx(i,{style:[t.h2,{marginTop:6}],children:"Condizioni di Fornitura"}),e.jsx(l,{style:{height:1,backgroundColor:"#eee",marginVertical:10}}),e.jsx(i,{children:_(M)}),e.jsxs(l,{style:{marginTop:22},children:[e.jsx(i,{children:"Letto e confermato in ______________________ in data _____________________"}),e.jsx(l,{style:{height:28}}),e.jsxs(l,{style:t.row,children:[e.jsxs(l,{style:[t.col],children:[e.jsx(i,{children:"Cliente"}),e.jsx(l,{style:{height:40,borderBottomWidth:1,borderStyle:"solid",borderColor:"#e6e6e6",marginRight:18}})]}),e.jsxs(l,{style:[t.col],children:[e.jsx(i,{children:"Fornitore"}),e.jsx(l,{style:{height:40,borderBottomWidth:1,borderStyle:"solid",borderColor:"#e6e6e6",marginRight:18}})]})]})]})]})]})}export{Be as QuotePDF,Be as default};
