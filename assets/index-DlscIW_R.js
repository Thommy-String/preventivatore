const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QuotePDF-C_tkfNto.js","assets/react-pdf.browser-CjrA6A-n.js"])))=>i.map(i=>d[i]);
function y1(t,r){for(var a=0;a<r.length;a++){const i=r[a];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(i,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var fD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Io(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function x1(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var r=t.default;if(typeof r=="function"){var a=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),a}var xf={exports:{}},vo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function b1(){if(K0)return vo;K0=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:c}}return vo.Fragment=r,vo.jsx=a,vo.jsxs=a,vo}var W0;function w1(){return W0||(W0=1,xf.exports=b1()),xf.exports}var f=w1(),bf={exports:{}},ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function _1(){if(X0)return ht;X0=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function R(z,W,pe){this.props=z,this.context=W,this.refs=S,this.updater=pe||w}R.prototype.isReactComponent={},R.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},R.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function A(){}A.prototype=R.prototype;function M(z,W,pe){this.props=z,this.context=W,this.refs=S,this.updater=pe||w}var L=M.prototype=new A;L.constructor=M,N(L,R.prototype),L.isPureReactComponent=!0;var F=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function Y(z,W,pe,ae,_e,Re){return pe=Re.ref,{$$typeof:t,type:z,key:W,ref:pe!==void 0?pe:null,props:Re}}function re(z,W){return Y(z.type,W,void 0,void 0,void 0,z.props)}function me(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function xe(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return W[pe]})}var ee=/\/+/g;function G(z,W){return typeof z=="object"&&z!==null&&z.key!=null?xe(""+z.key):W.toString(36)}function H(){}function de(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function le(z,W,pe,ae,_e){var Re=typeof z;(Re==="undefined"||Re==="boolean")&&(z=null);var Ee=!1;if(z===null)Ee=!0;else switch(Re){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(z.$$typeof){case t:case r:Ee=!0;break;case v:return Ee=z._init,le(Ee(z._payload),W,pe,ae,_e)}}if(Ee)return _e=_e(z),Ee=ae===""?"."+G(z,0):ae,F(_e)?(pe="",Ee!=null&&(pe=Ee.replace(ee,"$&/")+"/"),le(_e,W,pe,"",function(fe){return fe})):_e!=null&&(me(_e)&&(_e=re(_e,pe+(_e.key==null||z&&z.key===_e.key?"":(""+_e.key).replace(ee,"$&/")+"/")+Ee)),W.push(_e)),1;Ee=0;var ke=ae===""?".":ae+":";if(F(z))for(var Me=0;Me<z.length;Me++)ae=z[Me],Re=ke+G(ae,Me),Ee+=le(ae,W,pe,Re,_e);else if(Me=x(z),typeof Me=="function")for(z=Me.call(z),Me=0;!(ae=z.next()).done;)ae=ae.value,Re=ke+G(ae,Me++),Ee+=le(ae,W,pe,Re,_e);else if(Re==="object"){if(typeof z.then=="function")return le(de(z),W,pe,ae,_e);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function P(z,W,pe){if(z==null)return z;var ae=[],_e=0;return le(z,ae,"","",function(Re){return W.call(pe,Re,_e++)}),ae}function Z(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var se=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function oe(){}return ht.Children={map:P,forEach:function(z,W,pe){P(z,function(){W.apply(this,arguments)},pe)},count:function(z){var W=0;return P(z,function(){W++}),W},toArray:function(z){return P(z,function(W){return W})||[]},only:function(z){if(!me(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ht.Component=R,ht.Fragment=a,ht.Profiler=o,ht.PureComponent=M,ht.StrictMode=i,ht.Suspense=p,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ht.__COMPILER_RUNTIME={__proto__:null,c:function(z){return U.H.useMemoCache(z)}},ht.cache=function(z){return function(){return z.apply(null,arguments)}},ht.cloneElement=function(z,W,pe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ae=N({},z.props),_e=z.key,Re=void 0;if(W!=null)for(Ee in W.ref!==void 0&&(Re=void 0),W.key!==void 0&&(_e=""+W.key),W)!k.call(W,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&W.ref===void 0||(ae[Ee]=W[Ee]);var Ee=arguments.length-2;if(Ee===1)ae.children=pe;else if(1<Ee){for(var ke=Array(Ee),Me=0;Me<Ee;Me++)ke[Me]=arguments[Me+2];ae.children=ke}return Y(z.type,_e,void 0,void 0,Re,ae)},ht.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:c,_context:z},z},ht.createElement=function(z,W,pe){var ae,_e={},Re=null;if(W!=null)for(ae in W.key!==void 0&&(Re=""+W.key),W)k.call(W,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(_e[ae]=W[ae]);var Ee=arguments.length-2;if(Ee===1)_e.children=pe;else if(1<Ee){for(var ke=Array(Ee),Me=0;Me<Ee;Me++)ke[Me]=arguments[Me+2];_e.children=ke}if(z&&z.defaultProps)for(ae in Ee=z.defaultProps,Ee)_e[ae]===void 0&&(_e[ae]=Ee[ae]);return Y(z,Re,void 0,void 0,null,_e)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(z){return{$$typeof:d,render:z}},ht.isValidElement=me,ht.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:Z}},ht.memo=function(z,W){return{$$typeof:m,type:z,compare:W===void 0?null:W}},ht.startTransition=function(z){var W=U.T,pe={};U.T=pe;try{var ae=z(),_e=U.S;_e!==null&&_e(pe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(oe,se)}catch(Re){se(Re)}finally{U.T=W}},ht.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ht.use=function(z){return U.H.use(z)},ht.useActionState=function(z,W,pe){return U.H.useActionState(z,W,pe)},ht.useCallback=function(z,W){return U.H.useCallback(z,W)},ht.useContext=function(z){return U.H.useContext(z)},ht.useDebugValue=function(){},ht.useDeferredValue=function(z,W){return U.H.useDeferredValue(z,W)},ht.useEffect=function(z,W,pe){var ae=U.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(z,W)},ht.useId=function(){return U.H.useId()},ht.useImperativeHandle=function(z,W,pe){return U.H.useImperativeHandle(z,W,pe)},ht.useInsertionEffect=function(z,W){return U.H.useInsertionEffect(z,W)},ht.useLayoutEffect=function(z,W){return U.H.useLayoutEffect(z,W)},ht.useMemo=function(z,W){return U.H.useMemo(z,W)},ht.useOptimistic=function(z,W){return U.H.useOptimistic(z,W)},ht.useReducer=function(z,W,pe){return U.H.useReducer(z,W,pe)},ht.useRef=function(z){return U.H.useRef(z)},ht.useState=function(z){return U.H.useState(z)},ht.useSyncExternalStore=function(z,W,pe){return U.H.useSyncExternalStore(z,W,pe)},ht.useTransition=function(){return U.H.useTransition()},ht.version="19.1.1",ht}var Q0;function kh(){return Q0||(Q0=1,bf.exports=_1()),bf.exports}var E=kh();const Te=Io(E),Py=y1({__proto__:null,default:Te},[E]);var wf={exports:{}},yo={},_f={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function S1(){return Z0||(Z0=1,(function(t){function r(P,Z){var se=P.length;P.push(Z);e:for(;0<se;){var oe=se-1>>>1,z=P[oe];if(0<o(z,Z))P[oe]=Z,P[se]=z,se=oe;else break e}}function a(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var Z=P[0],se=P.pop();if(se!==Z){P[0]=se;e:for(var oe=0,z=P.length,W=z>>>1;oe<W;){var pe=2*(oe+1)-1,ae=P[pe],_e=pe+1,Re=P[_e];if(0>o(ae,se))_e<z&&0>o(Re,ae)?(P[oe]=Re,P[_e]=se,oe=_e):(P[oe]=ae,P[pe]=se,oe=pe);else if(_e<z&&0>o(Re,se))P[oe]=Re,P[_e]=se,oe=_e;else break e}}return Z}function o(P,Z){var se=P.sortIndex-Z.sortIndex;return se!==0?se:P.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,y=null,x=3,w=!1,N=!1,S=!1,R=!1,A=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function F(P){for(var Z=a(m);Z!==null;){if(Z.callback===null)i(m);else if(Z.startTime<=P)i(m),Z.sortIndex=Z.expirationTime,r(p,Z);else break;Z=a(m)}}function U(P){if(S=!1,F(P),!N)if(a(p)!==null)N=!0,k||(k=!0,G());else{var Z=a(m);Z!==null&&le(U,Z.startTime-P)}}var k=!1,Y=-1,re=5,me=-1;function xe(){return R?!0:!(t.unstable_now()-me<re)}function ee(){if(R=!1,k){var P=t.unstable_now();me=P;var Z=!0;try{e:{N=!1,S&&(S=!1,M(Y),Y=-1),w=!0;var se=x;try{t:{for(F(P),y=a(p);y!==null&&!(y.expirationTime>P&&xe());){var oe=y.callback;if(typeof oe=="function"){y.callback=null,x=y.priorityLevel;var z=oe(y.expirationTime<=P);if(P=t.unstable_now(),typeof z=="function"){y.callback=z,F(P),Z=!0;break t}y===a(p)&&i(p),F(P)}else i(p);y=a(p)}if(y!==null)Z=!0;else{var W=a(m);W!==null&&le(U,W.startTime-P),Z=!1}}break e}finally{y=null,x=se,w=!1}Z=void 0}}finally{Z?G():k=!1}}}var G;if(typeof L=="function")G=function(){L(ee)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,de=H.port2;H.port1.onmessage=ee,G=function(){de.postMessage(null)}}else G=function(){A(ee,0)};function le(P,Z){Y=A(function(){P(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(P){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var se=x;x=Z;try{return P()}finally{x=se}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(P,Z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var se=x;x=P;try{return Z()}finally{x=se}},t.unstable_scheduleCallback=function(P,Z,se){var oe=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?oe+se:oe):se=oe,P){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=se+z,P={id:v++,callback:Z,priorityLevel:P,startTime:se,expirationTime:z,sortIndex:-1},se>oe?(P.sortIndex=se,r(m,P),a(p)===null&&P===a(m)&&(S?(M(Y),Y=-1):S=!0,le(U,se-oe))):(P.sortIndex=z,r(p,P),N||w||(N=!0,k||(k=!0,G()))),P},t.unstable_shouldYield=xe,t.unstable_wrapCallback=function(P){var Z=x;return function(){var se=x;x=Z;try{return P.apply(this,arguments)}finally{x=se}}}})(Sf)),Sf}var J0;function E1(){return J0||(J0=1,_f.exports=S1()),_f.exports}var Ef={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function A1(){if(ev)return Rn;ev=1;var t=kh();function r(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(r(299));return c(p,m,null,v)},Rn.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},Rn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},Rn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Rn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=d(v,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:w}):v==="script"&&i.d.X(p,{crossOrigin:y,integrity:x,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},Rn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=d(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},Rn.requestFormReset=function(p){i.d.r(p)},Rn.unstable_batchedUpdates=function(p,m){return p(m)},Rn.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},Rn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Rn.version="19.1.1",Rn}var tv;function $y(){if(tv)return Ef.exports;tv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Ef.exports=A1(),Ef.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function j1(){if(nv)return yo;nv=1;var t=E1(),r=kh(),a=$y();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function u(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(c(e)!==e)throw Error(i(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(i(188));return n!==e?null:e}for(var s=e,l=n;;){var h=s.return;if(h===null)break;var g=h.alternate;if(g===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===s)return d(h),e;if(g===l)return d(h),n;g=g.sibling}throw Error(i(188))}if(s.return!==l.return)s=h,l=g;else{for(var j=!1,O=h.child;O;){if(O===s){j=!0,s=h,l=g;break}if(O===l){j=!0,l=h,s=g;break}O=O.sibling}if(!j){for(O=g.child;O;){if(O===s){j=!0,s=g,l=h;break}if(O===l){j=!0,l=g,s=h;break}O=O.sibling}if(!j)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:n}function m(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=m(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=ee&&e[ee]||e["@@iterator"],typeof e=="function"?e:null)}var H=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===H?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case R:return"Profiler";case S:return"StrictMode";case U:return"Suspense";case k:return"SuspenseList";case me:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case L:return(e.displayName||"Context")+".Provider";case M:return(e._context.displayName||"Context")+".Consumer";case F:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return n=e.displayName||null,n!==null?n:de(e.type)||"Memo";case re:n=e._payload,e=e._init;try{return de(e(n))}catch{}}return null}var le=Array.isArray,P=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},oe=[],z=-1;function W(e){return{current:e}}function pe(e){0>z||(e.current=oe[z],oe[z]=null,z--)}function ae(e,n){z++,oe[z]=e.current,e.current=n}var _e=W(null),Re=W(null),Ee=W(null),ke=W(null);function Me(e,n){switch(ae(Ee,n),ae(Re,e),ae(_e,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?_0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=_0(n),e=S0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}pe(_e),ae(_e,e)}function fe(){pe(_e),pe(Re),pe(Ee)}function ce(e){e.memoizedState!==null&&ae(ke,e);var n=_e.current,s=S0(n,e.type);n!==s&&(ae(Re,e),ae(_e,s))}function we(e){Re.current===e&&(pe(_e),pe(Re)),ke.current===e&&(pe(ke),fo._currentValue=se)}var je=Object.prototype.hasOwnProperty,De=t.unstable_scheduleCallback,Oe=t.unstable_cancelCallback,it=t.unstable_shouldYield,We=t.unstable_requestPaint,qe=t.unstable_now,Ge=t.unstable_getCurrentPriorityLevel,Le=t.unstable_ImmediatePriority,lt=t.unstable_UserBlockingPriority,ut=t.unstable_NormalPriority,Xe=t.unstable_LowPriority,Ne=t.unstable_IdlePriority,Ze=t.log,Be=t.unstable_setDisableYieldValue,Ue=null,T=null;function b(e){if(typeof Ze=="function"&&Be(e),T&&typeof T.setStrictMode=="function")try{T.setStrictMode(Ue,e)}catch{}}var _=Math.clz32?Math.clz32:J,D=Math.log,q=Math.LN2;function J(e){return e>>>=0,e===0?32:31-(D(e)/q|0)|0}var he=256,Ke=4194304;function ot(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function et(e,n,s){var l=e.pendingLanes;if(l===0)return 0;var h=0,g=e.suspendedLanes,j=e.pingedLanes;e=e.warmLanes;var O=l&134217727;return O!==0?(l=O&~g,l!==0?h=ot(l):(j&=O,j!==0?h=ot(j):s||(s=O&~e,s!==0&&(h=ot(s))))):(O=l&~g,O!==0?h=ot(O):j!==0?h=ot(j):s||(s=l&~e,s!==0&&(h=ot(s)))),h===0?0:n!==0&&n!==h&&(n&g)===0&&(g=h&-h,s=n&-n,g>=s||g===32&&(s&4194048)!==0)?n:h}function dt(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function st(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function un(){var e=he;return he<<=1,(he&4194048)===0&&(he=256),e}function Tn(){var e=Ke;return Ke<<=1,(Ke&62914560)===0&&(Ke=4194304),e}function Mt(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function At(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tn(e,n,s,l,h,g){var j=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var O=e.entanglements,I=e.expirationTimes,ne=e.hiddenUpdates;for(s=j&~s;0<s;){var ve=31-_(s),Se=1<<ve;O[ve]=0,I[ve]=-1;var ie=ne[ve];if(ie!==null)for(ne[ve]=null,ve=0;ve<ie.length;ve++){var ue=ie[ve];ue!==null&&(ue.lane&=-536870913)}s&=~Se}l!==0&&Ie(e,l,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(j&~n))}function Ie(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-_(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function mt(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-_(s),h=1<<l;h&n|e[l]&n&&(e[l]|=n),s&=~h}}function Nt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Cn(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:F0(e.type))}function $(e,n){var s=Z.p;try{return Z.p=e,n()}finally{Z.p=s}}var C=Math.random().toString(36).slice(2),B="__reactFiber$"+C,K="__reactProps$"+C,X="__reactContainer$"+C,ye="__reactEvents$"+C,ge="__reactListeners$"+C,Ae="__reactHandles$"+C,Ce="__reactResources$"+C,Pe="__reactMarker$"+C;function $e(e){delete e[B],delete e[K],delete e[ye],delete e[ge],delete e[Ae]}function ze(e){var n=e[B];if(n)return n;for(var s=e.parentNode;s;){if(n=s[X]||s[B]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=R0(e);e!==null;){if(s=e[B])return s;e=R0(e)}return n}e=s,s=e.parentNode}return null}function tt(e){if(e=e[B]||e[X]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function St(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function Dt(e){var n=e[Ce];return n||(n=e[Ce]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function gt(e){e[Pe]=!0}var rt=new Set,xt={};function Ft(e,n){He(e,n),He(e+"Capture",n)}function He(e,n){for(xt[e]=n,e=0;e<n.length;e++)rt.add(n[e])}var ft=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ve={},Et={};function kt(e){return je.call(Et,e)?!0:je.call(Ve,e)?!1:ft.test(e)?Et[e]=!0:(Ve[e]=!0,!1)}function Ot(e,n,s){if(kt(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function pn(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function Kt(e,n,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+l)}}var at,Vt;function Xt(e){if(at===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);at=n&&n[1]||"",Vt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+e+Vt}var gn=!1;function Yt(e,n){if(!e||gn)return"";gn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ue){var ie=ue}Reflect.construct(e,[],Se)}else{try{Se.call()}catch(ue){ie=ue}e.call(Se.prototype)}}else{try{throw Error()}catch(ue){ie=ue}(Se=e())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ue){if(ue&&ie&&typeof ue.stack=="string")return[ue.stack,ie.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),j=g[0],O=g[1];if(j&&O){var I=j.split(`
`),ne=O.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===ne.length)for(l=I.length-1,h=ne.length-1;1<=l&&0<=h&&I[l]!==ne[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==ne[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==ne[h]){var ve=`
`+I[l].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=l&&0<=h);break}}}finally{gn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Xt(s):""}function fr(e){switch(e.tag){case 26:case 27:case 5:return Xt(e.type);case 16:return Xt("Lazy");case 13:return Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return Yt(e.type,!1);case 11:return Yt(e.type.render,!1);case 1:return Yt(e.type,!0);case 31:return Xt("Activity");default:return""}}function ra(e){try{var n="";do n+=fr(e),e=e.return;while(e);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ba(e){var n=yi(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,g=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(j){l=""+j,g.call(this,j)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(j){l=""+j},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Pa(e){e._valueTracker||(e._valueTracker=Ba(e))}function Zo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=yi(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function Jo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mw=/[\n"\\]/g;function er(e){return e.replace(mw,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function pu(e,n,s,l,h,g,j,O){e.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.type=j:e.removeAttribute("type"),n!=null?j==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+sn(n)):e.value!==""+sn(n)&&(e.value=""+sn(n)):j!=="submit"&&j!=="reset"||e.removeAttribute("value"),n!=null?gu(e,j,sn(n)):s!=null?gu(e,j,sn(s)):l!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.name=""+sn(O):e.removeAttribute("name")}function xm(e,n,s,l,h,g,j,O){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||n!=null))return;s=s!=null?""+sn(s):"",n=n!=null?""+sn(n):s,O||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=O?e.checked:!!l,e.defaultChecked=!!l,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(e.name=j)}function gu(e,n,s){n==="number"&&Jo(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function xi(e,n,s,l){if(e=e.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=n.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&l&&(e[s].defaultSelected=!0)}else{for(s=""+sn(s),n=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function bm(e,n,s){if(n!=null&&(n=""+sn(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+sn(s):""}function wm(e,n,s,l){if(n==null){if(l!=null){if(s!=null)throw Error(i(92));if(le(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),n=s}s=sn(n),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function bi(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var pw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _m(e,n,s){var l=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,s):typeof s!="number"||s===0||pw.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Sm(e,n,s){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&s[h]!==l&&_m(e,h,l)}else for(var g in n)n.hasOwnProperty(g)&&_m(e,g,n[g])}function vu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(e){return vw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var yu=null;function xu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wi=null,_i=null;function Em(e){var n=tt(e);if(n&&(e=n.stateNode)){var s=e[K]||null;e:switch(e=n.stateNode,n.type){case"input":if(pu(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+er(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var h=l[K]||null;if(!h)throw Error(i(90));pu(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<s.length;n++)l=s[n],l.form===e.form&&Zo(l)}break e;case"textarea":bm(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&xi(e,!!s.multiple,n,!1)}}}var bu=!1;function Am(e,n,s){if(bu)return e(n,s);bu=!0;try{var l=e(n);return l}finally{if(bu=!1,(wi!==null||_i!==null)&&(Pl(),wi&&(n=wi,e=_i,_i=wi=null,Em(n),e)))for(n=0;n<e.length;n++)Em(e[n])}}function Es(e,n){var s=e.stateNode;if(s===null)return null;var l=s[K]||null;if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,n,typeof s));return s}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=!1;if(zr)try{var As={};Object.defineProperty(As,"passive",{get:function(){wu=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{wu=!1}var aa=null,_u=null,tl=null;function jm(){if(tl)return tl;var e,n=_u,s=n.length,l,h="value"in aa?aa.value:aa.textContent,g=h.length;for(e=0;e<s&&n[e]===h[e];e++);var j=s-e;for(l=1;l<=j&&n[s-l]===h[g-l];l++);return tl=h.slice(e,1<l?1-l:void 0)}function nl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function rl(){return!0}function Rm(){return!1}function kn(e){function n(s,l,h,g,j){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var O in e)e.hasOwnProperty(O)&&(s=e[O],this[O]=s?s(g):g[O]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?rl:Rm,this.isPropagationStopped=Rm,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),n}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=kn($a),js=v({},$a,{view:0,detail:0}),yw=kn(js),Su,Eu,Rs,il=v({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(Su=e.screenX-Rs.screenX,Eu=e.screenY-Rs.screenY):Eu=Su=0,Rs=e),Su)},movementY:function(e){return"movementY"in e?e.movementY:Eu}}),Nm=kn(il),xw=v({},il,{dataTransfer:0}),bw=kn(xw),ww=v({},js,{relatedTarget:0}),Au=kn(ww),_w=v({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),Sw=kn(_w),Ew=v({},$a,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Aw=kn(Ew),jw=v({},$a,{data:0}),Tm=kn(jw),Rw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cw(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Tw[e])?!!n[e]:!1}function ju(){return Cw}var Mw=v({},js,{key:function(e){if(e.key){var n=Rw[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=nl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(e){return e.type==="keypress"?nl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ow=kn(Mw),Dw=v({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cm=kn(Dw),kw=v({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),Lw=kn(kw),Uw=v({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),zw=kn(Uw),Bw=v({},il,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pw=kn(Bw),$w=v({},$a,{newState:0,oldState:0}),Iw=kn($w),Fw=[9,13,27,32],Ru=zr&&"CompositionEvent"in window,Ns=null;zr&&"documentMode"in document&&(Ns=document.documentMode);var Hw=zr&&"TextEvent"in window&&!Ns,Mm=zr&&(!Ru||Ns&&8<Ns&&11>=Ns),Om=" ",Dm=!1;function km(e,n){switch(e){case"keyup":return Fw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Si=!1;function qw(e,n){switch(e){case"compositionend":return Lm(n);case"keypress":return n.which!==32?null:(Dm=!0,Om);case"textInput":return e=n.data,e===Om&&Dm?null:e;default:return null}}function Gw(e,n){if(Si)return e==="compositionend"||!Ru&&km(e,n)?(e=jm(),tl=_u=aa=null,Si=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Mm&&n.locale!=="ko"?null:n.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Um(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Vw[e.type]:n==="textarea"}function zm(e,n,s,l){wi?_i?_i.push(l):_i=[l]:wi=l,n=Gl(n,"onChange"),0<n.length&&(s=new al("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var Ts=null,Cs=null;function Yw(e){v0(e,0)}function sl(e){var n=St(e);if(Zo(n))return e}function Bm(e,n){if(e==="change")return n}var Pm=!1;if(zr){var Nu;if(zr){var Tu="oninput"in document;if(!Tu){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),Tu=typeof $m.oninput=="function"}Nu=Tu}else Nu=!1;Pm=Nu&&(!document.documentMode||9<document.documentMode)}function Im(){Ts&&(Ts.detachEvent("onpropertychange",Fm),Cs=Ts=null)}function Fm(e){if(e.propertyName==="value"&&sl(Cs)){var n=[];zm(n,Cs,e,xu(e)),Am(Yw,n)}}function Kw(e,n,s){e==="focusin"?(Im(),Ts=n,Cs=s,Ts.attachEvent("onpropertychange",Fm)):e==="focusout"&&Im()}function Ww(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sl(Cs)}function Xw(e,n){if(e==="click")return sl(n)}function Qw(e,n){if(e==="input"||e==="change")return sl(n)}function Zw(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var qn=typeof Object.is=="function"?Object.is:Zw;function Ms(e,n){if(qn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!je.call(n,h)||!qn(e[h],n[h]))return!1}return!0}function Hm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qm(e,n){var s=Hm(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Hm(s)}}function Gm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Gm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Vm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Jo(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Jo(e.document)}return n}function Cu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Jw=zr&&"documentMode"in document&&11>=document.documentMode,Ei=null,Mu=null,Os=null,Ou=!1;function Ym(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ou||Ei==null||Ei!==Jo(l)||(l=Ei,"selectionStart"in l&&Cu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Os&&Ms(Os,l)||(Os=l,l=Gl(Mu,"onSelect"),0<l.length&&(n=new al("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=Ei)))}function Ia(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Ai={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},Du={},Km={};zr&&(Km=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function Fa(e){if(Du[e])return Du[e];if(!Ai[e])return e;var n=Ai[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Km)return Du[e]=n[s];return e}var Wm=Fa("animationend"),Xm=Fa("animationiteration"),Qm=Fa("animationstart"),e_=Fa("transitionrun"),t_=Fa("transitionstart"),n_=Fa("transitioncancel"),Zm=Fa("transitionend"),Jm=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function hr(e,n){Jm.set(e,n),Ft(n,[e])}var ep=new WeakMap;function tr(e,n){if(typeof e=="object"&&e!==null){var s=ep.get(e);return s!==void 0?s:(n={value:e,source:n,stack:ra(n)},ep.set(e,n),n)}return{value:e,source:n,stack:ra(n)}}var nr=[],ji=0,Lu=0;function ol(){for(var e=ji,n=Lu=ji=0;n<e;){var s=nr[n];nr[n++]=null;var l=nr[n];nr[n++]=null;var h=nr[n];nr[n++]=null;var g=nr[n];if(nr[n++]=null,l!==null&&h!==null){var j=l.pending;j===null?h.next=h:(h.next=j.next,j.next=h),l.pending=h}g!==0&&tp(s,h,g)}}function ll(e,n,s,l){nr[ji++]=e,nr[ji++]=n,nr[ji++]=s,nr[ji++]=l,Lu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Uu(e,n,s,l){return ll(e,n,s,l),cl(e)}function Ri(e,n){return ll(e,null,null,n),cl(e)}function tp(e,n,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var h=!1,g=e.return;g!==null;)g.childLanes|=s,l=g.alternate,l!==null&&(l.childLanes|=s),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&n!==null&&(h=31-_(s),e=g.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=s|536870912),g):null}function cl(e){if(50<ro)throw ro=0,Fd=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ni={};function r_(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(e,n,s,l){return new r_(e,n,s,l)}function zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Br(e,n){var s=e.alternate;return s===null?(s=Gn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function np(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ul(e,n,s,l,h,g){var j=0;if(l=e,typeof e=="function")zu(e)&&(j=1);else if(typeof e=="string")j=i1(e,s,_e.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case me:return e=Gn(31,s,n,h),e.elementType=me,e.lanes=g,e;case N:return Ha(s.children,h,g,n);case S:j=8,h|=24;break;case R:return e=Gn(12,s,n,h|2),e.elementType=R,e.lanes=g,e;case U:return e=Gn(13,s,n,h),e.elementType=U,e.lanes=g,e;case k:return e=Gn(19,s,n,h),e.elementType=k,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:case L:j=10;break e;case M:j=9;break e;case F:j=11;break e;case Y:j=14;break e;case re:j=16,l=null;break e}j=29,s=Error(i(130,e===null?"null":typeof e,"")),l=null}return n=Gn(j,s,n,h),n.elementType=e,n.type=l,n.lanes=g,n}function Ha(e,n,s,l){return e=Gn(7,e,l,n),e.lanes=s,e}function Bu(e,n,s){return e=Gn(6,e,null,n),e.lanes=s,e}function Pu(e,n,s){return n=Gn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ti=[],Ci=0,dl=null,fl=0,rr=[],ar=0,qa=null,Pr=1,$r="";function Ga(e,n){Ti[Ci++]=fl,Ti[Ci++]=dl,dl=e,fl=n}function rp(e,n,s){rr[ar++]=Pr,rr[ar++]=$r,rr[ar++]=qa,qa=e;var l=Pr;e=$r;var h=32-_(l)-1;l&=~(1<<h),s+=1;var g=32-_(n)+h;if(30<g){var j=h-h%5;g=(l&(1<<j)-1).toString(32),l>>=j,h-=j,Pr=1<<32-_(n)+h|s<<h|l,$r=g+e}else Pr=1<<g|s<<h|l,$r=e}function $u(e){e.return!==null&&(Ga(e,1),rp(e,1,0))}function Iu(e){for(;e===dl;)dl=Ti[--Ci],Ti[Ci]=null,fl=Ti[--Ci],Ti[Ci]=null;for(;e===qa;)qa=rr[--ar],rr[ar]=null,$r=rr[--ar],rr[ar]=null,Pr=rr[--ar],rr[ar]=null}var Mn=null,Zt=null,Ct=!1,Va=null,wr=!1,Fu=Error(i(519));function Ya(e){var n=Error(i(418,""));throw Ls(tr(n,e)),Fu}function ap(e){var n=e.stateNode,s=e.type,l=e.memoizedProps;switch(n[B]=e,n[K]=l,s){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(s=0;s<io.length;s++)wt(io[s],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":wt("invalid",n),xm(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Pa(n);break;case"select":wt("invalid",n);break;case"textarea":wt("invalid",n),wm(n,l.value,l.defaultValue,l.children),Pa(n)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||l.suppressHydrationWarning===!0||w0(n.textContent,s)?(l.popover!=null&&(wt("beforetoggle",n),wt("toggle",n)),l.onScroll!=null&&wt("scroll",n),l.onScrollEnd!=null&&wt("scrollend",n),l.onClick!=null&&(n.onclick=Vl),n=!0):n=!1,n||Ya(e)}function ip(e){for(Mn=e.return;Mn;)switch(Mn.tag){case 5:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:Mn=Mn.return}}function Ds(e){if(e!==Mn)return!1;if(!Ct)return ip(e),Ct=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||af(e.type,e.memoizedProps)),s=!s),s&&Zt&&Ya(e),ip(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(n===0){Zt=pr(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;e=e.nextSibling}Zt=null}}else n===27?(n=Zt,ba(e.type)?(e=cf,cf=null,Zt=e):Zt=n):Zt=Mn?pr(e.stateNode.nextSibling):null;return!0}function ks(){Zt=Mn=null,Ct=!1}function sp(){var e=Va;return e!==null&&(zn===null?zn=e:zn.push.apply(zn,e),Va=null),e}function Ls(e){Va===null?Va=[e]:Va.push(e)}var Hu=W(null),Ka=null,Ir=null;function ia(e,n,s){ae(Hu,n._currentValue),n._currentValue=s}function Fr(e){e._currentValue=Hu.current,pe(Hu)}function qu(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function Gu(e,n,s,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var j=h.child;g=g.firstContext;e:for(;g!==null;){var O=g;g=h;for(var I=0;I<n.length;I++)if(O.context===n[I]){g.lanes|=s,O=g.alternate,O!==null&&(O.lanes|=s),qu(g.return,s,e),l||(j=null);break e}g=O.next}}else if(h.tag===18){if(j=h.return,j===null)throw Error(i(341));j.lanes|=s,g=j.alternate,g!==null&&(g.lanes|=s),qu(j,s,e),j=null}else j=h.child;if(j!==null)j.return=h;else for(j=h;j!==null;){if(j===e){j=null;break}if(h=j.sibling,h!==null){h.return=j.return,j=h;break}j=j.return}h=j}}function Us(e,n,s,l){e=null;for(var h=n,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var j=h.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var O=h.type;qn(h.pendingProps.value,j.value)||(e!==null?e.push(O):e=[O])}}else if(h===ke.current){if(j=h.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(fo):e=[fo])}h=h.return}e!==null&&Gu(n,e,s,l),n.flags|=262144}function hl(e){for(e=e.firstContext;e!==null;){if(!qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wa(e){Ka=e,Ir=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function jn(e){return op(Ka,e)}function ml(e,n){return Ka===null&&Wa(e),op(e,n)}function op(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Ir===null){if(e===null)throw Error(i(308));Ir=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ir=Ir.next=n;return s}var a_=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},i_=t.unstable_scheduleCallback,s_=t.unstable_NormalPriority,dn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vu(){return{controller:new a_,data:new Map,refCount:0}}function zs(e){e.refCount--,e.refCount===0&&i_(s_,function(){e.controller.abort()})}var Bs=null,Yu=0,Mi=0,Oi=null;function o_(e,n){if(Bs===null){var s=Bs=[];Yu=0,Mi=Wd(),Oi={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Yu++,n.then(lp,lp),n}function lp(){if(--Yu===0&&Bs!==null){Oi!==null&&(Oi.status="fulfilled");var e=Bs;Bs=null,Mi=0,Oi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function l_(e,n){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<s.length;h++)(0,s[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var cp=P.S;P.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&o_(e,n),cp!==null&&cp(e,n)};var Xa=W(null);function Ku(){var e=Xa.current;return e!==null?e:Ht.pooledCache}function pl(e,n){n===null?ae(Xa,Xa.current):ae(Xa,n.pool)}function up(){var e=Ku();return e===null?null:{parent:dn._currentValue,pool:e}}var Ps=Error(i(460)),dp=Error(i(474)),gl=Error(i(542)),Wu={then:function(){}};function fp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vl(){}function hp(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(vl,vl),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,pp(e),e;default:if(typeof n.status=="string")n.then(vl,vl);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,pp(e),e}throw $s=n,Ps}}var $s=null;function mp(){if($s===null)throw Error(i(459));var e=$s;return $s=null,e}function pp(e){if(e===Ps||e===gl)throw Error(i(483))}var sa=!1;function Xu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function la(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Lt&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=cl(e),tp(e,null,s),n}return ll(e,l,n,s),cl(e)}function Is(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,mt(e,s)}}function Zu(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var j={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?h=g=j:g=g.next=j,s=s.next}while(s!==null);g===null?h=g=n:g=g.next=n}else h=g=n;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Ju=!1;function Fs(){if(Ju){var e=Oi;if(e!==null)throw e}}function Hs(e,n,s,l){Ju=!1;var h=e.updateQueue;sa=!1;var g=h.firstBaseUpdate,j=h.lastBaseUpdate,O=h.shared.pending;if(O!==null){h.shared.pending=null;var I=O,ne=I.next;I.next=null,j===null?g=ne:j.next=ne,j=I;var ve=e.alternate;ve!==null&&(ve=ve.updateQueue,O=ve.lastBaseUpdate,O!==j&&(O===null?ve.firstBaseUpdate=ne:O.next=ne,ve.lastBaseUpdate=I))}if(g!==null){var Se=h.baseState;j=0,ve=ne=I=null,O=g;do{var ie=O.lane&-536870913,ue=ie!==O.lane;if(ue?(jt&ie)===ie:(l&ie)===ie){ie!==0&&ie===Mi&&(Ju=!0),ve!==null&&(ve=ve.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var nt=e,Qe=O;ie=n;var Pt=s;switch(Qe.tag){case 1:if(nt=Qe.payload,typeof nt=="function"){Se=nt.call(Pt,Se,ie);break e}Se=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=Qe.payload,ie=typeof nt=="function"?nt.call(Pt,Se,ie):nt,ie==null)break e;Se=v({},Se,ie);break e;case 2:sa=!0}}ie=O.callback,ie!==null&&(e.flags|=64,ue&&(e.flags|=8192),ue=h.callbacks,ue===null?h.callbacks=[ie]:ue.push(ie))}else ue={lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ve===null?(ne=ve=ue,I=Se):ve=ve.next=ue,j|=ie;if(O=O.next,O===null){if(O=h.shared.pending,O===null)break;ue=O,O=ue.next,ue.next=null,h.lastBaseUpdate=ue,h.shared.pending=null}}while(!0);ve===null&&(I=Se),h.baseState=I,h.firstBaseUpdate=ne,h.lastBaseUpdate=ve,g===null&&(h.shared.lanes=0),ga|=j,e.lanes=j,e.memoizedState=Se}}function gp(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function vp(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)gp(s[e],n)}var Di=W(null),yl=W(0);function yp(e,n){e=Wr,ae(yl,e),ae(Di,n),Wr=e|n.baseLanes}function ed(){ae(yl,Wr),ae(Di,Di.current)}function td(){Wr=yl.current,pe(Di),pe(yl)}var ca=0,pt=null,zt=null,on=null,xl=!1,ki=!1,Qa=!1,bl=0,qs=0,Li=null,c_=0;function nn(){throw Error(i(321))}function nd(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!qn(e[s],n[s]))return!1;return!0}function rd(e,n,s,l,h,g){return ca=g,pt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=e===null||e.memoizedState===null?tg:ng,Qa=!1,g=s(l,h),Qa=!1,ki&&(g=bp(n,s,l,h)),xp(e),g}function xp(e){P.H=jl;var n=zt!==null&&zt.next!==null;if(ca=0,on=zt=pt=null,xl=!1,qs=0,Li=null,n)throw Error(i(300));e===null||vn||(e=e.dependencies,e!==null&&hl(e)&&(vn=!0))}function bp(e,n,s,l){pt=e;var h=0;do{if(ki&&(Li=null),qs=0,ki=!1,25<=h)throw Error(i(301));if(h+=1,on=zt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=g_,g=n(s,l)}while(ki);return g}function u_(){var e=P.H,n=e.useState()[0];return n=typeof n.then=="function"?Gs(n):n,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(pt.flags|=1024),n}function ad(){var e=bl!==0;return bl=0,e}function id(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function sd(e){if(xl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}xl=!1}ca=0,on=zt=pt=null,ki=!1,qs=bl=0,Li=null}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?pt.memoizedState=on=e:on=on.next=e,on}function ln(){if(zt===null){var e=pt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var n=on===null?pt.memoizedState:on.next;if(n!==null)on=n,zt=e;else{if(e===null)throw pt.alternate===null?Error(i(467)):Error(i(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},on===null?pt.memoizedState=on=e:on=on.next=e}return on}function od(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gs(e){var n=qs;return qs+=1,Li===null&&(Li=[]),e=hp(Li,e,n),n=pt,(on===null?n.memoizedState:on.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?tg:ng),e}function wl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Gs(e);if(e.$$typeof===L)return jn(e)}throw Error(i(438,String(e)))}function ld(e){var n=null,s=pt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var l=pt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=od(),pt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),l=0;l<e;l++)s[l]=xe;return n.index++,s}function Hr(e,n){return typeof n=="function"?n(e):n}function _l(e){var n=ln();return cd(n,zt,e)}function cd(e,n,s){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var h=e.baseQueue,g=l.pending;if(g!==null){if(h!==null){var j=h.next;h.next=g.next,g.next=j}n.baseQueue=h=g,l.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{n=h.next;var O=j=null,I=null,ne=n,ve=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(jt&Se)===Se:(ca&Se)===Se){var ie=ne.revertLane;if(ie===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===Mi&&(ve=!0);else if((ca&ie)===ie){ne=ne.next,ie===Mi&&(ve=!0);continue}else Se={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},I===null?(O=I=Se,j=g):I=I.next=Se,pt.lanes|=ie,ga|=ie;Se=ne.action,Qa&&s(g,Se),g=ne.hasEagerState?ne.eagerState:s(g,Se)}else ie={lane:Se,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},I===null?(O=I=ie,j=g):I=I.next=ie,pt.lanes|=Se,ga|=Se;ne=ne.next}while(ne!==null&&ne!==n);if(I===null?j=g:I.next=O,!qn(g,e.memoizedState)&&(vn=!0,ve&&(s=Oi,s!==null)))throw s;e.memoizedState=g,e.baseState=j,e.baseQueue=I,l.lastRenderedState=g}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ud(e){var n=ln(),s=n.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var l=s.dispatch,h=s.pending,g=n.memoizedState;if(h!==null){s.pending=null;var j=h=h.next;do g=e(g,j.action),j=j.next;while(j!==h);qn(g,n.memoizedState)||(vn=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,l]}function wp(e,n,s){var l=pt,h=ln(),g=Ct;if(g){if(s===void 0)throw Error(i(407));s=s()}else s=n();var j=!qn((zt||h).memoizedState,s);j&&(h.memoizedState=s,vn=!0),h=h.queue;var O=Ep.bind(null,l,h,e);if(Vs(2048,8,O,[e]),h.getSnapshot!==n||j||on!==null&&on.memoizedState.tag&1){if(l.flags|=2048,Ui(9,Sl(),Sp.bind(null,l,h,s,n),null),Ht===null)throw Error(i(349));g||(ca&124)!==0||_p(l,n,s)}return s}function _p(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=pt.updateQueue,n===null?(n=od(),pt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Sp(e,n,s,l){n.value=s,n.getSnapshot=l,Ap(n)&&jp(e)}function Ep(e,n,s){return s(function(){Ap(n)&&jp(e)})}function Ap(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!qn(e,s)}catch{return!0}}function jp(e){var n=Ri(e,2);n!==null&&Xn(n,e,2)}function dd(e){var n=Ln();if(typeof e=="function"){var s=e;if(e=s(),Qa){b(!0);try{s()}finally{b(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:e},n}function Rp(e,n,s,l){return e.baseState=s,cd(e,zt,typeof l=="function"?l:Hr)}function d_(e,n,s,l,h){if(Al(e))throw Error(i(485));if(e=n.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){g.listeners.push(j)}};P.T!==null?s(!0):g.isTransition=!1,l(g),s=n.pending,s===null?(g.next=n.pending=g,Np(n,g)):(g.next=s.next,n.pending=s.next=g)}}function Np(e,n){var s=n.action,l=n.payload,h=e.state;if(n.isTransition){var g=P.T,j={};P.T=j;try{var O=s(h,l),I=P.S;I!==null&&I(j,O),Tp(e,n,O)}catch(ne){fd(e,n,ne)}finally{P.T=g}}else try{g=s(h,l),Tp(e,n,g)}catch(ne){fd(e,n,ne)}}function Tp(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Cp(e,n,l)},function(l){return fd(e,n,l)}):Cp(e,n,s)}function Cp(e,n,s){n.status="fulfilled",n.value=s,Mp(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Np(e,s)))}function fd(e,n,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=s,Mp(n),n=n.next;while(n!==l)}e.action=null}function Mp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Op(e,n){return n}function Dp(e,n){if(Ct){var s=Ht.formState;if(s!==null){e:{var l=pt;if(Ct){if(Zt){t:{for(var h=Zt,g=wr;h.nodeType!==8;){if(!g){h=null;break t}if(h=pr(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Zt=pr(h.nextSibling),l=h.data==="F!";break e}}Ya(l)}l=!1}l&&(n=s[0])}}return s=Ln(),s.memoizedState=s.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:n},s.queue=l,s=Zp.bind(null,pt,l),l.dispatch=s,l=dd(!1),g=vd.bind(null,pt,!1,l.queue),l=Ln(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,s=d_.bind(null,pt,h,g,s),h.dispatch=s,l.memoizedState=e,[n,s,!1]}function kp(e){var n=ln();return Lp(n,zt,e)}function Lp(e,n,s){if(n=cd(e,n,Op)[0],e=_l(Hr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Gs(n)}catch(j){throw j===Ps?gl:j}else l=n;n=ln();var h=n.queue,g=h.dispatch;return s!==n.memoizedState&&(pt.flags|=2048,Ui(9,Sl(),f_.bind(null,h,s),null)),[l,g,e]}function f_(e,n){e.action=n}function Up(e){var n=ln(),s=zt;if(s!==null)return Lp(n,s,e);ln(),n=n.memoizedState,s=ln();var l=s.queue.dispatch;return s.memoizedState=e,[n,l,!1]}function Ui(e,n,s,l){return e={tag:e,create:s,deps:l,inst:n,next:null},n=pt.updateQueue,n===null&&(n=od(),pt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e),e}function Sl(){return{destroy:void 0,resource:void 0}}function zp(){return ln().memoizedState}function El(e,n,s,l){var h=Ln();l=l===void 0?null:l,pt.flags|=e,h.memoizedState=Ui(1|n,Sl(),s,l)}function Vs(e,n,s,l){var h=ln();l=l===void 0?null:l;var g=h.memoizedState.inst;zt!==null&&l!==null&&nd(l,zt.memoizedState.deps)?h.memoizedState=Ui(n,g,s,l):(pt.flags|=e,h.memoizedState=Ui(1|n,g,s,l))}function Bp(e,n){El(8390656,8,e,n)}function Pp(e,n){Vs(2048,8,e,n)}function $p(e,n){return Vs(4,2,e,n)}function Ip(e,n){return Vs(4,4,e,n)}function Fp(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Hp(e,n,s){s=s!=null?s.concat([e]):null,Vs(4,4,Fp.bind(null,n,e),s)}function hd(){}function qp(e,n){var s=ln();n=n===void 0?null:n;var l=s.memoizedState;return n!==null&&nd(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function Gp(e,n){var s=ln();n=n===void 0?null:n;var l=s.memoizedState;if(n!==null&&nd(n,l[1]))return l[0];if(l=e(),Qa){b(!0);try{e()}finally{b(!1)}}return s.memoizedState=[l,n],l}function md(e,n,s){return s===void 0||(ca&1073741824)!==0?e.memoizedState=n:(e.memoizedState=s,e=Kg(),pt.lanes|=e,ga|=e,s)}function Vp(e,n,s,l){return qn(s,n)?s:Di.current!==null?(e=md(e,s,l),qn(e,n)||(vn=!0),e):(ca&42)===0?(vn=!0,e.memoizedState=s):(e=Kg(),pt.lanes|=e,ga|=e,n)}function Yp(e,n,s,l,h){var g=Z.p;Z.p=g!==0&&8>g?g:8;var j=P.T,O={};P.T=O,vd(e,!1,n,s);try{var I=h(),ne=P.S;if(ne!==null&&ne(O,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ve=l_(I,l);Ys(e,n,ve,Wn(e))}else Ys(e,n,l,Wn(e))}catch(Se){Ys(e,n,{then:function(){},status:"rejected",reason:Se},Wn())}finally{Z.p=g,P.T=j}}function h_(){}function pd(e,n,s,l){if(e.tag!==5)throw Error(i(476));var h=Kp(e).queue;Yp(e,h,n,se,s===null?h_:function(){return Wp(e),s(l)})}function Kp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:se},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Wp(e){var n=Kp(e).next.queue;Ys(e,n,{},Wn())}function gd(){return jn(fo)}function Xp(){return ln().memoizedState}function Qp(){return ln().memoizedState}function m_(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=Wn();e=oa(s);var l=la(n,e,s);l!==null&&(Xn(l,n,s),Is(l,n,s)),n={cache:Vu()},e.payload=n;return}n=n.return}}function p_(e,n,s){var l=Wn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Al(e)?Jp(n,s):(s=Uu(e,n,s,l),s!==null&&(Xn(s,e,l),eg(s,n,l)))}function Zp(e,n,s){var l=Wn();Ys(e,n,s,l)}function Ys(e,n,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Al(e))Jp(n,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var j=n.lastRenderedState,O=g(j,s);if(h.hasEagerState=!0,h.eagerState=O,qn(O,j))return ll(e,n,h,0),Ht===null&&ol(),!1}catch{}finally{}if(s=Uu(e,n,h,l),s!==null)return Xn(s,e,l),eg(s,n,l),!0}return!1}function vd(e,n,s,l){if(l={lane:2,revertLane:Wd(),action:l,hasEagerState:!1,eagerState:null,next:null},Al(e)){if(n)throw Error(i(479))}else n=Uu(e,s,l,2),n!==null&&Xn(n,e,2)}function Al(e){var n=e.alternate;return e===pt||n!==null&&n===pt}function Jp(e,n){ki=xl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function eg(e,n,s){if((s&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,mt(e,s)}}var jl={readContext:jn,use:wl,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},tg={readContext:jn,use:wl,useCallback:function(e,n){return Ln().memoizedState=[e,n===void 0?null:n],e},useContext:jn,useEffect:Bp,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,El(4194308,4,Fp.bind(null,n,e),s)},useLayoutEffect:function(e,n){return El(4194308,4,e,n)},useInsertionEffect:function(e,n){El(4,2,e,n)},useMemo:function(e,n){var s=Ln();n=n===void 0?null:n;var l=e();if(Qa){b(!0);try{e()}finally{b(!1)}}return s.memoizedState=[l,n],l},useReducer:function(e,n,s){var l=Ln();if(s!==void 0){var h=s(n);if(Qa){b(!0);try{s(n)}finally{b(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=p_.bind(null,pt,e),[l.memoizedState,e]},useRef:function(e){var n=Ln();return e={current:e},n.memoizedState=e},useState:function(e){e=dd(e);var n=e.queue,s=Zp.bind(null,pt,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:hd,useDeferredValue:function(e,n){var s=Ln();return md(s,e,n)},useTransition:function(){var e=dd(!1);return e=Yp.bind(null,pt,e.queue,!0,!1),Ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var l=pt,h=Ln();if(Ct){if(s===void 0)throw Error(i(407));s=s()}else{if(s=n(),Ht===null)throw Error(i(349));(jt&124)!==0||_p(l,n,s)}h.memoizedState=s;var g={value:s,getSnapshot:n};return h.queue=g,Bp(Ep.bind(null,l,g,e),[e]),l.flags|=2048,Ui(9,Sl(),Sp.bind(null,l,g,s,n),null),s},useId:function(){var e=Ln(),n=Ht.identifierPrefix;if(Ct){var s=$r,l=Pr;s=(l&~(1<<32-_(l)-1)).toString(32)+s,n=""+n+"R"+s,s=bl++,0<s&&(n+="H"+s.toString(32)),n+=""}else s=c_++,n=""+n+"r"+s.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:gd,useFormState:Dp,useActionState:Dp,useOptimistic:function(e){var n=Ln();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=vd.bind(null,pt,!0,s),s.dispatch=n,[e,n]},useMemoCache:ld,useCacheRefresh:function(){return Ln().memoizedState=m_.bind(null,pt)}},ng={readContext:jn,use:wl,useCallback:qp,useContext:jn,useEffect:Pp,useImperativeHandle:Hp,useInsertionEffect:$p,useLayoutEffect:Ip,useMemo:Gp,useReducer:_l,useRef:zp,useState:function(){return _l(Hr)},useDebugValue:hd,useDeferredValue:function(e,n){var s=ln();return Vp(s,zt.memoizedState,e,n)},useTransition:function(){var e=_l(Hr)[0],n=ln().memoizedState;return[typeof e=="boolean"?e:Gs(e),n]},useSyncExternalStore:wp,useId:Xp,useHostTransitionStatus:gd,useFormState:kp,useActionState:kp,useOptimistic:function(e,n){var s=ln();return Rp(s,zt,e,n)},useMemoCache:ld,useCacheRefresh:Qp},g_={readContext:jn,use:wl,useCallback:qp,useContext:jn,useEffect:Pp,useImperativeHandle:Hp,useInsertionEffect:$p,useLayoutEffect:Ip,useMemo:Gp,useReducer:ud,useRef:zp,useState:function(){return ud(Hr)},useDebugValue:hd,useDeferredValue:function(e,n){var s=ln();return zt===null?md(s,e,n):Vp(s,zt.memoizedState,e,n)},useTransition:function(){var e=ud(Hr)[0],n=ln().memoizedState;return[typeof e=="boolean"?e:Gs(e),n]},useSyncExternalStore:wp,useId:Xp,useHostTransitionStatus:gd,useFormState:Up,useActionState:Up,useOptimistic:function(e,n){var s=ln();return zt!==null?Rp(s,zt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ld,useCacheRefresh:Qp},zi=null,Ks=0;function Rl(e){var n=Ks;return Ks+=1,zi===null&&(zi=[]),hp(zi,e,n)}function Ws(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Nl(e,n){throw n.$$typeof===y?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function rg(e){var n=e._init;return n(e._payload)}function ag(e){function n(Q,V){if(e){var te=Q.deletions;te===null?(Q.deletions=[V],Q.flags|=16):te.push(V)}}function s(Q,V){if(!e)return null;for(;V!==null;)n(Q,V),V=V.sibling;return null}function l(Q){for(var V=new Map;Q!==null;)Q.key!==null?V.set(Q.key,Q):V.set(Q.index,Q),Q=Q.sibling;return V}function h(Q,V){return Q=Br(Q,V),Q.index=0,Q.sibling=null,Q}function g(Q,V,te){return Q.index=te,e?(te=Q.alternate,te!==null?(te=te.index,te<V?(Q.flags|=67108866,V):te):(Q.flags|=67108866,V)):(Q.flags|=1048576,V)}function j(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function O(Q,V,te,be){return V===null||V.tag!==6?(V=Bu(te,Q.mode,be),V.return=Q,V):(V=h(V,te),V.return=Q,V)}function I(Q,V,te,be){var Fe=te.type;return Fe===N?ve(Q,V,te.props.children,be,te.key):V!==null&&(V.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===re&&rg(Fe)===V.type)?(V=h(V,te.props),Ws(V,te),V.return=Q,V):(V=ul(te.type,te.key,te.props,null,Q.mode,be),Ws(V,te),V.return=Q,V)}function ne(Q,V,te,be){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Pu(te,Q.mode,be),V.return=Q,V):(V=h(V,te.children||[]),V.return=Q,V)}function ve(Q,V,te,be,Fe){return V===null||V.tag!==7?(V=Ha(te,Q.mode,be,Fe),V.return=Q,V):(V=h(V,te),V.return=Q,V)}function Se(Q,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Bu(""+V,Q.mode,te),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return te=ul(V.type,V.key,V.props,null,Q.mode,te),Ws(te,V),te.return=Q,te;case w:return V=Pu(V,Q.mode,te),V.return=Q,V;case re:var be=V._init;return V=be(V._payload),Se(Q,V,te)}if(le(V)||G(V))return V=Ha(V,Q.mode,te,null),V.return=Q,V;if(typeof V.then=="function")return Se(Q,Rl(V),te);if(V.$$typeof===L)return Se(Q,ml(Q,V),te);Nl(Q,V)}return null}function ie(Q,V,te,be){var Fe=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Fe!==null?null:O(Q,V,""+te,be);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case x:return te.key===Fe?I(Q,V,te,be):null;case w:return te.key===Fe?ne(Q,V,te,be):null;case re:return Fe=te._init,te=Fe(te._payload),ie(Q,V,te,be)}if(le(te)||G(te))return Fe!==null?null:ve(Q,V,te,be,null);if(typeof te.then=="function")return ie(Q,V,Rl(te),be);if(te.$$typeof===L)return ie(Q,V,ml(Q,te),be);Nl(Q,te)}return null}function ue(Q,V,te,be,Fe){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Q=Q.get(te)||null,O(V,Q,""+be,Fe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case x:return Q=Q.get(be.key===null?te:be.key)||null,I(V,Q,be,Fe);case w:return Q=Q.get(be.key===null?te:be.key)||null,ne(V,Q,be,Fe);case re:var vt=be._init;return be=vt(be._payload),ue(Q,V,te,be,Fe)}if(le(be)||G(be))return Q=Q.get(te)||null,ve(V,Q,be,Fe,null);if(typeof be.then=="function")return ue(Q,V,te,Rl(be),Fe);if(be.$$typeof===L)return ue(Q,V,te,ml(V,be),Fe);Nl(V,be)}return null}function nt(Q,V,te,be){for(var Fe=null,vt=null,Ye=V,Je=V=0,xn=null;Ye!==null&&Je<te.length;Je++){Ye.index>Je?(xn=Ye,Ye=null):xn=Ye.sibling;var Tt=ie(Q,Ye,te[Je],be);if(Tt===null){Ye===null&&(Ye=xn);break}e&&Ye&&Tt.alternate===null&&n(Q,Ye),V=g(Tt,V,Je),vt===null?Fe=Tt:vt.sibling=Tt,vt=Tt,Ye=xn}if(Je===te.length)return s(Q,Ye),Ct&&Ga(Q,Je),Fe;if(Ye===null){for(;Je<te.length;Je++)Ye=Se(Q,te[Je],be),Ye!==null&&(V=g(Ye,V,Je),vt===null?Fe=Ye:vt.sibling=Ye,vt=Ye);return Ct&&Ga(Q,Je),Fe}for(Ye=l(Ye);Je<te.length;Je++)xn=ue(Ye,Q,Je,te[Je],be),xn!==null&&(e&&xn.alternate!==null&&Ye.delete(xn.key===null?Je:xn.key),V=g(xn,V,Je),vt===null?Fe=xn:vt.sibling=xn,vt=xn);return e&&Ye.forEach(function(Aa){return n(Q,Aa)}),Ct&&Ga(Q,Je),Fe}function Qe(Q,V,te,be){if(te==null)throw Error(i(151));for(var Fe=null,vt=null,Ye=V,Je=V=0,xn=null,Tt=te.next();Ye!==null&&!Tt.done;Je++,Tt=te.next()){Ye.index>Je?(xn=Ye,Ye=null):xn=Ye.sibling;var Aa=ie(Q,Ye,Tt.value,be);if(Aa===null){Ye===null&&(Ye=xn);break}e&&Ye&&Aa.alternate===null&&n(Q,Ye),V=g(Aa,V,Je),vt===null?Fe=Aa:vt.sibling=Aa,vt=Aa,Ye=xn}if(Tt.done)return s(Q,Ye),Ct&&Ga(Q,Je),Fe;if(Ye===null){for(;!Tt.done;Je++,Tt=te.next())Tt=Se(Q,Tt.value,be),Tt!==null&&(V=g(Tt,V,Je),vt===null?Fe=Tt:vt.sibling=Tt,vt=Tt);return Ct&&Ga(Q,Je),Fe}for(Ye=l(Ye);!Tt.done;Je++,Tt=te.next())Tt=ue(Ye,Q,Je,Tt.value,be),Tt!==null&&(e&&Tt.alternate!==null&&Ye.delete(Tt.key===null?Je:Tt.key),V=g(Tt,V,Je),vt===null?Fe=Tt:vt.sibling=Tt,vt=Tt);return e&&Ye.forEach(function(v1){return n(Q,v1)}),Ct&&Ga(Q,Je),Fe}function Pt(Q,V,te,be){if(typeof te=="object"&&te!==null&&te.type===N&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case x:e:{for(var Fe=te.key;V!==null;){if(V.key===Fe){if(Fe=te.type,Fe===N){if(V.tag===7){s(Q,V.sibling),be=h(V,te.props.children),be.return=Q,Q=be;break e}}else if(V.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===re&&rg(Fe)===V.type){s(Q,V.sibling),be=h(V,te.props),Ws(be,te),be.return=Q,Q=be;break e}s(Q,V);break}else n(Q,V);V=V.sibling}te.type===N?(be=Ha(te.props.children,Q.mode,be,te.key),be.return=Q,Q=be):(be=ul(te.type,te.key,te.props,null,Q.mode,be),Ws(be,te),be.return=Q,Q=be)}return j(Q);case w:e:{for(Fe=te.key;V!==null;){if(V.key===Fe)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){s(Q,V.sibling),be=h(V,te.children||[]),be.return=Q,Q=be;break e}else{s(Q,V);break}else n(Q,V);V=V.sibling}be=Pu(te,Q.mode,be),be.return=Q,Q=be}return j(Q);case re:return Fe=te._init,te=Fe(te._payload),Pt(Q,V,te,be)}if(le(te))return nt(Q,V,te,be);if(G(te)){if(Fe=G(te),typeof Fe!="function")throw Error(i(150));return te=Fe.call(te),Qe(Q,V,te,be)}if(typeof te.then=="function")return Pt(Q,V,Rl(te),be);if(te.$$typeof===L)return Pt(Q,V,ml(Q,te),be);Nl(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(s(Q,V.sibling),be=h(V,te),be.return=Q,Q=be):(s(Q,V),be=Bu(te,Q.mode,be),be.return=Q,Q=be),j(Q)):s(Q,V)}return function(Q,V,te,be){try{Ks=0;var Fe=Pt(Q,V,te,be);return zi=null,Fe}catch(Ye){if(Ye===Ps||Ye===gl)throw Ye;var vt=Gn(29,Ye,null,Q.mode);return vt.lanes=be,vt.return=Q,vt}finally{}}}var Bi=ag(!0),ig=ag(!1),ir=W(null),_r=null;function ua(e){var n=e.alternate;ae(fn,fn.current&1),ae(ir,e),_r===null&&(n===null||Di.current!==null||n.memoizedState!==null)&&(_r=e)}function sg(e){if(e.tag===22){if(ae(fn,fn.current),ae(ir,e),_r===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(_r=e)}}else da()}function da(){ae(fn,fn.current),ae(ir,ir.current)}function qr(e){pe(ir),_r===e&&(_r=null),pe(fn)}var fn=W(0);function Tl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||lf(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function yd(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:v({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var xd={enqueueSetState:function(e,n,s){e=e._reactInternals;var l=Wn(),h=oa(l);h.payload=n,s!=null&&(h.callback=s),n=la(e,h,l),n!==null&&(Xn(n,e,l),Is(n,e,l))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=Wn(),h=oa(l);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=la(e,h,l),n!==null&&(Xn(n,e,l),Is(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Wn(),l=oa(s);l.tag=2,n!=null&&(l.callback=n),n=la(e,l,s),n!==null&&(Xn(n,e,s),Is(n,e,s))}};function og(e,n,s,l,h,g,j){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,j):n.prototype&&n.prototype.isPureReactComponent?!Ms(s,l)||!Ms(h,g):!0}function lg(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&xd.enqueueReplaceState(n,n.state,null)}function Za(e,n){var s=n;if("ref"in n){s={};for(var l in n)l!=="ref"&&(s[l]=n[l])}if(e=e.defaultProps){s===n&&(s=v({},s));for(var h in e)s[h]===void 0&&(s[h]=e[h])}return s}var Cl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function cg(e){Cl(e)}function ug(e){console.error(e)}function dg(e){Cl(e)}function Ml(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function fg(e,n,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bd(e,n,s){return s=oa(s),s.tag=3,s.payload={element:null},s.callback=function(){Ml(e,n)},s}function hg(e){return e=oa(e),e.tag=3,e}function mg(e,n,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var g=l.value;e.payload=function(){return h(g)},e.callback=function(){fg(n,s,l)}}var j=s.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(e.callback=function(){fg(n,s,l),typeof h!="function"&&(va===null?va=new Set([this]):va.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})})}function v_(e,n,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=s.alternate,n!==null&&Us(n,s,h,!0),s=ir.current,s!==null){switch(s.tag){case 13:return _r===null?qd():s.alternate===null&&Jt===0&&(Jt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===Wu?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([l]):n.add(l),Vd(e,l,h)),!1;case 22:return s.flags|=65536,l===Wu?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([l]):s.add(l)),Vd(e,l,h)),!1}throw Error(i(435,s.tag))}return Vd(e,l,h),qd(),!1}if(Ct)return n=ir.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Fu&&(e=Error(i(422),{cause:l}),Ls(tr(e,s)))):(l!==Fu&&(n=Error(i(423),{cause:l}),Ls(tr(n,s))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=tr(l,s),h=bd(e.stateNode,l,h),Zu(e,h),Jt!==4&&(Jt=2)),!1;var g=Error(i(520),{cause:l});if(g=tr(g,s),no===null?no=[g]:no.push(g),Jt!==4&&(Jt=2),n===null)return!0;l=tr(l,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=h&-h,s.lanes|=e,e=bd(s.stateNode,l,e),Zu(s,e),!1;case 1:if(n=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(va===null||!va.has(g))))return s.flags|=65536,h&=-h,s.lanes|=h,h=hg(h),mg(h,e,s,l),Zu(s,h),!1}s=s.return}while(s!==null);return!1}var pg=Error(i(461)),vn=!1;function Sn(e,n,s,l){n.child=e===null?ig(n,null,s,l):Bi(n,e.child,s,l)}function gg(e,n,s,l,h){s=s.render;var g=n.ref;if("ref"in l){var j={};for(var O in l)O!=="ref"&&(j[O]=l[O])}else j=l;return Wa(n),l=rd(e,n,s,j,g,h),O=ad(),e!==null&&!vn?(id(e,n,h),Gr(e,n,h)):(Ct&&O&&$u(n),n.flags|=1,Sn(e,n,l,h),n.child)}function vg(e,n,s,l,h){if(e===null){var g=s.type;return typeof g=="function"&&!zu(g)&&g.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=g,yg(e,n,g,l,h)):(e=ul(s.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!Nd(e,h)){var j=g.memoizedProps;if(s=s.compare,s=s!==null?s:Ms,s(j,l)&&e.ref===n.ref)return Gr(e,n,h)}return n.flags|=1,e=Br(g,l),e.ref=n.ref,e.return=n,n.child=e}function yg(e,n,s,l,h){if(e!==null){var g=e.memoizedProps;if(Ms(g,l)&&e.ref===n.ref)if(vn=!1,n.pendingProps=l=g,Nd(e,h))(e.flags&131072)!==0&&(vn=!0);else return n.lanes=e.lanes,Gr(e,n,h)}return wd(e,n,s,l,h)}function xg(e,n,s){var l=n.pendingProps,h=l.children,g=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=g!==null?g.baseLanes|s:s,e!==null){for(h=n.child=e.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;n.childLanes=g&~l}else n.childLanes=0,n.child=null;return bg(e,n,l,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&pl(n,g!==null?g.cachePool:null),g!==null?yp(n,g):ed(),sg(n);else return n.lanes=n.childLanes=536870912,bg(e,n,g!==null?g.baseLanes|s:s,s)}else g!==null?(pl(n,g.cachePool),yp(n,g),da(),n.memoizedState=null):(e!==null&&pl(n,null),ed(),da());return Sn(e,n,h,s),n.child}function bg(e,n,s,l){var h=Ku();return h=h===null?null:{parent:dn._currentValue,pool:h},n.memoizedState={baseLanes:s,cachePool:h},e!==null&&pl(n,null),ed(),sg(n),e!==null&&Us(e,n,l,!0),null}function Ol(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function wd(e,n,s,l,h){return Wa(n),s=rd(e,n,s,l,void 0,h),l=ad(),e!==null&&!vn?(id(e,n,h),Gr(e,n,h)):(Ct&&l&&$u(n),n.flags|=1,Sn(e,n,s,h),n.child)}function wg(e,n,s,l,h,g){return Wa(n),n.updateQueue=null,s=bp(n,l,s,h),xp(e),l=ad(),e!==null&&!vn?(id(e,n,g),Gr(e,n,g)):(Ct&&l&&$u(n),n.flags|=1,Sn(e,n,s,g),n.child)}function _g(e,n,s,l,h){if(Wa(n),n.stateNode===null){var g=Ni,j=s.contextType;typeof j=="object"&&j!==null&&(g=jn(j)),g=new s(l,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=xd,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=l,g.state=n.memoizedState,g.refs={},Xu(n),j=s.contextType,g.context=typeof j=="object"&&j!==null?jn(j):Ni,g.state=n.memoizedState,j=s.getDerivedStateFromProps,typeof j=="function"&&(yd(n,s,j,l),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(j=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),j!==g.state&&xd.enqueueReplaceState(g,g.state,null),Hs(n,l,g,h),Fs(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){g=n.stateNode;var O=n.memoizedProps,I=Za(s,O);g.props=I;var ne=g.context,ve=s.contextType;j=Ni,typeof ve=="object"&&ve!==null&&(j=jn(ve));var Se=s.getDerivedStateFromProps;ve=typeof Se=="function"||typeof g.getSnapshotBeforeUpdate=="function",O=n.pendingProps!==O,ve||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(O||ne!==j)&&lg(n,g,l,j),sa=!1;var ie=n.memoizedState;g.state=ie,Hs(n,l,g,h),Fs(),ne=n.memoizedState,O||ie!==ne||sa?(typeof Se=="function"&&(yd(n,s,Se,l),ne=n.memoizedState),(I=sa||og(n,s,I,l,ie,ne,j))?(ve||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=ne),g.props=l,g.state=ne,g.context=j,l=I):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{g=n.stateNode,Qu(e,n),j=n.memoizedProps,ve=Za(s,j),g.props=ve,Se=n.pendingProps,ie=g.context,ne=s.contextType,I=Ni,typeof ne=="object"&&ne!==null&&(I=jn(ne)),O=s.getDerivedStateFromProps,(ne=typeof O=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==Se||ie!==I)&&lg(n,g,l,I),sa=!1,ie=n.memoizedState,g.state=ie,Hs(n,l,g,h),Fs();var ue=n.memoizedState;j!==Se||ie!==ue||sa||e!==null&&e.dependencies!==null&&hl(e.dependencies)?(typeof O=="function"&&(yd(n,s,O,l),ue=n.memoizedState),(ve=sa||og(n,s,ve,l,ie,ue,I)||e!==null&&e.dependencies!==null&&hl(e.dependencies))?(ne||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,ue,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,ue,I)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===e.memoizedProps&&ie===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ie===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ue),g.props=l,g.state=ue,g.context=I,l=ve):(typeof g.componentDidUpdate!="function"||j===e.memoizedProps&&ie===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ie===e.memoizedState||(n.flags|=1024),l=!1)}return g=l,Ol(e,n),l=(n.flags&128)!==0,g||l?(g=n.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&l?(n.child=Bi(n,e.child,null,h),n.child=Bi(n,null,s,h)):Sn(e,n,s,h),n.memoizedState=g.state,e=n.child):e=Gr(e,n,h),e}function Sg(e,n,s,l){return ks(),n.flags|=256,Sn(e,n,s,l),n.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(e){return{baseLanes:e,cachePool:up()}}function Ed(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=sr),e}function Eg(e,n,s){var l=n.pendingProps,h=!1,g=(n.flags&128)!==0,j;if((j=g)||(j=e!==null&&e.memoizedState===null?!1:(fn.current&2)!==0),j&&(h=!0,n.flags&=-129),j=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ct){if(h?ua(n):da(),Ct){var O=Zt,I;if(I=O){e:{for(I=O,O=wr;I.nodeType!==8;){if(!O){O=null;break e}if(I=pr(I.nextSibling),I===null){O=null;break e}}O=I}O!==null?(n.memoizedState={dehydrated:O,treeContext:qa!==null?{id:Pr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},I=Gn(18,null,null,0),I.stateNode=O,I.return=n,n.child=I,Mn=n,Zt=null,I=!0):I=!1}I||Ya(n)}if(O=n.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return lf(O)?n.lanes=32:n.lanes=536870912,null;qr(n)}return O=l.children,l=l.fallback,h?(da(),h=n.mode,O=Dl({mode:"hidden",children:O},h),l=Ha(l,h,s,null),O.return=n,l.return=n,O.sibling=l,n.child=O,h=n.child,h.memoizedState=Sd(s),h.childLanes=Ed(e,j,s),n.memoizedState=_d,l):(ua(n),Ad(n,O))}if(I=e.memoizedState,I!==null&&(O=I.dehydrated,O!==null)){if(g)n.flags&256?(ua(n),n.flags&=-257,n=jd(e,n,s)):n.memoizedState!==null?(da(),n.child=e.child,n.flags|=128,n=null):(da(),h=l.fallback,O=n.mode,l=Dl({mode:"visible",children:l.children},O),h=Ha(h,O,s,null),h.flags|=2,l.return=n,h.return=n,l.sibling=h,n.child=l,Bi(n,e.child,null,s),l=n.child,l.memoizedState=Sd(s),l.childLanes=Ed(e,j,s),n.memoizedState=_d,n=h);else if(ua(n),lf(O)){if(j=O.nextSibling&&O.nextSibling.dataset,j)var ne=j.dgst;j=ne,l=Error(i(419)),l.stack="",l.digest=j,Ls({value:l,source:null,stack:null}),n=jd(e,n,s)}else if(vn||Us(e,n,s,!1),j=(s&e.childLanes)!==0,vn||j){if(j=Ht,j!==null&&(l=s&-s,l=(l&42)!==0?1:Nt(l),l=(l&(j.suspendedLanes|s))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Ri(e,l),Xn(j,e,l),pg;O.data==="$?"||qd(),n=jd(e,n,s)}else O.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,Zt=pr(O.nextSibling),Mn=n,Ct=!0,Va=null,wr=!1,e!==null&&(rr[ar++]=Pr,rr[ar++]=$r,rr[ar++]=qa,Pr=e.id,$r=e.overflow,qa=n),n=Ad(n,l.children),n.flags|=4096);return n}return h?(da(),h=l.fallback,O=n.mode,I=e.child,ne=I.sibling,l=Br(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,ne!==null?h=Br(ne,h):(h=Ha(h,O,s,null),h.flags|=2),h.return=n,l.return=n,l.sibling=h,n.child=l,l=h,h=n.child,O=e.child.memoizedState,O===null?O=Sd(s):(I=O.cachePool,I!==null?(ne=dn._currentValue,I=I.parent!==ne?{parent:ne,pool:ne}:I):I=up(),O={baseLanes:O.baseLanes|s,cachePool:I}),h.memoizedState=O,h.childLanes=Ed(e,j,s),n.memoizedState=_d,l):(ua(n),s=e.child,e=s.sibling,s=Br(s,{mode:"visible",children:l.children}),s.return=n,s.sibling=null,e!==null&&(j=n.deletions,j===null?(n.deletions=[e],n.flags|=16):j.push(e)),n.child=s,n.memoizedState=null,s)}function Ad(e,n){return n=Dl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Dl(e,n){return e=Gn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function jd(e,n,s){return Bi(n,e.child,null,s),e=Ad(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Ag(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),qu(e.return,n,s)}function Rd(e,n,s,l,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=s,g.tailMode=h)}function jg(e,n,s){var l=n.pendingProps,h=l.revealOrder,g=l.tail;if(Sn(e,n,l.children,s),l=fn.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ag(e,s,n);else if(e.tag===19)Ag(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ae(fn,l),h){case"forwards":for(s=n.child,h=null;s!==null;)e=s.alternate,e!==null&&Tl(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),Rd(n,!1,h,s,g);break;case"backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Tl(e)===null){n.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Rd(n,!0,s,null,g);break;case"together":Rd(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gr(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ga|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(Us(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,s=Br(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Br(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Nd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&hl(e)))}function y_(e,n,s){switch(n.tag){case 3:Me(n,n.stateNode.containerInfo),ia(n,dn,e.memoizedState.cache),ks();break;case 27:case 5:ce(n);break;case 4:Me(n,n.stateNode.containerInfo);break;case 10:ia(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ua(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Eg(e,n,s):(ua(n),e=Gr(e,n,s),e!==null?e.sibling:null);ua(n);break;case 19:var h=(e.flags&128)!==0;if(l=(s&n.childLanes)!==0,l||(Us(e,n,s,!1),l=(s&n.childLanes)!==0),h){if(l)return jg(e,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(fn,fn.current),l)break;return null;case 22:case 23:return n.lanes=0,xg(e,n,s);case 24:ia(n,dn,e.memoizedState.cache)}return Gr(e,n,s)}function Rg(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)vn=!0;else{if(!Nd(e,s)&&(n.flags&128)===0)return vn=!1,y_(e,n,s);vn=(e.flags&131072)!==0}else vn=!1,Ct&&(n.flags&1048576)!==0&&rp(n,fl,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var l=n.elementType,h=l._init;if(l=h(l._payload),n.type=l,typeof l=="function")zu(l)?(e=Za(l,e),n.tag=1,n=_g(null,n,l,e,s)):(n.tag=0,n=wd(null,n,l,e,s));else{if(l!=null){if(h=l.$$typeof,h===F){n.tag=11,n=gg(null,n,l,e,s);break e}else if(h===Y){n.tag=14,n=vg(null,n,l,e,s);break e}}throw n=de(l)||l,Error(i(306,n,""))}}return n;case 0:return wd(e,n,n.type,n.pendingProps,s);case 1:return l=n.type,h=Za(l,n.pendingProps),_g(e,n,l,h,s);case 3:e:{if(Me(n,n.stateNode.containerInfo),e===null)throw Error(i(387));l=n.pendingProps;var g=n.memoizedState;h=g.element,Qu(e,n),Hs(n,l,null,s);var j=n.memoizedState;if(l=j.cache,ia(n,dn,l),l!==g.cache&&Gu(n,[dn],s,!0),Fs(),l=j.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:j.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=Sg(e,n,l,s);break e}else if(l!==h){h=tr(Error(i(424)),n),Ls(h),n=Sg(e,n,l,s);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Zt=pr(e.firstChild),Mn=n,Ct=!0,Va=null,wr=!0,s=ig(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ks(),l===h){n=Gr(e,n,s);break e}Sn(e,n,l,s)}n=n.child}return n;case 26:return Ol(e,n),e===null?(s=M0(n.type,null,n.pendingProps,null))?n.memoizedState=s:Ct||(s=n.type,e=n.pendingProps,l=Yl(Ee.current).createElement(s),l[B]=n,l[K]=e,An(l,s,e),gt(l),n.stateNode=l):n.memoizedState=M0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ce(n),e===null&&Ct&&(l=n.stateNode=N0(n.type,n.pendingProps,Ee.current),Mn=n,wr=!0,h=Zt,ba(n.type)?(cf=h,Zt=pr(l.firstChild)):Zt=h),Sn(e,n,n.pendingProps.children,s),Ol(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ct&&((h=l=Zt)&&(l=V_(l,n.type,n.pendingProps,wr),l!==null?(n.stateNode=l,Mn=n,Zt=pr(l.firstChild),wr=!1,h=!0):h=!1),h||Ya(n)),ce(n),h=n.type,g=n.pendingProps,j=e!==null?e.memoizedProps:null,l=g.children,af(h,g)?l=null:j!==null&&af(h,j)&&(n.flags|=32),n.memoizedState!==null&&(h=rd(e,n,u_,null,null,s),fo._currentValue=h),Ol(e,n),Sn(e,n,l,s),n.child;case 6:return e===null&&Ct&&((e=s=Zt)&&(s=Y_(s,n.pendingProps,wr),s!==null?(n.stateNode=s,Mn=n,Zt=null,e=!0):e=!1),e||Ya(n)),null;case 13:return Eg(e,n,s);case 4:return Me(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Bi(n,null,l,s):Sn(e,n,l,s),n.child;case 11:return gg(e,n,n.type,n.pendingProps,s);case 7:return Sn(e,n,n.pendingProps,s),n.child;case 8:return Sn(e,n,n.pendingProps.children,s),n.child;case 12:return Sn(e,n,n.pendingProps.children,s),n.child;case 10:return l=n.pendingProps,ia(n,n.type,l.value),Sn(e,n,l.children,s),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Wa(n),h=jn(h),l=l(h),n.flags|=1,Sn(e,n,l,s),n.child;case 14:return vg(e,n,n.type,n.pendingProps,s);case 15:return yg(e,n,n.type,n.pendingProps,s);case 19:return jg(e,n,s);case 31:return l=n.pendingProps,s=n.mode,l={mode:l.mode,children:l.children},e===null?(s=Dl(l,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Br(e.child,l),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return xg(e,n,s);case 24:return Wa(n),l=jn(dn),e===null?(h=Ku(),h===null&&(h=Ht,g=Vu(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=s),h=g),n.memoizedState={parent:l,cache:h},Xu(n),ia(n,dn,h)):((e.lanes&s)!==0&&(Qu(e,n),Hs(n,null,null,s),Fs()),h=e.memoizedState,g=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),ia(n,dn,l)):(l=g.cache,ia(n,dn,l),l!==h.cache&&Gu(n,[dn],s,!0))),Sn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Vr(e){e.flags|=4}function Ng(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!U0(n)){if(n=ir.current,n!==null&&((jt&4194048)===jt?_r!==null:(jt&62914560)!==jt&&(jt&536870912)===0||n!==_r))throw $s=Wu,dp;e.flags|=8192}}function kl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Tn():536870912,e.lanes|=n,Fi|=n)}function Xs(e,n){if(!Ct)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Qt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function x_(e,n,s){var l=n.pendingProps;switch(Iu(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(n),null;case 1:return Qt(n),null;case 3:return s=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Fr(dn),fe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ds(n)?Vr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,sp())),Qt(n),null;case 26:return s=n.memoizedState,e===null?(Vr(n),s!==null?(Qt(n),Ng(n,s)):(Qt(n),n.flags&=-16777217)):s?s!==e.memoizedState?(Vr(n),Qt(n),Ng(n,s)):(Qt(n),n.flags&=-16777217):(e.memoizedProps!==l&&Vr(n),Qt(n),n.flags&=-16777217),null;case 27:we(n),s=Ee.current;var h=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Vr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return Qt(n),null}e=_e.current,Ds(n)?ap(n):(e=N0(h,l,s),n.stateNode=e,Vr(n))}return Qt(n),null;case 5:if(we(n),s=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Vr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return Qt(n),null}if(e=_e.current,Ds(n))ap(n);else{switch(h=Yl(Ee.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}e[B]=n,e[K]=l;e:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=e;e:switch(An(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Vr(n)}}return Qt(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Vr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(e=Ee.current,Ds(n)){if(e=n.stateNode,s=n.memoizedProps,l=null,h=Mn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[B]=n,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||w0(e.nodeValue,s)),e||Ya(n)}else e=Yl(e).createTextNode(l),e[B]=n,n.stateNode=e}return Qt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ds(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[B]=n}else ks(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qt(n),h=!1}else h=sp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(qr(n),n):(qr(n),null)}if(qr(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var g=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048)}return s!==e&&s&&(n.child.flags|=8192),kl(n,n.updateQueue),Qt(n),null;case 4:return fe(),e===null&&Jd(n.stateNode.containerInfo),Qt(n),null;case 10:return Fr(n.type),Qt(n),null;case 19:if(pe(fn),h=n.memoizedState,h===null)return Qt(n),null;if(l=(n.flags&128)!==0,g=h.rendering,g===null)if(l)Xs(h,!1);else{if(Jt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=Tl(e),g!==null){for(n.flags|=128,Xs(h,!1),e=g.updateQueue,n.updateQueue=e,kl(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)np(s,e),s=s.sibling;return ae(fn,fn.current&1|2),n.child}e=e.sibling}h.tail!==null&&qe()>zl&&(n.flags|=128,l=!0,Xs(h,!1),n.lanes=4194304)}else{if(!l)if(e=Tl(g),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,kl(n,e),Xs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Ct)return Qt(n),null}else 2*qe()-h.renderingStartTime>zl&&s!==536870912&&(n.flags|=128,l=!0,Xs(h,!1),n.lanes=4194304);h.isBackwards?(g.sibling=n.child,n.child=g):(e=h.last,e!==null?e.sibling=g:n.child=g,h.last=g)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=qe(),n.sibling=null,e=fn.current,ae(fn,l?e&1|2:e&1),n):(Qt(n),null);case 22:case 23:return qr(n),td(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(s&536870912)!==0&&(n.flags&128)===0&&(Qt(n),n.subtreeFlags&6&&(n.flags|=8192)):Qt(n),s=n.updateQueue,s!==null&&kl(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048),e!==null&&pe(Xa),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Fr(dn),Qt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function b_(e,n){switch(Iu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fr(dn),fe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return we(n),null;case 13:if(qr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));ks()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return pe(fn),null;case 4:return fe(),null;case 10:return Fr(n.type),null;case 22:case 23:return qr(n),td(),e!==null&&pe(Xa),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fr(dn),null;case 25:return null;default:return null}}function Tg(e,n){switch(Iu(n),n.tag){case 3:Fr(dn),fe();break;case 26:case 27:case 5:we(n);break;case 4:fe();break;case 13:qr(n);break;case 19:pe(fn);break;case 10:Fr(n.type);break;case 22:case 23:qr(n),td(),e!==null&&pe(Xa);break;case 24:Fr(dn)}}function Qs(e,n){try{var s=n.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&e)===e){l=void 0;var g=s.create,j=s.inst;l=g(),j.destroy=l}s=s.next}while(s!==h)}}catch(O){It(n,n.return,O)}}function fa(e,n,s){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&e)===e){var j=l.inst,O=j.destroy;if(O!==void 0){j.destroy=void 0,h=n;var I=s,ne=O;try{ne()}catch(ve){It(h,I,ve)}}}l=l.next}while(l!==g)}}catch(ve){It(n,n.return,ve)}}function Cg(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{vp(n,s)}catch(l){It(e,e.return,l)}}}function Mg(e,n,s){s.props=Za(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){It(e,n,l)}}function Zs(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(h){It(e,n,h)}}function Sr(e,n){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){It(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){It(e,n,h)}else s.current=null}function Og(e){var n=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){It(e,e.return,h)}}function Td(e,n,s){try{var l=e.stateNode;I_(l,e.type,s,n),l[K]=n}catch(h){It(e,e.return,h)}}function Dg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ba(e.type)||e.tag===4}function Cd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Md(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Vl));else if(l!==4&&(l===27&&ba(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(Md(e,n,s),e=e.sibling;e!==null;)Md(e,n,s),e=e.sibling}function Ll(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&(l===27&&ba(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Ll(e,n,s),e=e.sibling;e!==null;)Ll(e,n,s),e=e.sibling}function kg(e){var n=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);An(n,l,s),n[B]=e,n[K]=s}catch(g){It(e,e.return,g)}}var Yr=!1,rn=!1,Od=!1,Lg=typeof WeakSet=="function"?WeakSet:Set,yn=null;function w_(e,n){if(e=e.containerInfo,nf=Jl,e=Vm(e),Cu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var j=0,O=-1,I=-1,ne=0,ve=0,Se=e,ie=null;t:for(;;){for(var ue;Se!==s||h!==0&&Se.nodeType!==3||(O=j+h),Se!==g||l!==0&&Se.nodeType!==3||(I=j+l),Se.nodeType===3&&(j+=Se.nodeValue.length),(ue=Se.firstChild)!==null;)ie=Se,Se=ue;for(;;){if(Se===e)break t;if(ie===s&&++ne===h&&(O=j),ie===g&&++ve===l&&(I=j),(ue=Se.nextSibling)!==null)break;Se=ie,ie=Se.parentNode}Se=ue}s=O===-1||I===-1?null:{start:O,end:I}}else s=null}s=s||{start:0,end:0}}else s=null;for(rf={focusedElem:e,selectionRange:s},Jl=!1,yn=n;yn!==null;)if(n=yn,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,yn=e;else for(;yn!==null;){switch(n=yn,g=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,s=n,h=g.memoizedProps,g=g.memoizedState,l=s.stateNode;try{var nt=Za(s.type,h,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(nt,g),l.__reactInternalSnapshotBeforeUpdate=e}catch(Qe){It(s,s.return,Qe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)of(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":of(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,yn=e;break}yn=n.return}}function Ug(e,n,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ha(e,s),l&4&&Qs(5,s);break;case 1:if(ha(e,s),l&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(j){It(s,s.return,j)}else{var h=Za(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(j){It(s,s.return,j)}}l&64&&Cg(s),l&512&&Zs(s,s.return);break;case 3:if(ha(e,s),l&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{vp(e,n)}catch(j){It(s,s.return,j)}}break;case 27:n===null&&l&4&&kg(s);case 26:case 5:ha(e,s),n===null&&l&4&&Og(s),l&512&&Zs(s,s.return);break;case 12:ha(e,s);break;case 13:ha(e,s),l&4&&Pg(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=C_.bind(null,s),K_(e,s))));break;case 22:if(l=s.memoizedState!==null||Yr,!l){n=n!==null&&n.memoizedState!==null||rn,h=Yr;var g=rn;Yr=l,(rn=n)&&!g?ma(e,s,(s.subtreeFlags&8772)!==0):ha(e,s),Yr=h,rn=g}break;case 30:break;default:ha(e,s)}}function zg(e){var n=e.alternate;n!==null&&(e.alternate=null,zg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$e(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Un=!1;function Kr(e,n,s){for(s=s.child;s!==null;)Bg(e,n,s),s=s.sibling}function Bg(e,n,s){if(T&&typeof T.onCommitFiberUnmount=="function")try{T.onCommitFiberUnmount(Ue,s)}catch{}switch(s.tag){case 26:rn||Sr(s,n),Kr(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:rn||Sr(s,n);var l=Wt,h=Un;ba(s.type)&&(Wt=s.stateNode,Un=!1),Kr(e,n,s),oo(s.stateNode),Wt=l,Un=h;break;case 5:rn||Sr(s,n);case 6:if(l=Wt,h=Un,Wt=null,Kr(e,n,s),Wt=l,Un=h,Wt!==null)if(Un)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(s.stateNode)}catch(g){It(s,n,g)}else try{Wt.removeChild(s.stateNode)}catch(g){It(s,n,g)}break;case 18:Wt!==null&&(Un?(e=Wt,j0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),go(e)):j0(Wt,s.stateNode));break;case 4:l=Wt,h=Un,Wt=s.stateNode.containerInfo,Un=!0,Kr(e,n,s),Wt=l,Un=h;break;case 0:case 11:case 14:case 15:rn||fa(2,s,n),rn||fa(4,s,n),Kr(e,n,s);break;case 1:rn||(Sr(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Mg(s,n,l)),Kr(e,n,s);break;case 21:Kr(e,n,s);break;case 22:rn=(l=rn)||s.memoizedState!==null,Kr(e,n,s),rn=l;break;default:Kr(e,n,s)}}function Pg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{go(e)}catch(s){It(n,n.return,s)}}function __(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Lg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Lg),n;default:throw Error(i(435,e.tag))}}function Dd(e,n){var s=__(e);n.forEach(function(l){var h=M_.bind(null,e,l);s.has(l)||(s.add(l),l.then(h,h))})}function Vn(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],g=e,j=n,O=j;e:for(;O!==null;){switch(O.tag){case 27:if(ba(O.type)){Wt=O.stateNode,Un=!1;break e}break;case 5:Wt=O.stateNode,Un=!1;break e;case 3:case 4:Wt=O.stateNode.containerInfo,Un=!0;break e}O=O.return}if(Wt===null)throw Error(i(160));Bg(g,j,h),Wt=null,Un=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)$g(n,e),n=n.sibling}var mr=null;function $g(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vn(n,e),Yn(e),l&4&&(fa(3,e,e.return),Qs(3,e),fa(5,e,e.return));break;case 1:Vn(n,e),Yn(e),l&512&&(rn||s===null||Sr(s,s.return)),l&64&&Yr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=mr;if(Vn(n,e),Yn(e),l&512&&(rn||s===null||Sr(s,s.return)),l&4){var g=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Pe]||g[B]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(l),h.head.insertBefore(g,h.querySelector("head > title"))),An(g,l,s),g[B]=e,gt(g),l=g;break e;case"link":var j=k0("link","href",h).get(l+(s.href||""));if(j){for(var O=0;O<j.length;O++)if(g=j[O],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){j.splice(O,1);break t}}g=h.createElement(l),An(g,l,s),h.head.appendChild(g);break;case"meta":if(j=k0("meta","content",h).get(l+(s.content||""))){for(O=0;O<j.length;O++)if(g=j[O],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){j.splice(O,1);break t}}g=h.createElement(l),An(g,l,s),h.head.appendChild(g);break;default:throw Error(i(468,l))}g[B]=e,gt(g),l=g}e.stateNode=l}else L0(h,e.type,e.stateNode);else e.stateNode=D0(h,l,e.memoizedProps);else g!==l?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,l===null?L0(h,e.type,e.stateNode):D0(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Td(e,e.memoizedProps,s.memoizedProps)}break;case 27:Vn(n,e),Yn(e),l&512&&(rn||s===null||Sr(s,s.return)),s!==null&&l&4&&Td(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Vn(n,e),Yn(e),l&512&&(rn||s===null||Sr(s,s.return)),e.flags&32){h=e.stateNode;try{bi(h,"")}catch(ue){It(e,e.return,ue)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Td(e,h,s!==null?s.memoizedProps:h)),l&1024&&(Od=!0);break;case 6:if(Vn(n,e),Yn(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(ue){It(e,e.return,ue)}}break;case 3:if(Xl=null,h=mr,mr=Kl(n.containerInfo),Vn(n,e),mr=h,Yn(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{go(n.containerInfo)}catch(ue){It(e,e.return,ue)}Od&&(Od=!1,Ig(e));break;case 4:l=mr,mr=Kl(e.stateNode.containerInfo),Vn(n,e),Yn(e),mr=l;break;case 12:Vn(n,e),Yn(e);break;case 13:Vn(n,e),Yn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pd=qe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Dd(e,l)));break;case 22:h=e.memoizedState!==null;var I=s!==null&&s.memoizedState!==null,ne=Yr,ve=rn;if(Yr=ne||h,rn=ve||I,Vn(n,e),rn=ve,Yr=ne,Yn(e),l&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(s===null||I||Yr||rn||Ja(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){I=s=n;try{if(g=I.stateNode,h)j=g.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{O=I.stateNode;var Se=I.memoizedProps.style,ie=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;O.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(ue){It(I,I.return,ue)}}}else if(n.tag===6){if(s===null){I=n;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(ue){It(I,I.return,ue)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Dd(e,s))));break;case 19:Vn(n,e),Yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Dd(e,l)));break;case 30:break;case 21:break;default:Vn(n,e),Yn(e)}}function Yn(e){var n=e.flags;if(n&2){try{for(var s,l=e.return;l!==null;){if(Dg(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var h=s.stateNode,g=Cd(e);Ll(e,g,h);break;case 5:var j=s.stateNode;s.flags&32&&(bi(j,""),s.flags&=-33);var O=Cd(e);Ll(e,O,j);break;case 3:case 4:var I=s.stateNode.containerInfo,ne=Cd(e);Md(e,ne,I);break;default:throw Error(i(161))}}catch(ve){It(e,e.return,ve)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ig(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ig(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ha(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ug(e,n.alternate,n),n=n.sibling}function Ja(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:fa(4,n,n.return),Ja(n);break;case 1:Sr(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Mg(n,n.return,s),Ja(n);break;case 27:oo(n.stateNode);case 26:case 5:Sr(n,n.return),Ja(n);break;case 22:n.memoizedState===null&&Ja(n);break;case 30:Ja(n);break;default:Ja(n)}e=e.sibling}}function ma(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,g=n,j=g.flags;switch(g.tag){case 0:case 11:case 15:ma(h,g,s),Qs(4,g);break;case 1:if(ma(h,g,s),l=g,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(ne){It(l,l.return,ne)}if(l=g,h=l.updateQueue,h!==null){var O=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)gp(I[h],O)}catch(ne){It(l,l.return,ne)}}s&&j&64&&Cg(g),Zs(g,g.return);break;case 27:kg(g);case 26:case 5:ma(h,g,s),s&&l===null&&j&4&&Og(g),Zs(g,g.return);break;case 12:ma(h,g,s);break;case 13:ma(h,g,s),s&&j&4&&Pg(h,g);break;case 22:g.memoizedState===null&&ma(h,g,s),Zs(g,g.return);break;case 30:break;default:ma(h,g,s)}n=n.sibling}}function kd(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&zs(s))}function Ld(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&zs(e))}function Er(e,n,s,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Fg(e,n,s,l),n=n.sibling}function Fg(e,n,s,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Er(e,n,s,l),h&2048&&Qs(9,n);break;case 1:Er(e,n,s,l);break;case 3:Er(e,n,s,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&zs(e)));break;case 12:if(h&2048){Er(e,n,s,l),e=n.stateNode;try{var g=n.memoizedProps,j=g.id,O=g.onPostCommit;typeof O=="function"&&O(j,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){It(n,n.return,I)}}else Er(e,n,s,l);break;case 13:Er(e,n,s,l);break;case 23:break;case 22:g=n.stateNode,j=n.alternate,n.memoizedState!==null?g._visibility&2?Er(e,n,s,l):Js(e,n):g._visibility&2?Er(e,n,s,l):(g._visibility|=2,Pi(e,n,s,l,(n.subtreeFlags&10256)!==0)),h&2048&&kd(j,n);break;case 24:Er(e,n,s,l),h&2048&&Ld(n.alternate,n);break;default:Er(e,n,s,l)}}function Pi(e,n,s,l,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var g=e,j=n,O=s,I=l,ne=j.flags;switch(j.tag){case 0:case 11:case 15:Pi(g,j,O,I,h),Qs(8,j);break;case 23:break;case 22:var ve=j.stateNode;j.memoizedState!==null?ve._visibility&2?Pi(g,j,O,I,h):Js(g,j):(ve._visibility|=2,Pi(g,j,O,I,h)),h&&ne&2048&&kd(j.alternate,j);break;case 24:Pi(g,j,O,I,h),h&&ne&2048&&Ld(j.alternate,j);break;default:Pi(g,j,O,I,h)}n=n.sibling}}function Js(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,l=n,h=l.flags;switch(l.tag){case 22:Js(s,l),h&2048&&kd(l.alternate,l);break;case 24:Js(s,l),h&2048&&Ld(l.alternate,l);break;default:Js(s,l)}n=n.sibling}}var eo=8192;function $i(e){if(e.subtreeFlags&eo)for(e=e.child;e!==null;)Hg(e),e=e.sibling}function Hg(e){switch(e.tag){case 26:$i(e),e.flags&eo&&e.memoizedState!==null&&o1(mr,e.memoizedState,e.memoizedProps);break;case 5:$i(e);break;case 3:case 4:var n=mr;mr=Kl(e.stateNode.containerInfo),$i(e),mr=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=eo,eo=16777216,$i(e),eo=n):$i(e));break;default:$i(e)}}function qg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function to(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];yn=l,Vg(l,e)}qg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gg(e),e=e.sibling}function Gg(e){switch(e.tag){case 0:case 11:case 15:to(e),e.flags&2048&&fa(9,e,e.return);break;case 3:to(e);break;case 12:to(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ul(e)):to(e);break;default:to(e)}}function Ul(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];yn=l,Vg(l,e)}qg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:fa(8,n,n.return),Ul(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Ul(n));break;default:Ul(n)}e=e.sibling}}function Vg(e,n){for(;yn!==null;){var s=yn;switch(s.tag){case 0:case 11:case 15:fa(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:zs(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,yn=l;else e:for(s=e;yn!==null;){l=yn;var h=l.sibling,g=l.return;if(zg(l),l===s){yn=null;break e}if(h!==null){h.return=g,yn=h;break e}yn=g}}}var S_={getCacheForType:function(e){var n=jn(dn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s}},E_=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Ht=null,bt=null,jt=0,Ut=0,Kn=null,pa=!1,Ii=!1,Ud=!1,Wr=0,Jt=0,ga=0,ei=0,zd=0,sr=0,Fi=0,no=null,zn=null,Bd=!1,Pd=0,zl=1/0,Bl=null,va=null,En=0,ya=null,Hi=null,qi=0,$d=0,Id=null,Yg=null,ro=0,Fd=null;function Wn(){if((Lt&2)!==0&&jt!==0)return jt&-jt;if(P.T!==null){var e=Mi;return e!==0?e:Wd()}return Cn()}function Kg(){sr===0&&(sr=(jt&536870912)===0||Ct?un():536870912);var e=ir.current;return e!==null&&(e.flags|=32),sr}function Xn(e,n,s){(e===Ht&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)&&(Gi(e,0),xa(e,jt,sr,!1)),At(e,s),((Lt&2)===0||e!==Ht)&&(e===Ht&&((Lt&2)===0&&(ei|=s),Jt===4&&xa(e,jt,sr,!1)),Ar(e))}function Wg(e,n,s){if((Lt&6)!==0)throw Error(i(327));var l=!s&&(n&124)===0&&(n&e.expiredLanes)===0||dt(e,n),h=l?R_(e,n):Gd(e,n,!0),g=l;do{if(h===0){Ii&&!l&&xa(e,n,0,!1);break}else{if(s=e.current.alternate,g&&!A_(s)){h=Gd(e,n,!1),g=!1;continue}if(h===2){if(g=n,e.errorRecoveryDisabledLanes&g)var j=0;else j=e.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){n=j;e:{var O=e;h=no;var I=O.current.memoizedState.isDehydrated;if(I&&(Gi(O,j).flags|=256),j=Gd(O,j,!1),j!==2){if(Ud&&!I){O.errorRecoveryDisabledLanes|=g,ei|=g,h=4;break e}g=zn,zn=h,g!==null&&(zn===null?zn=g:zn.push.apply(zn,g))}h=j}if(g=!1,h!==2)continue}}if(h===1){Gi(e,0),xa(e,n,0,!0);break}e:{switch(l=e,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:xa(l,n,sr,!pa);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Pd+300-qe(),10<h)){if(xa(l,n,sr,!pa),et(l,0,!0)!==0)break e;l.timeoutHandle=E0(Xg.bind(null,l,s,zn,Bl,Bd,n,sr,ei,Fi,pa,g,2,-0,0),h);break e}Xg(l,s,zn,Bl,Bd,n,sr,ei,Fi,pa,g,0,-0,0)}}break}while(!0);Ar(e)}function Xg(e,n,s,l,h,g,j,O,I,ne,ve,Se,ie,ue){if(e.timeoutHandle=-1,Se=n.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(uo={stylesheets:null,count:0,unsuspend:s1},Hg(n),Se=l1(),Se!==null)){e.cancelPendingCommit=Se(r0.bind(null,e,n,g,s,l,h,j,O,I,ve,1,ie,ue)),xa(e,g,j,!ne);return}r0(e,n,g,s,l,h,j,O,I)}function A_(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],g=h.getSnapshot;h=h.value;try{if(!qn(g(),h))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xa(e,n,s,l){n&=~zd,n&=~ei,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var g=31-_(h),j=1<<g;l[g]=-1,h&=~j}s!==0&&Ie(e,s,n)}function Pl(){return(Lt&6)===0?(ao(0),!1):!0}function Hd(){if(bt!==null){if(Ut===0)var e=bt.return;else e=bt,Ir=Ka=null,sd(e),zi=null,Ks=0,e=bt;for(;e!==null;)Tg(e.alternate,e),e=e.return;bt=null}}function Gi(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,H_(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Hd(),Ht=e,bt=s=Br(e.current,null),jt=n,Ut=0,Kn=null,pa=!1,Ii=dt(e,n),Ud=!1,Fi=sr=zd=ei=ga=Jt=0,zn=no=null,Bd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-_(l),g=1<<h;n|=e[h],l&=~g}return Wr=n,ol(),s}function Qg(e,n){pt=null,P.H=jl,n===Ps||n===gl?(n=mp(),Ut=3):n===dp?(n=mp(),Ut=4):Ut=n===pg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Kn=n,bt===null&&(Jt=1,Ml(e,tr(n,e.current)))}function Zg(){var e=P.H;return P.H=jl,e===null?jl:e}function Jg(){var e=P.A;return P.A=S_,e}function qd(){Jt=4,pa||(jt&4194048)!==jt&&ir.current!==null||(Ii=!0),(ga&134217727)===0&&(ei&134217727)===0||Ht===null||xa(Ht,jt,sr,!1)}function Gd(e,n,s){var l=Lt;Lt|=2;var h=Zg(),g=Jg();(Ht!==e||jt!==n)&&(Bl=null,Gi(e,n)),n=!1;var j=Jt;e:do try{if(Ut!==0&&bt!==null){var O=bt,I=Kn;switch(Ut){case 8:Hd(),j=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(n=!0);var ne=Ut;if(Ut=0,Kn=null,Vi(e,O,I,ne),s&&Ii){j=0;break e}break;default:ne=Ut,Ut=0,Kn=null,Vi(e,O,I,ne)}}j_(),j=Jt;break}catch(ve){Qg(e,ve)}while(!0);return n&&e.shellSuspendCounter++,Ir=Ka=null,Lt=l,P.H=h,P.A=g,bt===null&&(Ht=null,jt=0,ol()),j}function j_(){for(;bt!==null;)e0(bt)}function R_(e,n){var s=Lt;Lt|=2;var l=Zg(),h=Jg();Ht!==e||jt!==n?(Bl=null,zl=qe()+500,Gi(e,n)):Ii=dt(e,n);e:do try{if(Ut!==0&&bt!==null){n=bt;var g=Kn;t:switch(Ut){case 1:Ut=0,Kn=null,Vi(e,n,g,1);break;case 2:case 9:if(fp(g)){Ut=0,Kn=null,t0(n);break}n=function(){Ut!==2&&Ut!==9||Ht!==e||(Ut=7),Ar(e)},g.then(n,n);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:fp(g)?(Ut=0,Kn=null,t0(n)):(Ut=0,Kn=null,Vi(e,n,g,7));break;case 5:var j=null;switch(bt.tag){case 26:j=bt.memoizedState;case 5:case 27:var O=bt;if(!j||U0(j)){Ut=0,Kn=null;var I=O.sibling;if(I!==null)bt=I;else{var ne=O.return;ne!==null?(bt=ne,$l(ne)):bt=null}break t}}Ut=0,Kn=null,Vi(e,n,g,5);break;case 6:Ut=0,Kn=null,Vi(e,n,g,6);break;case 8:Hd(),Jt=6;break e;default:throw Error(i(462))}}N_();break}catch(ve){Qg(e,ve)}while(!0);return Ir=Ka=null,P.H=l,P.A=h,Lt=s,bt!==null?0:(Ht=null,jt=0,ol(),Jt)}function N_(){for(;bt!==null&&!it();)e0(bt)}function e0(e){var n=Rg(e.alternate,e,Wr);e.memoizedProps=e.pendingProps,n===null?$l(e):bt=n}function t0(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=wg(s,n,n.pendingProps,n.type,void 0,jt);break;case 11:n=wg(s,n,n.pendingProps,n.type.render,n.ref,jt);break;case 5:sd(n);default:Tg(s,n),n=bt=np(n,Wr),n=Rg(s,n,Wr)}e.memoizedProps=e.pendingProps,n===null?$l(e):bt=n}function Vi(e,n,s,l){Ir=Ka=null,sd(n),zi=null,Ks=0;var h=n.return;try{if(v_(e,h,n,s,jt)){Jt=1,Ml(e,tr(s,e.current)),bt=null;return}}catch(g){if(h!==null)throw bt=h,g;Jt=1,Ml(e,tr(s,e.current)),bt=null;return}n.flags&32768?(Ct||l===1?e=!0:Ii||(jt&536870912)!==0?e=!1:(pa=e=!0,(l===2||l===9||l===3||l===6)&&(l=ir.current,l!==null&&l.tag===13&&(l.flags|=16384))),n0(n,e)):$l(n)}function $l(e){var n=e;do{if((n.flags&32768)!==0){n0(n,pa);return}e=n.return;var s=x_(n.alternate,n,Wr);if(s!==null){bt=s;return}if(n=n.sibling,n!==null){bt=n;return}bt=n=e}while(n!==null);Jt===0&&(Jt=5)}function n0(e,n){do{var s=b_(e.alternate,e);if(s!==null){s.flags&=32767,bt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){bt=e;return}bt=e=s}while(e!==null);Jt=6,bt=null}function r0(e,n,s,l,h,g,j,O,I){e.cancelPendingCommit=null;do Il();while(En!==0);if((Lt&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(g=n.lanes|n.childLanes,g|=Lu,tn(e,s,g,j,O,I),e===Ht&&(bt=Ht=null,jt=0),Hi=n,ya=e,qi=s,$d=g,Id=h,Yg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,O_(ut,function(){return l0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,h=Z.p,Z.p=2,j=Lt,Lt|=4;try{w_(e,n,s)}finally{Lt=j,Z.p=h,P.T=l}}En=1,a0(),i0(),s0()}}function a0(){if(En===1){En=0;var e=ya,n=Hi,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=P.T,P.T=null;var l=Z.p;Z.p=2;var h=Lt;Lt|=4;try{$g(n,e);var g=rf,j=Vm(e.containerInfo),O=g.focusedElem,I=g.selectionRange;if(j!==O&&O&&O.ownerDocument&&Gm(O.ownerDocument.documentElement,O)){if(I!==null&&Cu(O)){var ne=I.start,ve=I.end;if(ve===void 0&&(ve=ne),"selectionStart"in O)O.selectionStart=ne,O.selectionEnd=Math.min(ve,O.value.length);else{var Se=O.ownerDocument||document,ie=Se&&Se.defaultView||window;if(ie.getSelection){var ue=ie.getSelection(),nt=O.textContent.length,Qe=Math.min(I.start,nt),Pt=I.end===void 0?Qe:Math.min(I.end,nt);!ue.extend&&Qe>Pt&&(j=Pt,Pt=Qe,Qe=j);var Q=qm(O,Qe),V=qm(O,Pt);if(Q&&V&&(ue.rangeCount!==1||ue.anchorNode!==Q.node||ue.anchorOffset!==Q.offset||ue.focusNode!==V.node||ue.focusOffset!==V.offset)){var te=Se.createRange();te.setStart(Q.node,Q.offset),ue.removeAllRanges(),Qe>Pt?(ue.addRange(te),ue.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),ue.addRange(te))}}}}for(Se=[],ue=O;ue=ue.parentNode;)ue.nodeType===1&&Se.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<Se.length;O++){var be=Se[O];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Jl=!!nf,rf=nf=null}finally{Lt=h,Z.p=l,P.T=s}}e.current=n,En=2}}function i0(){if(En===2){En=0;var e=ya,n=Hi,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=P.T,P.T=null;var l=Z.p;Z.p=2;var h=Lt;Lt|=4;try{Ug(e,n.alternate,n)}finally{Lt=h,Z.p=l,P.T=s}}En=3}}function s0(){if(En===4||En===3){En=0,We();var e=ya,n=Hi,s=qi,l=Yg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?En=5:(En=0,Hi=ya=null,o0(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(va=null),Gt(s),n=n.stateNode,T&&typeof T.onCommitFiberRoot=="function")try{T.onCommitFiberRoot(Ue,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=P.T,h=Z.p,Z.p=2,P.T=null;try{for(var g=e.onRecoverableError,j=0;j<l.length;j++){var O=l[j];g(O.value,{componentStack:O.stack})}}finally{P.T=n,Z.p=h}}(qi&3)!==0&&Il(),Ar(e),h=e.pendingLanes,(s&4194090)!==0&&(h&42)!==0?e===Fd?ro++:(ro=0,Fd=e):ro=0,ao(0)}}function o0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,zs(n)))}function Il(e){return a0(),i0(),s0(),l0()}function l0(){if(En!==5)return!1;var e=ya,n=$d;$d=0;var s=Gt(qi),l=P.T,h=Z.p;try{Z.p=32>s?32:s,P.T=null,s=Id,Id=null;var g=ya,j=qi;if(En=0,Hi=ya=null,qi=0,(Lt&6)!==0)throw Error(i(331));var O=Lt;if(Lt|=4,Gg(g.current),Fg(g,g.current,j,s),Lt=O,ao(0,!1),T&&typeof T.onPostCommitFiberRoot=="function")try{T.onPostCommitFiberRoot(Ue,g)}catch{}return!0}finally{Z.p=h,P.T=l,o0(e,n)}}function c0(e,n,s){n=tr(s,n),n=bd(e.stateNode,n,2),e=la(e,n,2),e!==null&&(At(e,2),Ar(e))}function It(e,n,s){if(e.tag===3)c0(e,e,s);else for(;n!==null;){if(n.tag===3){c0(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(va===null||!va.has(l))){e=tr(s,e),s=hg(2),l=la(n,s,2),l!==null&&(mg(s,l,n,e),At(l,2),Ar(l));break}}n=n.return}}function Vd(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new E_;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(s)||(Ud=!0,h.add(s),e=T_.bind(null,e,n,s),n.then(e,e))}function T_(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ht===e&&(jt&s)===s&&(Jt===4||Jt===3&&(jt&62914560)===jt&&300>qe()-Pd?(Lt&2)===0&&Gi(e,0):zd|=s,Fi===jt&&(Fi=0)),Ar(e)}function u0(e,n){n===0&&(n=Tn()),e=Ri(e,n),e!==null&&(At(e,n),Ar(e))}function C_(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),u0(e,s)}function M_(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),u0(e,s)}function O_(e,n){return De(e,n)}var Fl=null,Yi=null,Yd=!1,Hl=!1,Kd=!1,ti=0;function Ar(e){e!==Yi&&e.next===null&&(Yi===null?Fl=Yi=e:Yi=Yi.next=e),Hl=!0,Yd||(Yd=!0,k_())}function ao(e,n){if(!Kd&&Hl){Kd=!0;do for(var s=!1,l=Fl;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var g=0;else{var j=l.suspendedLanes,O=l.pingedLanes;g=(1<<31-_(42|e)+1)-1,g&=h&~(j&~O),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,m0(l,g))}else g=jt,g=et(l,l===Ht?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||dt(l,g)||(s=!0,m0(l,g));l=l.next}while(s);Kd=!1}}function D_(){d0()}function d0(){Hl=Yd=!1;var e=0;ti!==0&&(F_()&&(e=ti),ti=0);for(var n=qe(),s=null,l=Fl;l!==null;){var h=l.next,g=f0(l,n);g===0?(l.next=null,s===null?Fl=h:s.next=h,h===null&&(Yi=s)):(s=l,(e!==0||(g&3)!==0)&&(Hl=!0)),l=h}ao(e)}function f0(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var j=31-_(g),O=1<<j,I=h[j];I===-1?((O&s)===0||(O&l)!==0)&&(h[j]=st(O,n)):I<=n&&(e.expiredLanes|=O),g&=~O}if(n=Ht,s=jt,s=et(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===n&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Oe(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||dt(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(l!==null&&Oe(l),Gt(s)){case 2:case 8:s=lt;break;case 32:s=ut;break;case 268435456:s=Ne;break;default:s=ut}return l=h0.bind(null,e),s=De(s,l),e.callbackPriority=n,e.callbackNode=s,n}return l!==null&&l!==null&&Oe(l),e.callbackPriority=2,e.callbackNode=null,2}function h0(e,n){if(En!==0&&En!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Il()&&e.callbackNode!==s)return null;var l=jt;return l=et(e,e===Ht?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Wg(e,l,n),f0(e,qe()),e.callbackNode!=null&&e.callbackNode===s?h0.bind(null,e):null)}function m0(e,n){if(Il())return null;Wg(e,n,!0)}function k_(){q_(function(){(Lt&6)!==0?De(Le,D_):d0()})}function Wd(){return ti===0&&(ti=un()),ti}function p0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:el(""+e)}function g0(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function L_(e,n,s,l,h){if(n==="submit"&&s&&s.stateNode===h){var g=p0((h[K]||null).action),j=l.submitter;j&&(n=(n=j[K]||null)?p0(n.formAction):j.getAttribute("formAction"),n!==null&&(g=n,j=null));var O=new al("action","action",null,l,h);e.push({event:O,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ti!==0){var I=j?g0(h,j):new FormData(h);pd(s,{pending:!0,data:I,method:h.method,action:g},null,I)}}else typeof g=="function"&&(O.preventDefault(),I=j?g0(h,j):new FormData(h),pd(s,{pending:!0,data:I,method:h.method,action:g},g,I))},currentTarget:h}]})}}for(var Xd=0;Xd<ku.length;Xd++){var Qd=ku[Xd],U_=Qd.toLowerCase(),z_=Qd[0].toUpperCase()+Qd.slice(1);hr(U_,"on"+z_)}hr(Wm,"onAnimationEnd"),hr(Xm,"onAnimationIteration"),hr(Qm,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(e_,"onTransitionRun"),hr(t_,"onTransitionStart"),hr(n_,"onTransitionCancel"),hr(Zm,"onTransitionEnd"),He("onMouseEnter",["mouseout","mouseover"]),He("onMouseLeave",["mouseout","mouseover"]),He("onPointerEnter",["pointerout","pointerover"]),He("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(io));function v0(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],h=l.event;l=l.listeners;e:{var g=void 0;if(n)for(var j=l.length-1;0<=j;j--){var O=l[j],I=O.instance,ne=O.currentTarget;if(O=O.listener,I!==g&&h.isPropagationStopped())break e;g=O,h.currentTarget=ne;try{g(h)}catch(ve){Cl(ve)}h.currentTarget=null,g=I}else for(j=0;j<l.length;j++){if(O=l[j],I=O.instance,ne=O.currentTarget,O=O.listener,I!==g&&h.isPropagationStopped())break e;g=O,h.currentTarget=ne;try{g(h)}catch(ve){Cl(ve)}h.currentTarget=null,g=I}}}}function wt(e,n){var s=n[ye];s===void 0&&(s=n[ye]=new Set);var l=e+"__bubble";s.has(l)||(y0(n,e,2,!1),s.add(l))}function Zd(e,n,s){var l=0;n&&(l|=4),y0(s,e,l,n)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Jd(e){if(!e[ql]){e[ql]=!0,rt.forEach(function(s){s!=="selectionchange"&&(B_.has(s)||Zd(s,!1,e),Zd(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ql]||(n[ql]=!0,Zd("selectionchange",!1,n))}}function y0(e,n,s,l){switch(F0(n)){case 2:var h=d1;break;case 8:h=f1;break;default:h=mf}s=h.bind(null,n,s,e),h=void 0,!wu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,s,{capture:!0,passive:h}):e.addEventListener(n,s,!0):h!==void 0?e.addEventListener(n,s,{passive:h}):e.addEventListener(n,s,!1)}function ef(e,n,s,l,h){var g=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var j=l.tag;if(j===3||j===4){var O=l.stateNode.containerInfo;if(O===h)break;if(j===4)for(j=l.return;j!==null;){var I=j.tag;if((I===3||I===4)&&j.stateNode.containerInfo===h)return;j=j.return}for(;O!==null;){if(j=ze(O),j===null)return;if(I=j.tag,I===5||I===6||I===26||I===27){l=g=j;continue e}O=O.parentNode}}l=l.return}Am(function(){var ne=g,ve=xu(s),Se=[];e:{var ie=Jm.get(e);if(ie!==void 0){var ue=al,nt=e;switch(e){case"keypress":if(nl(s)===0)break e;case"keydown":case"keyup":ue=Ow;break;case"focusin":nt="focus",ue=Au;break;case"focusout":nt="blur",ue=Au;break;case"beforeblur":case"afterblur":ue=Au;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Lw;break;case Wm:case Xm:case Qm:ue=Sw;break;case Zm:ue=zw;break;case"scroll":case"scrollend":ue=yw;break;case"wheel":ue=Pw;break;case"copy":case"cut":case"paste":ue=Aw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Cm;break;case"toggle":case"beforetoggle":ue=Iw}var Qe=(n&4)!==0,Pt=!Qe&&(e==="scroll"||e==="scrollend"),Q=Qe?ie!==null?ie+"Capture":null:ie;Qe=[];for(var V=ne,te;V!==null;){var be=V;if(te=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||te===null||Q===null||(be=Es(V,Q),be!=null&&Qe.push(so(V,be,te))),Pt)break;V=V.return}0<Qe.length&&(ie=new ue(ie,nt,null,s,ve),Se.push({event:ie,listeners:Qe}))}}if((n&7)===0){e:{if(ie=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",ie&&s!==yu&&(nt=s.relatedTarget||s.fromElement)&&(ze(nt)||nt[X]))break e;if((ue||ie)&&(ie=ve.window===ve?ve:(ie=ve.ownerDocument)?ie.defaultView||ie.parentWindow:window,ue?(nt=s.relatedTarget||s.toElement,ue=ne,nt=nt?ze(nt):null,nt!==null&&(Pt=c(nt),Qe=nt.tag,nt!==Pt||Qe!==5&&Qe!==27&&Qe!==6)&&(nt=null)):(ue=null,nt=ne),ue!==nt)){if(Qe=Nm,be="onMouseLeave",Q="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Qe=Cm,be="onPointerLeave",Q="onPointerEnter",V="pointer"),Pt=ue==null?ie:St(ue),te=nt==null?ie:St(nt),ie=new Qe(be,V+"leave",ue,s,ve),ie.target=Pt,ie.relatedTarget=te,be=null,ze(ve)===ne&&(Qe=new Qe(Q,V+"enter",nt,s,ve),Qe.target=te,Qe.relatedTarget=Pt,be=Qe),Pt=be,ue&&nt)t:{for(Qe=ue,Q=nt,V=0,te=Qe;te;te=Ki(te))V++;for(te=0,be=Q;be;be=Ki(be))te++;for(;0<V-te;)Qe=Ki(Qe),V--;for(;0<te-V;)Q=Ki(Q),te--;for(;V--;){if(Qe===Q||Q!==null&&Qe===Q.alternate)break t;Qe=Ki(Qe),Q=Ki(Q)}Qe=null}else Qe=null;ue!==null&&x0(Se,ie,ue,Qe,!1),nt!==null&&Pt!==null&&x0(Se,Pt,nt,Qe,!0)}}e:{if(ie=ne?St(ne):window,ue=ie.nodeName&&ie.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ie.type==="file")var Fe=Bm;else if(Um(ie))if(Pm)Fe=Qw;else{Fe=Ww;var vt=Kw}else ue=ie.nodeName,!ue||ue.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&vu(ne.elementType)&&(Fe=Bm):Fe=Xw;if(Fe&&(Fe=Fe(e,ne))){zm(Se,Fe,s,ve);break e}vt&&vt(e,ie,ne),e==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&gu(ie,"number",ie.value)}switch(vt=ne?St(ne):window,e){case"focusin":(Um(vt)||vt.contentEditable==="true")&&(Ei=vt,Mu=ne,Os=null);break;case"focusout":Os=Mu=Ei=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Ym(Se,s,ve);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":Ym(Se,s,ve)}var Ye;if(Ru)e:{switch(e){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Si?km(e,s)&&(Je="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Je="onCompositionStart");Je&&(Mm&&s.locale!=="ko"&&(Si||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Si&&(Ye=jm()):(aa=ve,_u="value"in aa?aa.value:aa.textContent,Si=!0)),vt=Gl(ne,Je),0<vt.length&&(Je=new Tm(Je,e,null,s,ve),Se.push({event:Je,listeners:vt}),Ye?Je.data=Ye:(Ye=Lm(s),Ye!==null&&(Je.data=Ye)))),(Ye=Hw?qw(e,s):Gw(e,s))&&(Je=Gl(ne,"onBeforeInput"),0<Je.length&&(vt=new Tm("onBeforeInput","beforeinput",null,s,ve),Se.push({event:vt,listeners:Je}),vt.data=Ye)),L_(Se,e,ne,s,ve)}v0(Se,n)})}function so(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Gl(e,n){for(var s=n+"Capture",l=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Es(e,s),h!=null&&l.unshift(so(e,h,g)),h=Es(e,n),h!=null&&l.push(so(e,h,g))),e.tag===3)return l;e=e.return}return[]}function Ki(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function x0(e,n,s,l,h){for(var g=n._reactName,j=[];s!==null&&s!==l;){var O=s,I=O.alternate,ne=O.stateNode;if(O=O.tag,I!==null&&I===l)break;O!==5&&O!==26&&O!==27||ne===null||(I=ne,h?(ne=Es(s,g),ne!=null&&j.unshift(so(s,ne,I))):h||(ne=Es(s,g),ne!=null&&j.push(so(s,ne,I)))),s=s.return}j.length!==0&&e.push({event:n,listeners:j})}var P_=/\r\n?/g,$_=/\u0000|\uFFFD/g;function b0(e){return(typeof e=="string"?e:""+e).replace(P_,`
`).replace($_,"")}function w0(e,n){return n=b0(n),b0(e)===n}function Vl(){}function Bt(e,n,s,l,h,g){switch(s){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||bi(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&bi(e,""+l);break;case"className":pn(e,"class",l);break;case"tabIndex":pn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pn(e,s,l);break;case"style":Sm(e,l,g);break;case"data":if(n!=="object"){pn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=el(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(n!=="input"&&Bt(e,n,"name",h.name,h,null),Bt(e,n,"formEncType",h.formEncType,h,null),Bt(e,n,"formMethod",h.formMethod,h,null),Bt(e,n,"formTarget",h.formTarget,h,null)):(Bt(e,n,"encType",h.encType,h,null),Bt(e,n,"method",h.method,h,null),Bt(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=el(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Vl);break;case"onScroll":l!=null&&wt("scroll",e);break;case"onScrollEnd":l!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=el(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":wt("beforetoggle",e),wt("toggle",e),Ot(e,"popover",l);break;case"xlinkActuate":Kt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ot(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=gw.get(s)||s,Ot(e,s,l))}}function tf(e,n,s,l,h,g){switch(s){case"style":Sm(e,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof l=="string"?bi(e,l):(typeof l=="number"||typeof l=="bigint")&&bi(e,""+l);break;case"onScroll":l!=null&&wt("scroll",e);break;case"onScrollEnd":l!=null&&wt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xt.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),n=s.slice(2,h?s.length-7:void 0),g=e[K]||null,g=g!=null?g[s]:null,typeof g=="function"&&e.removeEventListener(n,g,h),typeof l=="function")){typeof g!="function"&&g!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,l,h);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Ot(e,s,l)}}}function An(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var l=!1,h=!1,g;for(g in s)if(s.hasOwnProperty(g)){var j=s[g];if(j!=null)switch(g){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Bt(e,n,g,j,s,null)}}h&&Bt(e,n,"srcSet",s.srcSet,s,null),l&&Bt(e,n,"src",s.src,s,null);return;case"input":wt("invalid",e);var O=g=j=h=null,I=null,ne=null;for(l in s)if(s.hasOwnProperty(l)){var ve=s[l];if(ve!=null)switch(l){case"name":h=ve;break;case"type":j=ve;break;case"checked":I=ve;break;case"defaultChecked":ne=ve;break;case"value":g=ve;break;case"defaultValue":O=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,n));break;default:Bt(e,n,l,ve,s,null)}}xm(e,g,O,I,ne,j,h,!1),Pa(e);return;case"select":wt("invalid",e),l=j=g=null;for(h in s)if(s.hasOwnProperty(h)&&(O=s[h],O!=null))switch(h){case"value":g=O;break;case"defaultValue":j=O;break;case"multiple":l=O;default:Bt(e,n,h,O,s,null)}n=g,s=j,e.multiple=!!l,n!=null?xi(e,!!l,n,!1):s!=null&&xi(e,!!l,s,!0);return;case"textarea":wt("invalid",e),g=h=l=null;for(j in s)if(s.hasOwnProperty(j)&&(O=s[j],O!=null))switch(j){case"value":l=O;break;case"defaultValue":h=O;break;case"children":g=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Bt(e,n,j,O,s,null)}wm(e,l,h,g),Pa(e);return;case"option":for(I in s)if(s.hasOwnProperty(I)&&(l=s[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Bt(e,n,I,l,s,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(l=0;l<io.length;l++)wt(io[l],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in s)if(s.hasOwnProperty(ne)&&(l=s[ne],l!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Bt(e,n,ne,l,s,null)}return;default:if(vu(n)){for(ve in s)s.hasOwnProperty(ve)&&(l=s[ve],l!==void 0&&tf(e,n,ve,l,s,void 0));return}}for(O in s)s.hasOwnProperty(O)&&(l=s[O],l!=null&&Bt(e,n,O,l,s,null))}function I_(e,n,s,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,j=null,O=null,I=null,ne=null,ve=null;for(ue in s){var Se=s[ue];if(s.hasOwnProperty(ue)&&Se!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":I=Se;default:l.hasOwnProperty(ue)||Bt(e,n,ue,null,l,Se)}}for(var ie in l){var ue=l[ie];if(Se=s[ie],l.hasOwnProperty(ie)&&(ue!=null||Se!=null))switch(ie){case"type":g=ue;break;case"name":h=ue;break;case"checked":ne=ue;break;case"defaultChecked":ve=ue;break;case"value":j=ue;break;case"defaultValue":O=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,n));break;default:ue!==Se&&Bt(e,n,ie,ue,l,Se)}}pu(e,j,O,I,ne,ve,g,h);return;case"select":ue=j=O=ie=null;for(g in s)if(I=s[g],s.hasOwnProperty(g)&&I!=null)switch(g){case"value":break;case"multiple":ue=I;default:l.hasOwnProperty(g)||Bt(e,n,g,null,l,I)}for(h in l)if(g=l[h],I=s[h],l.hasOwnProperty(h)&&(g!=null||I!=null))switch(h){case"value":ie=g;break;case"defaultValue":O=g;break;case"multiple":j=g;default:g!==I&&Bt(e,n,h,g,l,I)}n=O,s=j,l=ue,ie!=null?xi(e,!!s,ie,!1):!!l!=!!s&&(n!=null?xi(e,!!s,n,!0):xi(e,!!s,s?[]:"",!1));return;case"textarea":ue=ie=null;for(O in s)if(h=s[O],s.hasOwnProperty(O)&&h!=null&&!l.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Bt(e,n,O,null,l,h)}for(j in l)if(h=l[j],g=s[j],l.hasOwnProperty(j)&&(h!=null||g!=null))switch(j){case"value":ie=h;break;case"defaultValue":ue=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&Bt(e,n,j,h,l,g)}bm(e,ie,ue);return;case"option":for(var nt in s)if(ie=s[nt],s.hasOwnProperty(nt)&&ie!=null&&!l.hasOwnProperty(nt))switch(nt){case"selected":e.selected=!1;break;default:Bt(e,n,nt,null,l,ie)}for(I in l)if(ie=l[I],ue=s[I],l.hasOwnProperty(I)&&ie!==ue&&(ie!=null||ue!=null))switch(I){case"selected":e.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:Bt(e,n,I,ie,l,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in s)ie=s[Qe],s.hasOwnProperty(Qe)&&ie!=null&&!l.hasOwnProperty(Qe)&&Bt(e,n,Qe,null,l,ie);for(ne in l)if(ie=l[ne],ue=s[ne],l.hasOwnProperty(ne)&&ie!==ue&&(ie!=null||ue!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,n));break;default:Bt(e,n,ne,ie,l,ue)}return;default:if(vu(n)){for(var Pt in s)ie=s[Pt],s.hasOwnProperty(Pt)&&ie!==void 0&&!l.hasOwnProperty(Pt)&&tf(e,n,Pt,void 0,l,ie);for(ve in l)ie=l[ve],ue=s[ve],!l.hasOwnProperty(ve)||ie===ue||ie===void 0&&ue===void 0||tf(e,n,ve,ie,l,ue);return}}for(var Q in s)ie=s[Q],s.hasOwnProperty(Q)&&ie!=null&&!l.hasOwnProperty(Q)&&Bt(e,n,Q,null,l,ie);for(Se in l)ie=l[Se],ue=s[Se],!l.hasOwnProperty(Se)||ie===ue||ie==null&&ue==null||Bt(e,n,Se,ie,l,ue)}var nf=null,rf=null;function Yl(e){return e.nodeType===9?e:e.ownerDocument}function _0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function af(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var sf=null;function F_(){var e=window.event;return e&&e.type==="popstate"?e===sf?!1:(sf=e,!0):(sf=null,!1)}var E0=typeof setTimeout=="function"?setTimeout:void 0,H_=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,q_=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(e){return A0.resolve(null).then(e).catch(G_)}:E0;function G_(e){setTimeout(function(){throw e})}function ba(e){return e==="head"}function j0(e,n){var s=n,l=0,h=0;do{var g=s.nextSibling;if(e.removeChild(s),g&&g.nodeType===8)if(s=g.data,s==="/$"){if(0<l&&8>l){s=l;var j=e.ownerDocument;if(s&1&&oo(j.documentElement),s&2&&oo(j.body),s&4)for(s=j.head,oo(s),j=s.firstChild;j;){var O=j.nextSibling,I=j.nodeName;j[Pe]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&j.rel.toLowerCase()==="stylesheet"||s.removeChild(j),j=O}}if(h===0){e.removeChild(g),go(n);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=g}while(s);go(n)}function of(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":of(s),$e(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function V_(e,n,s,l){for(;e.nodeType===1;){var h=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Pe])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=pr(e.nextSibling),e===null)break}return null}function Y_(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=pr(e.nextSibling),e===null))return null;return e}function lf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function K_(e,n){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")n();else{var l=function(){n(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function pr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var cf=null;function R0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}function N0(e,n,s){switch(n=Yl(s),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function oo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);$e(e)}var or=new Map,T0=new Set;function Kl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xr=Z.d;Z.d={f:W_,r:X_,D:Q_,C:Z_,L:J_,m:e1,X:n1,S:t1,M:r1};function W_(){var e=Xr.f(),n=Pl();return e||n}function X_(e){var n=tt(e);n!==null&&n.tag===5&&n.type==="form"?Wp(n):Xr.r(e)}var Wi=typeof document>"u"?null:document;function C0(e,n,s){var l=Wi;if(l&&typeof n=="string"&&n){var h=er(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),T0.has(h)||(T0.add(h),e={rel:e,crossOrigin:s,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),An(n,"link",e),gt(n),l.head.appendChild(n)))}}function Q_(e){Xr.D(e),C0("dns-prefetch",e,null)}function Z_(e,n){Xr.C(e,n),C0("preconnect",e,n)}function J_(e,n,s){Xr.L(e,n,s);var l=Wi;if(l&&e&&n){var h='link[rel="preload"][as="'+er(n)+'"]';n==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+er(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+er(s.imageSizes)+'"]')):h+='[href="'+er(e)+'"]';var g=h;switch(n){case"style":g=Xi(e);break;case"script":g=Qi(e)}or.has(g)||(e=v({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),or.set(g,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(lo(g))||n==="script"&&l.querySelector(co(g))||(n=l.createElement("link"),An(n,"link",e),gt(n),l.head.appendChild(n)))}}function e1(e,n){Xr.m(e,n);var s=Wi;if(s&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+er(l)+'"][href="'+er(e)+'"]',g=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Qi(e)}if(!or.has(g)&&(e=v({rel:"modulepreload",href:e},n),or.set(g,e),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(co(g)))return}l=s.createElement("link"),An(l,"link",e),gt(l),s.head.appendChild(l)}}}function t1(e,n,s){Xr.S(e,n,s);var l=Wi;if(l&&e){var h=Dt(l).hoistableStyles,g=Xi(e);n=n||"default";var j=h.get(g);if(!j){var O={loading:0,preload:null};if(j=l.querySelector(lo(g)))O.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},s),(s=or.get(g))&&uf(e,s);var I=j=l.createElement("link");gt(I),An(I,"link",e),I._p=new Promise(function(ne,ve){I.onload=ne,I.onerror=ve}),I.addEventListener("load",function(){O.loading|=1}),I.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Wl(j,n,l)}j={type:"stylesheet",instance:j,count:1,state:O},h.set(g,j)}}}function n1(e,n){Xr.X(e,n);var s=Wi;if(s&&e){var l=Dt(s).hoistableScripts,h=Qi(e),g=l.get(h);g||(g=s.querySelector(co(h)),g||(e=v({src:e,async:!0},n),(n=or.get(h))&&df(e,n),g=s.createElement("script"),gt(g),An(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(h,g))}}function r1(e,n){Xr.M(e,n);var s=Wi;if(s&&e){var l=Dt(s).hoistableScripts,h=Qi(e),g=l.get(h);g||(g=s.querySelector(co(h)),g||(e=v({src:e,async:!0,type:"module"},n),(n=or.get(h))&&df(e,n),g=s.createElement("script"),gt(g),An(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(h,g))}}function M0(e,n,s,l){var h=(h=Ee.current)?Kl(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Xi(s.href),s=Dt(h).hoistableStyles,l=s.get(n),l||(l={type:"style",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Xi(s.href);var g=Dt(h).hoistableStyles,j=g.get(e);if(j||(h=h.ownerDocument||h,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,j),(g=h.querySelector(lo(e)))&&!g._p&&(j.instance=g,j.state.loading=5),or.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},or.set(e,s),g||a1(h,e,s,j.state))),n&&l===null)throw Error(i(528,""));return j}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Qi(s),s=Dt(h).hoistableScripts,l=s.get(n),l||(l={type:"script",instance:null,count:0,state:null},s.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Xi(e){return'href="'+er(e)+'"'}function lo(e){return'link[rel="stylesheet"]['+e+"]"}function O0(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function a1(e,n,s,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),An(n,"link",s),gt(n),e.head.appendChild(n))}function Qi(e){return'[src="'+er(e)+'"]'}function co(e){return"script[async]"+e}function D0(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+er(s.href)+'"]');if(l)return n.instance=l,gt(l),l;var h=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),gt(l),An(l,"style",h),Wl(l,s.precedence,e),n.instance=l;case"stylesheet":h=Xi(s.href);var g=e.querySelector(lo(h));if(g)return n.state.loading|=4,n.instance=g,gt(g),g;l=O0(s),(h=or.get(h))&&uf(l,h),g=(e.ownerDocument||e).createElement("link"),gt(g);var j=g;return j._p=new Promise(function(O,I){j.onload=O,j.onerror=I}),An(g,"link",l),n.state.loading|=4,Wl(g,s.precedence,e),n.instance=g;case"script":return g=Qi(s.src),(h=e.querySelector(co(g)))?(n.instance=h,gt(h),h):(l=s,(h=or.get(g))&&(l=v({},s),df(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),gt(h),An(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Wl(l,s.precedence,e));return n.instance}function Wl(e,n,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,g=h,j=0;j<l.length;j++){var O=l[j];if(O.dataset.precedence===n)g=O;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function uf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function df(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Xl=null;function k0(e,n,s){if(Xl===null){var l=new Map,h=Xl=new Map;h.set(s,l)}else h=Xl,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),h=0;h<s.length;h++){var g=s[h];if(!(g[Pe]||g[B]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var j=g.getAttribute(n)||"";j=e+j;var O=l.get(j);O?O.push(g):l.set(j,[g])}}return l}function L0(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function i1(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function U0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var uo=null;function s1(){}function o1(e,n,s){if(uo===null)throw Error(i(475));var l=uo;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=Xi(s.href),g=e.querySelector(lo(h));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Ql.bind(l),e.then(l,l)),n.state.loading|=4,n.instance=g,gt(g);return}g=e.ownerDocument||e,s=O0(s),(h=or.get(h))&&uf(s,h),g=g.createElement("link"),gt(g);var j=g;j._p=new Promise(function(O,I){j.onload=O,j.onerror=I}),An(g,"link",s),n.instance=g}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Ql.bind(l),e.addEventListener("load",n),e.addEventListener("error",n))}}function l1(){if(uo===null)throw Error(i(475));var e=uo;return e.stylesheets&&e.count===0&&ff(e,e.stylesheets),0<e.count?function(n){var s=setTimeout(function(){if(e.stylesheets&&ff(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Ql(){if(this.count--,this.count===0){if(this.stylesheets)ff(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zl=null;function ff(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zl=new Map,n.forEach(c1,e),Zl=null,Ql.call(e))}function c1(e,n){if(!(n.state.loading&4)){var s=Zl.get(e);if(s)var l=s.get(null);else{s=new Map,Zl.set(e,s);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var j=h[g];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(s.set(j.dataset.precedence,j),l=j)}l&&s.set(null,l)}h=n.instance,j=h.getAttribute("data-precedence"),g=s.get(j)||l,g===l&&s.set(null,h),s.set(j,h),this.count++,l=Ql.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var fo={$$typeof:L,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function u1(e,n,s,l,h,g,j,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.hiddenUpdates=Mt(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function z0(e,n,s,l,h,g,j,O,I,ne,ve,Se){return e=new u1(e,n,s,j,O,I,ne,Se),n=1,g===!0&&(n|=24),g=Gn(3,null,null,n),e.current=g,g.stateNode=e,n=Vu(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:l,isDehydrated:s,cache:n},Xu(g),e}function B0(e){return e?(e=Ni,e):Ni}function P0(e,n,s,l,h,g){h=B0(h),l.context===null?l.context=h:l.pendingContext=h,l=oa(n),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=la(e,l,n),s!==null&&(Xn(s,e,n),Is(s,e,n))}function $0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function hf(e,n){$0(e,n),(e=e.alternate)&&$0(e,n)}function I0(e){if(e.tag===13){var n=Ri(e,67108864);n!==null&&Xn(n,e,67108864),hf(e,67108864)}}var Jl=!0;function d1(e,n,s,l){var h=P.T;P.T=null;var g=Z.p;try{Z.p=2,mf(e,n,s,l)}finally{Z.p=g,P.T=h}}function f1(e,n,s,l){var h=P.T;P.T=null;var g=Z.p;try{Z.p=8,mf(e,n,s,l)}finally{Z.p=g,P.T=h}}function mf(e,n,s,l){if(Jl){var h=pf(l);if(h===null)ef(e,n,l,ec,s),H0(e,l);else if(m1(h,e,n,s,l))l.stopPropagation();else if(H0(e,l),n&4&&-1<h1.indexOf(e)){for(;h!==null;){var g=tt(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var j=ot(g.pendingLanes);if(j!==0){var O=g;for(O.pendingLanes|=2,O.entangledLanes|=2;j;){var I=1<<31-_(j);O.entanglements[1]|=I,j&=~I}Ar(g),(Lt&6)===0&&(zl=qe()+500,ao(0))}}break;case 13:O=Ri(g,2),O!==null&&Xn(O,g,2),Pl(),hf(g,2)}if(g=pf(l),g===null&&ef(e,n,l,ec,s),g===h)break;h=g}h!==null&&l.stopPropagation()}else ef(e,n,l,null,s)}}function pf(e){return e=xu(e),gf(e)}var ec=null;function gf(e){if(ec=null,e=ze(e),e!==null){var n=c(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=u(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ec=e,null}function F0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Le:return 2;case lt:return 8;case ut:case Xe:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var vf=!1,wa=null,_a=null,Sa=null,ho=new Map,mo=new Map,Ea=[],h1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H0(e,n){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":ho.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(n.pointerId)}}function po(e,n,s,l,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:g,targetContainers:[h]},n!==null&&(n=tt(n),n!==null&&I0(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function m1(e,n,s,l,h){switch(n){case"focusin":return wa=po(wa,e,n,s,l,h),!0;case"dragenter":return _a=po(_a,e,n,s,l,h),!0;case"mouseover":return Sa=po(Sa,e,n,s,l,h),!0;case"pointerover":var g=h.pointerId;return ho.set(g,po(ho.get(g)||null,e,n,s,l,h)),!0;case"gotpointercapture":return g=h.pointerId,mo.set(g,po(mo.get(g)||null,e,n,s,l,h)),!0}return!1}function q0(e){var n=ze(e.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=u(s),n!==null){e.blockedOn=n,$(e.priority,function(){if(s.tag===13){var l=Wn();l=Nt(l);var h=Ri(s,l);h!==null&&Xn(h,s,l),hf(s,l)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=pf(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);yu=l,s.target.dispatchEvent(l),yu=null}else return n=tt(s),n!==null&&I0(n),e.blockedOn=s,!1;n.shift()}return!0}function G0(e,n,s){tc(e)&&s.delete(n)}function p1(){vf=!1,wa!==null&&tc(wa)&&(wa=null),_a!==null&&tc(_a)&&(_a=null),Sa!==null&&tc(Sa)&&(Sa=null),ho.forEach(G0),mo.forEach(G0)}function nc(e,n){e.blockedOn===n&&(e.blockedOn=null,vf||(vf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,p1)))}var rc=null;function V0(e){rc!==e&&(rc=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){rc===e&&(rc=null);for(var n=0;n<e.length;n+=3){var s=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(gf(l||s)===null)continue;break}var g=tt(s);g!==null&&(e.splice(n,3),n-=3,pd(g,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function go(e){function n(I){return nc(I,e)}wa!==null&&nc(wa,e),_a!==null&&nc(_a,e),Sa!==null&&nc(Sa,e),ho.forEach(n),mo.forEach(n);for(var s=0;s<Ea.length;s++){var l=Ea[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ea.length&&(s=Ea[0],s.blockedOn===null);)q0(s),s.blockedOn===null&&Ea.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],g=s[l+1],j=h[K]||null;if(typeof g=="function")j||V0(s);else if(j){var O=null;if(g&&g.hasAttribute("formAction")){if(h=g,j=g[K]||null)O=j.formAction;else if(gf(h)!==null)continue}else O=j.action;typeof O=="function"?s[l+1]=O:(s.splice(l,3),l-=3),V0(s)}}}function yf(e){this._internalRoot=e}ac.prototype.render=yf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var s=n.current,l=Wn();P0(s,l,e,n,null,null)},ac.prototype.unmount=yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;P0(e.current,2,null,e,null,null),Pl(),n[X]=null}};function ac(e){this._internalRoot=e}ac.prototype.unstable_scheduleHydration=function(e){if(e){var n=Cn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ea.length&&n!==0&&n<Ea[s].priority;s++);Ea.splice(s,0,e),s===0&&q0(e)}};var Y0=r.version;if(Y0!=="19.1.1")throw Error(i(527,Y0,"19.1.1"));Z.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(n),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var g1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Ue=ic.inject(g1),T=ic}catch{}}return yo.createRoot=function(e,n){if(!o(e))throw Error(i(299));var s=!1,l="",h=cg,g=ug,j=dg,O=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(O=n.unstable_transitionCallbacks)),n=z0(e,1,!1,null,null,s,l,h,g,j,O,null),e[X]=n.current,Jd(e),new yf(n)},yo.hydrateRoot=function(e,n,s){if(!o(e))throw Error(i(299));var l=!1,h="",g=cg,j=ug,O=dg,I=null,ne=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(j=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(I=s.unstable_transitionCallbacks),s.formState!==void 0&&(ne=s.formState)),n=z0(e,1,!0,n,s??null,l,h,g,j,O,I,ne),n.context=B0(null),s=n.current,l=Wn(),l=Nt(l),h=oa(l),h.callback=null,la(s,h,l),s=l,n.current.lanes=s,At(n,s),Ar(n),e[X]=n.current,Jd(e),new ac(n)},yo.version="19.1.1",yo}var rv;function R1(){if(rv)return wf.exports;rv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),wf.exports=j1(),wf.exports}var Fo=R1();const N1=Io(Fo);var Qc=$y();const T1=Io(Qc);function C1(t){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}const M1=t=>{switch(t){case"success":return k1;case"info":return U1;case"warning":return L1;case"error":return z1;default:return null}},O1=Array(12).fill(0),D1=({visible:t,className:r})=>Te.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":t},Te.createElement("div",{className:"sonner-spinner"},O1.map((a,i)=>Te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),k1=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),L1=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),U1=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),z1=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),B1=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),P1=()=>{const[t,r]=Te.useState(document.hidden);return Te.useEffect(()=>{const a=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),t};let sh=1;class $1{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{const a=this.subscribers.indexOf(r);this.subscribers.splice(a,1)}),this.publish=r=>{this.subscribers.forEach(a=>a(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var a;const{message:i,...o}=r,c=typeof r?.id=="number"||((a=r.id)==null?void 0:a.length)>0?r.id:sh++,u=this.toasts.find(p=>p.id===c),d=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),u?this.toasts=this.toasts.map(p=>p.id===c?(this.publish({...p,...r,id:c,title:i}),{...p,...r,id:c,dismissible:d,title:i}):p):this.addToast({title:i,...o,dismissible:d,id:c}),c},this.dismiss=r=>(r?(this.dismissedToasts.add(r),requestAnimationFrame(()=>this.subscribers.forEach(a=>a({id:r,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(i=>i({id:a.id,dismiss:!0}))}),r),this.message=(r,a)=>this.create({...a,message:r}),this.error=(r,a)=>this.create({...a,message:r,type:"error"}),this.success=(r,a)=>this.create({...a,type:"success",message:r}),this.info=(r,a)=>this.create({...a,type:"info",message:r}),this.warning=(r,a)=>this.create({...a,type:"warning",message:r}),this.loading=(r,a)=>this.create({...a,type:"loading",message:r}),this.promise=(r,a)=>{if(!a)return;let i;a.loading!==void 0&&(i=this.create({...a,promise:r,type:"loading",message:a.loading,description:typeof a.description!="function"?a.description:void 0}));const o=Promise.resolve(r instanceof Function?r():r);let c=i!==void 0,u;const d=o.then(async m=>{if(u=["resolve",m],Te.isValidElement(m))c=!1,this.create({id:i,type:"default",message:m});else if(F1(m)&&!m.ok){c=!1;const y=typeof a.error=="function"?await a.error(`HTTP error! status: ${m.status}`):a.error,x=typeof a.description=="function"?await a.description(`HTTP error! status: ${m.status}`):a.description,N=typeof y=="object"&&!Te.isValidElement(y)?y:{message:y};this.create({id:i,type:"error",description:x,...N})}else if(m instanceof Error){c=!1;const y=typeof a.error=="function"?await a.error(m):a.error,x=typeof a.description=="function"?await a.description(m):a.description,N=typeof y=="object"&&!Te.isValidElement(y)?y:{message:y};this.create({id:i,type:"error",description:x,...N})}else if(a.success!==void 0){c=!1;const y=typeof a.success=="function"?await a.success(m):a.success,x=typeof a.description=="function"?await a.description(m):a.description,N=typeof y=="object"&&!Te.isValidElement(y)?y:{message:y};this.create({id:i,type:"success",description:x,...N})}}).catch(async m=>{if(u=["reject",m],a.error!==void 0){c=!1;const v=typeof a.error=="function"?await a.error(m):a.error,y=typeof a.description=="function"?await a.description(m):a.description,w=typeof v=="object"&&!Te.isValidElement(v)?v:{message:v};this.create({id:i,type:"error",description:y,...w})}}).finally(()=>{c&&(this.dismiss(i),i=void 0),a.finally==null||a.finally.call(a)}),p=()=>new Promise((m,v)=>d.then(()=>u[0]==="reject"?v(u[1]):m(u[1])).catch(v));return typeof i!="string"&&typeof i!="number"?{unwrap:p}:Object.assign(i,{unwrap:p})},this.custom=(r,a)=>{const i=a?.id||sh++;return this.create({jsx:r(i),id:i,...a}),i},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Pn=new $1,I1=(t,r)=>{const a=r?.id||sh++;return Pn.addToast({title:t,...r,id:a}),a},F1=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",H1=I1,q1=()=>Pn.toasts,G1=()=>Pn.getActiveToasts(),Nn=Object.assign(H1,{success:Pn.success,info:Pn.info,warning:Pn.warning,error:Pn.error,custom:Pn.custom,message:Pn.message,promise:Pn.promise,dismiss:Pn.dismiss,loading:Pn.loading},{getHistory:q1,getToasts:G1});C1("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function sc(t){return t.label!==void 0}const V1=3,Y1="24px",K1="16px",av=4e3,W1=356,X1=14,Q1=45,Z1=200;function jr(...t){return t.filter(Boolean).join(" ")}function J1(t){const[r,a]=t.split("-"),i=[];return r&&i.push(r),a&&i.push(a),i}const eS=t=>{var r,a,i,o,c,u,d,p,m;const{invert:v,toast:y,unstyled:x,interacting:w,setHeights:N,visibleToasts:S,heights:R,index:A,toasts:M,expanded:L,removeToast:F,defaultRichColors:U,closeButton:k,style:Y,cancelButtonStyle:re,actionButtonStyle:me,className:xe="",descriptionClassName:ee="",duration:G,position:H,gap:de,expandByDefault:le,classNames:P,icons:Z,closeButtonAriaLabel:se="Close toast"}=t,[oe,z]=Te.useState(null),[W,pe]=Te.useState(null),[ae,_e]=Te.useState(!1),[Re,Ee]=Te.useState(!1),[ke,Me]=Te.useState(!1),[fe,ce]=Te.useState(!1),[we,je]=Te.useState(!1),[De,Oe]=Te.useState(0),[it,We]=Te.useState(0),qe=Te.useRef(y.duration||G||av),Ge=Te.useRef(null),Le=Te.useRef(null),lt=A===0,ut=A+1<=S,Xe=y.type,Ne=y.dismissible!==!1,Ze=y.className||"",Be=y.descriptionClassName||"",Ue=Te.useMemo(()=>R.findIndex(Ie=>Ie.toastId===y.id)||0,[R,y.id]),T=Te.useMemo(()=>{var Ie;return(Ie=y.closeButton)!=null?Ie:k},[y.closeButton,k]),b=Te.useMemo(()=>y.duration||G||av,[y.duration,G]),_=Te.useRef(0),D=Te.useRef(0),q=Te.useRef(0),J=Te.useRef(null),[he,Ke]=H.split("-"),ot=Te.useMemo(()=>R.reduce((Ie,mt,Nt)=>Nt>=Ue?Ie:Ie+mt.height,0),[R,Ue]),et=P1(),dt=y.invert||v,st=Xe==="loading";D.current=Te.useMemo(()=>Ue*de+ot,[Ue,ot]),Te.useEffect(()=>{qe.current=b},[b]),Te.useEffect(()=>{_e(!0)},[]),Te.useEffect(()=>{const Ie=Le.current;if(Ie){const mt=Ie.getBoundingClientRect().height;return We(mt),N(Nt=>[{toastId:y.id,height:mt,position:y.position},...Nt]),()=>N(Nt=>Nt.filter(Gt=>Gt.toastId!==y.id))}},[N,y.id]),Te.useLayoutEffect(()=>{if(!ae)return;const Ie=Le.current,mt=Ie.style.height;Ie.style.height="auto";const Nt=Ie.getBoundingClientRect().height;Ie.style.height=mt,We(Nt),N(Gt=>Gt.find($=>$.toastId===y.id)?Gt.map($=>$.toastId===y.id?{...$,height:Nt}:$):[{toastId:y.id,height:Nt,position:y.position},...Gt])},[ae,y.title,y.description,N,y.id,y.jsx,y.action,y.cancel]);const un=Te.useCallback(()=>{Ee(!0),Oe(D.current),N(Ie=>Ie.filter(mt=>mt.toastId!==y.id)),setTimeout(()=>{F(y)},Z1)},[y,F,N,D]);Te.useEffect(()=>{if(y.promise&&Xe==="loading"||y.duration===1/0||y.type==="loading")return;let Ie;return L||w||et?(()=>{if(q.current<_.current){const Gt=new Date().getTime()-_.current;qe.current=qe.current-Gt}q.current=new Date().getTime()})():(()=>{qe.current!==1/0&&(_.current=new Date().getTime(),Ie=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),un()},qe.current))})(),()=>clearTimeout(Ie)},[L,w,y,Xe,et,un]),Te.useEffect(()=>{y.delete&&(un(),y.onDismiss==null||y.onDismiss.call(y,y))},[un,y.delete]);function Tn(){var Ie;if(Z?.loading){var mt;return Te.createElement("div",{className:jr(P?.loader,y==null||(mt=y.classNames)==null?void 0:mt.loader,"sonner-loader"),"data-visible":Xe==="loading"},Z.loading)}return Te.createElement(D1,{className:jr(P?.loader,y==null||(Ie=y.classNames)==null?void 0:Ie.loader),visible:Xe==="loading"})}const Mt=y.icon||Z?.[Xe]||M1(Xe);var At,tn;return Te.createElement("li",{tabIndex:0,ref:Le,className:jr(xe,Ze,P?.toast,y==null||(r=y.classNames)==null?void 0:r.toast,P?.default,P?.[Xe],y==null||(a=y.classNames)==null?void 0:a[Xe]),"data-sonner-toast":"","data-rich-colors":(At=y.richColors)!=null?At:U,"data-styled":!(y.jsx||y.unstyled||x),"data-mounted":ae,"data-promise":!!y.promise,"data-swiped":we,"data-removed":Re,"data-visible":ut,"data-y-position":he,"data-x-position":Ke,"data-index":A,"data-front":lt,"data-swiping":ke,"data-dismissible":Ne,"data-type":Xe,"data-invert":dt,"data-swipe-out":fe,"data-swipe-direction":W,"data-expanded":!!(L||le&&ae),"data-testid":y.testId,style:{"--index":A,"--toasts-before":A,"--z-index":M.length-A,"--offset":`${Re?De:D.current}px`,"--initial-height":le?"auto":`${it}px`,...Y,...y.style},onDragEnd:()=>{Me(!1),z(null),J.current=null},onPointerDown:Ie=>{Ie.button!==2&&(st||!Ne||(Ge.current=new Date,Oe(D.current),Ie.target.setPointerCapture(Ie.pointerId),Ie.target.tagName!=="BUTTON"&&(Me(!0),J.current={x:Ie.clientX,y:Ie.clientY})))},onPointerUp:()=>{var Ie,mt,Nt;if(fe||!Ne)return;J.current=null;const Gt=Number(((Ie=Le.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Cn=Number(((mt=Le.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$=new Date().getTime()-((Nt=Ge.current)==null?void 0:Nt.getTime()),C=oe==="x"?Gt:Cn,B=Math.abs(C)/$;if(Math.abs(C)>=Q1||B>.11){Oe(D.current),y.onDismiss==null||y.onDismiss.call(y,y),pe(oe==="x"?Gt>0?"right":"left":Cn>0?"down":"up"),un(),ce(!0);return}else{var K,X;(K=Le.current)==null||K.style.setProperty("--swipe-amount-x","0px"),(X=Le.current)==null||X.style.setProperty("--swipe-amount-y","0px")}je(!1),Me(!1),z(null)},onPointerMove:Ie=>{var mt,Nt,Gt;if(!J.current||!Ne||((mt=window.getSelection())==null?void 0:mt.toString().length)>0)return;const $=Ie.clientY-J.current.y,C=Ie.clientX-J.current.x;var B;const K=(B=t.swipeDirections)!=null?B:J1(H);!oe&&(Math.abs(C)>1||Math.abs($)>1)&&z(Math.abs(C)>Math.abs($)?"x":"y");let X={x:0,y:0};const ye=ge=>1/(1.5+Math.abs(ge)/20);if(oe==="y"){if(K.includes("top")||K.includes("bottom"))if(K.includes("top")&&$<0||K.includes("bottom")&&$>0)X.y=$;else{const ge=$*ye($);X.y=Math.abs(ge)<Math.abs($)?ge:$}}else if(oe==="x"&&(K.includes("left")||K.includes("right")))if(K.includes("left")&&C<0||K.includes("right")&&C>0)X.x=C;else{const ge=C*ye(C);X.x=Math.abs(ge)<Math.abs(C)?ge:C}(Math.abs(X.x)>0||Math.abs(X.y)>0)&&je(!0),(Nt=Le.current)==null||Nt.style.setProperty("--swipe-amount-x",`${X.x}px`),(Gt=Le.current)==null||Gt.style.setProperty("--swipe-amount-y",`${X.y}px`)}},T&&!y.jsx&&Xe!=="loading"?Te.createElement("button",{"aria-label":se,"data-disabled":st,"data-close-button":!0,onClick:st||!Ne?()=>{}:()=>{un(),y.onDismiss==null||y.onDismiss.call(y,y)},className:jr(P?.closeButton,y==null||(i=y.classNames)==null?void 0:i.closeButton)},(tn=Z?.close)!=null?tn:B1):null,(Xe||y.icon||y.promise)&&y.icon!==null&&(Z?.[Xe]!==null||y.icon)?Te.createElement("div",{"data-icon":"",className:jr(P?.icon,y==null||(o=y.classNames)==null?void 0:o.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Tn():null,y.type!=="loading"?Mt:null):null,Te.createElement("div",{"data-content":"",className:jr(P?.content,y==null||(c=y.classNames)==null?void 0:c.content)},Te.createElement("div",{"data-title":"",className:jr(P?.title,y==null||(u=y.classNames)==null?void 0:u.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?Te.createElement("div",{"data-description":"",className:jr(ee,Be,P?.description,y==null||(d=y.classNames)==null?void 0:d.description)},typeof y.description=="function"?y.description():y.description):null),Te.isValidElement(y.cancel)?y.cancel:y.cancel&&sc(y.cancel)?Te.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||re,onClick:Ie=>{sc(y.cancel)&&Ne&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,Ie),un())},className:jr(P?.cancelButton,y==null||(p=y.classNames)==null?void 0:p.cancelButton)},y.cancel.label):null,Te.isValidElement(y.action)?y.action:y.action&&sc(y.action)?Te.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||me,onClick:Ie=>{sc(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,Ie),!Ie.defaultPrevented&&un())},className:jr(P?.actionButton,y==null||(m=y.classNames)==null?void 0:m.actionButton)},y.action.label):null)};function iv(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function tS(t,r){const a={};return[t,r].forEach((i,o)=>{const c=o===1,u=c?"--mobile-offset":"--offset",d=c?K1:Y1;function p(m){["top","right","bottom","left"].forEach(v=>{a[`${u}-${v}`]=typeof m=="number"?`${m}px`:m})}typeof i=="number"||typeof i=="string"?p(i):typeof i=="object"?["top","right","bottom","left"].forEach(m=>{i[m]===void 0?a[`${u}-${m}`]=d:a[`${u}-${m}`]=typeof i[m]=="number"?`${i[m]}px`:i[m]}):p(d)}),a}const nS=Te.forwardRef(function(r,a){const{id:i,invert:o,position:c="bottom-right",hotkey:u=["altKey","KeyT"],expand:d,closeButton:p,className:m,offset:v,mobileOffset:y,theme:x="light",richColors:w,duration:N,style:S,visibleToasts:R=V1,toastOptions:A,dir:M=iv(),gap:L=X1,icons:F,containerAriaLabel:U="Notifications"}=r,[k,Y]=Te.useState([]),re=Te.useMemo(()=>i?k.filter(ae=>ae.toasterId===i):k.filter(ae=>!ae.toasterId),[k,i]),me=Te.useMemo(()=>Array.from(new Set([c].concat(re.filter(ae=>ae.position).map(ae=>ae.position)))),[re,c]),[xe,ee]=Te.useState([]),[G,H]=Te.useState(!1),[de,le]=Te.useState(!1),[P,Z]=Te.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),se=Te.useRef(null),oe=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=Te.useRef(null),W=Te.useRef(!1),pe=Te.useCallback(ae=>{Y(_e=>{var Re;return(Re=_e.find(Ee=>Ee.id===ae.id))!=null&&Re.delete||Pn.dismiss(ae.id),_e.filter(({id:Ee})=>Ee!==ae.id)})},[]);return Te.useEffect(()=>Pn.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{Y(_e=>_e.map(Re=>Re.id===ae.id?{...Re,delete:!0}:Re))});return}setTimeout(()=>{T1.flushSync(()=>{Y(_e=>{const Re=_e.findIndex(Ee=>Ee.id===ae.id);return Re!==-1?[..._e.slice(0,Re),{..._e[Re],...ae},..._e.slice(Re+1)]:[ae,..._e]})})})}),[k]),Te.useEffect(()=>{if(x!=="system"){Z(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z("dark"):Z("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:_e})=>{Z(_e?"dark":"light")})}catch{ae.addListener(({matches:Re})=>{try{Z(Re?"dark":"light")}catch(Ee){console.error(Ee)}})}},[x]),Te.useEffect(()=>{k.length<=1&&H(!1)},[k]),Te.useEffect(()=>{const ae=_e=>{var Re;if(u.every(Me=>_e[Me]||_e.code===Me)){var ke;H(!0),(ke=se.current)==null||ke.focus()}_e.code==="Escape"&&(document.activeElement===se.current||(Re=se.current)!=null&&Re.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[u]),Te.useEffect(()=>{if(se.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,W.current=!1)}},[se.current]),Te.createElement("section",{ref:a,"aria-label":`${U} ${oe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},me.map((ae,_e)=>{var Re;const[Ee,ke]=ae.split("-");return re.length?Te.createElement("ol",{key:ae,dir:M==="auto"?iv():M,tabIndex:-1,ref:se,className:m,"data-sonner-toaster":!0,"data-sonner-theme":P,"data-y-position":Ee,"data-x-position":ke,style:{"--front-toast-height":`${((Re=xe[0])==null?void 0:Re.height)||0}px`,"--width":`${W1}px`,"--gap":`${L}px`,...S,...tS(v,y)},onBlur:Me=>{W.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(W.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||W.current||(W.current=!0,z.current=Me.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{de||H(!1)},onDragEnd:()=>H(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||le(!0)},onPointerUp:()=>le(!1)},re.filter(Me=>!Me.position&&_e===0||Me.position===ae).map((Me,fe)=>{var ce,we;return Te.createElement(eS,{key:Me.id,icons:F,index:fe,toast:Me,defaultRichColors:w,duration:(ce=A?.duration)!=null?ce:N,className:A?.className,descriptionClassName:A?.descriptionClassName,invert:o,visibleToasts:R,closeButton:(we=A?.closeButton)!=null?we:p,interacting:de,position:ae,style:A?.style,unstyled:A?.unstyled,classNames:A?.classNames,cancelButtonStyle:A?.cancelButtonStyle,actionButtonStyle:A?.actionButtonStyle,closeButtonAriaLabel:A?.closeButtonAriaLabel,removeToast:pe,toasts:re.filter(je=>je.position==Me.position),heights:xe.filter(je=>je.position==Me.position),setHeights:ee,expandByDefault:d,gap:L,expanded:G,swipeDirections:r.swipeDirections})})):null}))});/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Iy=t=>{throw TypeError(t)},rS=(t,r,a)=>r.has(t)||Iy("Cannot "+a),Af=(t,r,a)=>(rS(t,r,"read from private field"),a?a.call(t):r.get(t)),aS=(t,r,a)=>r.has(t)?Iy("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,a),sv="popstate";function iS(t={}){function r(o,c){let{pathname:u="/",search:d="",hash:p=""}=na(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Do("",{pathname:u,search:d,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function a(o,c){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let p=o.location.href,m=p.indexOf("#");d=m===-1?p:p.slice(0,m)}return d+"#"+(typeof c=="string"?c:Da(c))}function i(o,c){an(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return oS(r,a,i,t)}function _t(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function an(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function sS(){return Math.random().toString(36).substring(2,10)}function ov(t,r){return{usr:t.state,key:t.key,idx:r}}function Do(t,r,a=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof r=="string"?na(r):r,state:a,key:r&&r.key||i||sS()}}function Da({pathname:t="/",search:r="",hash:a=""}){return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function na(t){let r={};if(t){let a=t.indexOf("#");a>=0&&(r.hash=t.substring(a),t=t.substring(0,a));let i=t.indexOf("?");i>=0&&(r.search=t.substring(i),t=t.substring(0,i)),t&&(r.pathname=t)}return r}function oS(t,r,a,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,u=o.history,d="POP",p=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function y(){d="POP";let R=v(),A=R==null?null:R-m;m=R,p&&p({action:d,location:S.location,delta:A})}function x(R,A){d="PUSH";let M=Do(S.location,R,A);a&&a(M,R),m=v()+1;let L=ov(M,m),F=S.createHref(M);try{u.pushState(L,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;o.location.assign(F)}c&&p&&p({action:d,location:S.location,delta:1})}function w(R,A){d="REPLACE";let M=Do(S.location,R,A);a&&a(M,R),m=v();let L=ov(M,m),F=S.createHref(M);u.replaceState(L,"",F),c&&p&&p({action:d,location:S.location,delta:0})}function N(R){return Fy(R)}let S={get action(){return d},get location(){return t(o,u)},listen(R){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(sv,y),p=R,()=>{o.removeEventListener(sv,y),p=null}},createHref(R){return r(o,R)},createURL:N,encodeLocation(R){let A=N(R);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:w,go(R){return u.go(R)}};return S}function Fy(t,r=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),_t(a,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Da(t);return i=i.replace(/ $/,"%20"),!r&&i.startsWith("//")&&(i=a+i),new URL(i,a)}var jo,lv=class{constructor(t){if(aS(this,jo,new Map),t)for(let[r,a]of t)this.set(r,a)}get(t){if(Af(this,jo).has(t))return Af(this,jo).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,r){Af(this,jo).set(t,r)}};jo=new WeakMap;var lS=new Set(["lazy","caseSensitive","path","id","index","children"]);function cS(t){return lS.has(t)}var uS=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function dS(t){return uS.has(t)}function fS(t){return t.index===!0}function ko(t,r,a=[],i={},o=!1){return t.map((c,u)=>{let d=[...a,String(u)],p=typeof c.id=="string"?c.id:d.join("-");if(_t(c.index!==!0||!c.children,"Cannot specify children on an index route"),_t(o||!i[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),fS(c)){let m={...c,...r(c),id:p};return i[p]=m,m}else{let m={...c,...r(c),id:p,children:void 0};return i[p]=m,c.children&&(m.children=ko(c.children,r,d,i,o)),m}})}function Ta(t,r,a="/"){return Rc(t,r,a,!1)}function Rc(t,r,a,i){let o=typeof r=="string"?na(r):r,c=dr(o.pathname||"/",a);if(c==null)return null;let u=Hy(t);mS(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let m=AS(c);d=SS(u[p],m,i)}return d}function hS(t,r){let{route:a,pathname:i,params:o}=t;return{id:a.id,pathname:i,params:o,data:r[a.id],loaderData:r[a.id],handle:a.handle}}function Hy(t,r=[],a=[],i="",o=!1){let c=(u,d,p=o,m)=>{let v={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&p)return;_t(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let y=Mr([i,v.relativePath]),x=a.concat(v);u.children&&u.children.length>0&&(_t(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Hy(u.children,r,x,y,p)),!(u.path==null&&!u.index)&&r.push({path:y,score:wS(y,u.index),routesMeta:x})};return t.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))c(u,d);else for(let p of qy(u.path))c(u,d,!0,p)}),r}function qy(t){let r=t.split("/");if(r.length===0)return[];let[a,...i]=r,o=a.endsWith("?"),c=a.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let u=qy(i.join("/")),d=[];return d.push(...u.map(p=>p===""?c:[c,p].join("/"))),o&&d.push(...u),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function mS(t){t.sort((r,a)=>r.score!==a.score?a.score-r.score:_S(r.routesMeta.map(i=>i.childrenIndex),a.routesMeta.map(i=>i.childrenIndex)))}var pS=/^:[\w-]+$/,gS=3,vS=2,yS=1,xS=10,bS=-2,cv=t=>t==="*";function wS(t,r){let a=t.split("/"),i=a.length;return a.some(cv)&&(i+=bS),r&&(i+=vS),a.filter(o=>!cv(o)).reduce((o,c)=>o+(pS.test(c)?gS:c===""?yS:xS),i)}function _S(t,r){return t.length===r.length&&t.slice(0,-1).every((i,o)=>i===r[o])?t[t.length-1]-r[r.length-1]:0}function SS(t,r,a=!1){let{routesMeta:i}=t,o={},c="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],m=d===i.length-1,v=c==="/"?r:r.slice(c.length)||"/",y=Uc({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),x=p.route;if(!y&&m&&a&&!i[i.length-1].route.index&&(y=Uc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!y)return null;Object.assign(o,y.params),u.push({params:o,pathname:Mr([c,y.pathname]),pathnameBase:TS(Mr([c,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(c=Mr([c,y.pathnameBase]))}return u}function Uc(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,i]=ES(t.path,t.caseSensitive,t.end),o=r.match(a);if(!o)return null;let c=o[0],u=c.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((m,{paramName:v,isOptional:y},x)=>{if(v==="*"){let N=d[x]||"";u=c.slice(0,c.length-N.length).replace(/(.)\/+$/,"$1")}const w=d[x];return y&&!w?m[v]=void 0:m[v]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:u,pattern:t}}function ES(t,r=!1,a=!0){an(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),i]}function AS(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return an(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),t}}function dr(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,i=t.charAt(a);return i&&i!=="/"?null:t.slice(a)||"/"}function jS({basename:t,pathname:r}){return r==="/"?t:Mr([t,r])}function RS(t,r="/"){let{pathname:a,search:i="",hash:o=""}=typeof t=="string"?na(t):t;return{pathname:a?a.startsWith("/")?a:NS(a,r):r,search:CS(i),hash:MS(o)}}function NS(t,r){let a=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function jf(t,r,a,i){return`Cannot include a '${t}' character in a manually specified \`to.${r}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gy(t){return t.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function Lh(t){let r=Gy(t);return r.map((a,i)=>i===r.length-1?a.pathname:a.pathnameBase)}function Uh(t,r,a,i=!1){let o;typeof t=="string"?o=na(t):(o={...t},_t(!o.pathname||!o.pathname.includes("?"),jf("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),jf("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),jf("#","search","hash",o)));let c=t===""||o.pathname==="",u=c?"/":o.pathname,d;if(u==null)d=a;else{let y=r.length-1;if(!i&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),y-=1;o.pathname=x.join("/")}d=y>=0?r[y]:"/"}let p=RS(o,d),m=u&&u!=="/"&&u.endsWith("/"),v=(c||u===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}var Mr=t=>t.join("/").replace(/\/\/+/g,"/"),TS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,zc=class{constructor(t,r,a,i=!1){this.status=t,this.statusText=r||"",this.internal=i,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Lo(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Vy=["POST","PUT","PATCH","DELETE"],OS=new Set(Vy),DS=["GET",...Vy],kS=new Set(DS),LS=new Set([301,302,303,307,308]),US=new Set([307,308]),Rf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zS={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},BS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zh=t=>BS.test(t),PS=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Yy="remix-router-transitions",Ky=Symbol("ResetLoaderData");function $S(t){const r=t.window?t.window:typeof window<"u"?window:void 0,a=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";_t(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=t.hydrationRouteProperties||[],o=t.mapRouteProperties||PS,c={},u=ko(t.routes,o,void 0,c),d,p=t.basename||"/";p.startsWith("/")||(p=`/${p}`);let m=t.dataStrategy||GS,v={...t.future},y=null,x=new Set,w=null,N=null,S=null,R=t.hydrationData!=null,A=Ta(u,t.history.location,p),M=!1,L=null,F;if(A==null&&!t.patchRoutesOnNavigation){let $=cr(404,{pathname:t.history.location.pathname}),{matches:C,route:B}=oc(u);F=!0,A=C,L={[B.id]:$}}else if(A&&!t.hydrationData&&mt(A,u,t.history.location.pathname).active&&(A=null),A)if(A.some($=>$.route.lazy))F=!1;else if(!A.some($=>Bh($.route)))F=!0;else{let $=t.hydrationData?t.hydrationData.loaderData:null,C=t.hydrationData?t.hydrationData.errors:null;if(C){let B=A.findIndex(K=>C[K.route.id]!==void 0);F=A.slice(0,B+1).every(K=>!lh(K.route,$,C))}else F=A.every(B=>!lh(B.route,$,C))}else{F=!1,A=[];let $=mt(null,u,t.history.location.pathname);$.active&&$.matches&&(M=!0,A=$.matches)}let U,k={historyAction:t.history.action,location:t.history.location,matches:A,initialized:F,navigation:Rf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||L,fetchers:new Map,blockers:new Map},Y="POP",re=!1,me,xe=!1,ee=new Map,G=null,H=!1,de=!1,le=new Set,P=new Map,Z=0,se=-1,oe=new Map,z=new Set,W=new Map,pe=new Map,ae=new Set,_e=new Map,Re,Ee=null;function ke(){if(y=t.history.listen(({action:$,location:C,delta:B})=>{if(Re){Re(),Re=void 0;return}an(_e.size===0||B!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=un({currentLocation:k.location,nextLocation:C,historyAction:$});if(K&&B!=null){let X=new Promise(ye=>{Re=ye});t.history.go(B*-1),st(K,{state:"blocked",location:C,proceed(){st(K,{state:"proceeding",proceed:void 0,reset:void 0,location:C}),X.then(()=>t.history.go(B))},reset(){let ye=new Map(k.blockers);ye.set(K,xo),ce({blockers:ye})}});return}return Oe($,C)}),a){sE(r,ee);let $=()=>oE(r,ee);r.addEventListener("pagehide",$),G=()=>r.removeEventListener("pagehide",$)}return k.initialized||Oe("POP",k.location,{initialHydration:!0}),U}function Me(){y&&y(),G&&G(),x.clear(),me&&me.abort(),k.fetchers.forEach(($,C)=>D(C)),k.blockers.forEach(($,C)=>dt(C))}function fe($){return x.add($),()=>x.delete($)}function ce($,C={}){$.matches&&($.matches=$.matches.map(X=>{let ye=c[X.route.id],ge=X.route;return ge.element!==ye.element||ge.errorElement!==ye.errorElement||ge.hydrateFallbackElement!==ye.hydrateFallbackElement?{...X,route:ye}:X})),k={...k,...$};let B=[],K=[];k.fetchers.forEach((X,ye)=>{X.state==="idle"&&(ae.has(ye)?B.push(ye):K.push(ye))}),ae.forEach(X=>{!k.fetchers.has(X)&&!P.has(X)&&B.push(X)}),[...x].forEach(X=>X(k,{deletedFetchers:B,viewTransitionOpts:C.viewTransitionOpts,flushSync:C.flushSync===!0})),B.forEach(X=>D(X)),K.forEach(X=>k.fetchers.delete(X))}function we($,C,{flushSync:B}={}){let K=k.actionData!=null&&k.navigation.formMethod!=null&&$n(k.navigation.formMethod)&&k.navigation.state==="loading"&&$.state?._isRedirect!==!0,X;C.actionData?Object.keys(C.actionData).length>0?X=C.actionData:X=null:K?X=k.actionData:X=null;let ye=C.loaderData?xv(k.loaderData,C.loaderData,C.matches||[],C.errors):k.loaderData,ge=k.blockers;ge.size>0&&(ge=new Map(ge),ge.forEach(($e,ze)=>ge.set(ze,xo)));let Ae=H?!1:Ie($,C.matches||k.matches),Ce=re===!0||k.navigation.formMethod!=null&&$n(k.navigation.formMethod)&&$.state?._isRedirect!==!0;d&&(u=d,d=void 0),H||Y==="POP"||(Y==="PUSH"?t.history.push($,$.state):Y==="REPLACE"&&t.history.replace($,$.state));let Pe;if(Y==="POP"){let $e=ee.get(k.location.pathname);$e&&$e.has($.pathname)?Pe={currentLocation:k.location,nextLocation:$}:ee.has($.pathname)&&(Pe={currentLocation:$,nextLocation:k.location})}else if(xe){let $e=ee.get(k.location.pathname);$e?$e.add($.pathname):($e=new Set([$.pathname]),ee.set(k.location.pathname,$e)),Pe={currentLocation:k.location,nextLocation:$}}ce({...C,actionData:X,loaderData:ye,historyAction:Y,location:$,initialized:!0,navigation:Rf,revalidation:"idle",restoreScrollPosition:Ae,preventScrollReset:Ce,blockers:ge},{viewTransitionOpts:Pe,flushSync:B===!0}),Y="POP",re=!1,xe=!1,H=!1,de=!1,Ee?.resolve(),Ee=null}async function je($,C){if(typeof $=="number"){t.history.go($);return}let B=oh(k.location,k.matches,p,$,C?.fromRouteId,C?.relative),{path:K,submission:X,error:ye}=uv(!1,B,C),ge=k.location,Ae=Do(k.location,K,C&&C.state);Ae={...Ae,...t.history.encodeLocation(Ae)};let Ce=C&&C.replace!=null?C.replace:void 0,Pe="PUSH";Ce===!0?Pe="REPLACE":Ce===!1||X!=null&&$n(X.formMethod)&&X.formAction===k.location.pathname+k.location.search&&(Pe="REPLACE");let $e=C&&"preventScrollReset"in C?C.preventScrollReset===!0:void 0,ze=(C&&C.flushSync)===!0,tt=un({currentLocation:ge,nextLocation:Ae,historyAction:Pe});if(tt){st(tt,{state:"blocked",location:Ae,proceed(){st(tt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),je($,C)},reset(){let St=new Map(k.blockers);St.set(tt,xo),ce({blockers:St})}});return}await Oe(Pe,Ae,{submission:X,pendingError:ye,preventScrollReset:$e,replace:C&&C.replace,enableViewTransition:C&&C.viewTransition,flushSync:ze})}function De(){Ee||(Ee=lE()),Be(),ce({revalidation:"loading"});let $=Ee.promise;return k.navigation.state==="submitting"?$:k.navigation.state==="idle"?(Oe(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),$):(Oe(Y||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:xe===!0}),$)}async function Oe($,C,B){me&&me.abort(),me=null,Y=$,H=(B&&B.startUninterruptedRevalidation)===!0,tn(k.location,k.matches),re=(B&&B.preventScrollReset)===!0,xe=(B&&B.enableViewTransition)===!0;let K=d||u,X=B&&B.overrideNavigation,ye=B?.initialHydration&&k.matches&&k.matches.length>0&&!M?k.matches:Ta(K,C,p),ge=(B&&B.flushSync)===!0;if(ye&&k.initialized&&!de&&JS(k.location,C)&&!(B&&B.submission&&$n(B.submission.formMethod))){we(C,{matches:ye},{flushSync:ge});return}let Ae=mt(ye,K,C.pathname);if(Ae.active&&Ae.matches&&(ye=Ae.matches),!ye){let{error:gt,notFoundMatches:rt,route:xt}=Tn(C.pathname);we(C,{matches:rt,loaderData:{},errors:{[xt.id]:gt}},{flushSync:ge});return}me=new AbortController;let Ce=ds(t.history,C,me.signal,B&&B.submission),Pe=t.getContext?await t.getContext():new lv,$e;if(B&&B.pendingError)$e=[Ca(ye).route.id,{type:"error",error:B.pendingError}];else if(B&&B.submission&&$n(B.submission.formMethod)){let gt=await it(Ce,C,B.submission,ye,Pe,Ae.active,B&&B.initialHydration===!0,{replace:B.replace,flushSync:ge});if(gt.shortCircuited)return;if(gt.pendingActionResult){let[rt,xt]=gt.pendingActionResult;if(Qn(xt)&&Lo(xt.error)&&xt.error.status===404){me=null,we(C,{matches:gt.matches,loaderData:{},errors:{[rt]:xt.error}});return}}ye=gt.matches||ye,$e=gt.pendingActionResult,X=Nf(C,B.submission),ge=!1,Ae.active=!1,Ce=ds(t.history,Ce.url,Ce.signal)}let{shortCircuited:ze,matches:tt,loaderData:St,errors:Dt}=await We(Ce,C,ye,Pe,Ae.active,X,B&&B.submission,B&&B.fetcherSubmission,B&&B.replace,B&&B.initialHydration===!0,ge,$e);ze||(me=null,we(C,{matches:tt||ye,...bv($e),loaderData:St,errors:Dt}))}async function it($,C,B,K,X,ye,ge,Ae={}){Be();let Ce=aE(C,B);if(ce({navigation:Ce},{flushSync:Ae.flushSync===!0}),ye){let ze=await Nt(K,C.pathname,$.signal);if(ze.type==="aborted")return{shortCircuited:!0};if(ze.type==="error"){if(ze.partialMatches.length===0){let{matches:St,route:Dt}=oc(u);return{matches:St,pendingActionResult:[Dt.id,{type:"error",error:ze.error}]}}let tt=Ca(ze.partialMatches).route.id;return{matches:ze.partialMatches,pendingActionResult:[tt,{type:"error",error:ze.error}]}}else if(ze.matches)K=ze.matches;else{let{notFoundMatches:tt,error:St,route:Dt}=Tn(C.pathname);return{matches:tt,pendingActionResult:[Dt.id,{type:"error",error:St}]}}}let Pe,$e=Nc(K,C);if(!$e.route.action&&!$e.route.lazy)Pe={type:"error",error:cr(405,{method:$.method,pathname:C.pathname,routeId:$e.route.id})};else{let ze=ms(o,c,$,K,$e,ge?[]:i,X),tt=await Ne($,ze,X,null);if(Pe=tt[$e.route.id],!Pe){for(let St of K)if(tt[St.route.id]){Pe=tt[St.route.id];break}}if($.signal.aborted)return{shortCircuited:!0}}if(oi(Pe)){let ze;return Ae&&Ae.replace!=null?ze=Ae.replace:ze=gv(Pe.response.headers.get("Location"),new URL($.url),p)===k.location.pathname+k.location.search,await Xe($,Pe,!0,{submission:B,replace:ze}),{shortCircuited:!0}}if(Qn(Pe)){let ze=Ca(K,$e.route.id);return(Ae&&Ae.replace)!==!0&&(Y="PUSH"),{matches:K,pendingActionResult:[ze.route.id,Pe,$e.route.id]}}return{matches:K,pendingActionResult:[$e.route.id,Pe]}}async function We($,C,B,K,X,ye,ge,Ae,Ce,Pe,$e,ze){let tt=ye||Nf(C,ge),St=ge||Ae||_v(tt),Dt=!H&&!Pe;if(X){if(Dt){let Vt=qe(ze);ce({navigation:tt,...Vt!==void 0?{actionData:Vt}:{}},{flushSync:$e})}let at=await Nt(B,C.pathname,$.signal);if(at.type==="aborted")return{shortCircuited:!0};if(at.type==="error"){if(at.partialMatches.length===0){let{matches:Xt,route:gn}=oc(u);return{matches:Xt,loaderData:{},errors:{[gn.id]:at.error}}}let Vt=Ca(at.partialMatches).route.id;return{matches:at.partialMatches,loaderData:{},errors:{[Vt]:at.error}}}else if(at.matches)B=at.matches;else{let{error:Vt,notFoundMatches:Xt,route:gn}=Tn(C.pathname);return{matches:Xt,loaderData:{},errors:{[gn.id]:Vt}}}}let gt=d||u,{dsMatches:rt,revalidatingFetchers:xt}=dv($,K,o,c,t.history,k,B,St,C,Pe?[]:i,Pe===!0,de,le,ae,W,z,gt,p,t.patchRoutesOnNavigation!=null,ze);if(se=++Z,!t.dataStrategy&&!rt.some(at=>at.shouldLoad)&&!rt.some(at=>at.route.middleware&&at.route.middleware.length>0)&&xt.length===0){let at=Ke();return we(C,{matches:B,loaderData:{},errors:ze&&Qn(ze[1])?{[ze[0]]:ze[1].error}:null,...bv(ze),...at?{fetchers:new Map(k.fetchers)}:{}},{flushSync:$e}),{shortCircuited:!0}}if(Dt){let at={};if(!X){at.navigation=tt;let Vt=qe(ze);Vt!==void 0&&(at.actionData=Vt)}xt.length>0&&(at.fetchers=Ge(xt)),ce(at,{flushSync:$e})}xt.forEach(at=>{J(at.key),at.controller&&P.set(at.key,at.controller)});let Ft=()=>xt.forEach(at=>J(at.key));me&&me.signal.addEventListener("abort",Ft);let{loaderResults:He,fetcherResults:ft}=await Ze(rt,xt,$,K);if($.signal.aborted)return{shortCircuited:!0};me&&me.signal.removeEventListener("abort",Ft),xt.forEach(at=>P.delete(at.key));let Ve=lc(He);if(Ve)return await Xe($,Ve.result,!0,{replace:Ce}),{shortCircuited:!0};if(Ve=lc(ft),Ve)return z.add(Ve.key),await Xe($,Ve.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Et,errors:kt}=yv(k,B,He,ze,xt,ft);Pe&&k.errors&&(kt={...k.errors,...kt});let Ot=Ke(),pn=ot(se),Kt=Ot||pn||xt.length>0;return{matches:B,loaderData:Et,errors:kt,...Kt?{fetchers:new Map(k.fetchers)}:{}}}function qe($){if($&&!Qn($[1]))return{[$[0]]:$[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Ge($){return $.forEach(C=>{let B=k.fetchers.get(C.key),K=bo(void 0,B?B.data:void 0);k.fetchers.set(C.key,K)}),new Map(k.fetchers)}async function Le($,C,B,K){J($);let X=(K&&K.flushSync)===!0,ye=d||u,ge=oh(k.location,k.matches,p,B,C,K?.relative),Ae=Ta(ye,ge,p),Ce=mt(Ae,ye,ge);if(Ce.active&&Ce.matches&&(Ae=Ce.matches),!Ae){T($,C,cr(404,{pathname:ge}),{flushSync:X});return}let{path:Pe,submission:$e,error:ze}=uv(!0,ge,K);if(ze){T($,C,ze,{flushSync:X});return}let tt=t.getContext?await t.getContext():new lv,St=(K&&K.preventScrollReset)===!0;if($e&&$n($e.formMethod)){await lt($,C,Pe,Ae,tt,Ce.active,X,St,$e);return}W.set($,{routeId:C,path:Pe}),await ut($,C,Pe,Ae,tt,Ce.active,X,St,$e)}async function lt($,C,B,K,X,ye,ge,Ae,Ce){Be(),W.delete($);let Pe=k.fetchers.get($);Ue($,iE(Ce,Pe),{flushSync:ge});let $e=new AbortController,ze=ds(t.history,B,$e.signal,Ce);if(ye){let Yt=await Nt(K,new URL(ze.url).pathname,ze.signal,$);if(Yt.type==="aborted")return;if(Yt.type==="error"){T($,C,Yt.error,{flushSync:ge});return}else if(Yt.matches)K=Yt.matches;else{T($,C,cr(404,{pathname:B}),{flushSync:ge});return}}let tt=Nc(K,B);if(!tt.route.action&&!tt.route.lazy){let Yt=cr(405,{method:Ce.formMethod,pathname:B,routeId:C});T($,C,Yt,{flushSync:ge});return}P.set($,$e);let St=Z,Dt=ms(o,c,ze,K,tt,i,X),rt=(await Ne(ze,Dt,X,$))[tt.route.id];if(ze.signal.aborted){P.get($)===$e&&P.delete($);return}if(ae.has($)){if(oi(rt)||Qn(rt)){Ue($,Qr(void 0));return}}else{if(oi(rt))if(P.delete($),se>St){Ue($,Qr(void 0));return}else return z.add($),Ue($,bo(Ce)),Xe(ze,rt,!1,{fetcherSubmission:Ce,preventScrollReset:Ae});if(Qn(rt)){T($,C,rt.error);return}}let xt=k.navigation.location||k.location,Ft=ds(t.history,xt,$e.signal),He=d||u,ft=k.navigation.state!=="idle"?Ta(He,k.navigation.location,p):k.matches;_t(ft,"Didn't find any matches after fetcher action");let Ve=++Z;oe.set($,Ve);let Et=bo(Ce,rt.data);k.fetchers.set($,Et);let{dsMatches:kt,revalidatingFetchers:Ot}=dv(Ft,X,o,c,t.history,k,ft,Ce,xt,i,!1,de,le,ae,W,z,He,p,t.patchRoutesOnNavigation!=null,[tt.route.id,rt]);Ot.filter(Yt=>Yt.key!==$).forEach(Yt=>{let fr=Yt.key,ra=k.fetchers.get(fr),sn=bo(void 0,ra?ra.data:void 0);k.fetchers.set(fr,sn),J(fr),Yt.controller&&P.set(fr,Yt.controller)}),ce({fetchers:new Map(k.fetchers)});let pn=()=>Ot.forEach(Yt=>J(Yt.key));$e.signal.addEventListener("abort",pn);let{loaderResults:Kt,fetcherResults:at}=await Ze(kt,Ot,Ft,X);if($e.signal.aborted)return;if($e.signal.removeEventListener("abort",pn),oe.delete($),P.delete($),Ot.forEach(Yt=>P.delete(Yt.key)),k.fetchers.has($)){let Yt=Qr(rt.data);k.fetchers.set($,Yt)}let Vt=lc(Kt);if(Vt)return Xe(Ft,Vt.result,!1,{preventScrollReset:Ae});if(Vt=lc(at),Vt)return z.add(Vt.key),Xe(Ft,Vt.result,!1,{preventScrollReset:Ae});let{loaderData:Xt,errors:gn}=yv(k,ft,Kt,void 0,Ot,at);ot(Ve),k.navigation.state==="loading"&&Ve>se?(_t(Y,"Expected pending action"),me&&me.abort(),we(k.navigation.location,{matches:ft,loaderData:Xt,errors:gn,fetchers:new Map(k.fetchers)})):(ce({errors:gn,loaderData:xv(k.loaderData,Xt,ft,gn),fetchers:new Map(k.fetchers)}),de=!1)}async function ut($,C,B,K,X,ye,ge,Ae,Ce){let Pe=k.fetchers.get($);Ue($,bo(Ce,Pe?Pe.data:void 0),{flushSync:ge});let $e=new AbortController,ze=ds(t.history,B,$e.signal);if(ye){let xt=await Nt(K,new URL(ze.url).pathname,ze.signal,$);if(xt.type==="aborted")return;if(xt.type==="error"){T($,C,xt.error,{flushSync:ge});return}else if(xt.matches)K=xt.matches;else{T($,C,cr(404,{pathname:B}),{flushSync:ge});return}}let tt=Nc(K,B);P.set($,$e);let St=Z,Dt=ms(o,c,ze,K,tt,i,X),rt=(await Ne(ze,Dt,X,$))[tt.route.id];if(P.get($)===$e&&P.delete($),!ze.signal.aborted){if(ae.has($)){Ue($,Qr(void 0));return}if(oi(rt))if(se>St){Ue($,Qr(void 0));return}else{z.add($),await Xe(ze,rt,!1,{preventScrollReset:Ae});return}if(Qn(rt)){T($,C,rt.error);return}Ue($,Qr(rt.data))}}async function Xe($,C,B,{submission:K,fetcherSubmission:X,preventScrollReset:ye,replace:ge}={}){C.response.headers.has("X-Remix-Revalidate")&&(de=!0);let Ae=C.response.headers.get("Location");_t(Ae,"Expected a Location header on the redirect Response"),Ae=gv(Ae,new URL($.url),p);let Ce=Do(k.location,Ae,{_isRedirect:!0});if(a){let Dt=!1;if(C.response.headers.has("X-Remix-Reload-Document"))Dt=!0;else if(zh(Ae)){const gt=Fy(Ae,!0);Dt=gt.origin!==r.location.origin||dr(gt.pathname,p)==null}if(Dt){ge?r.location.replace(Ae):r.location.assign(Ae);return}}me=null;let Pe=ge===!0||C.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:$e,formAction:ze,formEncType:tt}=k.navigation;!K&&!X&&$e&&ze&&tt&&(K=_v(k.navigation));let St=K||X;if(US.has(C.response.status)&&St&&$n(St.formMethod))await Oe(Pe,Ce,{submission:{...St,formAction:Ae},preventScrollReset:ye||re,enableViewTransition:B?xe:void 0});else{let Dt=Nf(Ce,K);await Oe(Pe,Ce,{overrideNavigation:Dt,fetcherSubmission:X,preventScrollReset:ye||re,enableViewTransition:B?xe:void 0})}}async function Ne($,C,B,K){let X,ye={};try{X=await YS(m,$,C,K,B,!1)}catch(ge){return C.filter(Ae=>Ae.shouldLoad).forEach(Ae=>{ye[Ae.route.id]={type:"error",error:ge}}),ye}if($.signal.aborted)return ye;for(let[ge,Ae]of Object.entries(X))if(nE(Ae)){let Ce=Ae.result;ye[ge]={type:"redirect",response:QS(Ce,$,ge,C,p)}}else ye[ge]=await XS(Ae);return ye}async function Ze($,C,B,K){let X=Ne(B,$,K,null),ye=Promise.all(C.map(async Ce=>{if(Ce.matches&&Ce.match&&Ce.request&&Ce.controller){let $e=(await Ne(Ce.request,Ce.matches,K,Ce.key))[Ce.match.route.id];return{[Ce.key]:$e}}else return Promise.resolve({[Ce.key]:{type:"error",error:cr(404,{pathname:Ce.path})}})})),ge=await X,Ae=(await ye).reduce((Ce,Pe)=>Object.assign(Ce,Pe),{});return{loaderResults:ge,fetcherResults:Ae}}function Be(){de=!0,W.forEach(($,C)=>{P.has(C)&&le.add(C),J(C)})}function Ue($,C,B={}){k.fetchers.set($,C),ce({fetchers:new Map(k.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function T($,C,B,K={}){let X=Ca(k.matches,C);D($),ce({errors:{[X.route.id]:B},fetchers:new Map(k.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function b($){return pe.set($,(pe.get($)||0)+1),ae.has($)&&ae.delete($),k.fetchers.get($)||zS}function _($,C){J($,C?.reason),Ue($,Qr(null))}function D($){let C=k.fetchers.get($);P.has($)&&!(C&&C.state==="loading"&&oe.has($))&&J($),W.delete($),oe.delete($),z.delete($),ae.delete($),le.delete($),k.fetchers.delete($)}function q($){let C=(pe.get($)||0)-1;C<=0?(pe.delete($),ae.add($)):pe.set($,C),ce({fetchers:new Map(k.fetchers)})}function J($,C){let B=P.get($);B&&(B.abort(C),P.delete($))}function he($){for(let C of $){let B=b(C),K=Qr(B.data);k.fetchers.set(C,K)}}function Ke(){let $=[],C=!1;for(let B of z){let K=k.fetchers.get(B);_t(K,`Expected fetcher: ${B}`),K.state==="loading"&&(z.delete(B),$.push(B),C=!0)}return he($),C}function ot($){let C=[];for(let[B,K]of oe)if(K<$){let X=k.fetchers.get(B);_t(X,`Expected fetcher: ${B}`),X.state==="loading"&&(J(B),oe.delete(B),C.push(B))}return he(C),C.length>0}function et($,C){let B=k.blockers.get($)||xo;return _e.get($)!==C&&_e.set($,C),B}function dt($){k.blockers.delete($),_e.delete($)}function st($,C){let B=k.blockers.get($)||xo;_t(B.state==="unblocked"&&C.state==="blocked"||B.state==="blocked"&&C.state==="blocked"||B.state==="blocked"&&C.state==="proceeding"||B.state==="blocked"&&C.state==="unblocked"||B.state==="proceeding"&&C.state==="unblocked",`Invalid blocker state transition: ${B.state} -> ${C.state}`);let K=new Map(k.blockers);K.set($,C),ce({blockers:K})}function un({currentLocation:$,nextLocation:C,historyAction:B}){if(_e.size===0)return;_e.size>1&&an(!1,"A router only supports one blocker at a time");let K=Array.from(_e.entries()),[X,ye]=K[K.length-1],ge=k.blockers.get(X);if(!(ge&&ge.state==="proceeding")&&ye({currentLocation:$,nextLocation:C,historyAction:B}))return X}function Tn($){let C=cr(404,{pathname:$}),B=d||u,{matches:K,route:X}=oc(B);return{notFoundMatches:K,route:X,error:C}}function Mt($,C,B){if(w=$,S=C,N=B||null,!R&&k.navigation===Rf){R=!0;let K=Ie(k.location,k.matches);K!=null&&ce({restoreScrollPosition:K})}return()=>{w=null,S=null,N=null}}function At($,C){return N&&N($,C.map(K=>hS(K,k.loaderData)))||$.key}function tn($,C){if(w&&S){let B=At($,C);w[B]=S()}}function Ie($,C){if(w){let B=At($,C),K=w[B];if(typeof K=="number")return K}return null}function mt($,C,B){if(t.patchRoutesOnNavigation)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:Rc(C,B,p,!0)}}else return{active:!0,matches:Rc(C,B,p,!0)||[]};return{active:!1,matches:null}}async function Nt($,C,B,K){if(!t.patchRoutesOnNavigation)return{type:"success",matches:$};let X=$;for(;;){let ye=d==null,ge=d||u,Ae=c;try{await t.patchRoutesOnNavigation({signal:B,path:C,matches:X,fetcherKey:K,patch:($e,ze)=>{B.aborted||fv($e,ze,ge,Ae,o,!1)}})}catch($e){return{type:"error",error:$e,partialMatches:X}}finally{ye&&!B.aborted&&(u=[...u])}if(B.aborted)return{type:"aborted"};let Ce=Ta(ge,C,p);if(Ce)return{type:"success",matches:Ce};let Pe=Rc(ge,C,p,!0);if(!Pe||X.length===Pe.length&&X.every(($e,ze)=>$e.route.id===Pe[ze].route.id))return{type:"success",matches:null};X=Pe}}function Gt($){c={},d=ko($,o,void 0,c)}function Cn($,C,B=!1){let K=d==null;fv($,C,d||u,c,o,B),K&&(u=[...u],ce({}))}return U={get basename(){return p},get future(){return v},get state(){return k},get routes(){return u},get window(){return r},initialize:ke,subscribe:fe,enableScrollRestoration:Mt,navigate:je,fetch:Le,revalidate:De,createHref:$=>t.history.createHref($),encodeLocation:$=>t.history.encodeLocation($),getFetcher:b,resetFetcher:_,deleteFetcher:q,dispose:Me,getBlocker:et,deleteBlocker:dt,patchRoutes:Cn,_internalFetchControllers:P,_internalSetRoutes:Gt,_internalSetStateDoNotUseOrYouWillBreakYourApp($){ce($)}},U}function IS(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function oh(t,r,a,i,o,c){let u,d;if(o){u=[];for(let m of r)if(u.push(m),m.route.id===o){d=m;break}}else u=r,d=r[r.length-1];let p=Uh(i||".",Lh(u),dr(t.pathname,a)||t.pathname,c==="path");if(i==null&&(p.search=t.search,p.hash=t.hash),(i==null||i===""||i===".")&&d){let m=Ph(p.search);if(d.route.index&&!m)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&m){let v=new URLSearchParams(p.search),y=v.getAll("index");v.delete("index"),y.filter(w=>w).forEach(w=>v.append("index",w));let x=v.toString();p.search=x?`?${x}`:""}}return a!=="/"&&(p.pathname=jS({basename:a,pathname:p.pathname})),Da(p)}function uv(t,r,a){if(!a||!IS(a))return{path:r};if(a.formMethod&&!rE(a.formMethod))return{path:r,error:cr(405,{method:a.formMethod})};let i=()=>({path:r,error:cr(400,{type:"invalid-body"})}),c=(a.formMethod||"get").toUpperCase(),u=ex(r);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!$n(c))return i();let y=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((x,[w,N])=>`${x}${w}=${N}
`,""):String(a.body);return{path:r,submission:{formMethod:c,formAction:u,formEncType:a.formEncType,formData:void 0,json:void 0,text:y}}}else if(a.formEncType==="application/json"){if(!$n(c))return i();try{let y=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:r,submission:{formMethod:c,formAction:u,formEncType:a.formEncType,formData:void 0,json:y,text:void 0}}}catch{return i()}}}_t(typeof FormData=="function","FormData is not available in this environment");let d,p;if(a.formData)d=uh(a.formData),p=a.formData;else if(a.body instanceof FormData)d=uh(a.body),p=a.body;else if(a.body instanceof URLSearchParams)d=a.body,p=vv(d);else if(a.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(a.body),p=vv(d)}catch{return i()}let m={formMethod:c,formAction:u,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if($n(m.formMethod))return{path:r,submission:m};let v=na(r);return t&&v.search&&Ph(v.search)&&d.append("index",""),v.search=`?${d}`,{path:Da(v),submission:m}}function dv(t,r,a,i,o,c,u,d,p,m,v,y,x,w,N,S,R,A,M,L){let F=L?Qn(L[1])?L[1].error:L[1].data:void 0,U=o.createURL(c.location),k=o.createURL(p),Y;if(v&&c.errors){let H=Object.keys(c.errors)[0];Y=u.findIndex(de=>de.route.id===H)}else if(L&&Qn(L[1])){let H=L[0];Y=u.findIndex(de=>de.route.id===H)-1}let re=L?L[1].statusCode:void 0,me=re&&re>=400,xe={currentUrl:U,currentParams:c.matches[0]?.params||{},nextUrl:k,nextParams:u[0].params,...d,actionResult:F,actionStatus:re},ee=u.map((H,de)=>{let{route:le}=H,P=null;if(Y!=null&&de>Y?P=!1:le.lazy?P=!0:Bh(le)?v?P=lh(le,c.loaderData,c.errors):FS(c.loaderData,c.matches[de],H)&&(P=!0):P=!1,P!==null)return ch(a,i,t,H,m,r,P);let Z=me?!1:y||U.pathname+U.search===k.pathname+k.search||U.search!==k.search||HS(c.matches[de],H),se={...xe,defaultShouldRevalidate:Z},oe=Bc(H,se);return ch(a,i,t,H,m,r,oe,se)}),G=[];return N.forEach((H,de)=>{if(v||!u.some(pe=>pe.route.id===H.routeId)||w.has(de))return;let le=c.fetchers.get(de),P=le&&le.state!=="idle"&&le.data===void 0,Z=Ta(R,H.path,A);if(!Z){if(M&&P)return;G.push({key:de,routeId:H.routeId,path:H.path,matches:null,match:null,request:null,controller:null});return}if(S.has(de))return;let se=Nc(Z,H.path),oe=new AbortController,z=ds(o,H.path,oe.signal),W=null;if(x.has(de))x.delete(de),W=ms(a,i,z,Z,se,m,r);else if(P)y&&(W=ms(a,i,z,Z,se,m,r));else{let pe={...xe,defaultShouldRevalidate:me?!1:y};Bc(se,pe)&&(W=ms(a,i,z,Z,se,m,r,pe))}W&&G.push({key:de,routeId:H.routeId,path:H.path,matches:W,match:se,request:z,controller:oe})}),{dsMatches:ee,revalidatingFetchers:G}}function Bh(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function lh(t,r,a){if(t.lazy)return!0;if(!Bh(t))return!1;let i=r!=null&&t.id in r,o=a!=null&&a[t.id]!==void 0;return!i&&o?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!i&&!o}function FS(t,r,a){let i=!r||a.route.id!==r.route.id,o=!t.hasOwnProperty(a.route.id);return i||o}function HS(t,r){let a=t.route.path;return t.pathname!==r.pathname||a!=null&&a.endsWith("*")&&t.params["*"]!==r.params["*"]}function Bc(t,r){if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate(r);if(typeof a=="boolean")return a}return r.defaultShouldRevalidate}function fv(t,r,a,i,o,c){let u;if(t){let m=i[t];_t(m,`No route found to patch children into: routeId = ${t}`),m.children||(m.children=[]),u=m.children}else u=a;let d=[],p=[];if(r.forEach(m=>{let v=u.find(y=>Wy(m,y));v?p.push({existingRoute:v,newRoute:m}):d.push(m)}),d.length>0){let m=ko(d,o,[t||"_","patch",String(u?.length||"0")],i);u.push(...m)}if(c&&p.length>0)for(let m=0;m<p.length;m++){let{existingRoute:v,newRoute:y}=p[m],x=v,[w]=ko([y],o,[],{},!0);Object.assign(x,{element:w.element?w.element:x.element,errorElement:w.errorElement?w.errorElement:x.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:x.hydrateFallbackElement})}}function Wy(t,r){return"id"in t&&"id"in r&&t.id===r.id?!0:t.index===r.index&&t.path===r.path&&t.caseSensitive===r.caseSensitive?(!t.children||t.children.length===0)&&(!r.children||r.children.length===0)?!0:t.children.every((a,i)=>r.children?.some(o=>Wy(a,o))):!1}var hv=new WeakMap,Xy=({key:t,route:r,manifest:a,mapRouteProperties:i})=>{let o=a[r.id];if(_t(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let c=o.lazy[t];if(!c)return;let u=hv.get(o);u||(u={},hv.set(o,u));let d=u[t];if(d)return d;let p=(async()=>{let m=cS(t),y=o[t]!==void 0&&t!=="hasErrorBoundary";if(m)an(!m,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),u[t]=Promise.resolve();else if(y)an(!1,`Route "${o.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let x=await c();x!=null&&(Object.assign(o,{[t]:x}),Object.assign(o,i(o)))}typeof o.lazy=="object"&&(o.lazy[t]=void 0,Object.values(o.lazy).every(x=>x===void 0)&&(o.lazy=void 0))})();return u[t]=p,p},mv=new WeakMap;function qS(t,r,a,i,o){let c=a[t.id];if(_t(c,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let v=mv.get(c);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let y=(async()=>{_t(typeof t.lazy=="function","No lazy route function found");let x=await t.lazy(),w={};for(let N in x){let S=x[N];if(S===void 0)continue;let R=dS(N),M=c[N]!==void 0&&N!=="hasErrorBoundary";R?an(!R,"Route property "+N+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?an(!M,`Route "${c.id}" has a static property "${N}" defined but its lazy function is also returning a value for this property. The lazy route property "${N}" will be ignored.`):w[N]=S}Object.assign(c,w),Object.assign(c,{...i(c),lazy:void 0})})();return mv.set(c,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let u=Object.keys(t.lazy),d=[],p;for(let v of u){if(o&&o.includes(v))continue;let y=Xy({key:v,route:t,manifest:a,mapRouteProperties:i});y&&(d.push(y),v===r&&(p=y))}let m=d.length>0?Promise.all(d).then(()=>{}):void 0;return m?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:p}}async function pv(t){let r=t.matches.filter(o=>o.shouldLoad),a={};return(await Promise.all(r.map(o=>o.resolve()))).forEach((o,c)=>{a[r[c].route.id]=o}),a}async function GS(t){return t.matches.some(r=>r.route.middleware)?Qy(t,()=>pv(t)):pv(t)}function Qy(t,r){return VS(t,r,i=>i,eE,a);function a(i,o,c){if(c)return Promise.resolve(Object.assign(c.value,{[o]:{type:"error",result:i}}));{let{matches:u}=t,d=Math.min(Math.max(u.findIndex(m=>m.route.id===o),0),Math.max(u.findIndex(m=>m.unstable_shouldCallHandler()),0)),p=Ca(u,u[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:i}})}}}async function VS(t,r,a,i,o){let{matches:c,request:u,params:d,context:p}=t,m=c.flatMap(y=>y.route.middleware?y.route.middleware.map(x=>[y.route.id,x]):[]);return await Zy({request:u,params:d,context:p},m,r,a,i,o)}async function Zy(t,r,a,i,o,c,u=0){let{request:d}=t;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=r[u];if(!p)return await a();let[m,v]=p,y,x=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");try{return y={value:await Zy(t,r,a,i,o,c,u+1)},y.value}catch(w){return y={value:await c(w,m,y)},y.value}};try{let w=await v(t,x),N=w!=null?i(w):void 0;return o(N)?N:y?N??y.value:(y={value:await x()},y.value)}catch(w){return await c(w,m,y)}}function Jy(t,r,a,i,o){let c=Xy({key:"middleware",route:i.route,manifest:r,mapRouteProperties:t}),u=qS(i.route,$n(a.method)?"action":"loader",r,t,o);return{middleware:c,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function ch(t,r,a,i,o,c,u,d=null){let p=!1,m=Jy(t,r,a,i,o);return{...i,_lazyPromises:m,shouldLoad:u,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(v){return p=!0,d?typeof v=="boolean"?Bc(i,{...d,defaultShouldRevalidate:v}):Bc(i,d):u},resolve(v){let{lazy:y,loader:x,middleware:w}=i.route,N=p||u||v&&!$n(a.method)&&(y||x),S=w&&w.length>0&&!x&&!y;return N&&!S?KS({request:a,match:i,lazyHandlerPromise:m?.handler,lazyRoutePromise:m?.route,handlerOverride:v,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function ms(t,r,a,i,o,c,u,d=null){return i.map(p=>p.route.id!==o.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:Jy(t,r,a,p,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ch(t,r,a,p,c,u,!0,d))}async function YS(t,r,a,i,o,c){a.some(m=>m._lazyPromises?.middleware)&&await Promise.all(a.map(m=>m._lazyPromises?.middleware));let u={request:r,params:a[0].params,context:o,matches:a},p=await t({...u,fetcherKey:i,runClientMiddleware:m=>{let v=u;return Qy(v,()=>m({...v,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(a.flatMap(m=>[m._lazyPromises?.handler,m._lazyPromises?.route]))}catch{}return p}async function KS({request:t,match:r,lazyHandlerPromise:a,lazyRoutePromise:i,handlerOverride:o,scopedContext:c}){let u,d,p=$n(t.method),m=p?"action":"loader",v=y=>{let x,w=new Promise((R,A)=>x=A);d=()=>x(),t.signal.addEventListener("abort",d);let N=R=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${m}" [routeId: ${r.route.id}]`)):y({request:t,params:r.params,context:c},...R!==void 0?[R]:[]),S=(async()=>{try{return{type:"data",result:await(o?o(A=>N(A)):N())}}catch(R){return{type:"error",result:R}}})();return Promise.race([S,w])};try{let y=p?r.route.action:r.route.loader;if(a||i)if(y){let x,[w]=await Promise.all([v(y).catch(N=>{x=N}),a,i]);if(x!==void 0)throw x;u=w}else{await a;let x=p?r.route.action:r.route.loader;if(x)[u]=await Promise.all([v(x),i]);else if(m==="action"){let w=new URL(t.url),N=w.pathname+w.search;throw cr(405,{method:t.method,pathname:N,routeId:r.route.id})}else return{type:"data",result:void 0}}else if(y)u=await v(y);else{let x=new URL(t.url),w=x.pathname+x.search;throw cr(404,{pathname:w})}}catch(y){return{type:"error",result:y}}finally{d&&t.signal.removeEventListener("abort",d)}return u}async function WS(t){let r=t.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?t.body==null?null:t.json():t.text()}async function XS(t){let{result:r,type:a}=t;if(tx(r)){let i;try{i=await WS(r)}catch(o){return{type:"error",error:o}}return a==="error"?{type:"error",error:new zc(r.status,r.statusText,i),statusCode:r.status,headers:r.headers}:{type:"data",data:i,statusCode:r.status,headers:r.headers}}return a==="error"?wv(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:new zc(r.init?.status||500,void 0,r.data),statusCode:Lo(r)?r.status:void 0,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:Lo(r)?r.status:void 0}:wv(r)?{type:"data",data:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function QS(t,r,a,i,o){let c=t.headers.get("Location");if(_t(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!zh(c)){let u=i.slice(0,i.findIndex(d=>d.route.id===a)+1);c=oh(new URL(r.url),u,o,c),t.headers.set("Location",c)}return t}function gv(t,r,a){if(zh(t)){let i=t,o=i.startsWith("//")?new URL(r.protocol+i):new URL(i),c=dr(o.pathname,a)!=null;if(o.origin===r.origin&&c)return o.pathname+o.search+o.hash}return t}function ds(t,r,a,i){let o=t.createURL(ex(r)).toString(),c={signal:a};if(i&&$n(i.formMethod)){let{formMethod:u,formEncType:d}=i;c.method=u.toUpperCase(),d==="application/json"?(c.headers=new Headers({"Content-Type":d}),c.body=JSON.stringify(i.json)):d==="text/plain"?c.body=i.text:d==="application/x-www-form-urlencoded"&&i.formData?c.body=uh(i.formData):c.body=i.formData}return new Request(o,c)}function uh(t){let r=new URLSearchParams;for(let[a,i]of t.entries())r.append(a,typeof i=="string"?i:i.name);return r}function vv(t){let r=new FormData;for(let[a,i]of t.entries())r.append(a,i);return r}function ZS(t,r,a,i=!1,o=!1){let c={},u=null,d,p=!1,m={},v=a&&Qn(a[1])?a[1].error:void 0;return t.forEach(y=>{if(!(y.route.id in r))return;let x=y.route.id,w=r[x];if(_t(!oi(w),"Cannot handle redirect results in processLoaderData"),Qn(w)){let N=w.error;if(v!==void 0&&(N=v,v=void 0),u=u||{},o)u[x]=N;else{let S=Ca(t,x);u[S.route.id]==null&&(u[S.route.id]=N)}i||(c[x]=Ky),p||(p=!0,d=Lo(w.error)?w.error.status:500),w.headers&&(m[x]=w.headers)}else c[x]=w.data,w.statusCode&&w.statusCode!==200&&!p&&(d=w.statusCode),w.headers&&(m[x]=w.headers)}),v!==void 0&&a&&(u={[a[0]]:v},a[2]&&(c[a[2]]=void 0)),{loaderData:c,errors:u,statusCode:d||200,loaderHeaders:m}}function yv(t,r,a,i,o,c){let{loaderData:u,errors:d}=ZS(r,a,i);return o.filter(p=>!p.matches||p.matches.some(m=>m.shouldLoad)).forEach(p=>{let{key:m,match:v,controller:y}=p;if(y&&y.signal.aborted)return;let x=c[m];if(_t(x,"Did not find corresponding fetcher result"),Qn(x)){let w=Ca(t.matches,v?.route.id);d&&d[w.route.id]||(d={...d,[w.route.id]:x.error}),t.fetchers.delete(m)}else if(oi(x))_t(!1,"Unhandled fetcher revalidation redirect");else{let w=Qr(x.data);t.fetchers.set(m,w)}}),{loaderData:u,errors:d}}function xv(t,r,a,i){let o=Object.entries(r).filter(([,c])=>c!==Ky).reduce((c,[u,d])=>(c[u]=d,c),{});for(let c of a){let u=c.route.id;if(!r.hasOwnProperty(u)&&t.hasOwnProperty(u)&&c.route.loader&&(o[u]=t[u]),i&&i.hasOwnProperty(u))break}return o}function bv(t){return t?Qn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ca(t,r){return(r?t.slice(0,t.findIndex(i=>i.route.id===r)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function oc(t){let r=t.length===1?t[0]:t.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function cr(t,{pathname:r,routeId:a,method:i,type:o,message:c}={}){let u="Unknown Server Error",d="Unknown @remix-run/router error";return t===400?(u="Bad Request",i&&r&&a?d=`You made a ${i} request to "${r}" but did not provide a \`loader\` for route "${a}", so there is no way to handle the request.`:o==="invalid-body"&&(d="Unable to encode submission body")):t===403?(u="Forbidden",d=`Route "${a}" does not match URL "${r}"`):t===404?(u="Not Found",d=`No route matches URL "${r}"`):t===405&&(u="Method Not Allowed",i&&r&&a?d=`You made a ${i.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${a}", so there is no way to handle the request.`:i&&(d=`Invalid request method "${i.toUpperCase()}"`)),new zc(t||500,u,new Error(d),!0)}function lc(t){let r=Object.entries(t);for(let a=r.length-1;a>=0;a--){let[i,o]=r[a];if(oi(o))return{key:i,result:o}}}function ex(t){let r=typeof t=="string"?na(t):t;return Da({...r,hash:""})}function JS(t,r){return t.pathname!==r.pathname||t.search!==r.search?!1:t.hash===""?r.hash!=="":t.hash===r.hash?!0:r.hash!==""}function eE(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([r,a])=>typeof r=="string"&&tE(a))}function tE(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function nE(t){return tx(t.result)&&LS.has(t.result.status)}function Qn(t){return t.type==="error"}function oi(t){return(t&&t.type)==="redirect"}function wv(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function tx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function rE(t){return kS.has(t.toUpperCase())}function $n(t){return OS.has(t.toUpperCase())}function Ph(t){return new URLSearchParams(t).getAll("index").some(r=>r==="")}function Nc(t,r){let a=typeof r=="string"?na(r).search:r.search;if(t[t.length-1].route.index&&Ph(a||""))return t[t.length-1];let i=Gy(t);return i[i.length-1]}function _v(t){let{formMethod:r,formAction:a,formEncType:i,text:o,formData:c,json:u}=t;if(!(!r||!a||!i)){if(o!=null)return{formMethod:r,formAction:a,formEncType:i,formData:void 0,json:void 0,text:o};if(c!=null)return{formMethod:r,formAction:a,formEncType:i,formData:c,json:void 0,text:void 0};if(u!==void 0)return{formMethod:r,formAction:a,formEncType:i,formData:void 0,json:u,text:void 0}}}function Nf(t,r){return r?{state:"loading",location:t,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function aE(t,r){return{state:"submitting",location:t,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function bo(t,r){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function iE(t,r){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:r?r.data:void 0}}function Qr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function sE(t,r){try{let a=t.sessionStorage.getItem(Yy);if(a){let i=JSON.parse(a);for(let[o,c]of Object.entries(i||{}))c&&Array.isArray(c)&&r.set(o,new Set(c||[]))}}catch{}}function oE(t,r){if(r.size>0){let a={};for(let[i,o]of r)a[i]=[...o];try{t.sessionStorage.setItem(Yy,JSON.stringify(a))}catch(i){an(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function lE(){let t,r,a=new Promise((i,o)=>{t=async c=>{i(c);try{await a}catch{}},r=async c=>{o(c);try{await a}catch{}}});return{promise:a,resolve:t,reject:r}}var mi=E.createContext(null);mi.displayName="DataRouter";var Ho=E.createContext(null);Ho.displayName="DataRouterState";E.createContext(!1);var $h=E.createContext({isTransitioning:!1});$h.displayName="ViewTransition";var nx=E.createContext(new Map);nx.displayName="Fetchers";var cE=E.createContext(null);cE.displayName="Await";var Lr=E.createContext(null);Lr.displayName="Navigation";var Zc=E.createContext(null);Zc.displayName="Location";var br=E.createContext({outlet:null,matches:[],isDataRoute:!1});br.displayName="Route";var Ih=E.createContext(null);Ih.displayName="RouteError";function uE(t,{relative:r}={}){_t(qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:i}=E.useContext(Lr),{hash:o,pathname:c,search:u}=Go(t,{relative:r}),d=c;return a!=="/"&&(d=c==="/"?a:Mr([a,c])),i.createHref({pathname:d,search:u,hash:o})}function qo(){return E.useContext(Zc)!=null}function pi(){return _t(qo(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Zc).location}var rx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ax(t){E.useContext(Lr).static||E.useLayoutEffect(t)}function Fh(){let{isDataRoute:t}=E.useContext(br);return t?jE():dE()}function dE(){_t(qo(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(mi),{basename:r,navigator:a}=E.useContext(Lr),{matches:i}=E.useContext(br),{pathname:o}=pi(),c=JSON.stringify(Lh(i)),u=E.useRef(!1);return ax(()=>{u.current=!0}),E.useCallback((p,m={})=>{if(an(u.current,rx),!u.current)return;if(typeof p=="number"){a.go(p);return}let v=Uh(p,JSON.parse(c),o,m.relative==="path");t==null&&r!=="/"&&(v.pathname=v.pathname==="/"?r:Mr([r,v.pathname])),(m.replace?a.replace:a.push)(v,m.state,m)},[r,a,c,o,t])}var fE=E.createContext(null);function hE(t){let r=E.useContext(br).outlet;return E.useMemo(()=>r&&E.createElement(fE.Provider,{value:t},r),[r,t])}function mE(){let{matches:t}=E.useContext(br),r=t[t.length-1];return r?r.params:{}}function Go(t,{relative:r}={}){let{matches:a}=E.useContext(br),{pathname:i}=pi(),o=JSON.stringify(Lh(a));return E.useMemo(()=>Uh(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function pE(t,r,a,i,o){_t(qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=E.useContext(Lr),{matches:u}=E.useContext(br),d=u[u.length-1],p=d?d.params:{},m=d?d.pathname:"/",v=d?d.pathnameBase:"/",y=d&&d.route;{let M=y&&y.path||"";ix(m,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let x=pi(),w;w=x;let N=w.pathname||"/",S=N;if(v!=="/"){let M=v.replace(/^\//,"").split("/");S="/"+N.replace(/^\//,"").split("/").slice(M.length).join("/")}let R=Ta(t,{pathname:S});return an(y||R!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),an(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),bE(R&&R.map(M=>Object.assign({},M,{params:Object.assign({},p,M.params),pathname:Mr([v,c.encodeLocation?c.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?v:Mr([v,c.encodeLocation?c.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),u,a,i,o)}function gE(){let t=AE(),r=Lo(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:c},"ErrorBoundary")," or"," ",E.createElement("code",{style:c},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},r),a?E.createElement("pre",{style:o},a):null,u)}var vE=E.createElement(gE,null),yE=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){this.props.unstable_onError?this.props.unstable_onError(t,r):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?E.createElement(br.Provider,{value:this.props.routeContext},E.createElement(Ih.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xE({routeContext:t,match:r,children:a}){let i=E.useContext(mi);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(br.Provider,{value:t},a)}function bE(t,r=[],a=null,i=null,o=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(r.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let c=t,u=a?.errors;if(u!=null){let m=c.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);_t(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,m+1))}let d=!1,p=-1;if(a)for(let m=0;m<c.length;m++){let v=c[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=m),v.route.id){let{loaderData:y,errors:x}=a,w=v.route.loader&&!y.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||w){d=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((m,v,y)=>{let x,w=!1,N=null,S=null;a&&(x=u&&v.route.id?u[v.route.id]:void 0,N=v.route.errorElement||vE,d&&(p<0&&y===0?(ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):p===y&&(w=!0,S=v.route.hydrateFallbackElement||null)));let R=r.concat(c.slice(0,y+1)),A=()=>{let M;return x?M=N:w?M=S:v.route.Component?M=E.createElement(v.route.Component,null):v.route.element?M=v.route.element:M=m,E.createElement(xE,{match:v,routeContext:{outlet:m,matches:R,isDataRoute:a!=null},children:M})};return a&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?E.createElement(yE,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:A(),routeContext:{outlet:null,matches:R,isDataRoute:!0},unstable_onError:i}):A()},null)}function Hh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wE(t){let r=E.useContext(mi);return _t(r,Hh(t)),r}function _E(t){let r=E.useContext(Ho);return _t(r,Hh(t)),r}function SE(t){let r=E.useContext(br);return _t(r,Hh(t)),r}function qh(t){let r=SE(t),a=r.matches[r.matches.length-1];return _t(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function EE(){return qh("useRouteId")}function AE(){let t=E.useContext(Ih),r=_E("useRouteError"),a=qh("useRouteError");return t!==void 0?t:r.errors?.[a]}function jE(){let{router:t}=wE("useNavigate"),r=qh("useNavigate"),a=E.useRef(!1);return ax(()=>{a.current=!0}),E.useCallback(async(o,c={})=>{an(a.current,rx),a.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:r,...c}))},[t,r])}var Sv={};function ix(t,r,a){!r&&!Sv[t]&&(Sv[t]=!0,an(!1,a))}var Ev={};function Av(t,r){!t&&!Ev[r]&&(Ev[r]=!0,console.warn(r))}function RE(t){let r={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&an(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:E.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&an(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:E.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&an(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:E.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),r}var NE=["HydrateFallback","hydrateFallbackElement"],TE=class{constructor(){this.status="pending",this.promise=new Promise((r,a)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",r(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",a(i))}})}};function CE({router:t,flushSync:r,unstable_onError:a}){let[i,o]=E.useState(t.state),[c,u]=E.useState(),[d,p]=E.useState({isTransitioning:!1}),[m,v]=E.useState(),[y,x]=E.useState(),[w,N]=E.useState(),S=E.useRef(new Map),R=E.useCallback(U=>{o(k=>(U.errors&&a&&Object.entries(U.errors).forEach(([Y,re])=>{k.errors?.[Y]!==re&&a(re)}),U))},[a]),A=E.useCallback((U,{deletedFetchers:k,flushSync:Y,viewTransitionOpts:re})=>{U.fetchers.forEach((xe,ee)=>{xe.data!==void 0&&S.current.set(ee,xe.data)}),k.forEach(xe=>S.current.delete(xe)),Av(Y===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let me=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(Av(re==null||me,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!re||!me){r&&Y?r(()=>R(U)):E.startTransition(()=>R(U));return}if(r&&Y){r(()=>{y&&(m&&m.resolve(),y.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:re.currentLocation,nextLocation:re.nextLocation})});let xe=t.window.document.startViewTransition(()=>{r(()=>R(U))});xe.finished.finally(()=>{r(()=>{v(void 0),x(void 0),u(void 0),p({isTransitioning:!1})})}),r(()=>x(xe));return}y?(m&&m.resolve(),y.skipTransition(),N({state:U,currentLocation:re.currentLocation,nextLocation:re.nextLocation})):(u(U),p({isTransitioning:!0,flushSync:!1,currentLocation:re.currentLocation,nextLocation:re.nextLocation}))},[t.window,r,y,m,R]);E.useLayoutEffect(()=>t.subscribe(A),[t,A]),E.useEffect(()=>{d.isTransitioning&&!d.flushSync&&v(new TE)},[d]),E.useEffect(()=>{if(m&&c&&t.window){let U=c,k=m.promise,Y=t.window.document.startViewTransition(async()=>{E.startTransition(()=>R(U)),await k});Y.finished.finally(()=>{v(void 0),x(void 0),u(void 0),p({isTransitioning:!1})}),x(Y)}},[c,m,t.window,R]),E.useEffect(()=>{m&&c&&i.location.key===c.location.key&&m.resolve()},[m,y,i.location,c]),E.useEffect(()=>{!d.isTransitioning&&w&&(u(w.state),p({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),N(void 0))},[d.isTransitioning,w]);let M=E.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:U=>t.navigate(U),push:(U,k,Y)=>t.navigate(U,{state:k,preventScrollReset:Y?.preventScrollReset}),replace:(U,k,Y)=>t.navigate(U,{replace:!0,state:k,preventScrollReset:Y?.preventScrollReset})}),[t]),L=t.basename||"/",F=E.useMemo(()=>({router:t,navigator:M,static:!1,basename:L,unstable_onError:a}),[t,M,L,a]);return E.createElement(E.Fragment,null,E.createElement(mi.Provider,{value:F},E.createElement(Ho.Provider,{value:i},E.createElement(nx.Provider,{value:S.current},E.createElement($h.Provider,{value:d},E.createElement(kE,{basename:L,location:i.location,navigationType:i.historyAction,navigator:M},E.createElement(ME,{routes:t.routes,future:t.future,state:i,unstable_onError:a})))))),null)}var ME=E.memo(OE);function OE({routes:t,future:r,state:a,unstable_onError:i}){return pE(t,void 0,a,i,r)}function DE(t){return hE(t.context)}function kE({basename:t="/",children:r=null,location:a,navigationType:i="POP",navigator:o,static:c=!1}){_t(!qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:u,navigator:o,static:c,future:{}}),[u,o,c]);typeof a=="string"&&(a=na(a));let{pathname:p="/",search:m="",hash:v="",state:y=null,key:x="default"}=a,w=E.useMemo(()=>{let N=dr(p,u);return N==null?null:{location:{pathname:N,search:m,hash:v,state:y,key:x},navigationType:i}},[u,p,m,v,y,x,i]);return an(w!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:E.createElement(Lr.Provider,{value:d},E.createElement(Zc.Provider,{children:r,value:w}))}var Tc="get",Cc="application/x-www-form-urlencoded";function Jc(t){return t!=null&&typeof t.tagName=="string"}function LE(t){return Jc(t)&&t.tagName.toLowerCase()==="button"}function UE(t){return Jc(t)&&t.tagName.toLowerCase()==="form"}function zE(t){return Jc(t)&&t.tagName.toLowerCase()==="input"}function BE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function PE(t,r){return t.button===0&&(!r||r==="_self")&&!BE(t)}var cc=null;function $E(){if(cc===null)try{new FormData(document.createElement("form"),0),cc=!1}catch{cc=!0}return cc}var IE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tf(t){return t!=null&&!IE.has(t)?(an(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cc}"`),null):t}function FE(t,r){let a,i,o,c,u;if(UE(t)){let d=t.getAttribute("action");i=d?dr(d,r):null,a=t.getAttribute("method")||Tc,o=Tf(t.getAttribute("enctype"))||Cc,c=new FormData(t)}else if(LE(t)||zE(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(i=p?dr(p,r):null,a=t.getAttribute("formmethod")||d.getAttribute("method")||Tc,o=Tf(t.getAttribute("formenctype"))||Tf(d.getAttribute("enctype"))||Cc,c=new FormData(d,t),!$E()){let{name:m,type:v,value:y}=t;if(v==="image"){let x=m?`${m}.`:"";c.append(`${x}x`,"0"),c.append(`${x}y`,"0")}else m&&c.append(m,y)}}else{if(Jc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Tc,i=null,o=Cc,u=t}return c&&o==="text/plain"&&(u=c,c=void 0),{action:i,method:a.toLowerCase(),encType:o,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gh(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function HE(t,r,a){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${a}`:r&&dr(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.${a}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${a}`,i}async function qE(t,r){if(t.id in r)return r[t.id];try{let a=await import(t.module);return r[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function VE(t,r,a){let i=await Promise.all(t.map(async o=>{let c=r.routes[o.route.id];if(c){let u=await qE(c,a);return u.links?u.links():[]}return[]}));return XE(i.flat(1).filter(GE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function jv(t,r,a,i,o,c){let u=(p,m)=>a[m]?p.route.id!==a[m].route.id:!0,d=(p,m)=>a[m].pathname!==p.pathname||a[m].route.path?.endsWith("*")&&a[m].params["*"]!==p.params["*"];return c==="assets"?r.filter((p,m)=>u(p,m)||d(p,m)):c==="data"?r.filter((p,m)=>{let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,m)||d(p,m))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function YE(t,r,{includeHydrateFallback:a}={}){return KE(t.map(i=>{let o=r.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function KE(t){return[...new Set(t)]}function WE(t){let r={},a=Object.keys(t).sort();for(let i of a)r[i]=t[i];return r}function XE(t,r){let a=new Set;return new Set(r),t.reduce((i,o)=>{let c=JSON.stringify(WE(o));return a.has(c)||(a.add(c),i.push({key:c,link:o})),i},[])}function sx(){let t=E.useContext(mi);return Gh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function QE(){let t=E.useContext(Ho);return Gh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vh=E.createContext(void 0);Vh.displayName="FrameworkContext";function ox(){let t=E.useContext(Vh);return Gh(t,"You must render this element inside a <HydratedRouter> element"),t}function ZE(t,r){let a=E.useContext(Vh),[i,o]=E.useState(!1),[c,u]=E.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:m,onMouseLeave:v,onTouchStart:y}=r,x=E.useRef(null);E.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let S=A=>{A.forEach(M=>{u(M.isIntersecting)})},R=new IntersectionObserver(S,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[t]),E.useEffect(()=>{if(i){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[i]);let w=()=>{o(!0)},N=()=>{o(!1),u(!1)};return a?t!=="intent"?[c,x,{}]:[c,x,{onFocus:wo(d,w),onBlur:wo(p,N),onMouseEnter:wo(m,w),onMouseLeave:wo(v,N),onTouchStart:wo(y,w)}]:[!1,x,{}]}function wo(t,r){return a=>{t&&t(a),a.defaultPrevented||r(a)}}function JE({page:t,...r}){let{router:a}=sx(),i=E.useMemo(()=>Ta(a.routes,t,a.basename),[a.routes,t,a.basename]);return i?E.createElement(t2,{page:t,matches:i,...r}):null}function e2(t){let{manifest:r,routeModules:a}=ox(),[i,o]=E.useState([]);return E.useEffect(()=>{let c=!1;return VE(t,r,a).then(u=>{c||o(u)}),()=>{c=!0}},[t,r,a]),i}function t2({page:t,matches:r,...a}){let i=pi(),{manifest:o,routeModules:c}=ox(),{basename:u}=sx(),{loaderData:d,matches:p}=QE(),m=E.useMemo(()=>jv(t,r,p,o,i,"data"),[t,r,p,o,i]),v=E.useMemo(()=>jv(t,r,p,o,i,"assets"),[t,r,p,o,i]),y=E.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let N=new Set,S=!1;if(r.forEach(A=>{let M=o.routes[A.route.id];!M||!M.hasLoader||(!m.some(L=>L.route.id===A.route.id)&&A.route.id in d&&c[A.route.id]?.shouldRevalidate||M.hasClientLoader?S=!0:N.add(A.route.id))}),N.size===0)return[];let R=HE(t,u,"data");return S&&N.size>0&&R.searchParams.set("_routes",r.filter(A=>N.has(A.route.id)).map(A=>A.route.id).join(",")),[R.pathname+R.search]},[u,d,i,o,m,r,t,c]),x=E.useMemo(()=>YE(v,o),[v,o]),w=e2(v);return E.createElement(E.Fragment,null,y.map(N=>E.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>E.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),w.map(({key:N,link:S})=>E.createElement("link",{key:N,nonce:a.nonce,...S})))}function n2(...t){return r=>{t.forEach(a=>{typeof a=="function"?a(r):a!=null&&(a.current=r)})}}var lx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lx&&(window.__reactRouterVersion="7.9.3")}catch{}function r2(t,r){return $S({basename:r?.basename,getContext:r?.getContext,future:r?.future,history:iS({window:r?.window}),hydrationData:a2(),routes:t,mapRouteProperties:RE,hydrationRouteProperties:NE,dataStrategy:r?.dataStrategy,patchRoutesOnNavigation:r?.patchRoutesOnNavigation,window:r?.window}).initialize()}function a2(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:i2(t.errors)}),t}function i2(t){if(!t)return null;let r=Object.entries(t),a={};for(let[i,o]of r)if(o&&o.__type==="RouteErrorResponse")a[i]=new zc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let c=window[o.__subType];if(typeof c=="function")try{let u=new c(o.message);u.stack="",a[i]=u}catch{}}if(a[i]==null){let c=new Error(o.message);c.stack="",a[i]=c}}else a[i]=o;return a}var cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eu=E.forwardRef(function({onClick:r,discover:a="render",prefetch:i="none",relative:o,reloadDocument:c,replace:u,state:d,target:p,to:m,preventScrollReset:v,viewTransition:y,...x},w){let{basename:N}=E.useContext(Lr),S=typeof m=="string"&&cx.test(m),R,A=!1;if(typeof m=="string"&&S&&(R=m,lx))try{let me=new URL(window.location.href),xe=m.startsWith("//")?new URL(me.protocol+m):new URL(m),ee=dr(xe.pathname,N);xe.origin===me.origin&&ee!=null?m=ee+xe.search+xe.hash:A=!0}catch{an(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=uE(m,{relative:o}),[L,F,U]=ZE(i,x),k=c2(m,{replace:u,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:y});function Y(me){r&&r(me),me.defaultPrevented||k(me)}let re=E.createElement("a",{...x,...U,href:R||M,onClick:A||c?r:Y,ref:n2(w,F),target:p,"data-discover":!S&&a==="render"?"true":void 0});return L&&!S?E.createElement(E.Fragment,null,re,E.createElement(JE,{page:M})):re});eu.displayName="Link";var s2=E.forwardRef(function({"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:d,children:p,...m},v){let y=Go(u,{relative:m.relative}),x=pi(),w=E.useContext(Ho),{navigator:N,basename:S}=E.useContext(Lr),R=w!=null&&m2(y)&&d===!0,A=N.encodeLocation?N.encodeLocation(y).pathname:y.pathname,M=x.pathname,L=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;a||(M=M.toLowerCase(),L=L?L.toLowerCase():null,A=A.toLowerCase()),L&&S&&(L=dr(L,S)||L);const F=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let U=M===A||!o&&M.startsWith(A)&&M.charAt(F)==="/",k=L!=null&&(L===A||!o&&L.startsWith(A)&&L.charAt(A.length)==="/"),Y={isActive:U,isPending:k,isTransitioning:R},re=U?r:void 0,me;typeof i=="function"?me=i(Y):me=[i,U?"active":null,k?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let xe=typeof c=="function"?c(Y):c;return E.createElement(eu,{...m,"aria-current":re,className:me,ref:v,style:xe,to:u,viewTransition:d},typeof p=="function"?p(Y):p)});s2.displayName="NavLink";var o2=E.forwardRef(({discover:t="render",fetcherKey:r,navigate:a,reloadDocument:i,replace:o,state:c,method:u=Tc,action:d,onSubmit:p,relative:m,preventScrollReset:v,viewTransition:y,...x},w)=>{let N=f2(),S=h2(d,{relative:m}),R=u.toLowerCase()==="get"?"get":"post",A=typeof d=="string"&&cx.test(d),M=L=>{if(p&&p(L),L.defaultPrevented)return;L.preventDefault();let F=L.nativeEvent.submitter,U=F?.getAttribute("formmethod")||u;N(F||L.currentTarget,{fetcherKey:r,method:U,navigate:a,replace:o,state:c,relative:m,preventScrollReset:v,viewTransition:y})};return E.createElement("form",{ref:w,method:R,action:S,onSubmit:i?p:M,...x,"data-discover":!A&&t==="render"?"true":void 0})});o2.displayName="Form";function l2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ux(t){let r=E.useContext(mi);return _t(r,l2(t)),r}function c2(t,{target:r,replace:a,state:i,preventScrollReset:o,relative:c,viewTransition:u}={}){let d=Fh(),p=pi(),m=Go(t,{relative:c});return E.useCallback(v=>{if(PE(v,r)){v.preventDefault();let y=a!==void 0?a:Da(p)===Da(m);d(t,{replace:y,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[p,d,m,a,i,r,t,o,c,u])}var u2=0,d2=()=>`__${String(++u2)}__`;function f2(){let{router:t}=ux("useSubmit"),{basename:r}=E.useContext(Lr),a=EE();return E.useCallback(async(i,o={})=>{let{action:c,method:u,encType:d,formData:p,body:m}=FE(i,r);if(o.navigate===!1){let v=o.fetcherKey||d2();await t.fetch(v,a,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await t.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,r,a])}function h2(t,{relative:r}={}){let{basename:a}=E.useContext(Lr),i=E.useContext(br);_t(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...Go(t||".",{relative:r})},u=pi();if(t==null){c.search=u.search;let d=new URLSearchParams(c.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(y=>y).forEach(y=>d.append("index",y));let v=d.toString();c.search=v?`?${v}`:""}}return(!t||t===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(c.pathname=c.pathname==="/"?a:Mr([a,c.pathname])),Da(c)}function m2(t,{relative:r}={}){let a=E.useContext($h);_t(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ux("useViewTransitionState"),o=Go(t,{relative:r});if(!a.isTransitioning)return!1;let c=dr(a.currentLocation.pathname,i)||a.currentLocation.pathname,u=dr(a.nextLocation.pathname,i)||a.nextLocation.pathname;return Uc(o.pathname,u)!=null||Uc(o.pathname,c)!=null}function p2(t){return E.createElement(CE,{flushSync:Qc.flushSync,...t})}var Cf={},_o={},Rv;function g2(){if(Rv)return _o;Rv=1,_o.byteLength=d,_o.toByteArray=m,_o.fromByteArray=x;for(var t=[],r=[],a=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=i.length;o<c;++o)t[o]=i[o],r[i.charCodeAt(o)]=o;r[45]=62,r[95]=63;function u(w){var N=w.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=w.indexOf("=");S===-1&&(S=N);var R=S===N?0:4-S%4;return[S,R]}function d(w){var N=u(w),S=N[0],R=N[1];return(S+R)*3/4-R}function p(w,N,S){return(N+S)*3/4-S}function m(w){var N,S=u(w),R=S[0],A=S[1],M=new a(p(w,R,A)),L=0,F=A>0?R-4:R,U;for(U=0;U<F;U+=4)N=r[w.charCodeAt(U)]<<18|r[w.charCodeAt(U+1)]<<12|r[w.charCodeAt(U+2)]<<6|r[w.charCodeAt(U+3)],M[L++]=N>>16&255,M[L++]=N>>8&255,M[L++]=N&255;return A===2&&(N=r[w.charCodeAt(U)]<<2|r[w.charCodeAt(U+1)]>>4,M[L++]=N&255),A===1&&(N=r[w.charCodeAt(U)]<<10|r[w.charCodeAt(U+1)]<<4|r[w.charCodeAt(U+2)]>>2,M[L++]=N>>8&255,M[L++]=N&255),M}function v(w){return t[w>>18&63]+t[w>>12&63]+t[w>>6&63]+t[w&63]}function y(w,N,S){for(var R,A=[],M=N;M<S;M+=3)R=(w[M]<<16&16711680)+(w[M+1]<<8&65280)+(w[M+2]&255),A.push(v(R));return A.join("")}function x(w){for(var N,S=w.length,R=S%3,A=[],M=16383,L=0,F=S-R;L<F;L+=M)A.push(y(w,L,L+M>F?F:L+M));return R===1?(N=w[S-1],A.push(t[N>>2]+t[N<<4&63]+"==")):R===2&&(N=(w[S-2]<<8)+w[S-1],A.push(t[N>>10]+t[N>>4&63]+t[N<<2&63]+"=")),A.join("")}return _o}var uc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Nv;function v2(){return Nv||(Nv=1,uc.read=function(t,r,a,i,o){var c,u,d=o*8-i-1,p=(1<<d)-1,m=p>>1,v=-7,y=a?o-1:0,x=a?-1:1,w=t[r+y];for(y+=x,c=w&(1<<-v)-1,w>>=-v,v+=d;v>0;c=c*256+t[r+y],y+=x,v-=8);for(u=c&(1<<-v)-1,c>>=-v,v+=i;v>0;u=u*256+t[r+y],y+=x,v-=8);if(c===0)c=1-m;else{if(c===p)return u?NaN:(w?-1:1)*(1/0);u=u+Math.pow(2,i),c=c-m}return(w?-1:1)*u*Math.pow(2,c-i)},uc.write=function(t,r,a,i,o,c){var u,d,p,m=c*8-o-1,v=(1<<m)-1,y=v>>1,x=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=i?0:c-1,N=i?1:-1,S=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(d=isNaN(r)?1:0,u=v):(u=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+y>=1?r+=x/p:r+=x*Math.pow(2,1-y),r*p>=2&&(u++,p/=2),u+y>=v?(d=0,u=v):u+y>=1?(d=(r*p-1)*Math.pow(2,o),u=u+y):(d=r*Math.pow(2,y-1)*Math.pow(2,o),u=0));o>=8;t[a+w]=d&255,w+=N,d/=256,o-=8);for(u=u<<o|d,m+=o;m>0;t[a+w]=u&255,w+=N,u/=256,m-=8);t[a+w-N]|=S*128}),uc}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Tv;function y2(){return Tv||(Tv=1,(function(t){const r=g2(),a=v2(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=M,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,d.TYPED_ARRAY_SUPPORT=c(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const T=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(T,b),T.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(T){if(T>o)throw new RangeError('The value "'+T+'" is invalid for option "size"');const b=new Uint8Array(T);return Object.setPrototypeOf(b,d.prototype),b}function d(T,b,_){if(typeof T=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(T)}return p(T,b,_)}d.poolSize=8192;function p(T,b,_){if(typeof T=="string")return x(T,b);if(ArrayBuffer.isView(T))return N(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Xe(T,ArrayBuffer)||T&&Xe(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xe(T,SharedArrayBuffer)||T&&Xe(T.buffer,SharedArrayBuffer)))return S(T,b,_);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=T.valueOf&&T.valueOf();if(D!=null&&D!==T)return d.from(D,b,_);const q=R(T);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return d.from(T[Symbol.toPrimitive]("string"),b,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}d.from=function(T,b,_){return p(T,b,_)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function m(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function v(T,b,_){return m(T),T<=0?u(T):b!==void 0?typeof _=="string"?u(T).fill(b,_):u(T).fill(b):u(T)}d.alloc=function(T,b,_){return v(T,b,_)};function y(T){return m(T),u(T<0?0:A(T)|0)}d.allocUnsafe=function(T){return y(T)},d.allocUnsafeSlow=function(T){return y(T)};function x(T,b){if((typeof b!="string"||b==="")&&(b="utf8"),!d.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const _=L(T,b)|0;let D=u(_);const q=D.write(T,b);return q!==_&&(D=D.slice(0,q)),D}function w(T){const b=T.length<0?0:A(T.length)|0,_=u(b);for(let D=0;D<b;D+=1)_[D]=T[D]&255;return _}function N(T){if(Xe(T,Uint8Array)){const b=new Uint8Array(T);return S(b.buffer,b.byteOffset,b.byteLength)}return w(T)}function S(T,b,_){if(b<0||T.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<b+(_||0))throw new RangeError('"length" is outside of buffer bounds');let D;return b===void 0&&_===void 0?D=new Uint8Array(T):_===void 0?D=new Uint8Array(T,b):D=new Uint8Array(T,b,_),Object.setPrototypeOf(D,d.prototype),D}function R(T){if(d.isBuffer(T)){const b=A(T.length)|0,_=u(b);return _.length===0||T.copy(_,0,0,b),_}if(T.length!==void 0)return typeof T.length!="number"||Ne(T.length)?u(0):w(T);if(T.type==="Buffer"&&Array.isArray(T.data))return w(T.data)}function A(T){if(T>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return T|0}function M(T){return+T!=T&&(T=0),d.alloc(+T)}d.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==d.prototype},d.compare=function(b,_){if(Xe(b,Uint8Array)&&(b=d.from(b,b.offset,b.byteLength)),Xe(_,Uint8Array)&&(_=d.from(_,_.offset,_.byteLength)),!d.isBuffer(b)||!d.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===_)return 0;let D=b.length,q=_.length;for(let J=0,he=Math.min(D,q);J<he;++J)if(b[J]!==_[J]){D=b[J],q=_[J];break}return D<q?-1:q<D?1:0},d.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(b,_){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return d.alloc(0);let D;if(_===void 0)for(_=0,D=0;D<b.length;++D)_+=b[D].length;const q=d.allocUnsafe(_);let J=0;for(D=0;D<b.length;++D){let he=b[D];if(Xe(he,Uint8Array))J+he.length>q.length?(d.isBuffer(he)||(he=d.from(he)),he.copy(q,J)):Uint8Array.prototype.set.call(q,he,J);else if(d.isBuffer(he))he.copy(q,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=he.length}return q};function L(T,b){if(d.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||Xe(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const _=T.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&_===0)return 0;let q=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return qe(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return lt(T).length;default:if(q)return D?-1:qe(T).length;b=(""+b).toLowerCase(),q=!0}}d.byteLength=L;function F(T,b,_){let D=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,b>>>=0,_<=b))return"";for(T||(T="utf8");;)switch(T){case"hex":return oe(this,b,_);case"utf8":case"utf-8":return de(this,b,_);case"ascii":return Z(this,b,_);case"latin1":case"binary":return se(this,b,_);case"base64":return H(this,b,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,b,_);default:if(D)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),D=!0}}d.prototype._isBuffer=!0;function U(T,b,_){const D=T[b];T[b]=T[_],T[_]=D}d.prototype.swap16=function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<b;_+=2)U(this,_,_+1);return this},d.prototype.swap32=function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<b;_+=4)U(this,_,_+3),U(this,_+1,_+2);return this},d.prototype.swap64=function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<b;_+=8)U(this,_,_+7),U(this,_+1,_+6),U(this,_+2,_+5),U(this,_+3,_+4);return this},d.prototype.toString=function(){const b=this.length;return b===0?"":arguments.length===0?de(this,0,b):F.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:d.compare(this,b)===0},d.prototype.inspect=function(){let b="";const _=t.INSPECT_MAX_BYTES;return b=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(b+=" ... "),"<Buffer "+b+">"},i&&(d.prototype[i]=d.prototype.inspect),d.prototype.compare=function(b,_,D,q,J){if(Xe(b,Uint8Array)&&(b=d.from(b,b.offset,b.byteLength)),!d.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(_===void 0&&(_=0),D===void 0&&(D=b?b.length:0),q===void 0&&(q=0),J===void 0&&(J=this.length),_<0||D>b.length||q<0||J>this.length)throw new RangeError("out of range index");if(q>=J&&_>=D)return 0;if(q>=J)return-1;if(_>=D)return 1;if(_>>>=0,D>>>=0,q>>>=0,J>>>=0,this===b)return 0;let he=J-q,Ke=D-_;const ot=Math.min(he,Ke),et=this.slice(q,J),dt=b.slice(_,D);for(let st=0;st<ot;++st)if(et[st]!==dt[st]){he=et[st],Ke=dt[st];break}return he<Ke?-1:Ke<he?1:0};function k(T,b,_,D,q){if(T.length===0)return-1;if(typeof _=="string"?(D=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,Ne(_)&&(_=q?0:T.length-1),_<0&&(_=T.length+_),_>=T.length){if(q)return-1;_=T.length-1}else if(_<0)if(q)_=0;else return-1;if(typeof b=="string"&&(b=d.from(b,D)),d.isBuffer(b))return b.length===0?-1:Y(T,b,_,D,q);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(T,b,_):Uint8Array.prototype.lastIndexOf.call(T,b,_):Y(T,[b],_,D,q);throw new TypeError("val must be string, number or Buffer")}function Y(T,b,_,D,q){let J=1,he=T.length,Ke=b.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(T.length<2||b.length<2)return-1;J=2,he/=2,Ke/=2,_/=2}function ot(dt,st){return J===1?dt[st]:dt.readUInt16BE(st*J)}let et;if(q){let dt=-1;for(et=_;et<he;et++)if(ot(T,et)===ot(b,dt===-1?0:et-dt)){if(dt===-1&&(dt=et),et-dt+1===Ke)return dt*J}else dt!==-1&&(et-=et-dt),dt=-1}else for(_+Ke>he&&(_=he-Ke),et=_;et>=0;et--){let dt=!0;for(let st=0;st<Ke;st++)if(ot(T,et+st)!==ot(b,st)){dt=!1;break}if(dt)return et}return-1}d.prototype.includes=function(b,_,D){return this.indexOf(b,_,D)!==-1},d.prototype.indexOf=function(b,_,D){return k(this,b,_,D,!0)},d.prototype.lastIndexOf=function(b,_,D){return k(this,b,_,D,!1)};function re(T,b,_,D){_=Number(_)||0;const q=T.length-_;D?(D=Number(D),D>q&&(D=q)):D=q;const J=b.length;D>J/2&&(D=J/2);let he;for(he=0;he<D;++he){const Ke=parseInt(b.substr(he*2,2),16);if(Ne(Ke))return he;T[_+he]=Ke}return he}function me(T,b,_,D){return ut(qe(b,T.length-_),T,_,D)}function xe(T,b,_,D){return ut(Ge(b),T,_,D)}function ee(T,b,_,D){return ut(lt(b),T,_,D)}function G(T,b,_,D){return ut(Le(b,T.length-_),T,_,D)}d.prototype.write=function(b,_,D,q){if(_===void 0)q="utf8",D=this.length,_=0;else if(D===void 0&&typeof _=="string")q=_,D=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(D)?(D=D>>>0,q===void 0&&(q="utf8")):(q=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-_;if((D===void 0||D>J)&&(D=J),b.length>0&&(D<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let he=!1;for(;;)switch(q){case"hex":return re(this,b,_,D);case"utf8":case"utf-8":return me(this,b,_,D);case"ascii":case"latin1":case"binary":return xe(this,b,_,D);case"base64":return ee(this,b,_,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,_,D);default:if(he)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),he=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(T,b,_){return b===0&&_===T.length?r.fromByteArray(T):r.fromByteArray(T.slice(b,_))}function de(T,b,_){_=Math.min(T.length,_);const D=[];let q=b;for(;q<_;){const J=T[q];let he=null,Ke=J>239?4:J>223?3:J>191?2:1;if(q+Ke<=_){let ot,et,dt,st;switch(Ke){case 1:J<128&&(he=J);break;case 2:ot=T[q+1],(ot&192)===128&&(st=(J&31)<<6|ot&63,st>127&&(he=st));break;case 3:ot=T[q+1],et=T[q+2],(ot&192)===128&&(et&192)===128&&(st=(J&15)<<12|(ot&63)<<6|et&63,st>2047&&(st<55296||st>57343)&&(he=st));break;case 4:ot=T[q+1],et=T[q+2],dt=T[q+3],(ot&192)===128&&(et&192)===128&&(dt&192)===128&&(st=(J&15)<<18|(ot&63)<<12|(et&63)<<6|dt&63,st>65535&&st<1114112&&(he=st))}}he===null?(he=65533,Ke=1):he>65535&&(he-=65536,D.push(he>>>10&1023|55296),he=56320|he&1023),D.push(he),q+=Ke}return P(D)}const le=4096;function P(T){const b=T.length;if(b<=le)return String.fromCharCode.apply(String,T);let _="",D=0;for(;D<b;)_+=String.fromCharCode.apply(String,T.slice(D,D+=le));return _}function Z(T,b,_){let D="";_=Math.min(T.length,_);for(let q=b;q<_;++q)D+=String.fromCharCode(T[q]&127);return D}function se(T,b,_){let D="";_=Math.min(T.length,_);for(let q=b;q<_;++q)D+=String.fromCharCode(T[q]);return D}function oe(T,b,_){const D=T.length;(!b||b<0)&&(b=0),(!_||_<0||_>D)&&(_=D);let q="";for(let J=b;J<_;++J)q+=Ze[T[J]];return q}function z(T,b,_){const D=T.slice(b,_);let q="";for(let J=0;J<D.length-1;J+=2)q+=String.fromCharCode(D[J]+D[J+1]*256);return q}d.prototype.slice=function(b,_){const D=this.length;b=~~b,_=_===void 0?D:~~_,b<0?(b+=D,b<0&&(b=0)):b>D&&(b=D),_<0?(_+=D,_<0&&(_=0)):_>D&&(_=D),_<b&&(_=b);const q=this.subarray(b,_);return Object.setPrototypeOf(q,d.prototype),q};function W(T,b,_){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+b>_)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(b,_,D){b=b>>>0,_=_>>>0,D||W(b,_,this.length);let q=this[b],J=1,he=0;for(;++he<_&&(J*=256);)q+=this[b+he]*J;return q},d.prototype.readUintBE=d.prototype.readUIntBE=function(b,_,D){b=b>>>0,_=_>>>0,D||W(b,_,this.length);let q=this[b+--_],J=1;for(;_>0&&(J*=256);)q+=this[b+--_]*J;return q},d.prototype.readUint8=d.prototype.readUInt8=function(b,_){return b=b>>>0,_||W(b,1,this.length),this[b]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(b,_){return b=b>>>0,_||W(b,2,this.length),this[b]|this[b+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(b,_){return b=b>>>0,_||W(b,2,this.length),this[b]<<8|this[b+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(b,_){return b=b>>>0,_||W(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(b,_){return b=b>>>0,_||W(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},d.prototype.readBigUInt64LE=Be(function(b){b=b>>>0,De(b,"offset");const _=this[b],D=this[b+7];(_===void 0||D===void 0)&&Oe(b,this.length-8);const q=_+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,J=this[++b]+this[++b]*2**8+this[++b]*2**16+D*2**24;return BigInt(q)+(BigInt(J)<<BigInt(32))}),d.prototype.readBigUInt64BE=Be(function(b){b=b>>>0,De(b,"offset");const _=this[b],D=this[b+7];(_===void 0||D===void 0)&&Oe(b,this.length-8);const q=_*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],J=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+D;return(BigInt(q)<<BigInt(32))+BigInt(J)}),d.prototype.readIntLE=function(b,_,D){b=b>>>0,_=_>>>0,D||W(b,_,this.length);let q=this[b],J=1,he=0;for(;++he<_&&(J*=256);)q+=this[b+he]*J;return J*=128,q>=J&&(q-=Math.pow(2,8*_)),q},d.prototype.readIntBE=function(b,_,D){b=b>>>0,_=_>>>0,D||W(b,_,this.length);let q=_,J=1,he=this[b+--q];for(;q>0&&(J*=256);)he+=this[b+--q]*J;return J*=128,he>=J&&(he-=Math.pow(2,8*_)),he},d.prototype.readInt8=function(b,_){return b=b>>>0,_||W(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},d.prototype.readInt16LE=function(b,_){b=b>>>0,_||W(b,2,this.length);const D=this[b]|this[b+1]<<8;return D&32768?D|4294901760:D},d.prototype.readInt16BE=function(b,_){b=b>>>0,_||W(b,2,this.length);const D=this[b+1]|this[b]<<8;return D&32768?D|4294901760:D},d.prototype.readInt32LE=function(b,_){return b=b>>>0,_||W(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},d.prototype.readInt32BE=function(b,_){return b=b>>>0,_||W(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},d.prototype.readBigInt64LE=Be(function(b){b=b>>>0,De(b,"offset");const _=this[b],D=this[b+7];(_===void 0||D===void 0)&&Oe(b,this.length-8);const q=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+(D<<24);return(BigInt(q)<<BigInt(32))+BigInt(_+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)}),d.prototype.readBigInt64BE=Be(function(b){b=b>>>0,De(b,"offset");const _=this[b],D=this[b+7];(_===void 0||D===void 0)&&Oe(b,this.length-8);const q=(_<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(q)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+D)}),d.prototype.readFloatLE=function(b,_){return b=b>>>0,_||W(b,4,this.length),a.read(this,b,!0,23,4)},d.prototype.readFloatBE=function(b,_){return b=b>>>0,_||W(b,4,this.length),a.read(this,b,!1,23,4)},d.prototype.readDoubleLE=function(b,_){return b=b>>>0,_||W(b,8,this.length),a.read(this,b,!0,52,8)},d.prototype.readDoubleBE=function(b,_){return b=b>>>0,_||W(b,8,this.length),a.read(this,b,!1,52,8)};function pe(T,b,_,D,q,J){if(!d.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>q||b<J)throw new RangeError('"value" argument is out of bounds');if(_+D>T.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(b,_,D,q){if(b=+b,_=_>>>0,D=D>>>0,!q){const Ke=Math.pow(2,8*D)-1;pe(this,b,_,D,Ke,0)}let J=1,he=0;for(this[_]=b&255;++he<D&&(J*=256);)this[_+he]=b/J&255;return _+D},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(b,_,D,q){if(b=+b,_=_>>>0,D=D>>>0,!q){const Ke=Math.pow(2,8*D)-1;pe(this,b,_,D,Ke,0)}let J=D-1,he=1;for(this[_+J]=b&255;--J>=0&&(he*=256);)this[_+J]=b/he&255;return _+D},d.prototype.writeUint8=d.prototype.writeUInt8=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,1,255,0),this[_]=b&255,_+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,2,65535,0),this[_]=b&255,this[_+1]=b>>>8,_+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,2,65535,0),this[_]=b>>>8,this[_+1]=b&255,_+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,4,4294967295,0),this[_+3]=b>>>24,this[_+2]=b>>>16,this[_+1]=b>>>8,this[_]=b&255,_+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,4,4294967295,0),this[_]=b>>>24,this[_+1]=b>>>16,this[_+2]=b>>>8,this[_+3]=b&255,_+4};function ae(T,b,_,D,q){je(b,D,q,T,_,7);let J=Number(b&BigInt(4294967295));T[_++]=J,J=J>>8,T[_++]=J,J=J>>8,T[_++]=J,J=J>>8,T[_++]=J;let he=Number(b>>BigInt(32)&BigInt(4294967295));return T[_++]=he,he=he>>8,T[_++]=he,he=he>>8,T[_++]=he,he=he>>8,T[_++]=he,_}function _e(T,b,_,D,q){je(b,D,q,T,_,7);let J=Number(b&BigInt(4294967295));T[_+7]=J,J=J>>8,T[_+6]=J,J=J>>8,T[_+5]=J,J=J>>8,T[_+4]=J;let he=Number(b>>BigInt(32)&BigInt(4294967295));return T[_+3]=he,he=he>>8,T[_+2]=he,he=he>>8,T[_+1]=he,he=he>>8,T[_]=he,_+8}d.prototype.writeBigUInt64LE=Be(function(b,_=0){return ae(this,b,_,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Be(function(b,_=0){return _e(this,b,_,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(b,_,D,q){if(b=+b,_=_>>>0,!q){const ot=Math.pow(2,8*D-1);pe(this,b,_,D,ot-1,-ot)}let J=0,he=1,Ke=0;for(this[_]=b&255;++J<D&&(he*=256);)b<0&&Ke===0&&this[_+J-1]!==0&&(Ke=1),this[_+J]=(b/he>>0)-Ke&255;return _+D},d.prototype.writeIntBE=function(b,_,D,q){if(b=+b,_=_>>>0,!q){const ot=Math.pow(2,8*D-1);pe(this,b,_,D,ot-1,-ot)}let J=D-1,he=1,Ke=0;for(this[_+J]=b&255;--J>=0&&(he*=256);)b<0&&Ke===0&&this[_+J+1]!==0&&(Ke=1),this[_+J]=(b/he>>0)-Ke&255;return _+D},d.prototype.writeInt8=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,1,127,-128),b<0&&(b=255+b+1),this[_]=b&255,_+1},d.prototype.writeInt16LE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,2,32767,-32768),this[_]=b&255,this[_+1]=b>>>8,_+2},d.prototype.writeInt16BE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,2,32767,-32768),this[_]=b>>>8,this[_+1]=b&255,_+2},d.prototype.writeInt32LE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,4,2147483647,-2147483648),this[_]=b&255,this[_+1]=b>>>8,this[_+2]=b>>>16,this[_+3]=b>>>24,_+4},d.prototype.writeInt32BE=function(b,_,D){return b=+b,_=_>>>0,D||pe(this,b,_,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[_]=b>>>24,this[_+1]=b>>>16,this[_+2]=b>>>8,this[_+3]=b&255,_+4},d.prototype.writeBigInt64LE=Be(function(b,_=0){return ae(this,b,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Be(function(b,_=0){return _e(this,b,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(T,b,_,D,q,J){if(_+D>T.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function Ee(T,b,_,D,q){return b=+b,_=_>>>0,q||Re(T,b,_,4),a.write(T,b,_,D,23,4),_+4}d.prototype.writeFloatLE=function(b,_,D){return Ee(this,b,_,!0,D)},d.prototype.writeFloatBE=function(b,_,D){return Ee(this,b,_,!1,D)};function ke(T,b,_,D,q){return b=+b,_=_>>>0,q||Re(T,b,_,8),a.write(T,b,_,D,52,8),_+8}d.prototype.writeDoubleLE=function(b,_,D){return ke(this,b,_,!0,D)},d.prototype.writeDoubleBE=function(b,_,D){return ke(this,b,_,!1,D)},d.prototype.copy=function(b,_,D,q){if(!d.isBuffer(b))throw new TypeError("argument should be a Buffer");if(D||(D=0),!q&&q!==0&&(q=this.length),_>=b.length&&(_=b.length),_||(_=0),q>0&&q<D&&(q=D),q===D||b.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),b.length-_<q-D&&(q=b.length-_+D);const J=q-D;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,D,q):Uint8Array.prototype.set.call(b,this.subarray(D,q),_),J},d.prototype.fill=function(b,_,D,q){if(typeof b=="string"){if(typeof _=="string"?(q=_,_=0,D=this.length):typeof D=="string"&&(q=D,D=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!d.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(b.length===1){const he=b.charCodeAt(0);(q==="utf8"&&he<128||q==="latin1")&&(b=he)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(_<0||this.length<_||this.length<D)throw new RangeError("Out of range index");if(D<=_)return this;_=_>>>0,D=D===void 0?this.length:D>>>0,b||(b=0);let J;if(typeof b=="number")for(J=_;J<D;++J)this[J]=b;else{const he=d.isBuffer(b)?b:d.from(b,q),Ke=he.length;if(Ke===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(J=0;J<D-_;++J)this[J+_]=he[J%Ke]}return this};const Me={};function fe(T,b,_){Me[T]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}fe("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fe("ERR_INVALID_ARG_TYPE",function(T,b){return`The "${T}" argument must be of type number. Received type ${typeof b}`},TypeError),fe("ERR_OUT_OF_RANGE",function(T,b,_){let D=`The value of "${T}" is out of range.`,q=_;return Number.isInteger(_)&&Math.abs(_)>2**32?q=ce(String(_)):typeof _=="bigint"&&(q=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(q=ce(q)),q+="n"),D+=` It must be ${b}. Received ${q}`,D},RangeError);function ce(T){let b="",_=T.length;const D=T[0]==="-"?1:0;for(;_>=D+4;_-=3)b=`_${T.slice(_-3,_)}${b}`;return`${T.slice(0,_)}${b}`}function we(T,b,_){De(b,"offset"),(T[b]===void 0||T[b+_]===void 0)&&Oe(b,T.length-(_+1))}function je(T,b,_,D,q,J){if(T>_||T<b){const he=typeof b=="bigint"?"n":"";let Ke;throw b===0||b===BigInt(0)?Ke=`>= 0${he} and < 2${he} ** ${(J+1)*8}${he}`:Ke=`>= -(2${he} ** ${(J+1)*8-1}${he}) and < 2 ** ${(J+1)*8-1}${he}`,new Me.ERR_OUT_OF_RANGE("value",Ke,T)}we(D,q,J)}function De(T,b){if(typeof T!="number")throw new Me.ERR_INVALID_ARG_TYPE(b,"number",T)}function Oe(T,b,_){throw Math.floor(T)!==T?(De(T,_),new Me.ERR_OUT_OF_RANGE("offset","an integer",T)):b<0?new Me.ERR_BUFFER_OUT_OF_BOUNDS:new Me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,T)}const it=/[^+/0-9A-Za-z-_]/g;function We(T){if(T=T.split("=")[0],T=T.trim().replace(it,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function qe(T,b){b=b||1/0;let _;const D=T.length;let q=null;const J=[];for(let he=0;he<D;++he){if(_=T.charCodeAt(he),_>55295&&_<57344){if(!q){if(_>56319){(b-=3)>-1&&J.push(239,191,189);continue}else if(he+1===D){(b-=3)>-1&&J.push(239,191,189);continue}q=_;continue}if(_<56320){(b-=3)>-1&&J.push(239,191,189),q=_;continue}_=(q-55296<<10|_-56320)+65536}else q&&(b-=3)>-1&&J.push(239,191,189);if(q=null,_<128){if((b-=1)<0)break;J.push(_)}else if(_<2048){if((b-=2)<0)break;J.push(_>>6|192,_&63|128)}else if(_<65536){if((b-=3)<0)break;J.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((b-=4)<0)break;J.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return J}function Ge(T){const b=[];for(let _=0;_<T.length;++_)b.push(T.charCodeAt(_)&255);return b}function Le(T,b){let _,D,q;const J=[];for(let he=0;he<T.length&&!((b-=2)<0);++he)_=T.charCodeAt(he),D=_>>8,q=_%256,J.push(q),J.push(D);return J}function lt(T){return r.toByteArray(We(T))}function ut(T,b,_,D){let q;for(q=0;q<D&&!(q+_>=b.length||q>=T.length);++q)b[q+_]=T[q];return q}function Xe(T,b){return T instanceof b||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===b.name}function Ne(T){return T!==T}const Ze=(function(){const T="0123456789abcdef",b=new Array(256);for(let _=0;_<16;++_){const D=_*16;for(let q=0;q<16;++q)b[D+q]=T[_]+T[q]}return b})();function Be(T){return typeof BigInt>"u"?Ue:T}function Ue(){throw new Error("BigInt not supported")}})(Cf)),Cf}var x2=y2(),Mf={exports:{}},Cv;function b2(){if(Cv)return Mf.exports;Cv=1;var t=Mf.exports={},r,a;function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=i}catch{r=i}try{typeof clearTimeout=="function"?a=clearTimeout:a=o}catch{a=o}})();function c(S){if(r===setTimeout)return setTimeout(S,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(S,0);try{return r(S,0)}catch{try{return r.call(null,S,0)}catch{return r.call(this,S,0)}}}function u(S){if(a===clearTimeout)return clearTimeout(S);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(S);try{return a(S)}catch{try{return a.call(null,S)}catch{return a.call(this,S)}}}var d=[],p=!1,m,v=-1;function y(){!p||!m||(p=!1,m.length?d=m.concat(d):v=-1,d.length&&x())}function x(){if(!p){var S=c(y);p=!0;for(var R=d.length;R;){for(m=d,d=[];++v<R;)m&&m[v].run();v=-1,R=d.length}m=null,p=!1,u(S)}}t.nextTick=function(S){var R=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)R[A-1]=arguments[A];d.push(new w(S,R)),d.length===1&&!p&&c(x)};function w(S,R){this.fun=S,this.array=R}w.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function N(){}return t.on=N,t.addListener=N,t.once=N,t.off=N,t.removeListener=N,t.removeAllListeners=N,t.emit=N,t.prependListener=N,t.prependOnceListener=N,t.listeners=function(S){return[]},t.binding=function(S){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(S){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},Mf.exports}var w2=b2();const _2=Io(w2),S2="/preventivatore/assets/x-infissi-logo-Cv6BEoAX.png";function E2(){return f.jsxs("div",{className:"min-h-screen font-sans",children:[f.jsx("header",{className:"sticky top-0 z-20 bg-white/80 backdrop-blur border-b",children:f.jsxs("div",{className:"container-page py-3 flex items-center justify-between",children:[f.jsx(eu,{to:"/",className:"font-semibold tracking-tight",children:f.jsx("img",{src:S2,alt:"X Infissi",className:"h-7 w-auto md:h-8 select-none pointer-events-none"})}),f.jsx("nav",{className:"text-sm text-gray-600",children:"versione 0.1"})]})}),f.jsx("main",{className:"container-page py-6",children:f.jsx(DE,{})})]})}const A2="modulepreload",j2=function(t){return"/preventivatore/"+t},Mv={},ui=function(r,a,i){let o=Promise.resolve();if(a&&a.length>0){let p=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=p(a.map(m=>{if(m=j2(m),m in Mv)return;Mv[m]=!0;const v=m.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":A2,v||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),v)return new Promise((w,N)=>{x.addEventListener("load",w),x.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&c(d.reason);return r().catch(c)})},R2=t=>{let r;return t?r=t:typeof fetch>"u"?r=(...a)=>ui(async()=>{const{default:i}=await Promise.resolve().then(()=>bs);return{default:i}},[]).then(({default:i})=>i(...a)):r=fetch,(...a)=>r(...a)};class Yh extends Error{constructor(r,a="FunctionsError",i){super(r),this.name=a,this.context=i}}class Ov extends Yh{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Dv extends Yh{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class kv extends Yh{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var dh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(dh||(dh={}));var N2=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};class T2{constructor(r,{headers:a={},customFetch:i,region:o=dh.Any}={}){this.url=r,this.headers=a,this.region=o,this.fetch=R2(i)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,a={}){var i;return N2(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:u,signal:d}=a;let p={},{region:m}=a;m||(m=this.region);const v=new URL(`${this.url}/${r}`);m&&m!=="any"&&(p["x-region"]=m,v.searchParams.set("forceFunctionRegion",m));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(p["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(p["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:y,signal:d}).catch(R=>{throw R.name==="AbortError"?R:new Ov(R)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Dv(x);if(!x.ok)throw new kv(x);let N=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return N==="application/json"?S=yield x.json():N==="application/octet-stream"?S=yield x.blob():N==="text/event-stream"?S=x:N==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Ov(o)}:{data:null,error:o,response:o instanceof kv||o instanceof Dv?o.context:void 0}}})}}var bn={},Zi={},Ji={},es={},ts={},ns={},C2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vs=C2();const M2=vs.fetch,dx=vs.fetch.bind(vs),fx=vs.Headers,O2=vs.Request,D2=vs.Response,bs=Object.freeze(Object.defineProperty({__proto__:null,Headers:fx,Request:O2,Response:D2,default:dx,fetch:M2},Symbol.toStringTag,{value:"Module"})),k2=x1(bs);var dc={},Lv;function hx(){if(Lv)return dc;Lv=1,Object.defineProperty(dc,"__esModule",{value:!0});class t extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return dc.default=t,dc}var Uv;function mx(){if(Uv)return ns;Uv=1;var t=ns&&ns.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ns,"__esModule",{value:!0});const r=t(k2),a=t(hx());class i{constructor(c){var u,d;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(d=c.isMaybeSingle)!==null&&d!==void 0?d:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,y,x,w;let N=null,S=null,R=null,A=m.status,M=m.statusText;if(m.ok){if(this.method!=="HEAD"){const k=await m.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?S=k:S=JSON.parse(k))}const F=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),U=(x=m.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");F&&U&&U.length>1&&(R=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(N={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,R=null,A=406,M="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const F=await m.text();try{N=JSON.parse(F),Array.isArray(N)&&m.status===404&&(S=[],N=null,A=200,M="OK")}catch{m.status===404&&F===""?(A=204,M="No Content"):N={message:F}}if(N&&this.isMaybeSingle&&(!((w=N?.details)===null||w===void 0)&&w.includes("0 rows"))&&(N=null,A=200,M="OK"),N&&this.shouldThrowOnError)throw new a.default(N)}return{error:N,data:S,count:R,status:A,statusText:M}});return this.shouldThrowOnError||(p=p.catch(m=>{var v,y,x;return{error:{message:`${(v=m?.name)!==null&&v!==void 0?v:"FetchError"}: ${m?.message}`,details:`${(y=m?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(x=m?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),p.then(c,u)}returns(){return this}overrideTypes(){return this}}return ns.default=i,ns}var zv;function px(){if(zv)return ts;zv=1;var t=ts&&ts.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ts,"__esModule",{value:!0});const r=t(mx());class a extends r.default{select(o){let c=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:u,foreignTable:d,referencedTable:p=d}={}){const m=p?`${p}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${o}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:u=c}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,c,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(m,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:u=!1,buffers:d=!1,wal:p=!1,format:m="text"}={}){var v;const y=[o?"analyze":null,c?"verbose":null,u?"settings":null,d?"buffers":null,p?"wal":null].filter(Boolean).join("|"),x=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${x}"; options=${y};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ts.default=a,ts}var Bv;function Kh(){if(Bv)return es;Bv=1;var t=es&&es.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(es,"__esModule",{value:!0});const r=t(px());class a extends r.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const u=Array.from(new Set(c)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:u,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${p}fts${m}.${c}`),this}match(o){return Object.entries(o).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(o,c,u){return this.url.searchParams.append(o,`not.${c}.${u}`),this}or(o,{foreignTable:c,referencedTable:u=c}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,c,u){return this.url.searchParams.append(o,`${c}.${u}`),this}}return es.default=a,es}var Pv;function gx(){if(Pv)return Ji;Pv=1;var t=Ji&&Ji.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ji,"__esModule",{value:!0});const r=t(Kh());class a{constructor(o,{headers:c={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(c),this.schema=u,this.fetch=d}select(o,{head:c=!1,count:u}={}){const d=c?"HEAD":"GET";let p=!1;const m=(o??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:u=!0}={}){var d;const p="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(m.length>0){const v=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:u=!1,count:d,defaultToNull:p=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),d&&this.headers.append("Prefer",`count=${d}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(y.length>0){const x=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new r.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(o,{count:c}={}){var u;const d="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var c;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new r.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Ji.default=a,Ji}var $v;function L2(){if($v)return Zi;$v=1;var t=Zi&&Zi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Zi,"__esModule",{value:!0});const r=t(gx()),a=t(Kh());class i{constructor(c,{headers:u={},schema:d,fetch:p}={}){this.url=c,this.headers=new Headers(u),this.schemaName=d,this.fetch=p}from(c){const u=new URL(`${this.url}/${c}`);return new r.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new i(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:d=!1,get:p=!1,count:m}={}){var v;let y;const x=new URL(`${this.url}/rpc/${c}`);let w;d||p?(y=d?"HEAD":"GET",Object.entries(u).filter(([S,R])=>R!==void 0).map(([S,R])=>[S,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([S,R])=>{x.searchParams.append(S,R)})):(y="POST",w=u);const N=new Headers(this.headers);return m&&N.set("Prefer",`count=${m}`),new a.default({method:y,url:x,headers:N,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Zi.default=i,Zi}var Iv;function U2(){if(Iv)return bn;Iv=1;var t=bn&&bn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(bn,"__esModule",{value:!0}),bn.PostgrestError=bn.PostgrestBuilder=bn.PostgrestTransformBuilder=bn.PostgrestFilterBuilder=bn.PostgrestQueryBuilder=bn.PostgrestClient=void 0;const r=t(L2());bn.PostgrestClient=r.default;const a=t(gx());bn.PostgrestQueryBuilder=a.default;const i=t(Kh());bn.PostgrestFilterBuilder=i.default;const o=t(px());bn.PostgrestTransformBuilder=o.default;const c=t(mx());bn.PostgrestBuilder=c.default;const u=t(hx());return bn.PostgrestError=u.default,bn.default={PostgrestClient:r.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:u.default},bn}var z2=U2();const B2=Io(z2),{PostgrestClient:P2,PostgrestQueryBuilder:pD,PostgrestFilterBuilder:gD,PostgrestTransformBuilder:vD,PostgrestBuilder:yD,PostgrestError:xD}=B2;class $2{static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const i=a.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let a=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(a+=`

Suggested solution: ${r.workaround}`),new Error(a)}static createWebSocket(r,a){const i=this.getWebSocketConstructor();return new i(r,a)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const I2="2.15.5",F2=`realtime-js/${I2}`,H2="1.0.0",fh=1e4,q2=1e3,G2=100;var To;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(To||(To={}));var hn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(hn||(hn={}));var vr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(vr||(vr={}));var hh;(function(t){t.websocket="websocket"})(hh||(hh={}));var si;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(si||(si={}));class V2{constructor(){this.HEADER_LENGTH=1}decode(r,a){return r.constructor===ArrayBuffer?a(this._binaryDecode(r)):a(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const a=new DataView(r),i=new TextDecoder;return this._decodeBroadcast(r,a,i)}_decodeBroadcast(r,a,i){const o=a.getUint8(1),c=a.getUint8(2);let u=this.HEADER_LENGTH+2;const d=i.decode(r.slice(u,u+o));u=u+o;const p=i.decode(r.slice(u,u+c));u=u+c;const m=JSON.parse(i.decode(r.slice(u,r.byteLength)));return{ref:null,topic:d,event:p,payload:m}}}class vx{constructor(r,a){this.callback=r,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qt||(qt={}));const Fv=(t,r,a={})=>{var i;const o=(i=a.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(r).reduce((c,u)=>(c[u]=Y2(u,t,r,o),c),{})},Y2=(t,r,a,i)=>{const o=r.find(d=>d.name===t),c=o?.type,u=a[t];return c&&!i.includes(c)?yx(c,u):mh(u)},yx=(t,r)=>{if(t.charAt(0)==="_"){const a=t.slice(1,t.length);return Q2(r,a)}switch(t){case qt.bool:return K2(r);case qt.float4:case qt.float8:case qt.int2:case qt.int4:case qt.int8:case qt.numeric:case qt.oid:return W2(r);case qt.json:case qt.jsonb:return X2(r);case qt.timestamp:return Z2(r);case qt.abstime:case qt.date:case qt.daterange:case qt.int4range:case qt.int8range:case qt.money:case qt.reltime:case qt.text:case qt.time:case qt.timestamptz:case qt.timetz:case qt.tsrange:case qt.tstzrange:return mh(r);default:return mh(r)}},mh=t=>t,K2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},W2=t=>{if(typeof t=="string"){const r=parseFloat(t);if(!Number.isNaN(r))return r}return t},X2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(r){return console.log(`JSON parse error: ${r}`),t}return t},Q2=(t,r)=>{if(typeof t!="string")return t;const a=t.length-1,i=t[a];if(t[0]==="{"&&i==="}"){let c;const u=t.slice(1,a);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>yx(r,d))}return t},Z2=t=>typeof t=="string"?t.replace(" ","T"):t,xx=t=>{let r=t;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")+"/api/broadcast"};class Of{constructor(r,a,i={},o=fh){this.channel=r,this.event=a,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,a){var i;return this._hasReceived(r)&&a((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:r,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:a}){this.recHooks.filter(i=>i.status===r).forEach(i=>i.callback(a))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Hv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Hv||(Hv={}));class Co{constructor(r,a){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Co.syncState(this.state,o,c,u),this.pendingDiffs.forEach(p=>{this.state=Co.syncDiff(this.state,p,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Co.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,a,i,o){const c=this.cloneDeep(r),u=this.transformState(a),d={},p={};return this.map(c,(m,v)=>{u[m]||(p[m]=v)}),this.map(u,(m,v)=>{const y=c[m];if(y){const x=v.map(R=>R.presence_ref),w=y.map(R=>R.presence_ref),N=v.filter(R=>w.indexOf(R.presence_ref)<0),S=y.filter(R=>x.indexOf(R.presence_ref)<0);N.length>0&&(d[m]=N),S.length>0&&(p[m]=S)}else d[m]=v}),this.syncDiff(c,{joins:d,leaves:p},i,o)}static syncDiff(r,a,i,o){const{joins:c,leaves:u}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(d,p)=>{var m;const v=(m=r[d])!==null&&m!==void 0?m:[];if(r[d]=this.cloneDeep(p),v.length>0){const y=r[d].map(w=>w.presence_ref),x=v.filter(w=>y.indexOf(w.presence_ref)<0);r[d].unshift(...x)}i(d,v,p)}),this.map(u,(d,p)=>{let m=r[d];if(!m)return;const v=p.map(y=>y.presence_ref);m=m.filter(y=>v.indexOf(y.presence_ref)<0),r[d]=m,o(d,m,p),m.length===0&&delete r[d]}),r}static map(r,a){return Object.getOwnPropertyNames(r).map(i=>a(i,r[i]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((a,i)=>{const o=r[i];return"metas"in o?a[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[i]=o,a},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(qv||(qv={}));var Mo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Mo||(Mo={}));var Zr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zr||(Zr={}));class Wh{constructor(r,a={config:{}},i){this.topic=r,this.params=a,this.socket=i,this.bindings={},this.state=hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Of(this,vr.join,this.params,this.timeout),this.rejoinTimer=new vx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Co(this),this.broadcastEndpointURL=xx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(r,a=this.timeout){var i,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==hn.closed){const{config:{broadcast:u,presence:d,private:p}}=this.params,m=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Mo.PRESENCE]&&this.bindings[Mo.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},x={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>r?.(Zr.CHANNEL_ERROR,w)),this._onClose(()=>r?.(Zr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:w})=>{var N;if(this.socket.setAuth(),w===void 0){r?.(Zr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,R=(N=S?.length)!==null&&N!==void 0?N:0,A=[];for(let M=0;M<R;M++){const L=S[M],{filter:{event:F,schema:U,table:k,filter:Y}}=L,re=w&&w[M];if(re&&re.event===F&&re.schema===U&&re.table===k&&re.filter===Y)A.push(Object.assign(Object.assign({},L),{id:re.id}));else{this.unsubscribe(),this.state=hn.errored,r?.(Zr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,r&&r(Zr.SUBSCRIBED);return}}).receive("error",w=>{this.state=hn.errored,r?.(Zr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{r?.(Zr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,a={}){return await this.send({type:"presence",event:"track",payload:r},a.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,a,i){return this.state===hn.joined&&r===Mo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,a,i)}async send(r,a={}){var i,o;if(!this._canPush()&&r.type==="broadcast"){const{event:c,payload:u}=r,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,p;const m=this._push(r.type,r,a.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),m.receive("ok",()=>c("ok")),m.receive("error",()=>c("error")),m.receive("timeout",()=>c("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=hn.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Of(this,vr.leave,{},r),i.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=hn.closed,this.bindings={}}async _fetchWithTimeout(r,a,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(r,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(c),u}_push(r,a,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Of(this,r,a,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>G2){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(r,a,i){return a}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,a,i){var o,c;const u=r.toLocaleLowerCase(),{close:d,error:p,leave:m,join:v}=vr;if(i&&[d,p,m,v].indexOf(u)>=0&&i!==this._joinRef())return;let x=this._onMessage(u,a,i);if(a&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var N,S,R;return((N=w.filter)===null||N===void 0?void 0:N.event)==="*"||((R=(S=w.filter)===null||S===void 0?void 0:S.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===u}).map(w=>w.callback(x,i)):(c=this.bindings[u])===null||c===void 0||c.filter(w=>{var N,S,R,A,M,L;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const F=w.id,U=(N=w.filter)===null||N===void 0?void 0:N.event;return F&&((S=a.ids)===null||S===void 0?void 0:S.includes(F))&&(U==="*"||U?.toLocaleLowerCase()===((R=a.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const F=(M=(A=w?.filter)===null||A===void 0?void 0:A.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return F==="*"||F===((L=a?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof x=="object"&&"ids"in x){const N=x.data,{schema:S,table:R,commit_timestamp:A,type:M,errors:L}=N;x=Object.assign(Object.assign({},{schema:S,table:R,commit_timestamp:A,eventType:M,new:{},old:{},errors:L}),this._getPayloadRecords(N))}w.callback(x,i)})}_isClosed(){return this.state===hn.closed}_isJoined(){return this.state===hn.joined}_isJoining(){return this.state===hn.joining}_isLeaving(){return this.state===hn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,a,i){const o=r.toLocaleLowerCase(),c={type:o,filter:a,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(r,a){const i=r.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Wh.isEqual(o.filter,a))})),this}static isEqual(r,a){if(Object.keys(r).length!==Object.keys(a).length)return!1;for(const i in r)if(r[i]!==a[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(vr.close,{},r)}_onError(r){this._on(vr.error,{},a=>r(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const a={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(a.new=Fv(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(a.old=Fv(r.columns,r.old_record)),a}}const Df=()=>{},fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J2=[1e3,2e3,5e3,1e4],eA=1e4,tA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nA{constructor(r,a){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Df,this.ref=0,this.reconnectTimer=null,this.logger=Df,this.conn=null,this.sendBuffer=[],this.serializer=new V2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...u)=>ui(async()=>{const{default:d}=await Promise.resolve().then(()=>bs);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((i=a?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${r}/${hh.websocket}`,this.httpEndpoint=xx(r),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$2.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const a=r.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:H2}))}disconnect(r,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},r?this.conn.close(r,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const a=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const r=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,a,i){this.logger(r,a,i)}connectionState(){switch(this.conn&&this.conn.readyState){case To.connecting:return si.Connecting;case To.open:return si.Open;case To.closing:return si.Closing;default:return si.Closed}}isConnected(){return this.connectionState()===si.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,a={config:{}}){const i=`realtime:${r}`,o=this.getChannels().find(c=>c.topic===i);if(o)return o;{const c=new Wh(`realtime:${r}`,a,this);return this.channels.push(c),c}}push(r){const{topic:a,event:i,payload:o,ref:c}=r,u=()=>{this.encode(r,d=>{var p;(p=this.conn)===null||p===void 0||p.send(d)})};this.log("push",`${a} ${i} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(q2,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let a=this.channels.find(i=>i.topic===r&&(i._isJoined()||i._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${r}"`),a.unsubscribe())}_remove(r){this.channels=this.channels.filter(a=>a.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:c,ref:u}=a,d=u?`(${u})`:"",p=c.status||"";this.log("receive",`${p} ${i} ${o} ${d}`.trim(),c),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,c,u)),this._triggerStateCallbacks("message",a)})}_clearTimer(r){var a;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var a;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(vr.error))}_appendParams(r,a){if(Object.keys(a).length===0)return r;const i=r.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${r}${i}${o}`}_workerObjectUrl(r){let a;if(r)a=r;else{const i=new Blob([tA],{type:"application/javascript"});a=URL.createObjectURL(i)}return a}_setConnectionState(r,a=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(r=null){let a;r?a=r:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(i=>{const o={access_token:a,version:F2};a&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(vr.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${r}`,a)})}_triggerStateCallbacks(r,a){try{this.stateChangeCallbacks[r].forEach(i=>{try{i(a)}catch(o){this.log("error",`error in ${r} callback`,o)}})}catch(i){this.log("error",`error triggering ${r} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new vx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var a,i,o,c,u,d,p,m,v;if(this.transport=(a=r?.transport)!==null&&a!==void 0?a:null,this.timeout=(i=r?.timeout)!==null&&i!==void 0?i:fh,this.heartbeatIntervalMs=(o=r?.heartbeatIntervalMs)!==null&&o!==void 0?o:fc.HEARTBEAT_INTERVAL,this.worker=(c=r?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=r?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=r?.heartbeatCallback)!==null&&d!==void 0?d:Df,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=r?.reconnectAfterMs)!==null&&p!==void 0?p:(y=>J2[y-1]||eA),this.encode=(m=r?.encode)!==null&&m!==void 0?m:((y,x)=>x(JSON.stringify(y))),this.decode=(v=r?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class Xh extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function cn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class rA extends Xh{constructor(r,a,i){super(r),this.name="StorageApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ph extends Xh{constructor(r,a){super(r),this.name="StorageUnknownError",this.originalError=a}}var aA=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};const bx=t=>{let r;return t?r=t:typeof fetch>"u"?r=(...a)=>ui(async()=>{const{default:i}=await Promise.resolve().then(()=>bs);return{default:i}},void 0).then(({default:i})=>i(...a)):r=fetch,(...a)=>r(...a)},iA=()=>aA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ui(()=>Promise.resolve().then(()=>bs),void 0)).Response:Response}),gh=t=>{if(Array.isArray(t))return t.map(a=>gh(a));if(typeof t=="function"||t!==Object(t))return t;const r={};return Object.entries(t).forEach(([a,i])=>{const o=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));r[o]=gh(i)}),r},sA=t=>{if(typeof t!="object"||t===null)return!1;const r=Object.getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var gi=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};const kf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oA=(t,r,a)=>gi(void 0,void 0,void 0,function*(){const i=yield iA();t instanceof i&&!a?.noResolveJson?t.json().then(o=>{const c=t.status||500,u=o?.statusCode||c+"";r(new rA(kf(o),c,u))}).catch(o=>{r(new ph(kf(o),o))}):r(new ph(kf(t),t))}),lA=(t,r,a,i)=>{const o={method:t,headers:r?.headers||{}};return t==="GET"||!i?o:(sA(i)?(o.headers=Object.assign({"Content-Type":"application/json"},r?.headers),o.body=JSON.stringify(i)):o.body=i,r?.duplex&&(o.duplex=r.duplex),Object.assign(Object.assign({},o),a))};function Vo(t,r,a,i,o,c){return gi(this,void 0,void 0,function*(){return new Promise((u,d)=>{t(a,lA(r,i,o,c)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>oA(p,d,i))})})}function Pc(t,r,a,i){return gi(this,void 0,void 0,function*(){return Vo(t,"GET",r,a,i)})}function Nr(t,r,a,i,o){return gi(this,void 0,void 0,function*(){return Vo(t,"POST",r,i,o,a)})}function vh(t,r,a,i,o){return gi(this,void 0,void 0,function*(){return Vo(t,"PUT",r,i,o,a)})}function cA(t,r,a,i){return gi(this,void 0,void 0,function*(){return Vo(t,"HEAD",r,Object.assign(Object.assign({},a),{noResolveJson:!0}),i)})}function wx(t,r,a,i,o){return gi(this,void 0,void 0,function*(){return Vo(t,"DELETE",r,i,o,a)})}var uA=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};class dA{constructor(r,a){this.downloadFn=r,this.shouldThrowOnError=a}then(r,a){return this.execute().then(r,a)}execute(){return uA(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}}var fA=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};class hA{constructor(r,a){this.downloadFn=r,this.shouldThrowOnError=a}asStream(){return new dA(this.downloadFn,this.shouldThrowOnError)}then(r,a){return this.execute().then(r,a)}execute(){return fA(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}}var Bn=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};const mA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pA{constructor(r,a={},i,o){this.shouldThrowOnError=!1,this.url=r,this.headers=a,this.bucketId=i,this.fetch=bx(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,a,i,o){return Bn(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},Gv),o);let d=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",u.cacheControl),p&&c.append("metadata",this.encodeMetadata(p))):(c=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,p&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const m=this._removeEmptyFolders(a),v=this._getFinalPath(m),y=yield(r=="PUT"?vh:Nr)(this.fetch,`${this.url}/object/${v}`,c,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(cn(c))return{data:null,error:c};throw c}})}upload(r,a,i){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,a,i)})}uploadToSignedUrl(r,a,i,o){return Bn(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",a);try{let p;const m=Object.assign({upsert:Gv.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",m.cacheControl)):(p=i,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const y=yield vh(this.fetch,d.toString(),p,{headers:v});return{data:{path:c,fullPath:y.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(cn(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(r,a){return Bn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(r);const o=Object.assign({},this.headers);a?.upsert&&(o["x-upsert"]="true");const c=yield Nr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+c.url),d=u.searchParams.get("token");if(!d)throw new Xh("No token returned by API");return{data:{signedUrl:u.toString(),path:r,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}})}update(r,a,i){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,a,i)})}move(r,a,i){return Bn(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:a,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(cn(o))return{data:null,error:o};throw o}})}copy(r,a,i){return Bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:a,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(cn(o))return{data:null,error:o};throw o}})}createSignedUrl(r,a,i){return Bn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r),c=yield Nr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:a},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(cn(o))return{data:null,error:o};throw o}})}createSignedUrls(r,a,i){return Bn(this,void 0,void 0,function*(){try{const o=yield Nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:r},{headers:this.headers}),c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(cn(o))return{data:null,error:o};throw o}})}download(r,a){const o=typeof a?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(a?.transform||{}),u=c?`?${c}`:"",d=this._getFinalPath(r),p=()=>Pc(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new hA(p,this.shouldThrowOnError)}info(r){return Bn(this,void 0,void 0,function*(){const a=this._getFinalPath(r);try{const i=yield Pc(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:gh(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}})}exists(r){return Bn(this,void 0,void 0,function*(){const a=this._getFinalPath(r);try{return yield cA(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i)&&i instanceof ph){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(r,a){const i=this._getFinalPath(r),o=[],c=a?.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&o.push(c);const d=typeof a?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(a?.transform||{});p!==""&&o.push(p);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${m}`)}}}remove(r){return Bn(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}})}list(r,a,i){return Bn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},mA),a),{prefix:r||""});return{data:yield Nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(cn(o))return{data:null,error:o};throw o}})}listV2(r,a){return Bn(this,void 0,void 0,function*(){try{const i=Object.assign({},r);return{data:yield Nr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const a=[];return r.width&&a.push(`width=${r.width}`),r.height&&a.push(`height=${r.height}`),r.resize&&a.push(`resize=${r.resize}`),r.format&&a.push(`format=${r.format}`),r.quality&&a.push(`quality=${r.quality}`),a.join("&")}}const gA="2.12.2",vA={"X-Client-Info":`storage-js/${gA}`};var rs=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};class yA{constructor(r,a={},i,o){this.shouldThrowOnError=!1;const c=new URL(r);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},vA),a),this.fetch=bx(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return rs(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}})}getBucket(r){return rs(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}})}createBucket(r,a={public:!1}){return rs(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}})}updateBucket(r,a){return rs(this,void 0,void 0,function*(){try{return{data:yield vh(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}})}emptyBucket(r){return rs(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}})}deleteBucket(r){return rs(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}})}}class xA extends yA{constructor(r,a={},i,o){super(r,a,i,o)}from(r){return new pA(this.url,this.headers,r,this.fetch)}}const bA="2.58.0";let Ro="";typeof Deno<"u"?Ro="deno":typeof document<"u"?Ro="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ro="react-native":Ro="node";const wA={"X-Client-Info":`supabase-js-${Ro}/${bA}`},_A={headers:wA},SA={schema:"public"},EA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AA={};var jA=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};const RA=t=>{let r;return t?r=t:typeof fetch>"u"?r=dx:r=fetch,(...a)=>r(...a)},NA=()=>typeof Headers>"u"?fx:Headers,TA=(t,r,a)=>{const i=RA(a),o=NA();return(c,u)=>jA(void 0,void 0,void 0,function*(){var d;const p=(d=yield r())!==null&&d!==void 0?d:t;let m=new o(u?.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),i(c,Object.assign(Object.assign({},u),{headers:m}))})};var CA=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};function MA(t){return t.endsWith("/")?t:t+"/"}function OA(t,r){var a,i;const{db:o,auth:c,realtime:u,global:d}=t,{db:p,auth:m,realtime:v,global:y}=r,x={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},m),c),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),d),{headers:Object.assign(Object.assign({},(a=y?.headers)!==null&&a!==void 0?a:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>CA(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function DA(t){const r=t?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(MA(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _x="2.72.0",fs=30*1e3,yh=3,Lf=yh*fs,kA="http://localhost:9999",LA="supabase.auth.token",UA={"X-Client-Info":`gotrue-js/${_x}`},xh="X-Supabase-Api-Version",Sx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BA=600*1e3;class Qh extends Error{constructor(r,a,i){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=i}}function ct(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class PA extends Qh{constructor(r,a,i){super(r,a,i),this.name="AuthApiError",this.status=a,this.code=i}}function $A(t){return ct(t)&&t.name==="AuthApiError"}class Ex extends Qh{constructor(r,a){super(r),this.name="AuthUnknownError",this.originalError=a}}class za extends Qh{constructor(r,a,i,o){super(r,i,o),this.name=a,this.status=i}}class Ra extends za{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IA(t){return ct(t)&&t.name==="AuthSessionMissingError"}class So extends za{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hc extends za{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class mc extends za{constructor(r,a=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function FA(t){return ct(t)&&t.name==="AuthImplicitGrantRedirectError"}class Vv extends za{constructor(r,a=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bh extends za{constructor(r,a){super(r,"AuthRetryableFetchError",a,void 0)}}function Uf(t){return ct(t)&&t.name==="AuthRetryableFetchError"}class Yv extends za{constructor(r,a,i){super(r,"AuthWeakPasswordError",a,"weak_password"),this.reasons=i}}class wh extends za{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const $c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kv=` 	
\r=`.split(""),HA=(()=>{const t=new Array(128);for(let r=0;r<t.length;r+=1)t[r]=-1;for(let r=0;r<Kv.length;r+=1)t[Kv[r].charCodeAt(0)]=-2;for(let r=0;r<$c.length;r+=1)t[$c[r].charCodeAt(0)]=r;return t})();function Wv(t,r,a){if(t!==null)for(r.queue=r.queue<<8|t,r.queuedBits+=8;r.queuedBits>=6;){const i=r.queue>>r.queuedBits-6&63;a($c[i]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const i=r.queue>>r.queuedBits-6&63;a($c[i]),r.queuedBits-=6}}function Ax(t,r,a){const i=HA[t];if(i>-1)for(r.queue=r.queue<<6|i,r.queuedBits+=6;r.queuedBits>=8;)a(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Xv(t){const r=[],a=u=>{r.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{VA(u,i,a)};for(let u=0;u<t.length;u+=1)Ax(t.charCodeAt(u),o,c);return r.join("")}function qA(t,r){if(t<=127){r(t);return}else if(t<=2047){r(192|t>>6),r(128|t&63);return}else if(t<=65535){r(224|t>>12),r(128|t>>6&63),r(128|t&63);return}else if(t<=1114111){r(240|t>>18),r(128|t>>12&63),r(128|t>>6&63),r(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function GA(t,r){for(let a=0;a<t.length;a+=1){let i=t.charCodeAt(a);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}qA(i,r)}}function VA(t,r,a){if(r.utf8seq===0){if(t<=127){a(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){r.utf8seq=i;break}if(r.utf8seq===2)r.codepoint=t&31;else if(r.utf8seq===3)r.codepoint=t&15;else if(r.utf8seq===4)r.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|t&63,r.utf8seq-=1,r.utf8seq===0&&a(r.codepoint)}}function YA(t){const r=[],a={queue:0,queuedBits:0},i=o=>{r.push(o)};for(let o=0;o<t.length;o+=1)Ax(t.charCodeAt(o),a,i);return new Uint8Array(r)}function KA(t){const r=[];return GA(t,a=>r.push(a)),new Uint8Array(r)}function WA(t){const r=[],a={queue:0,queuedBits:0},i=o=>{r.push(o)};return t.forEach(o=>Wv(o,a,i)),Wv(null,a,i),r.join("")}function XA(t){return Math.round(Date.now()/1e3)+t}function QA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=Math.random()*16|0;return(t=="x"?r:r&3|8).toString(16)})}const lr=()=>typeof window<"u"&&typeof document<"u",ni={tested:!1,writable:!1},jx=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ni.tested)return ni.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ni.tested=!0,ni.writable=!0}catch{ni.tested=!0,ni.writable=!1}return ni.writable};function ZA(t){const r={},a=new URL(t);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,c)=>{r[c]=o})}catch{}return a.searchParams.forEach((i,o)=>{r[o]=i}),r}const Rx=t=>{let r;return t?r=t:typeof fetch>"u"?r=(...a)=>ui(async()=>{const{default:i}=await Promise.resolve().then(()=>bs);return{default:i}},void 0).then(({default:i})=>i(...a)):r=fetch,(...a)=>r(...a)},JA=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",hs=async(t,r,a)=>{await t.setItem(r,JSON.stringify(a))},ri=async(t,r)=>{const a=await t.getItem(r);if(!a)return null;try{return JSON.parse(a)}catch{return a}},ja=async(t,r)=>{await t.removeItem(r)};class tu{constructor(){this.promise=new tu.promiseConstructor((r,a)=>{this.resolve=r,this.reject=a})}}tu.promiseConstructor=Promise;function zf(t){const r=t.split(".");if(r.length!==3)throw new wh("Invalid JWT structure");for(let i=0;i<r.length;i++)if(!zA.test(r[i]))throw new wh("JWT not in base64url format");return{header:JSON.parse(Xv(r[0])),payload:JSON.parse(Xv(r[1])),signature:YA(r[2]),raw:{header:r[0],payload:r[1]}}}async function ej(t){return await new Promise(r=>{setTimeout(()=>r(null),t)})}function tj(t,r){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await t(c);if(!r(c,null,u)){i(u);return}}catch(u){if(!r(c,u)){o(u);return}}})()})}function nj(t){return("0"+t.toString(16)).substr(-2)}function rj(){const r=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=a.length;let o="";for(let c=0;c<56;c++)o+=a.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(r),Array.from(r,nj).join("")}async function aj(t){const a=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function ij(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const a=await aj(t);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function as(t,r,a=!1){const i=rj();let o=i;a&&(o+="/PASSWORD_RECOVERY"),await hs(t,`${r}-code-verifier`,o);const c=await ij(i);return[c,i===c?"plain":"s256"]}const sj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oj(t){const r=t.headers.get(xh);if(!r||!r.match(sj))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function lj(t){if(!t)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(t<=r)throw new Error("JWT has expired")}function cj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function is(t){if(!uj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bf(){const t={};return new Proxy(t,{get:(r,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qv(t){return JSON.parse(JSON.stringify(t))}var dj=function(t,r){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(a[i[o]]=t[i[o]]);return a};const ii=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fj=[502,503,504];async function Zv(t){var r;if(!JA(t))throw new bh(ii(t),0);if(fj.includes(t.status))throw new bh(ii(t),t.status);let a;try{a=await t.json()}catch(c){throw new Ex(ii(c),c)}let i;const o=oj(t);if(o&&o.getTime()>=Sx["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?i=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(i=a.error_code),i){if(i==="weak_password")throw new Yv(ii(a),t.status,((r=a.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(i==="session_not_found")throw new Ra}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Yv(ii(a),t.status,a.weak_password.reasons);throw new PA(ii(a),t.status||500,i)}const hj=(t,r,a,i)=>{const o={method:t,headers:r?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),a))};async function yt(t,r,a,i){var o;const c=Object.assign({},i?.headers);c[xh]||(c[xh]=Sx["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await mj(t,r,a+d,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function mj(t,r,a,i,o,c){const u=hj(r,i,o,c);let d;try{d=await t(a,Object.assign({},u))}catch(p){throw console.error(p),new bh(ii(p),0)}if(d.ok||await Zv(d),i?.noResolveJson)return d;try{return await d.json()}catch(p){await Zv(p)}}function Rr(t){var r;let a=null;yj(t)&&(a=Object.assign({},t),t.expires_at||(a.expires_at=XA(t.expires_in)));const i=(r=t.user)!==null&&r!==void 0?r:t;return{data:{session:a,user:i},error:null}}function Jv(t){const r=Rr(t);return!r.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)&&(r.data.weak_password=t.weak_password),r}function Ma(t){var r;return{data:{user:(r=t.user)!==null&&r!==void 0?r:t},error:null}}function pj(t){return{data:t,error:null}}function gj(t){const{action_link:r,email_otp:a,hashed_token:i,redirect_to:o,verification_type:c}=t,u=dj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:r,email_otp:a,hashed_token:i,redirect_to:o,verification_type:c},p=Object.assign({},u);return{data:{properties:d,user:p},error:null}}function vj(t){return t}function yj(t){return t.access_token&&t.refresh_token&&t.expires_in}const Pf=["global","local","others"];var xj=function(t,r){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(a[i[o]]=t[i[o]]);return a};class bj{constructor({url:r="",headers:a={},fetch:i}){this.url=r,this.headers=a,this.fetch=Rx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,a=Pf[0]){if(Pf.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pf.join(", ")}`);try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}}async inviteUserByEmail(r,a={}){try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ma})}catch(i){if(ct(i))return{data:{user:null},error:i};throw i}}async generateLink(r){try{const{options:a}=r,i=xj(r,["options"]),o=Object.assign(Object.assign({},i),a);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:gj,redirectTo:a?.redirectTo})}catch(a){if(ct(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(r){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Ma})}catch(a){if(ct(a))return{data:{user:null},error:a};throw a}}async listUsers(r){var a,i,o,c,u,d,p;try{const m={nextPage:null,lastPage:0,total:0},v=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=r?.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=r?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:vj});if(v.error)throw v.error;const y=await v.json(),x=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(p=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(N=>{const S=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(N.split(";")[1].split("=")[1]);m[`${R}Page`]=S}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(ct(m))return{data:{users:[]},error:m};throw m}}async getUserById(r){is(r);try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Ma})}catch(a){if(ct(a))return{data:{user:null},error:a};throw a}}async updateUserById(r,a){is(r);try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:a,headers:this.headers,xform:Ma})}catch(i){if(ct(i))return{data:{user:null},error:i};throw i}}async deleteUser(r,a=!1){is(r);try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ma})}catch(i){if(ct(i))return{data:{user:null},error:i};throw i}}async _listFactors(r){is(r.userId);try{const{data:a,error:i}=await yt(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:i}}catch(a){if(ct(a))return{data:null,error:a};throw a}}async _deleteFactor(r){is(r.userId),is(r.id);try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}}}function ey(t={}){return{getItem:r=>t[r]||null,setItem:(r,a)=>{t[r]=a},removeItem:r=>{delete t[r]}}}function wj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ss={debug:!!(globalThis&&jx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nx extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class _j extends Nx{}async function Sj(t,r,a){ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,r);const i=new globalThis.AbortController;return r>0&&setTimeout(()=>{i.abort(),ss.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await a()}finally{ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(r===0)throw ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _j(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ss.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function Tx(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Ej(t){return parseInt(t,16)}function Aj(t){const r=new TextEncoder().encode(t);return"0x"+Array.from(r,i=>i.toString(16).padStart(2,"0")).join("")}function jj(t){var r;const{chainId:a,domain:i,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:p,resources:m,scheme:v,uri:y,version:x}=t;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((r=t.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=Tx(t.address),N=v?`${v}://${i}`:i,S=t.statement?`${t.statement}
`:"",R=`${N} wants you to sign in with your Ethereum account:
${w}

${S}`;let A=`URI: ${y}
Version: ${x}
Chain ID: ${a}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(A+=`
Expiration Time: ${o.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),p&&(A+=`
Request ID: ${p}`),m){let M=`
Resources:`;for(const L of m){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);M+=`
- ${L}`}A+=M}return`${R}
${A}`}wj();const Rj={url:kA,storageKey:LA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:UA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ty(t,r,a){return await a()}const os={};class Uo{constructor(r){var a,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Uo.nextInstanceID,Uo.nextInstanceID+=1,this.instanceID>0&&lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Rj),r);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new bj({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Rx(o.fetch),this.lock=o.lock||ty,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:lr()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=Sj:this.lock=ty,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:jx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ey(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ey(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var r,a;return(a=(r=os[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(r){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,a;return(a=(r=os[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){os[this.storageKey]=Object.assign(Object.assign({},os[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_x}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const a=ZA(window.location.href);let i="none";if(this._isImplicitGrantCallback(a)?i="implicit":await this._isPKCECallback(a)&&(i="pkce"),lr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:c}=await this._getSessionFromURL(a,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),FA(c)){const p=(r=c.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return ct(a)?{error:a}:{error:new Ex("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var a,i,o;try{const c=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(a=r?.options)===null||a===void 0?void 0:a.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=r?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Rr}),{data:u,error:d}=c;if(d||!u)return{data:{user:null,session:null},error:d};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(c){if(ct(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(r){var a,i,o;try{let c;if("email"in r){const{email:v,password:y,options:x}=r;let w=null,N=null;this.flowType==="pkce"&&([w,N]=await as(this.storage,this.storageKey)),c=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:v,password:y,data:(a=x?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:w,code_challenge_method:N},xform:Rr})}else if("phone"in r){const{phone:v,password:y,options:x}=r;c=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Rr})}else throw new hc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return{data:{user:null,session:null},error:d};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(c){if(ct(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(r){try{let a;if("email"in r){const{email:c,password:u,options:d}=r;a=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Jv})}else if("phone"in r){const{phone:c,password:u,options:d}=r;a=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Jv})}else throw new hc("You must provide either an email or phone number and a password");const{data:i,error:o}=a;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new So}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(a){if(ct(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(r){var a,i,o,c;return await this._handleProviderSignIn(r.provider,{redirectTo:(a=r.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=r.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=r.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=r.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:a}=r;switch(a){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(r){var a,i,o,c,u,d,p,m,v,y,x;let w,N;if("message"in r)w=r.message,N=r.signature;else{const{chain:S,wallet:R,statement:A,options:M}=r;let L;if(lr())if(typeof R=="object")L=R;else{const me=window;if("ethereum"in me&&typeof me.ethereum=="object"&&"request"in me.ethereum&&typeof me.ethereum.request=="function")L=me.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=R}const F=new URL((a=M?.url)!==null&&a!==void 0?a:window.location.href),U=await L.request({method:"eth_requestAccounts"}).then(me=>me).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=Tx(U[0]);let Y=(i=M?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!Y){const me=await L.request({method:"eth_chainId"});Y=Ej(me)}const re={domain:F.host,address:k,statement:A,uri:F.href,version:"1",chainId:Y,nonce:(o=M?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=M?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=M?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(p=M?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=M?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=M?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=jj(re),N=await L.request({method:"personal_sign",params:[Aj(w),k]})}try{const{data:S,error:R}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:N},!((y=r.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=r.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Rr});if(R)throw R;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new So}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:R})}catch(S){if(ct(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(r){var a,i,o,c,u,d,p,m,v,y,x,w;let N,S;if("message"in r)N=r.message,S=r.signature;else{const{chain:R,wallet:A,statement:M,options:L}=r;let F;if(lr())if(typeof A=="object")F=A;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))F=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=A}const U=new URL((a=L?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in F&&F.signIn){const k=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),M?{statement:M}:null));let Y;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")Y=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)Y=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)N=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),S=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${U.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(o=(i=L?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=L?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((u=L?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((d=L?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((y=(v=L?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...L.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const k=await F.signMessage(new TextEncoder().encode(N),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=k}}try{const{data:R,error:A}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:WA(S)},!((x=r.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=r.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Rr});if(A)throw A;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new So}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:A})}catch(R){if(ct(R))return{data:{user:null,session:null},error:R};throw R}}async _exchangeCodeForSession(r){const a=await ri(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(a??"").split("/");try{const{data:c,error:u}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:i},xform:Rr});if(await ja(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new So}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(ct(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(r){try{const{options:a,provider:i,token:o,access_token:c,nonce:u}=r,d=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Rr}),{data:p,error:m}=d;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new So}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(a){if(ct(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(r){var a,i,o,c,u;try{if("email"in r){const{email:d,options:p}=r;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await as(this.storage,this.storageKey));const{error:y}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(a=p?.data)!==null&&a!==void 0?a:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in r){const{phone:d,options:p}=r,{data:m,error:v}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=p?.data)!==null&&o!==void 0?o:{},create_user:(c=p?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(u=p?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:v}}throw new hc("You must provide either an email or phone number.")}catch(d){if(ct(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(r){var a,i;try{let o,c;"options"in r&&(o=(a=r.options)===null||a===void 0?void 0:a.redirectTo,c=(i=r.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Rr});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,m=u.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(o){if(ct(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(r){var a,i,o;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await as(this.storage,this.storageKey)),await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(i=(a=r.options)===null||a===void 0?void 0:a.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=r?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:pj})}catch(c){if(ct(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)throw i;if(!a)throw new Ra;const{error:o}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:o}})}catch(r){if(ct(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const a=`${this.url}/resend`;if("email"in r){const{email:i,type:o,options:c}=r,{error:u}=await yt(this.fetch,"POST",a,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in r){const{phone:i,type:o,options:c}=r,{data:u,error:d}=await yt(this.fetch,"POST",a,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new hc("You must provide either an email or phone number and a type")}catch(a){if(ct(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(r,a){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=a();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await r(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const a=await ri(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?r=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const i=r.expires_at?r.expires_at*1e3-Date.now()<Lf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(this.userStorage){const u=await ri(this.userStorage,this.storageKey+"-user");u?.user?r.user=u.user:r.user=Bf()}if(this.storage.isServer&&r.user){let u=this.suppressGetSessionWarning;r=new Proxy(r,{get:(p,m,v)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,v))})}return{data:{session:r},error:null}}const{session:o,error:c}=await this._callRefreshToken(r.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Ma}):await this._useSession(async a=>{var i,o,c;const{data:u,error:d}=a;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ra}:await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Ma})})}catch(a){if(ct(a))return IA(a)&&(await this._removeSession(),await ja(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(r,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,a))}async _updateUser(r,a={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new Ra;const u=o.session;let d=null,p=null;this.flowType==="pkce"&&r.email!=null&&([d,p]=await as(this.storage,this.storageKey));const{data:m,error:v}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:d,code_challenge_method:p}),jwt:u.access_token,xform:Ma});if(v)throw v;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(ct(i))return{data:{user:null},error:i};throw i}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ra;const a=Date.now()/1e3;let i=a,o=!0,c=null;const{payload:u}=zf(r.access_token);if(u.exp&&(i=u.exp,o=i<=a),o){const{session:d,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:p}=await this._getUser(r.access_token);if(p)throw p;c={access_token:r.access_token,refresh_token:r.refresh_token,user:d.user,token_type:"bearer",expires_in:i-a,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(a){if(ct(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async a=>{var i;if(!r){const{data:u,error:d}=a;if(d)throw d;r=(i=u.session)!==null&&i!==void 0?i:void 0}if(!r?.refresh_token)throw new Ra;const{session:o,error:c}=await this._callRefreshToken(r.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(ct(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(r,a){try{if(!lr())throw new mc("No browser detected.");if(r.error||r.error_description||r.error_code)throw new mc(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Vv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mc("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Vv("No code detected.");const{data:M,error:L}=await this._exchangeCodeForSession(r.code);if(L)throw L;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:p,token_type:m}=r;if(!c||!d||!u||!m)throw new mc("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(d);let x=v+y;p&&(x=parseInt(p));const w=x-v;w*1e3<=fs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const N=x-y;v-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,x,v):v-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,x,v);const{data:S,error:R}=await this._getUser(c);if(R)throw R;const A={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:y,expires_at:x,refresh_token:u,token_type:m,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:r.type},error:null}}catch(i){if(ct(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const a=await ri(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&a)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c)return{error:c};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,r);if(d&&!($A(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return r!=="others"&&(await this._removeSession(),await ja(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const a=QA(),i={id:a,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:i}}}async _emitInitialSession(r){return await this._useSession(async a=>{var i,o;try{const{data:{session:c},error:u}=a;if(u)throw u;await((i=this.stateChangeEmitters.get(r))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",r,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",c),console.error(c)}})}async resetPasswordForEmail(r,a={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await as(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(ct(c))return{data:null,error:c};throw c}}async getUserIdentities(){var r;try{const{data:a,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(r=a.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}}async linkIdentity(r){var a;try{const{data:i,error:o}=await this._useSession(async c=>{var u,d,p,m,v;const{data:y,error:x}=c;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(u=r.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=r.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return lr()&&!(!((a=r.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:r.provider,url:i?.url},error:null}}catch(i){if(ct(i))return{data:{provider:r.provider,url:null},error:i};throw i}}async unlinkIdentity(r){try{return await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)throw u;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(ct(a))return{data:null,error:a};throw a}}async _refreshAccessToken(r){const a=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{const i=Date.now();return await tj(async o=>(o>0&&await ej(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Rr})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Uf(c)&&Date.now()+u-i<fs})}catch(i){if(this._debug(a,"error",i),ct(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(a,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,a){const i=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",a,"url",i),lr()&&!a.skipBrowserRedirect&&window.location.assign(i),{data:{provider:r,url:i},error:null}}async _recoverAndRefresh(){var r,a;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await ri(this.storage,this.storageKey);if(o&&this.userStorage){let u=await ri(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await hs(this.userStorage,this.storageKey+"-user",u)),o.user=(r=u?.user)!==null&&r!==void 0?r:Bf()}else if(o&&!o.user&&!o.user){const u=await ri(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await ja(this.storage,this.storageKey+"-user"),await hs(this.storage,this.storageKey,o)):o.user=Bf()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const c=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Lf;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${Lf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Uf(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(r){var a,i;if(!r)throw new Ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new tu;const{data:c,error:u}=await this._refreshAccessToken(r);if(u)throw u;if(!c.session)throw new Ra;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={session:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),ct(c)){const u={session:null,error:c};return Uf(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(r,a,i=!0){const o=`#_notifyAllSubscribers(${r})`;this._debug(o,"begin",a,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:r,session:a});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(r,a)}catch(p){c.push(p)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const a=Object.assign({},r),i=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&a.user&&await hs(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const c=Qv(o);await hs(this.storage,this.storageKey,c)}else{const o=Qv(a);await hs(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ja(this.storage,this.storageKey),await ja(this.storage,this.storageKey+"-code-verifier"),await ja(this.storage,this.storageKey+"-user"),this.userStorage&&await ja(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&lr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),fs);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async a=>{const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-r)/fs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${fs}ms, refresh threshold is ${yh} ticks`),o<=yh&&await this._callRefreshToken(i.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Nx)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const a=`#_onVisibilityChanged(${r})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,a,i){const o=[`provider=${encodeURIComponent(a)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await as(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${r}?${o.join("&")}`}async _unenroll(r){try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;return c?{data:null,error:c}:await yt(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(ct(a))return{data:null,error:a};throw a}}async _enroll(r){try{return await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:p,error:m}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(r.factorType==="totp"&&(!((o=p?.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(a){if(ct(a))return{data:null,error:a};throw a}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c)return{data:null,error:c};const{data:u,error:d}=await yt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(a){if(ct(a))return{data:null,error:a};throw a}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;return c?{data:null,error:c}:await yt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(ct(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(r){const{data:a,error:i}=await this._challenge({factorId:r.factorId});return i?{data:null,error:i}:await this._verify({factorId:r.factorId,challengeId:a.id,code:r.code})}async _listFactors(){const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const i=r?.factors||[],o=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var a,i;const{data:{session:o},error:c}=r;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=zf(o.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const v=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(r,a={keys:[]}){let i=a.keys.find(d=>d.kid===r);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===r),i&&this.jwks_cached_at+BA>o)return i;const{data:c,error:u}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,i=c.keys.find(d=>d.kid===r),!i)?null:i}async getClaims(r,a={}){try{let i=r;if(!i){const{data:w,error:N}=await this.getSession();if(N||!w.session)return{data:null,error:N};i=w.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:p}}=zf(i);a?.allowExpired||lj(c.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!m){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:c,header:o,signature:u},error:null}}const v=cj(o.alg),y=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,u,KA(`${d}.${p}`)))throw new wh("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}}}Uo.nextInstanceID=0;const Nj=Uo;class Tj extends Nj{constructor(r){super(r)}}var Cj=function(t,r,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(v){try{m(i.next(v))}catch(y){u(y)}}function p(v){try{m(i.throw(v))}catch(y){u(y)}}function m(v){v.done?c(v.value):o(v.value).then(d,p)}m((i=i.apply(t,r||[])).next())})};class Mj{constructor(r,a,i){var o,c,u;this.supabaseUrl=r,this.supabaseKey=a;const d=DA(r);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const p=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:SA,realtime:AA,auth:Object.assign(Object.assign({},EA),{storageKey:p}),global:_A},v=OA(i??{},m);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=TA(a,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new P2(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new xA(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new T2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,a={},i={}){return this.rest.rpc(r,a,i)}channel(r,a={config:{}}){return this.realtime.channel(r,a)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,a;return Cj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:c,storageKey:u,flowType:d,lock:p,debug:m},v,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tj({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),v),storageKey:u,autoRefreshToken:r,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:c,flowType:d,lock:p,debug:m,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new nA(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,i)=>{this._handleTokenChanged(a,"CLIENT",i?.access_token)})}_handleTokenChanged(r,a,i){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Oj=(t,r,a)=>new Mj(t,r,a);function Dj(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Dj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const kj="https://ipizlwahdmkiweecetsx.supabase.co",Lj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlwaXpsd2FoZG1raXdlZWNldHN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxNTQ3NzYsImV4cCI6MjA3NDczMDc3Nn0.NOavReysKqwcCe7CkOFvmBH2IoOLL3D6xxVMlFgBWlw",en=Oj(kj,Lj);function Rt(t,r,{checkForDefaultPrevented:a=!0}={}){return function(o){if(t?.(o),a===!1||!o.defaultPrevented)return r?.(o)}}function ny(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function nu(...t){return r=>{let a=!1;const i=t.map(o=>{const c=ny(o,r);return!a&&typeof c=="function"&&(a=!0),c});if(a)return()=>{for(let o=0;o<i.length;o++){const c=i[o];typeof c=="function"?c():ny(t[o],null)}}}}function In(...t){return E.useCallback(nu(...t),t)}function Yo(t,r=[]){let a=[];function i(c,u){const d=E.createContext(u),p=a.length;a=[...a,u];const m=y=>{const{scope:x,children:w,...N}=y,S=x?.[t]?.[p]||d,R=E.useMemo(()=>N,Object.values(N));return f.jsx(S.Provider,{value:R,children:w})};m.displayName=c+"Provider";function v(y,x){const w=x?.[t]?.[p]||d,N=E.useContext(w);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${c}\``)}return[m,v]}const o=()=>{const c=a.map(u=>E.createContext(u));return function(d){const p=d?.[t]||c;return E.useMemo(()=>({[`__scope${t}`]:{...d,[t]:p}}),[d,p])}};return o.scopeName=t,[i,Uj(o,...r)]}function Uj(...t){const r=t[0];if(t.length===1)return r;const a=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const u=i.reduce((d,{useScope:p,scopeName:m})=>{const y=p(c)[`__scope${m}`];return{...d,...y}},{});return E.useMemo(()=>({[`__scope${r.scopeName}`]:u}),[u])}};return a.scopeName=r.scopeName,a}var di=globalThis?.document?E.useLayoutEffect:()=>{},zj=Py[" useInsertionEffect ".trim().toString()]||di;function Cx({prop:t,defaultProp:r,onChange:a=()=>{},caller:i}){const[o,c,u]=Bj({defaultProp:r,onChange:a}),d=t!==void 0,p=d?t:o;{const v=E.useRef(t!==void 0);E.useEffect(()=>{const y=v.current;y!==d&&console.warn(`${i} is changing from ${y?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=d},[d,i])}const m=E.useCallback(v=>{if(d){const y=Pj(v)?v(t):v;y!==t&&u.current?.(y)}else c(v)},[d,t,c,u]);return[p,m]}function Bj({defaultProp:t,onChange:r}){const[a,i]=E.useState(t),o=E.useRef(a),c=E.useRef(r);return zj(()=>{c.current=r},[r]),E.useEffect(()=>{o.current!==a&&(c.current?.(a),o.current=a)},[a,o]),[a,i,c]}function Pj(t){return typeof t=="function"}function Ic(t){const r=$j(t),a=E.forwardRef((i,o)=>{const{children:c,...u}=i,d=E.Children.toArray(c),p=d.find(Fj);if(p){const m=p.props.children,v=d.map(y=>y===p?E.Children.count(m)>1?E.Children.only(null):E.isValidElement(m)?m.props.children:null:y);return f.jsx(r,{...u,ref:o,children:E.isValidElement(m)?E.cloneElement(m,void 0,v):null})}return f.jsx(r,{...u,ref:o,children:c})});return a.displayName=`${t}.Slot`,a}function $j(t){const r=E.forwardRef((a,i)=>{const{children:o,...c}=a;if(E.isValidElement(o)){const u=qj(o),d=Hj(c,o.props);return o.type!==E.Fragment&&(d.ref=i?nu(i,u):u),E.cloneElement(o,d)}return E.Children.count(o)>1?E.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Ij=Symbol("radix.slottable");function Fj(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ij}function Hj(t,r){const a={...r};for(const i in r){const o=t[i],c=r[i];/^on[A-Z]/.test(i)?o&&c?a[i]=(...d)=>{const p=c(...d);return o(...d),p}:o&&(a[i]=o):i==="style"?a[i]={...o,...c}:i==="className"&&(a[i]=[o,c].filter(Boolean).join(" "))}return{...t,...a}}function qj(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Gj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fn=Gj.reduce((t,r)=>{const a=Ic(`Primitive.${r}`),i=E.forwardRef((o,c)=>{const{asChild:u,...d}=o,p=u?a:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(p,{...d,ref:c})});return i.displayName=`Primitive.${r}`,{...t,[r]:i}},{});function Mx(t,r){t&&Qc.flushSync(()=>t.dispatchEvent(r))}function Ox(t){const r=t+"CollectionProvider",[a,i]=Yo(r),[o,c]=a(r,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:R,children:A}=S,M=Te.useRef(null),L=Te.useRef(new Map).current;return f.jsx(o,{scope:R,itemMap:L,collectionRef:M,children:A})};u.displayName=r;const d=t+"CollectionSlot",p=Ic(d),m=Te.forwardRef((S,R)=>{const{scope:A,children:M}=S,L=c(d,A),F=In(R,L.collectionRef);return f.jsx(p,{ref:F,children:M})});m.displayName=d;const v=t+"CollectionItemSlot",y="data-radix-collection-item",x=Ic(v),w=Te.forwardRef((S,R)=>{const{scope:A,children:M,...L}=S,F=Te.useRef(null),U=In(R,F),k=c(v,A);return Te.useEffect(()=>(k.itemMap.set(F,{ref:F,...L}),()=>void k.itemMap.delete(F))),f.jsx(x,{[y]:"",ref:U,children:M})});w.displayName=v;function N(S){const R=c(t+"CollectionConsumer",S);return Te.useCallback(()=>{const M=R.collectionRef.current;if(!M)return[];const L=Array.from(M.querySelectorAll(`[${y}]`));return Array.from(R.itemMap.values()).sort((k,Y)=>L.indexOf(k.ref.current)-L.indexOf(Y.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:u,Slot:m,ItemSlot:w},N,i]}var Vj=E.createContext(void 0);function Dx(t){const r=E.useContext(Vj);return t||r||"ltr"}function Jr(t){const r=E.useRef(t);return E.useEffect(()=>{r.current=t}),E.useMemo(()=>(...a)=>r.current?.(...a),[])}function Yj(t,r=globalThis?.document){const a=Jr(t);E.useEffect(()=>{const i=o=>{o.key==="Escape"&&a(o)};return r.addEventListener("keydown",i,{capture:!0}),()=>r.removeEventListener("keydown",i,{capture:!0})},[a,r])}var Kj="DismissableLayer",_h="dismissableLayer.update",Wj="dismissableLayer.pointerDownOutside",Xj="dismissableLayer.focusOutside",ry,kx=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lx=E.forwardRef((t,r)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:u,onDismiss:d,...p}=t,m=E.useContext(kx),[v,y]=E.useState(null),x=v?.ownerDocument??globalThis?.document,[,w]=E.useState({}),N=In(r,Y=>y(Y)),S=Array.from(m.layers),[R]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=S.indexOf(R),M=v?S.indexOf(v):-1,L=m.layersWithOutsidePointerEventsDisabled.size>0,F=M>=A,U=Jj(Y=>{const re=Y.target,me=[...m.branches].some(xe=>xe.contains(re));!F||me||(o?.(Y),u?.(Y),Y.defaultPrevented||d?.())},x),k=eR(Y=>{const re=Y.target;[...m.branches].some(xe=>xe.contains(re))||(c?.(Y),u?.(Y),Y.defaultPrevented||d?.())},x);return Yj(Y=>{M===m.layers.size-1&&(i?.(Y),!Y.defaultPrevented&&d&&(Y.preventDefault(),d()))},x),E.useEffect(()=>{if(v)return a&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(ry=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),ay(),()=>{a&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=ry)}},[v,x,a,m]),E.useEffect(()=>()=>{v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),ay())},[v,m]),E.useEffect(()=>{const Y=()=>w({});return document.addEventListener(_h,Y),()=>document.removeEventListener(_h,Y)},[]),f.jsx(Fn.div,{...p,ref:N,style:{pointerEvents:L?F?"auto":"none":void 0,...t.style},onFocusCapture:Rt(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Rt(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Rt(t.onPointerDownCapture,U.onPointerDownCapture)})});Lx.displayName=Kj;var Qj="DismissableLayerBranch",Zj=E.forwardRef((t,r)=>{const a=E.useContext(kx),i=E.useRef(null),o=In(r,i);return E.useEffect(()=>{const c=i.current;if(c)return a.branches.add(c),()=>{a.branches.delete(c)}},[a.branches]),f.jsx(Fn.div,{...t,ref:o})});Zj.displayName=Qj;function Jj(t,r=globalThis?.document){const a=Jr(t),i=E.useRef(!1),o=E.useRef(()=>{});return E.useEffect(()=>{const c=d=>{if(d.target&&!i.current){let p=function(){Ux(Wj,a,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(r.removeEventListener("click",o.current),o.current=p,r.addEventListener("click",o.current,{once:!0})):p()}else r.removeEventListener("click",o.current);i.current=!1},u=window.setTimeout(()=>{r.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),r.removeEventListener("pointerdown",c),r.removeEventListener("click",o.current)}},[r,a]),{onPointerDownCapture:()=>i.current=!0}}function eR(t,r=globalThis?.document){const a=Jr(t),i=E.useRef(!1);return E.useEffect(()=>{const o=c=>{c.target&&!i.current&&Ux(Xj,a,{originalEvent:c},{discrete:!1})};return r.addEventListener("focusin",o),()=>r.removeEventListener("focusin",o)},[r,a]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ay(){const t=new CustomEvent(_h);document.dispatchEvent(t)}function Ux(t,r,a,{discrete:i}){const o=a.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});r&&o.addEventListener(t,r,{once:!0}),i?Mx(o,c):o.dispatchEvent(c)}var $f=0;function tR(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??iy()),document.body.insertAdjacentElement("beforeend",t[1]??iy()),$f++,()=>{$f===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),$f--}},[])}function iy(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var If="focusScope.autoFocusOnMount",Ff="focusScope.autoFocusOnUnmount",sy={bubbles:!1,cancelable:!0},nR="FocusScope",zx=E.forwardRef((t,r)=>{const{loop:a=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:c,...u}=t,[d,p]=E.useState(null),m=Jr(o),v=Jr(c),y=E.useRef(null),x=In(r,S=>p(S)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(i){let S=function(L){if(w.paused||!d)return;const F=L.target;d.contains(F)?y.current=F:Na(y.current,{select:!0})},R=function(L){if(w.paused||!d)return;const F=L.relatedTarget;F!==null&&(d.contains(F)||Na(y.current,{select:!0}))},A=function(L){if(document.activeElement===document.body)for(const U of L)U.removedNodes.length>0&&Na(d)};document.addEventListener("focusin",S),document.addEventListener("focusout",R);const M=new MutationObserver(A);return d&&M.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",R),M.disconnect()}}},[i,d,w.paused]),E.useEffect(()=>{if(d){ly.add(w);const S=document.activeElement;if(!d.contains(S)){const A=new CustomEvent(If,sy);d.addEventListener(If,m),d.dispatchEvent(A),A.defaultPrevented||(rR(lR(Bx(d)),{select:!0}),document.activeElement===S&&Na(d))}return()=>{d.removeEventListener(If,m),setTimeout(()=>{const A=new CustomEvent(Ff,sy);d.addEventListener(Ff,v),d.dispatchEvent(A),A.defaultPrevented||Na(S??document.body,{select:!0}),d.removeEventListener(Ff,v),ly.remove(w)},0)}}},[d,m,v,w]);const N=E.useCallback(S=>{if(!a&&!i||w.paused)return;const R=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,A=document.activeElement;if(R&&A){const M=S.currentTarget,[L,F]=aR(M);L&&F?!S.shiftKey&&A===F?(S.preventDefault(),a&&Na(L,{select:!0})):S.shiftKey&&A===L&&(S.preventDefault(),a&&Na(F,{select:!0})):A===M&&S.preventDefault()}},[a,i,w.paused]);return f.jsx(Fn.div,{tabIndex:-1,...u,ref:x,onKeyDown:N})});zx.displayName=nR;function rR(t,{select:r=!1}={}){const a=document.activeElement;for(const i of t)if(Na(i,{select:r}),document.activeElement!==a)return}function aR(t){const r=Bx(t),a=oy(r,t),i=oy(r.reverse(),t);return[a,i]}function Bx(t){const r=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)r.push(a.currentNode);return r}function oy(t,r){for(const a of t)if(!iR(a,{upTo:r}))return a}function iR(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function sR(t){return t instanceof HTMLInputElement&&"select"in t}function Na(t,{select:r=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&sR(t)&&r&&t.select()}}var ly=oR();function oR(){let t=[];return{add(r){const a=t[0];r!==a&&a?.pause(),t=cy(t,r),t.unshift(r)},remove(r){t=cy(t,r),t[0]?.resume()}}}function cy(t,r){const a=[...t],i=a.indexOf(r);return i!==-1&&a.splice(i,1),a}function lR(t){return t.filter(r=>r.tagName!=="A")}var cR=Py[" useId ".trim().toString()]||(()=>{}),uR=0;function Sh(t){const[r,a]=E.useState(cR());return di(()=>{a(i=>i??String(uR++))},[t]),t||(r?`radix-${r}`:"")}const dR=["top","right","bottom","left"],ka=Math.min,Zn=Math.max,Fc=Math.round,pc=Math.floor,Or=t=>({x:t,y:t}),fR={left:"right",right:"left",bottom:"top",top:"bottom"},hR={start:"end",end:"start"};function Eh(t,r,a){return Zn(t,ka(r,a))}function ea(t,r){return typeof t=="function"?t(r):t}function ta(t){return t.split("-")[0]}function ws(t){return t.split("-")[1]}function Zh(t){return t==="x"?"y":"x"}function Jh(t){return t==="y"?"height":"width"}const mR=new Set(["top","bottom"]);function Cr(t){return mR.has(ta(t))?"y":"x"}function em(t){return Zh(Cr(t))}function pR(t,r,a){a===void 0&&(a=!1);const i=ws(t),o=em(t),c=Jh(o);let u=o==="x"?i===(a?"end":"start")?"right":"left":i==="start"?"bottom":"top";return r.reference[c]>r.floating[c]&&(u=Hc(u)),[u,Hc(u)]}function gR(t){const r=Hc(t);return[Ah(t),r,Ah(r)]}function Ah(t){return t.replace(/start|end/g,r=>hR[r])}const uy=["left","right"],dy=["right","left"],vR=["top","bottom"],yR=["bottom","top"];function xR(t,r,a){switch(t){case"top":case"bottom":return a?r?dy:uy:r?uy:dy;case"left":case"right":return r?vR:yR;default:return[]}}function bR(t,r,a,i){const o=ws(t);let c=xR(ta(t),a==="start",i);return o&&(c=c.map(u=>u+"-"+o),r&&(c=c.concat(c.map(Ah)))),c}function Hc(t){return t.replace(/left|right|bottom|top/g,r=>fR[r])}function wR(t){return{top:0,right:0,bottom:0,left:0,...t}}function Px(t){return typeof t!="number"?wR(t):{top:t,right:t,bottom:t,left:t}}function qc(t){const{x:r,y:a,width:i,height:o}=t;return{width:i,height:o,top:a,left:r,right:r+i,bottom:a+o,x:r,y:a}}function fy(t,r,a){let{reference:i,floating:o}=t;const c=Cr(r),u=em(r),d=Jh(u),p=ta(r),m=c==="y",v=i.x+i.width/2-o.width/2,y=i.y+i.height/2-o.height/2,x=i[d]/2-o[d]/2;let w;switch(p){case"top":w={x:v,y:i.y-o.height};break;case"bottom":w={x:v,y:i.y+i.height};break;case"right":w={x:i.x+i.width,y};break;case"left":w={x:i.x-o.width,y};break;default:w={x:i.x,y:i.y}}switch(ws(r)){case"start":w[u]-=x*(a&&m?-1:1);break;case"end":w[u]+=x*(a&&m?-1:1);break}return w}const _R=async(t,r,a)=>{const{placement:i="bottom",strategy:o="absolute",middleware:c=[],platform:u}=a,d=c.filter(Boolean),p=await(u.isRTL==null?void 0:u.isRTL(r));let m=await u.getElementRects({reference:t,floating:r,strategy:o}),{x:v,y}=fy(m,i,p),x=i,w={},N=0;for(let S=0;S<d.length;S++){const{name:R,fn:A}=d[S],{x:M,y:L,data:F,reset:U}=await A({x:v,y,initialPlacement:i,placement:x,strategy:o,middlewareData:w,rects:m,platform:u,elements:{reference:t,floating:r}});v=M??v,y=L??y,w={...w,[R]:{...w[R],...F}},U&&N<=50&&(N++,typeof U=="object"&&(U.placement&&(x=U.placement),U.rects&&(m=U.rects===!0?await u.getElementRects({reference:t,floating:r,strategy:o}):U.rects),{x:v,y}=fy(m,x,p)),S=-1)}return{x:v,y,placement:x,strategy:o,middlewareData:w}};async function zo(t,r){var a;r===void 0&&(r={});const{x:i,y:o,platform:c,rects:u,elements:d,strategy:p}=t,{boundary:m="clippingAncestors",rootBoundary:v="viewport",elementContext:y="floating",altBoundary:x=!1,padding:w=0}=ea(r,t),N=Px(w),R=d[x?y==="floating"?"reference":"floating":y],A=qc(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(R)))==null||a?R:R.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(d.floating)),boundary:m,rootBoundary:v,strategy:p})),M=y==="floating"?{x:i,y:o,width:u.floating.width,height:u.floating.height}:u.reference,L=await(c.getOffsetParent==null?void 0:c.getOffsetParent(d.floating)),F=await(c.isElement==null?void 0:c.isElement(L))?await(c.getScale==null?void 0:c.getScale(L))||{x:1,y:1}:{x:1,y:1},U=qc(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:M,offsetParent:L,strategy:p}):M);return{top:(A.top-U.top+N.top)/F.y,bottom:(U.bottom-A.bottom+N.bottom)/F.y,left:(A.left-U.left+N.left)/F.x,right:(U.right-A.right+N.right)/F.x}}const SR=t=>({name:"arrow",options:t,async fn(r){const{x:a,y:i,placement:o,rects:c,platform:u,elements:d,middlewareData:p}=r,{element:m,padding:v=0}=ea(t,r)||{};if(m==null)return{};const y=Px(v),x={x:a,y:i},w=em(o),N=Jh(w),S=await u.getDimensions(m),R=w==="y",A=R?"top":"left",M=R?"bottom":"right",L=R?"clientHeight":"clientWidth",F=c.reference[N]+c.reference[w]-x[w]-c.floating[N],U=x[w]-c.reference[w],k=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m));let Y=k?k[L]:0;(!Y||!await(u.isElement==null?void 0:u.isElement(k)))&&(Y=d.floating[L]||c.floating[N]);const re=F/2-U/2,me=Y/2-S[N]/2-1,xe=ka(y[A],me),ee=ka(y[M],me),G=xe,H=Y-S[N]-ee,de=Y/2-S[N]/2+re,le=Eh(G,de,H),P=!p.arrow&&ws(o)!=null&&de!==le&&c.reference[N]/2-(de<G?xe:ee)-S[N]/2<0,Z=P?de<G?de-G:de-H:0;return{[w]:x[w]+Z,data:{[w]:le,centerOffset:de-le-Z,...P&&{alignmentOffset:Z}},reset:P}}}),ER=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var a,i;const{placement:o,middlewareData:c,rects:u,initialPlacement:d,platform:p,elements:m}=r,{mainAxis:v=!0,crossAxis:y=!0,fallbackPlacements:x,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:S=!0,...R}=ea(t,r);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const A=ta(o),M=Cr(d),L=ta(d)===d,F=await(p.isRTL==null?void 0:p.isRTL(m.floating)),U=x||(L||!S?[Hc(d)]:gR(d)),k=N!=="none";!x&&k&&U.push(...bR(d,S,N,F));const Y=[d,...U],re=await zo(r,R),me=[];let xe=((i=c.flip)==null?void 0:i.overflows)||[];if(v&&me.push(re[A]),y){const de=pR(o,u,F);me.push(re[de[0]],re[de[1]])}if(xe=[...xe,{placement:o,overflows:me}],!me.every(de=>de<=0)){var ee,G;const de=(((ee=c.flip)==null?void 0:ee.index)||0)+1,le=Y[de];if(le&&(!(y==="alignment"?M!==Cr(le):!1)||xe.every(se=>Cr(se.placement)===M?se.overflows[0]>0:!0)))return{data:{index:de,overflows:xe},reset:{placement:le}};let P=(G=xe.filter(Z=>Z.overflows[0]<=0).sort((Z,se)=>Z.overflows[1]-se.overflows[1])[0])==null?void 0:G.placement;if(!P)switch(w){case"bestFit":{var H;const Z=(H=xe.filter(se=>{if(k){const oe=Cr(se.placement);return oe===M||oe==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(oe=>oe>0).reduce((oe,z)=>oe+z,0)]).sort((se,oe)=>se[1]-oe[1])[0])==null?void 0:H[0];Z&&(P=Z);break}case"initialPlacement":P=d;break}if(o!==P)return{reset:{placement:P}}}return{}}}};function hy(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function my(t){return dR.some(r=>t[r]>=0)}const AR=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:a}=r,{strategy:i="referenceHidden",...o}=ea(t,r);switch(i){case"referenceHidden":{const c=await zo(r,{...o,elementContext:"reference"}),u=hy(c,a.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:my(u)}}}case"escaped":{const c=await zo(r,{...o,altBoundary:!0}),u=hy(c,a.floating);return{data:{escapedOffsets:u,escaped:my(u)}}}default:return{}}}}},$x=new Set(["left","top"]);async function jR(t,r){const{placement:a,platform:i,elements:o}=t,c=await(i.isRTL==null?void 0:i.isRTL(o.floating)),u=ta(a),d=ws(a),p=Cr(a)==="y",m=$x.has(u)?-1:1,v=c&&p?-1:1,y=ea(r,t);let{mainAxis:x,crossAxis:w,alignmentAxis:N}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return d&&typeof N=="number"&&(w=d==="end"?N*-1:N),p?{x:w*v,y:x*m}:{x:x*m,y:w*v}}const RR=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var a,i;const{x:o,y:c,placement:u,middlewareData:d}=r,p=await jR(r,t);return u===((a=d.offset)==null?void 0:a.placement)&&(i=d.arrow)!=null&&i.alignmentOffset?{}:{x:o+p.x,y:c+p.y,data:{...p,placement:u}}}}},NR=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:a,y:i,placement:o}=r,{mainAxis:c=!0,crossAxis:u=!1,limiter:d={fn:R=>{let{x:A,y:M}=R;return{x:A,y:M}}},...p}=ea(t,r),m={x:a,y:i},v=await zo(r,p),y=Cr(ta(o)),x=Zh(y);let w=m[x],N=m[y];if(c){const R=x==="y"?"top":"left",A=x==="y"?"bottom":"right",M=w+v[R],L=w-v[A];w=Eh(M,w,L)}if(u){const R=y==="y"?"top":"left",A=y==="y"?"bottom":"right",M=N+v[R],L=N-v[A];N=Eh(M,N,L)}const S=d.fn({...r,[x]:w,[y]:N});return{...S,data:{x:S.x-a,y:S.y-i,enabled:{[x]:c,[y]:u}}}}}},TR=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:a,y:i,placement:o,rects:c,middlewareData:u}=r,{offset:d=0,mainAxis:p=!0,crossAxis:m=!0}=ea(t,r),v={x:a,y:i},y=Cr(o),x=Zh(y);let w=v[x],N=v[y];const S=ea(d,r),R=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(p){const L=x==="y"?"height":"width",F=c.reference[x]-c.floating[L]+R.mainAxis,U=c.reference[x]+c.reference[L]-R.mainAxis;w<F?w=F:w>U&&(w=U)}if(m){var A,M;const L=x==="y"?"width":"height",F=$x.has(ta(o)),U=c.reference[y]-c.floating[L]+(F&&((A=u.offset)==null?void 0:A[y])||0)+(F?0:R.crossAxis),k=c.reference[y]+c.reference[L]+(F?0:((M=u.offset)==null?void 0:M[y])||0)-(F?R.crossAxis:0);N<U?N=U:N>k&&(N=k)}return{[x]:w,[y]:N}}}},CR=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var a,i;const{placement:o,rects:c,platform:u,elements:d}=r,{apply:p=()=>{},...m}=ea(t,r),v=await zo(r,m),y=ta(o),x=ws(o),w=Cr(o)==="y",{width:N,height:S}=c.floating;let R,A;y==="top"||y==="bottom"?(R=y,A=x===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(A=y,R=x==="end"?"top":"bottom");const M=S-v.top-v.bottom,L=N-v.left-v.right,F=ka(S-v[R],M),U=ka(N-v[A],L),k=!r.middlewareData.shift;let Y=F,re=U;if((a=r.middlewareData.shift)!=null&&a.enabled.x&&(re=L),(i=r.middlewareData.shift)!=null&&i.enabled.y&&(Y=M),k&&!x){const xe=Zn(v.left,0),ee=Zn(v.right,0),G=Zn(v.top,0),H=Zn(v.bottom,0);w?re=N-2*(xe!==0||ee!==0?xe+ee:Zn(v.left,v.right)):Y=S-2*(G!==0||H!==0?G+H:Zn(v.top,v.bottom))}await p({...r,availableWidth:re,availableHeight:Y});const me=await u.getDimensions(d.floating);return N!==me.width||S!==me.height?{reset:{rects:!0}}:{}}}};function ru(){return typeof window<"u"}function _s(t){return Ix(t)?(t.nodeName||"").toLowerCase():"#document"}function Jn(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function Ur(t){var r;return(r=(Ix(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function Ix(t){return ru()?t instanceof Node||t instanceof Jn(t).Node:!1}function yr(t){return ru()?t instanceof Element||t instanceof Jn(t).Element:!1}function Dr(t){return ru()?t instanceof HTMLElement||t instanceof Jn(t).HTMLElement:!1}function py(t){return!ru()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jn(t).ShadowRoot}const MR=new Set(["inline","contents"]);function Ko(t){const{overflow:r,overflowX:a,overflowY:i,display:o}=xr(t);return/auto|scroll|overlay|hidden|clip/.test(r+i+a)&&!MR.has(o)}const OR=new Set(["table","td","th"]);function DR(t){return OR.has(_s(t))}const kR=[":popover-open",":modal"];function au(t){return kR.some(r=>{try{return t.matches(r)}catch{return!1}})}const LR=["transform","translate","scale","rotate","perspective"],UR=["transform","translate","scale","rotate","perspective","filter"],zR=["paint","layout","strict","content"];function tm(t){const r=nm(),a=yr(t)?xr(t):t;return LR.some(i=>a[i]?a[i]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!r&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!r&&(a.filter?a.filter!=="none":!1)||UR.some(i=>(a.willChange||"").includes(i))||zR.some(i=>(a.contain||"").includes(i))}function BR(t){let r=La(t);for(;Dr(r)&&!ys(r);){if(tm(r))return r;if(au(r))return null;r=La(r)}return null}function nm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const PR=new Set(["html","body","#document"]);function ys(t){return PR.has(_s(t))}function xr(t){return Jn(t).getComputedStyle(t)}function iu(t){return yr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function La(t){if(_s(t)==="html")return t;const r=t.assignedSlot||t.parentNode||py(t)&&t.host||Ur(t);return py(r)?r.host:r}function Fx(t){const r=La(t);return ys(r)?t.ownerDocument?t.ownerDocument.body:t.body:Dr(r)&&Ko(r)?r:Fx(r)}function Bo(t,r,a){var i;r===void 0&&(r=[]),a===void 0&&(a=!0);const o=Fx(t),c=o===((i=t.ownerDocument)==null?void 0:i.body),u=Jn(o);if(c){const d=jh(u);return r.concat(u,u.visualViewport||[],Ko(o)?o:[],d&&a?Bo(d):[])}return r.concat(o,Bo(o,[],a))}function jh(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Hx(t){const r=xr(t);let a=parseFloat(r.width)||0,i=parseFloat(r.height)||0;const o=Dr(t),c=o?t.offsetWidth:a,u=o?t.offsetHeight:i,d=Fc(a)!==c||Fc(i)!==u;return d&&(a=c,i=u),{width:a,height:i,$:d}}function rm(t){return yr(t)?t:t.contextElement}function ps(t){const r=rm(t);if(!Dr(r))return Or(1);const a=r.getBoundingClientRect(),{width:i,height:o,$:c}=Hx(r);let u=(c?Fc(a.width):a.width)/i,d=(c?Fc(a.height):a.height)/o;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const $R=Or(0);function qx(t){const r=Jn(t);return!nm()||!r.visualViewport?$R:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function IR(t,r,a){return r===void 0&&(r=!1),!a||r&&a!==Jn(t)?!1:r}function fi(t,r,a,i){r===void 0&&(r=!1),a===void 0&&(a=!1);const o=t.getBoundingClientRect(),c=rm(t);let u=Or(1);r&&(i?yr(i)&&(u=ps(i)):u=ps(t));const d=IR(c,a,i)?qx(c):Or(0);let p=(o.left+d.x)/u.x,m=(o.top+d.y)/u.y,v=o.width/u.x,y=o.height/u.y;if(c){const x=Jn(c),w=i&&yr(i)?Jn(i):i;let N=x,S=jh(N);for(;S&&i&&w!==N;){const R=ps(S),A=S.getBoundingClientRect(),M=xr(S),L=A.left+(S.clientLeft+parseFloat(M.paddingLeft))*R.x,F=A.top+(S.clientTop+parseFloat(M.paddingTop))*R.y;p*=R.x,m*=R.y,v*=R.x,y*=R.y,p+=L,m+=F,N=Jn(S),S=jh(N)}}return qc({width:v,height:y,x:p,y:m})}function su(t,r){const a=iu(t).scrollLeft;return r?r.left+a:fi(Ur(t)).left+a}function Gx(t,r){const a=t.getBoundingClientRect(),i=a.left+r.scrollLeft-su(t,a),o=a.top+r.scrollTop;return{x:i,y:o}}function FR(t){let{elements:r,rect:a,offsetParent:i,strategy:o}=t;const c=o==="fixed",u=Ur(i),d=r?au(r.floating):!1;if(i===u||d&&c)return a;let p={scrollLeft:0,scrollTop:0},m=Or(1);const v=Or(0),y=Dr(i);if((y||!y&&!c)&&((_s(i)!=="body"||Ko(u))&&(p=iu(i)),Dr(i))){const w=fi(i);m=ps(i),v.x=w.x+i.clientLeft,v.y=w.y+i.clientTop}const x=u&&!y&&!c?Gx(u,p):Or(0);return{width:a.width*m.x,height:a.height*m.y,x:a.x*m.x-p.scrollLeft*m.x+v.x+x.x,y:a.y*m.y-p.scrollTop*m.y+v.y+x.y}}function HR(t){return Array.from(t.getClientRects())}function qR(t){const r=Ur(t),a=iu(t),i=t.ownerDocument.body,o=Zn(r.scrollWidth,r.clientWidth,i.scrollWidth,i.clientWidth),c=Zn(r.scrollHeight,r.clientHeight,i.scrollHeight,i.clientHeight);let u=-a.scrollLeft+su(t);const d=-a.scrollTop;return xr(i).direction==="rtl"&&(u+=Zn(r.clientWidth,i.clientWidth)-o),{width:o,height:c,x:u,y:d}}const gy=25;function GR(t,r){const a=Jn(t),i=Ur(t),o=a.visualViewport;let c=i.clientWidth,u=i.clientHeight,d=0,p=0;if(o){c=o.width,u=o.height;const v=nm();(!v||v&&r==="fixed")&&(d=o.offsetLeft,p=o.offsetTop)}const m=su(i);if(m<=0){const v=i.ownerDocument,y=v.body,x=getComputedStyle(y),w=v.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,N=Math.abs(i.clientWidth-y.clientWidth-w);N<=gy&&(c-=N)}else m<=gy&&(c+=m);return{width:c,height:u,x:d,y:p}}const VR=new Set(["absolute","fixed"]);function YR(t,r){const a=fi(t,!0,r==="fixed"),i=a.top+t.clientTop,o=a.left+t.clientLeft,c=Dr(t)?ps(t):Or(1),u=t.clientWidth*c.x,d=t.clientHeight*c.y,p=o*c.x,m=i*c.y;return{width:u,height:d,x:p,y:m}}function vy(t,r,a){let i;if(r==="viewport")i=GR(t,a);else if(r==="document")i=qR(Ur(t));else if(yr(r))i=YR(r,a);else{const o=qx(t);i={x:r.x-o.x,y:r.y-o.y,width:r.width,height:r.height}}return qc(i)}function Vx(t,r){const a=La(t);return a===r||!yr(a)||ys(a)?!1:xr(a).position==="fixed"||Vx(a,r)}function KR(t,r){const a=r.get(t);if(a)return a;let i=Bo(t,[],!1).filter(d=>yr(d)&&_s(d)!=="body"),o=null;const c=xr(t).position==="fixed";let u=c?La(t):t;for(;yr(u)&&!ys(u);){const d=xr(u),p=tm(u);!p&&d.position==="fixed"&&(o=null),(c?!p&&!o:!p&&d.position==="static"&&!!o&&VR.has(o.position)||Ko(u)&&!p&&Vx(t,u))?i=i.filter(v=>v!==u):o=d,u=La(u)}return r.set(t,i),i}function WR(t){let{element:r,boundary:a,rootBoundary:i,strategy:o}=t;const u=[...a==="clippingAncestors"?au(r)?[]:KR(r,this._c):[].concat(a),i],d=u[0],p=u.reduce((m,v)=>{const y=vy(r,v,o);return m.top=Zn(y.top,m.top),m.right=ka(y.right,m.right),m.bottom=ka(y.bottom,m.bottom),m.left=Zn(y.left,m.left),m},vy(r,d,o));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function XR(t){const{width:r,height:a}=Hx(t);return{width:r,height:a}}function QR(t,r,a){const i=Dr(r),o=Ur(r),c=a==="fixed",u=fi(t,!0,c,r);let d={scrollLeft:0,scrollTop:0};const p=Or(0);function m(){p.x=su(o)}if(i||!i&&!c)if((_s(r)!=="body"||Ko(o))&&(d=iu(r)),i){const w=fi(r,!0,c,r);p.x=w.x+r.clientLeft,p.y=w.y+r.clientTop}else o&&m();c&&!i&&o&&m();const v=o&&!i&&!c?Gx(o,d):Or(0),y=u.left+d.scrollLeft-p.x-v.x,x=u.top+d.scrollTop-p.y-v.y;return{x:y,y:x,width:u.width,height:u.height}}function Hf(t){return xr(t).position==="static"}function yy(t,r){if(!Dr(t)||xr(t).position==="fixed")return null;if(r)return r(t);let a=t.offsetParent;return Ur(t)===a&&(a=a.ownerDocument.body),a}function Yx(t,r){const a=Jn(t);if(au(t))return a;if(!Dr(t)){let o=La(t);for(;o&&!ys(o);){if(yr(o)&&!Hf(o))return o;o=La(o)}return a}let i=yy(t,r);for(;i&&DR(i)&&Hf(i);)i=yy(i,r);return i&&ys(i)&&Hf(i)&&!tm(i)?a:i||BR(t)||a}const ZR=async function(t){const r=this.getOffsetParent||Yx,a=this.getDimensions,i=await a(t.floating);return{reference:QR(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function JR(t){return xr(t).direction==="rtl"}const eN={convertOffsetParentRelativeRectToViewportRelativeRect:FR,getDocumentElement:Ur,getClippingRect:WR,getOffsetParent:Yx,getElementRects:ZR,getClientRects:HR,getDimensions:XR,getScale:ps,isElement:yr,isRTL:JR};function Kx(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function tN(t,r){let a=null,i;const o=Ur(t);function c(){var d;clearTimeout(i),(d=a)==null||d.disconnect(),a=null}function u(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),c();const m=t.getBoundingClientRect(),{left:v,top:y,width:x,height:w}=m;if(d||r(),!x||!w)return;const N=pc(y),S=pc(o.clientWidth-(v+x)),R=pc(o.clientHeight-(y+w)),A=pc(v),L={rootMargin:-N+"px "+-S+"px "+-R+"px "+-A+"px",threshold:Zn(0,ka(1,p))||1};let F=!0;function U(k){const Y=k[0].intersectionRatio;if(Y!==p){if(!F)return u();Y?u(!1,Y):i=setTimeout(()=>{u(!1,1e-7)},1e3)}Y===1&&!Kx(m,t.getBoundingClientRect())&&u(),F=!1}try{a=new IntersectionObserver(U,{...L,root:o.ownerDocument})}catch{a=new IntersectionObserver(U,L)}a.observe(t)}return u(!0),c}function nN(t,r,a,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=i,m=rm(t),v=o||c?[...m?Bo(m):[],...Bo(r)]:[];v.forEach(A=>{o&&A.addEventListener("scroll",a,{passive:!0}),c&&A.addEventListener("resize",a)});const y=m&&d?tN(m,a):null;let x=-1,w=null;u&&(w=new ResizeObserver(A=>{let[M]=A;M&&M.target===m&&w&&(w.unobserve(r),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var L;(L=w)==null||L.observe(r)})),a()}),m&&!p&&w.observe(m),w.observe(r));let N,S=p?fi(t):null;p&&R();function R(){const A=fi(t);S&&!Kx(S,A)&&a(),S=A,N=requestAnimationFrame(R)}return a(),()=>{var A;v.forEach(M=>{o&&M.removeEventListener("scroll",a),c&&M.removeEventListener("resize",a)}),y?.(),(A=w)==null||A.disconnect(),w=null,p&&cancelAnimationFrame(N)}}const rN=RR,aN=NR,iN=ER,sN=CR,oN=AR,xy=SR,lN=TR,cN=(t,r,a)=>{const i=new Map,o={platform:eN,...a},c={...o.platform,_c:i};return _R(t,r,{...o,platform:c})};var uN=typeof document<"u",dN=function(){},Mc=uN?E.useLayoutEffect:dN;function Gc(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let a,i,o;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(a=t.length,a!==r.length)return!1;for(i=a;i--!==0;)if(!Gc(t[i],r[i]))return!1;return!0}if(o=Object.keys(t),a=o.length,a!==Object.keys(r).length)return!1;for(i=a;i--!==0;)if(!{}.hasOwnProperty.call(r,o[i]))return!1;for(i=a;i--!==0;){const c=o[i];if(!(c==="_owner"&&t.$$typeof)&&!Gc(t[c],r[c]))return!1}return!0}return t!==t&&r!==r}function Wx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function by(t,r){const a=Wx(t);return Math.round(r*a)/a}function qf(t){const r=E.useRef(t);return Mc(()=>{r.current=t}),r}function fN(t){t===void 0&&(t={});const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o,elements:{reference:c,floating:u}={},transform:d=!0,whileElementsMounted:p,open:m}=t,[v,y]=E.useState({x:0,y:0,strategy:a,placement:r,middlewareData:{},isPositioned:!1}),[x,w]=E.useState(i);Gc(x,i)||w(i);const[N,S]=E.useState(null),[R,A]=E.useState(null),M=E.useCallback(se=>{se!==k.current&&(k.current=se,S(se))},[]),L=E.useCallback(se=>{se!==Y.current&&(Y.current=se,A(se))},[]),F=c||N,U=u||R,k=E.useRef(null),Y=E.useRef(null),re=E.useRef(v),me=p!=null,xe=qf(p),ee=qf(o),G=qf(m),H=E.useCallback(()=>{if(!k.current||!Y.current)return;const se={placement:r,strategy:a,middleware:x};ee.current&&(se.platform=ee.current),cN(k.current,Y.current,se).then(oe=>{const z={...oe,isPositioned:G.current!==!1};de.current&&!Gc(re.current,z)&&(re.current=z,Qc.flushSync(()=>{y(z)}))})},[x,r,a,ee,G]);Mc(()=>{m===!1&&re.current.isPositioned&&(re.current.isPositioned=!1,y(se=>({...se,isPositioned:!1})))},[m]);const de=E.useRef(!1);Mc(()=>(de.current=!0,()=>{de.current=!1}),[]),Mc(()=>{if(F&&(k.current=F),U&&(Y.current=U),F&&U){if(xe.current)return xe.current(F,U,H);H()}},[F,U,H,xe,me]);const le=E.useMemo(()=>({reference:k,floating:Y,setReference:M,setFloating:L}),[M,L]),P=E.useMemo(()=>({reference:F,floating:U}),[F,U]),Z=E.useMemo(()=>{const se={position:a,left:0,top:0};if(!P.floating)return se;const oe=by(P.floating,v.x),z=by(P.floating,v.y);return d?{...se,transform:"translate("+oe+"px, "+z+"px)",...Wx(P.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:oe,top:z}},[a,d,P.floating,v.x,v.y]);return E.useMemo(()=>({...v,update:H,refs:le,elements:P,floatingStyles:Z}),[v,H,le,P,Z])}const hN=t=>{function r(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:t,fn(a){const{element:i,padding:o}=typeof t=="function"?t(a):t;return i&&r(i)?i.current!=null?xy({element:i.current,padding:o}).fn(a):{}:i?xy({element:i,padding:o}).fn(a):{}}}},mN=(t,r)=>({...rN(t),options:[t,r]}),pN=(t,r)=>({...aN(t),options:[t,r]}),gN=(t,r)=>({...lN(t),options:[t,r]}),vN=(t,r)=>({...iN(t),options:[t,r]}),yN=(t,r)=>({...sN(t),options:[t,r]}),xN=(t,r)=>({...oN(t),options:[t,r]}),bN=(t,r)=>({...hN(t),options:[t,r]});var wN="Arrow",Xx=E.forwardRef((t,r)=>{const{children:a,width:i=10,height:o=5,...c}=t;return f.jsx(Fn.svg,{...c,ref:r,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?a:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});Xx.displayName=wN;var _N=Xx;function SN(t){const[r,a]=E.useState(void 0);return di(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const c=o[0];let u,d;if("borderBoxSize"in c){const p=c.borderBoxSize,m=Array.isArray(p)?p[0]:p;u=m.inlineSize,d=m.blockSize}else u=t.offsetWidth,d=t.offsetHeight;a({width:u,height:d})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else a(void 0)},[t]),r}var am="Popper",[Qx,Zx]=Yo(am),[EN,Jx]=Qx(am),eb=t=>{const{__scopePopper:r,children:a}=t,[i,o]=E.useState(null);return f.jsx(EN,{scope:r,anchor:i,onAnchorChange:o,children:a})};eb.displayName=am;var tb="PopperAnchor",nb=E.forwardRef((t,r)=>{const{__scopePopper:a,virtualRef:i,...o}=t,c=Jx(tb,a),u=E.useRef(null),d=In(r,u),p=E.useRef(null);return E.useEffect(()=>{const m=p.current;p.current=i?.current||u.current,m!==p.current&&c.onAnchorChange(p.current)}),i?null:f.jsx(Fn.div,{...o,ref:d})});nb.displayName=tb;var im="PopperContent",[AN,jN]=Qx(im),rb=E.forwardRef((t,r)=>{const{__scopePopper:a,side:i="bottom",sideOffset:o=0,align:c="center",alignOffset:u=0,arrowPadding:d=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:v=0,sticky:y="partial",hideWhenDetached:x=!1,updatePositionStrategy:w="optimized",onPlaced:N,...S}=t,R=Jx(im,a),[A,M]=E.useState(null),L=In(r,ke=>M(ke)),[F,U]=E.useState(null),k=SN(F),Y=k?.width??0,re=k?.height??0,me=i+(c!=="center"?"-"+c:""),xe=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},ee=Array.isArray(m)?m:[m],G=ee.length>0,H={padding:xe,boundary:ee.filter(NN),altBoundary:G},{refs:de,floatingStyles:le,placement:P,isPositioned:Z,middlewareData:se}=fN({strategy:"fixed",placement:me,whileElementsMounted:(...ke)=>nN(...ke,{animationFrame:w==="always"}),elements:{reference:R.anchor},middleware:[mN({mainAxis:o+re,alignmentAxis:u}),p&&pN({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?gN():void 0,...H}),p&&vN({...H}),yN({...H,apply:({elements:ke,rects:Me,availableWidth:fe,availableHeight:ce})=>{const{width:we,height:je}=Me.reference,De=ke.floating.style;De.setProperty("--radix-popper-available-width",`${fe}px`),De.setProperty("--radix-popper-available-height",`${ce}px`),De.setProperty("--radix-popper-anchor-width",`${we}px`),De.setProperty("--radix-popper-anchor-height",`${je}px`)}}),F&&bN({element:F,padding:d}),TN({arrowWidth:Y,arrowHeight:re}),x&&xN({strategy:"referenceHidden",...H})]}),[oe,z]=sb(P),W=Jr(N);di(()=>{Z&&W?.()},[Z,W]);const pe=se.arrow?.x,ae=se.arrow?.y,_e=se.arrow?.centerOffset!==0,[Re,Ee]=E.useState();return di(()=>{A&&Ee(window.getComputedStyle(A).zIndex)},[A]),f.jsx("div",{ref:de.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:Z?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[se.transformOrigin?.x,se.transformOrigin?.y].join(" "),...se.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(AN,{scope:a,placedSide:oe,onArrowChange:U,arrowX:pe,arrowY:ae,shouldHideArrow:_e,children:f.jsx(Fn.div,{"data-side":oe,"data-align":z,...S,ref:L,style:{...S.style,animation:Z?void 0:"none"}})})})});rb.displayName=im;var ab="PopperArrow",RN={top:"bottom",right:"left",bottom:"top",left:"right"},ib=E.forwardRef(function(r,a){const{__scopePopper:i,...o}=r,c=jN(ab,i),u=RN[c.placedSide];return f.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:f.jsx(_N,{...o,ref:a,style:{...o.style,display:"block"}})})});ib.displayName=ab;function NN(t){return t!==null}var TN=t=>({name:"transformOrigin",options:t,fn(r){const{placement:a,rects:i,middlewareData:o}=r,u=o.arrow?.centerOffset!==0,d=u?0:t.arrowWidth,p=u?0:t.arrowHeight,[m,v]=sb(a),y={start:"0%",center:"50%",end:"100%"}[v],x=(o.arrow?.x??0)+d/2,w=(o.arrow?.y??0)+p/2;let N="",S="";return m==="bottom"?(N=u?y:`${x}px`,S=`${-p}px`):m==="top"?(N=u?y:`${x}px`,S=`${i.floating.height+p}px`):m==="right"?(N=`${-p}px`,S=u?y:`${w}px`):m==="left"&&(N=`${i.floating.width+p}px`,S=u?y:`${w}px`),{data:{x:N,y:S}}}});function sb(t){const[r,a="center"]=t.split("-");return[r,a]}var CN=eb,MN=nb,ON=rb,DN=ib;function kN(t,r){return E.useReducer((a,i)=>r[a][i]??a,t)}var ou=t=>{const{present:r,children:a}=t,i=LN(r),o=typeof a=="function"?a({present:i.isPresent}):E.Children.only(a),c=In(i.ref,UN(o));return typeof a=="function"||i.isPresent?E.cloneElement(o,{ref:c}):null};ou.displayName="Presence";function LN(t){const[r,a]=E.useState(),i=E.useRef(null),o=E.useRef(t),c=E.useRef("none"),u=t?"mounted":"unmounted",[d,p]=kN(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=gc(i.current);c.current=d==="mounted"?m:"none"},[d]),di(()=>{const m=i.current,v=o.current;if(v!==t){const x=c.current,w=gc(m);t?p("MOUNT"):w==="none"||m?.display==="none"?p("UNMOUNT"):p(v&&x!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,p]),di(()=>{if(r){let m;const v=r.ownerDocument.defaultView??window,y=w=>{const S=gc(i.current).includes(CSS.escape(w.animationName));if(w.target===r&&S&&(p("ANIMATION_END"),!o.current)){const R=r.style.animationFillMode;r.style.animationFillMode="forwards",m=v.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=R)})}},x=w=>{w.target===r&&(c.current=gc(i.current))};return r.addEventListener("animationstart",x),r.addEventListener("animationcancel",y),r.addEventListener("animationend",y),()=>{v.clearTimeout(m),r.removeEventListener("animationstart",x),r.removeEventListener("animationcancel",y),r.removeEventListener("animationend",y)}}else p("ANIMATION_END")},[r,p]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(m=>{i.current=m?getComputedStyle(m):null,a(m)},[])}}function gc(t){return t?.animationName||"none"}function UN(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Gf="rovingFocusGroup.onEntryFocus",zN={bubbles:!1,cancelable:!0},Wo="RovingFocusGroup",[Rh,ob,BN]=Ox(Wo),[PN,lb]=Yo(Wo,[BN]),[$N,IN]=PN(Wo),cb=E.forwardRef((t,r)=>f.jsx(Rh.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Rh.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(FN,{...t,ref:r})})}));cb.displayName=Wo;var FN=E.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:a,orientation:i,loop:o=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:v=!1,...y}=t,x=E.useRef(null),w=In(r,x),N=Dx(c),[S,R]=Cx({prop:u,defaultProp:d??null,onChange:p,caller:Wo}),[A,M]=E.useState(!1),L=Jr(m),F=ob(a),U=E.useRef(!1),[k,Y]=E.useState(0);return E.useEffect(()=>{const re=x.current;if(re)return re.addEventListener(Gf,L),()=>re.removeEventListener(Gf,L)},[L]),f.jsx($N,{scope:a,orientation:i,dir:N,loop:o,currentTabStopId:S,onItemFocus:E.useCallback(re=>R(re),[R]),onItemShiftTab:E.useCallback(()=>M(!0),[]),onFocusableItemAdd:E.useCallback(()=>Y(re=>re+1),[]),onFocusableItemRemove:E.useCallback(()=>Y(re=>re-1),[]),children:f.jsx(Fn.div,{tabIndex:A||k===0?-1:0,"data-orientation":i,...y,ref:w,style:{outline:"none",...t.style},onMouseDown:Rt(t.onMouseDown,()=>{U.current=!0}),onFocus:Rt(t.onFocus,re=>{const me=!U.current;if(re.target===re.currentTarget&&me&&!A){const xe=new CustomEvent(Gf,zN);if(re.currentTarget.dispatchEvent(xe),!xe.defaultPrevented){const ee=F().filter(P=>P.focusable),G=ee.find(P=>P.active),H=ee.find(P=>P.id===S),le=[G,H,...ee].filter(Boolean).map(P=>P.ref.current);fb(le,v)}}U.current=!1}),onBlur:Rt(t.onBlur,()=>M(!1))})})}),ub="RovingFocusGroupItem",db=E.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:a,focusable:i=!0,active:o=!1,tabStopId:c,children:u,...d}=t,p=Sh(),m=c||p,v=IN(ub,a),y=v.currentTabStopId===m,x=ob(a),{onFocusableItemAdd:w,onFocusableItemRemove:N,currentTabStopId:S}=v;return E.useEffect(()=>{if(i)return w(),()=>N()},[i,w,N]),f.jsx(Rh.ItemSlot,{scope:a,id:m,focusable:i,active:o,children:f.jsx(Fn.span,{tabIndex:y?0:-1,"data-orientation":v.orientation,...d,ref:r,onMouseDown:Rt(t.onMouseDown,R=>{i?v.onItemFocus(m):R.preventDefault()}),onFocus:Rt(t.onFocus,()=>v.onItemFocus(m)),onKeyDown:Rt(t.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){v.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const A=GN(R,v.orientation,v.dir);if(A!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let L=x().filter(F=>F.focusable).map(F=>F.ref.current);if(A==="last")L.reverse();else if(A==="prev"||A==="next"){A==="prev"&&L.reverse();const F=L.indexOf(R.currentTarget);L=v.loop?VN(L,F+1):L.slice(F+1)}setTimeout(()=>fb(L))}}),children:typeof u=="function"?u({isCurrentTabStop:y,hasTabStop:S!=null}):u})})});db.displayName=ub;var HN={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qN(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function GN(t,r,a){const i=qN(t.key,a);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return HN[i]}function fb(t,r=!1){const a=document.activeElement;for(const i of t)if(i===a||(i.focus({preventScroll:r}),document.activeElement!==a))return}function VN(t,r){return t.map((a,i)=>t[(r+i)%t.length])}var YN=cb,KN=db,WN=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},ls=new WeakMap,vc=new WeakMap,yc={},Vf=0,hb=function(t){return t&&(t.host||hb(t.parentNode))},XN=function(t,r){return r.map(function(a){if(t.contains(a))return a;var i=hb(a);return i&&t.contains(i)?i:(console.error("aria-hidden",a,"in not contained inside",t,". Doing nothing"),null)}).filter(function(a){return!!a})},QN=function(t,r,a,i){var o=XN(r,Array.isArray(t)?t:[t]);yc[a]||(yc[a]=new WeakMap);var c=yc[a],u=[],d=new Set,p=new Set(o),m=function(y){!y||d.has(y)||(d.add(y),m(y.parentNode))};o.forEach(m);var v=function(y){!y||p.has(y)||Array.prototype.forEach.call(y.children,function(x){if(d.has(x))v(x);else try{var w=x.getAttribute(i),N=w!==null&&w!=="false",S=(ls.get(x)||0)+1,R=(c.get(x)||0)+1;ls.set(x,S),c.set(x,R),u.push(x),S===1&&N&&vc.set(x,!0),R===1&&x.setAttribute(a,"true"),N||x.setAttribute(i,"true")}catch(A){console.error("aria-hidden: cannot operate on ",x,A)}})};return v(r),d.clear(),Vf++,function(){u.forEach(function(y){var x=ls.get(y)-1,w=c.get(y)-1;ls.set(y,x),c.set(y,w),x||(vc.has(y)||y.removeAttribute(i),vc.delete(y)),w||y.removeAttribute(a)}),Vf--,Vf||(ls=new WeakMap,ls=new WeakMap,vc=new WeakMap,yc={})}},ZN=function(t,r,a){a===void 0&&(a="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),o=WN(t);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),QN(i,o,a,"aria-hidden")):function(){return null}},Tr=function(){return Tr=Object.assign||function(r){for(var a,i=1,o=arguments.length;i<o;i++){a=arguments[i];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])}return r},Tr.apply(this,arguments)};function mb(t,r){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(a[i[o]]=t[i[o]]);return a}function bD(t,r,a,i){var o=arguments.length,c=o<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,a):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,r,a,i);else for(var d=t.length-1;d>=0;d--)(u=t[d])&&(c=(o<3?u(c):o>3?u(r,a,c):u(r,a))||c);return o>3&&c&&Object.defineProperty(r,a,c),c}function JN(t,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,c;i<o;i++)(c||!(i in r))&&(c||(c=Array.prototype.slice.call(r,0,i)),c[i]=r[i]);return t.concat(c||Array.prototype.slice.call(r))}var Oc="right-scroll-bar-position",Dc="width-before-scroll-bar",eT="with-scroll-bars-hidden",tT="--removed-body-scroll-bar-size";function Yf(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function nT(t,r){var a=E.useState(function(){return{value:t,callback:r,facade:{get current(){return a.value},set current(i){var o=a.value;o!==i&&(a.value=i,a.callback(i,o))}}}})[0];return a.callback=r,a.facade}var rT=typeof window<"u"?E.useLayoutEffect:E.useEffect,wy=new WeakMap;function aT(t,r){var a=nT(null,function(i){return t.forEach(function(o){return Yf(o,i)})});return rT(function(){var i=wy.get(a);if(i){var o=new Set(i),c=new Set(t),u=a.current;o.forEach(function(d){c.has(d)||Yf(d,null)}),c.forEach(function(d){o.has(d)||Yf(d,u)})}wy.set(a,t)},[t]),a}function iT(t){return t}function sT(t,r){r===void 0&&(r=iT);var a=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(c){var u=r(c,i);return a.push(u),function(){a=a.filter(function(d){return d!==u})}},assignSyncMedium:function(c){for(i=!0;a.length;){var u=a;a=[],u.forEach(c)}a={push:function(d){return c(d)},filter:function(){return a}}},assignMedium:function(c){i=!0;var u=[];if(a.length){var d=a;a=[],d.forEach(c),u=a}var p=function(){var v=u;u=[],v.forEach(c)},m=function(){return Promise.resolve().then(p)};m(),a={push:function(v){u.push(v),m()},filter:function(v){return u=u.filter(v),a}}}};return o}function oT(t){t===void 0&&(t={});var r=sT(null);return r.options=Tr({async:!0,ssr:!1},t),r}var pb=function(t){var r=t.sideCar,a=mb(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=r.read();if(!i)throw new Error("Sidecar medium not found");return E.createElement(i,Tr({},a))};pb.isSideCarExport=!0;function lT(t,r){return t.useMedium(r),pb}var gb=oT(),Kf=function(){},lu=E.forwardRef(function(t,r){var a=E.useRef(null),i=E.useState({onScrollCapture:Kf,onWheelCapture:Kf,onTouchMoveCapture:Kf}),o=i[0],c=i[1],u=t.forwardProps,d=t.children,p=t.className,m=t.removeScrollBar,v=t.enabled,y=t.shards,x=t.sideCar,w=t.noRelative,N=t.noIsolation,S=t.inert,R=t.allowPinchZoom,A=t.as,M=A===void 0?"div":A,L=t.gapMode,F=mb(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=x,k=aT([a,r]),Y=Tr(Tr({},F),o);return E.createElement(E.Fragment,null,v&&E.createElement(U,{sideCar:gb,removeScrollBar:m,shards:y,noRelative:w,noIsolation:N,inert:S,setCallbacks:c,allowPinchZoom:!!R,lockRef:a,gapMode:L}),u?E.cloneElement(E.Children.only(d),Tr(Tr({},Y),{ref:k})):E.createElement(M,Tr({},Y,{className:p,ref:k}),d))});lu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};lu.classNames={fullWidth:Dc,zeroRight:Oc};var cT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uT(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=cT();return r&&t.setAttribute("nonce",r),t}function dT(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function fT(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var hT=function(){var t=0,r=null;return{add:function(a){t==0&&(r=uT())&&(dT(r,a),fT(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},mT=function(){var t=hT();return function(r,a){E.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&a])}},vb=function(){var t=mT(),r=function(a){var i=a.styles,o=a.dynamic;return t(i,o),null};return r},pT={left:0,top:0,right:0,gap:0},Wf=function(t){return parseInt(t||"",10)||0},gT=function(t){var r=window.getComputedStyle(document.body),a=r[t==="padding"?"paddingLeft":"marginLeft"],i=r[t==="padding"?"paddingTop":"marginTop"],o=r[t==="padding"?"paddingRight":"marginRight"];return[Wf(a),Wf(i),Wf(o)]},vT=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return pT;var r=gT(t),a=document.documentElement.clientWidth,i=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,i-a+r[2]-r[0])}},yT=vb(),gs="data-scroll-locked",xT=function(t,r,a,i){var o=t.left,c=t.top,u=t.right,d=t.gap;return a===void 0&&(a="margin"),`
  .`.concat(eT,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(gs,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(i,";"),a==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),a==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oc,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Dc,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Oc," .").concat(Oc,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Dc," .").concat(Dc,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(gs,`] {
    `).concat(tT,": ").concat(d,`px;
  }
`)},_y=function(){var t=parseInt(document.body.getAttribute(gs)||"0",10);return isFinite(t)?t:0},bT=function(){E.useEffect(function(){return document.body.setAttribute(gs,(_y()+1).toString()),function(){var t=_y()-1;t<=0?document.body.removeAttribute(gs):document.body.setAttribute(gs,t.toString())}},[])},wT=function(t){var r=t.noRelative,a=t.noImportant,i=t.gapMode,o=i===void 0?"margin":i;bT();var c=E.useMemo(function(){return vT(o)},[o]);return E.createElement(yT,{styles:xT(c,!r,o,a?"":"!important")})},Nh=!1;if(typeof window<"u")try{var xc=Object.defineProperty({},"passive",{get:function(){return Nh=!0,!0}});window.addEventListener("test",xc,xc),window.removeEventListener("test",xc,xc)}catch{Nh=!1}var cs=Nh?{passive:!1}:!1,_T=function(t){return t.tagName==="TEXTAREA"},yb=function(t,r){if(!(t instanceof Element))return!1;var a=window.getComputedStyle(t);return a[r]!=="hidden"&&!(a.overflowY===a.overflowX&&!_T(t)&&a[r]==="visible")},ST=function(t){return yb(t,"overflowY")},ET=function(t){return yb(t,"overflowX")},Sy=function(t,r){var a=r.ownerDocument,i=r;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=xb(t,i);if(o){var c=bb(t,i),u=c[1],d=c[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==a.body);return!1},AT=function(t){var r=t.scrollTop,a=t.scrollHeight,i=t.clientHeight;return[r,a,i]},jT=function(t){var r=t.scrollLeft,a=t.scrollWidth,i=t.clientWidth;return[r,a,i]},xb=function(t,r){return t==="v"?ST(r):ET(r)},bb=function(t,r){return t==="v"?AT(r):jT(r)},RT=function(t,r){return t==="h"&&r==="rtl"?-1:1},NT=function(t,r,a,i,o){var c=RT(t,window.getComputedStyle(r).direction),u=c*i,d=a.target,p=r.contains(d),m=!1,v=u>0,y=0,x=0;do{if(!d)break;var w=bb(t,d),N=w[0],S=w[1],R=w[2],A=S-R-c*N;(N||A)&&xb(t,d)&&(y+=A,x+=N);var M=d.parentNode;d=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!p&&d!==document.body||p&&(r.contains(d)||r===d));return(v&&Math.abs(y)<1||!v&&Math.abs(x)<1)&&(m=!0),m},bc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ey=function(t){return[t.deltaX,t.deltaY]},Ay=function(t){return t&&"current"in t?t.current:t},TT=function(t,r){return t[0]===r[0]&&t[1]===r[1]},CT=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},MT=0,us=[];function OT(t){var r=E.useRef([]),a=E.useRef([0,0]),i=E.useRef(),o=E.useState(MT++)[0],c=E.useState(vb)[0],u=E.useRef(t);E.useEffect(function(){u.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var S=JN([t.lockRef.current],(t.shards||[]).map(Ay),!0).filter(Boolean);return S.forEach(function(R){return R.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),S.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var d=E.useCallback(function(S,R){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var A=bc(S),M=a.current,L="deltaX"in S?S.deltaX:M[0]-A[0],F="deltaY"in S?S.deltaY:M[1]-A[1],U,k=S.target,Y=Math.abs(L)>Math.abs(F)?"h":"v";if("touches"in S&&Y==="h"&&k.type==="range")return!1;var re=Sy(Y,k);if(!re)return!0;if(re?U=Y:(U=Y==="v"?"h":"v",re=Sy(Y,k)),!re)return!1;if(!i.current&&"changedTouches"in S&&(L||F)&&(i.current=U),!U)return!0;var me=i.current||U;return NT(me,R,S,me==="h"?L:F)},[]),p=E.useCallback(function(S){var R=S;if(!(!us.length||us[us.length-1]!==c)){var A="deltaY"in R?Ey(R):bc(R),M=r.current.filter(function(U){return U.name===R.type&&(U.target===R.target||R.target===U.shadowParent)&&TT(U.delta,A)})[0];if(M&&M.should){R.cancelable&&R.preventDefault();return}if(!M){var L=(u.current.shards||[]).map(Ay).filter(Boolean).filter(function(U){return U.contains(R.target)}),F=L.length>0?d(R,L[0]):!u.current.noIsolation;F&&R.cancelable&&R.preventDefault()}}},[]),m=E.useCallback(function(S,R,A,M){var L={name:S,delta:R,target:A,should:M,shadowParent:DT(A)};r.current.push(L),setTimeout(function(){r.current=r.current.filter(function(F){return F!==L})},1)},[]),v=E.useCallback(function(S){a.current=bc(S),i.current=void 0},[]),y=E.useCallback(function(S){m(S.type,Ey(S),S.target,d(S,t.lockRef.current))},[]),x=E.useCallback(function(S){m(S.type,bc(S),S.target,d(S,t.lockRef.current))},[]);E.useEffect(function(){return us.push(c),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:x}),document.addEventListener("wheel",p,cs),document.addEventListener("touchmove",p,cs),document.addEventListener("touchstart",v,cs),function(){us=us.filter(function(S){return S!==c}),document.removeEventListener("wheel",p,cs),document.removeEventListener("touchmove",p,cs),document.removeEventListener("touchstart",v,cs)}},[]);var w=t.removeScrollBar,N=t.inert;return E.createElement(E.Fragment,null,N?E.createElement(c,{styles:CT(o)}):null,w?E.createElement(wT,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function DT(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const kT=lT(gb,OT);var wb=E.forwardRef(function(t,r){return E.createElement(lu,Tr({},t,{ref:r,sideCar:kT}))});wb.classNames=lu.classNames;var Th=["Enter"," "],LT=["ArrowDown","PageUp","Home"],_b=["ArrowUp","PageDown","End"],UT=[...LT,..._b],zT={ltr:[...Th,"ArrowRight"],rtl:[...Th,"ArrowLeft"]},BT={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xo="Menu",[Po,PT,$T]=Ox(Xo),[vi,Sb]=Yo(Xo,[$T,Zx,lb]),cu=Zx(),Eb=lb(),[IT,Ss]=vi(Xo),[FT,Qo]=vi(Xo),Ab=t=>{const{__scopeMenu:r,open:a=!1,children:i,dir:o,onOpenChange:c,modal:u=!0}=t,d=cu(r),[p,m]=E.useState(null),v=E.useRef(!1),y=Jr(c),x=Dx(o);return E.useEffect(()=>{const w=()=>{v.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>v.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),f.jsx(CN,{...d,children:f.jsx(IT,{scope:r,open:a,onOpenChange:y,content:p,onContentChange:m,children:f.jsx(FT,{scope:r,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:v,dir:x,modal:u,children:i})})})};Ab.displayName=Xo;var HT="MenuAnchor",sm=E.forwardRef((t,r)=>{const{__scopeMenu:a,...i}=t,o=cu(a);return f.jsx(MN,{...o,...i,ref:r})});sm.displayName=HT;var qT="MenuPortal",[wD,jb]=vi(qT,{forceMount:void 0}),ur="MenuContent",[GT,om]=vi(ur),Rb=E.forwardRef((t,r)=>{const a=jb(ur,t.__scopeMenu),{forceMount:i=a.forceMount,...o}=t,c=Ss(ur,t.__scopeMenu),u=Qo(ur,t.__scopeMenu);return f.jsx(Po.Provider,{scope:t.__scopeMenu,children:f.jsx(ou,{present:i||c.open,children:f.jsx(Po.Slot,{scope:t.__scopeMenu,children:u.modal?f.jsx(VT,{...o,ref:r}):f.jsx(YT,{...o,ref:r})})})})}),VT=E.forwardRef((t,r)=>{const a=Ss(ur,t.__scopeMenu),i=E.useRef(null),o=In(r,i);return E.useEffect(()=>{const c=i.current;if(c)return ZN(c)},[]),f.jsx(lm,{...t,ref:o,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:Rt(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),YT=E.forwardRef((t,r)=>{const a=Ss(ur,t.__scopeMenu);return f.jsx(lm,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),KT=Ic("MenuContent.ScrollLock"),lm=E.forwardRef((t,r)=>{const{__scopeMenu:a,loop:i=!1,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEntryFocus:p,onEscapeKeyDown:m,onPointerDownOutside:v,onFocusOutside:y,onInteractOutside:x,onDismiss:w,disableOutsideScroll:N,...S}=t,R=Ss(ur,a),A=Qo(ur,a),M=cu(a),L=Eb(a),F=PT(a),[U,k]=E.useState(null),Y=E.useRef(null),re=In(r,Y,R.onContentChange),me=E.useRef(0),xe=E.useRef(""),ee=E.useRef(0),G=E.useRef(null),H=E.useRef("right"),de=E.useRef(0),le=N?wb:E.Fragment,P=N?{as:KT,allowPinchZoom:!0}:void 0,Z=oe=>{const z=xe.current+oe,W=F().filter(ke=>!ke.disabled),pe=document.activeElement,ae=W.find(ke=>ke.ref.current===pe)?.textValue,_e=W.map(ke=>ke.textValue),Re=sC(_e,z,ae),Ee=W.find(ke=>ke.textValue===Re)?.ref.current;(function ke(Me){xe.current=Me,window.clearTimeout(me.current),Me!==""&&(me.current=window.setTimeout(()=>ke(""),1e3))})(z),Ee&&setTimeout(()=>Ee.focus())};E.useEffect(()=>()=>window.clearTimeout(me.current),[]),tR();const se=E.useCallback(oe=>H.current===G.current?.side&&lC(oe,G.current?.area),[]);return f.jsx(GT,{scope:a,searchRef:xe,onItemEnter:E.useCallback(oe=>{se(oe)&&oe.preventDefault()},[se]),onItemLeave:E.useCallback(oe=>{se(oe)||(Y.current?.focus(),k(null))},[se]),onTriggerLeave:E.useCallback(oe=>{se(oe)&&oe.preventDefault()},[se]),pointerGraceTimerRef:ee,onPointerGraceIntentChange:E.useCallback(oe=>{G.current=oe},[]),children:f.jsx(le,{...P,children:f.jsx(zx,{asChild:!0,trapped:o,onMountAutoFocus:Rt(c,oe=>{oe.preventDefault(),Y.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:f.jsx(Lx,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:m,onPointerDownOutside:v,onFocusOutside:y,onInteractOutside:x,onDismiss:w,children:f.jsx(YN,{asChild:!0,...L,dir:A.dir,orientation:"vertical",loop:i,currentTabStopId:U,onCurrentTabStopIdChange:k,onEntryFocus:Rt(p,oe=>{A.isUsingKeyboardRef.current||oe.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(ON,{role:"menu","aria-orientation":"vertical","data-state":Hb(R.open),"data-radix-menu-content":"",dir:A.dir,...M,...S,ref:re,style:{outline:"none",...S.style},onKeyDown:Rt(S.onKeyDown,oe=>{const W=oe.target.closest("[data-radix-menu-content]")===oe.currentTarget,pe=oe.ctrlKey||oe.altKey||oe.metaKey,ae=oe.key.length===1;W&&(oe.key==="Tab"&&oe.preventDefault(),!pe&&ae&&Z(oe.key));const _e=Y.current;if(oe.target!==_e||!UT.includes(oe.key))return;oe.preventDefault();const Ee=F().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);_b.includes(oe.key)&&Ee.reverse(),aC(Ee)}),onBlur:Rt(t.onBlur,oe=>{oe.currentTarget.contains(oe.target)||(window.clearTimeout(me.current),xe.current="")}),onPointerMove:Rt(t.onPointerMove,$o(oe=>{const z=oe.target,W=de.current!==oe.clientX;if(oe.currentTarget.contains(z)&&W){const pe=oe.clientX>de.current?"right":"left";H.current=pe,de.current=oe.clientX}}))})})})})})})});Rb.displayName=ur;var WT="MenuGroup",cm=E.forwardRef((t,r)=>{const{__scopeMenu:a,...i}=t;return f.jsx(Fn.div,{role:"group",...i,ref:r})});cm.displayName=WT;var XT="MenuLabel",Nb=E.forwardRef((t,r)=>{const{__scopeMenu:a,...i}=t;return f.jsx(Fn.div,{...i,ref:r})});Nb.displayName=XT;var Vc="MenuItem",jy="menu.itemSelect",uu=E.forwardRef((t,r)=>{const{disabled:a=!1,onSelect:i,...o}=t,c=E.useRef(null),u=Qo(Vc,t.__scopeMenu),d=om(Vc,t.__scopeMenu),p=In(r,c),m=E.useRef(!1),v=()=>{const y=c.current;if(!a&&y){const x=new CustomEvent(jy,{bubbles:!0,cancelable:!0});y.addEventListener(jy,w=>i?.(w),{once:!0}),Mx(y,x),x.defaultPrevented?m.current=!1:u.onClose()}};return f.jsx(Tb,{...o,ref:p,disabled:a,onClick:Rt(t.onClick,v),onPointerDown:y=>{t.onPointerDown?.(y),m.current=!0},onPointerUp:Rt(t.onPointerUp,y=>{m.current||y.currentTarget?.click()}),onKeyDown:Rt(t.onKeyDown,y=>{const x=d.searchRef.current!=="";a||x&&y.key===" "||Th.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});uu.displayName=Vc;var Tb=E.forwardRef((t,r)=>{const{__scopeMenu:a,disabled:i=!1,textValue:o,...c}=t,u=om(Vc,a),d=Eb(a),p=E.useRef(null),m=In(r,p),[v,y]=E.useState(!1),[x,w]=E.useState("");return E.useEffect(()=>{const N=p.current;N&&w((N.textContent??"").trim())},[c.children]),f.jsx(Po.ItemSlot,{scope:a,disabled:i,textValue:o??x,children:f.jsx(KN,{asChild:!0,...d,focusable:!i,children:f.jsx(Fn.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...c,ref:m,onPointerMove:Rt(t.onPointerMove,$o(N=>{i?u.onItemLeave(N):(u.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Rt(t.onPointerLeave,$o(N=>u.onItemLeave(N))),onFocus:Rt(t.onFocus,()=>y(!0)),onBlur:Rt(t.onBlur,()=>y(!1))})})})}),QT="MenuCheckboxItem",Cb=E.forwardRef((t,r)=>{const{checked:a=!1,onCheckedChange:i,...o}=t;return f.jsx(Lb,{scope:t.__scopeMenu,checked:a,children:f.jsx(uu,{role:"menuitemcheckbox","aria-checked":Yc(a)?"mixed":a,...o,ref:r,"data-state":dm(a),onSelect:Rt(o.onSelect,()=>i?.(Yc(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Cb.displayName=QT;var Mb="MenuRadioGroup",[ZT,JT]=vi(Mb,{value:void 0,onValueChange:()=>{}}),Ob=E.forwardRef((t,r)=>{const{value:a,onValueChange:i,...o}=t,c=Jr(i);return f.jsx(ZT,{scope:t.__scopeMenu,value:a,onValueChange:c,children:f.jsx(cm,{...o,ref:r})})});Ob.displayName=Mb;var Db="MenuRadioItem",kb=E.forwardRef((t,r)=>{const{value:a,...i}=t,o=JT(Db,t.__scopeMenu),c=a===o.value;return f.jsx(Lb,{scope:t.__scopeMenu,checked:c,children:f.jsx(uu,{role:"menuitemradio","aria-checked":c,...i,ref:r,"data-state":dm(c),onSelect:Rt(i.onSelect,()=>o.onValueChange?.(a),{checkForDefaultPrevented:!1})})})});kb.displayName=Db;var um="MenuItemIndicator",[Lb,eC]=vi(um,{checked:!1}),Ub=E.forwardRef((t,r)=>{const{__scopeMenu:a,forceMount:i,...o}=t,c=eC(um,a);return f.jsx(ou,{present:i||Yc(c.checked)||c.checked===!0,children:f.jsx(Fn.span,{...o,ref:r,"data-state":dm(c.checked)})})});Ub.displayName=um;var tC="MenuSeparator",zb=E.forwardRef((t,r)=>{const{__scopeMenu:a,...i}=t;return f.jsx(Fn.div,{role:"separator","aria-orientation":"horizontal",...i,ref:r})});zb.displayName=tC;var nC="MenuArrow",Bb=E.forwardRef((t,r)=>{const{__scopeMenu:a,...i}=t,o=cu(a);return f.jsx(DN,{...o,...i,ref:r})});Bb.displayName=nC;var rC="MenuSub",[_D,Pb]=vi(rC),No="MenuSubTrigger",$b=E.forwardRef((t,r)=>{const a=Ss(No,t.__scopeMenu),i=Qo(No,t.__scopeMenu),o=Pb(No,t.__scopeMenu),c=om(No,t.__scopeMenu),u=E.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:p}=c,m={__scopeMenu:t.__scopeMenu},v=E.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return E.useEffect(()=>v,[v]),E.useEffect(()=>{const y=d.current;return()=>{window.clearTimeout(y),p(null)}},[d,p]),f.jsx(sm,{asChild:!0,...m,children:f.jsx(Tb,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":o.contentId,"data-state":Hb(a.open),...t,ref:nu(r,o.onTriggerChange),onClick:y=>{t.onClick?.(y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:Rt(t.onPointerMove,$o(y=>{c.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!a.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{a.onOpenChange(!0),v()},100))})),onPointerLeave:Rt(t.onPointerLeave,$o(y=>{v();const x=a.content?.getBoundingClientRect();if(x){const w=a.content?.dataset.side,N=w==="right",S=N?-5:5,R=x[N?"left":"right"],A=x[N?"right":"left"];c.onPointerGraceIntentChange({area:[{x:y.clientX+S,y:y.clientY},{x:R,y:x.top},{x:A,y:x.top},{x:A,y:x.bottom},{x:R,y:x.bottom}],side:w}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(y),y.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:Rt(t.onKeyDown,y=>{const x=c.searchRef.current!=="";t.disabled||x&&y.key===" "||zT[i.dir].includes(y.key)&&(a.onOpenChange(!0),a.content?.focus(),y.preventDefault())})})})});$b.displayName=No;var Ib="MenuSubContent",Fb=E.forwardRef((t,r)=>{const a=jb(ur,t.__scopeMenu),{forceMount:i=a.forceMount,...o}=t,c=Ss(ur,t.__scopeMenu),u=Qo(ur,t.__scopeMenu),d=Pb(Ib,t.__scopeMenu),p=E.useRef(null),m=In(r,p);return f.jsx(Po.Provider,{scope:t.__scopeMenu,children:f.jsx(ou,{present:i||c.open,children:f.jsx(Po.Slot,{scope:t.__scopeMenu,children:f.jsx(lm,{id:d.contentId,"aria-labelledby":d.triggerId,...o,ref:m,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{u.isUsingKeyboardRef.current&&p.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:Rt(t.onFocusOutside,v=>{v.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:Rt(t.onEscapeKeyDown,v=>{u.onClose(),v.preventDefault()}),onKeyDown:Rt(t.onKeyDown,v=>{const y=v.currentTarget.contains(v.target),x=BT[u.dir].includes(v.key);y&&x&&(c.onOpenChange(!1),d.trigger?.focus(),v.preventDefault())})})})})})});Fb.displayName=Ib;function Hb(t){return t?"open":"closed"}function Yc(t){return t==="indeterminate"}function dm(t){return Yc(t)?"indeterminate":t?"checked":"unchecked"}function aC(t){const r=document.activeElement;for(const a of t)if(a===r||(a.focus(),document.activeElement!==r))return}function iC(t,r){return t.map((a,i)=>t[(r+i)%t.length])}function sC(t,r,a){const o=r.length>1&&Array.from(r).every(m=>m===r[0])?r[0]:r,c=a?t.indexOf(a):-1;let u=iC(t,Math.max(c,0));o.length===1&&(u=u.filter(m=>m!==a));const p=u.find(m=>m.toLowerCase().startsWith(o.toLowerCase()));return p!==a?p:void 0}function oC(t,r){const{x:a,y:i}=t;let o=!1;for(let c=0,u=r.length-1;c<r.length;u=c++){const d=r[c],p=r[u],m=d.x,v=d.y,y=p.x,x=p.y;v>i!=x>i&&a<(y-m)*(i-v)/(x-v)+m&&(o=!o)}return o}function lC(t,r){if(!r)return!1;const a={x:t.clientX,y:t.clientY};return oC(a,r)}function $o(t){return r=>r.pointerType==="mouse"?t(r):void 0}var cC=Ab,uC=sm,dC=Rb,fC=cm,hC=Nb,mC=uu,pC=Cb,gC=Ob,vC=kb,yC=Ub,xC=zb,bC=Bb,wC=$b,_C=Fb,du="DropdownMenu",[SC]=Yo(du,[Sb]),Hn=Sb(),[EC,qb]=SC(du),Gb=t=>{const{__scopeDropdownMenu:r,children:a,dir:i,open:o,defaultOpen:c,onOpenChange:u,modal:d=!0}=t,p=Hn(r),m=E.useRef(null),[v,y]=Cx({prop:o,defaultProp:c??!1,onChange:u,caller:du});return f.jsx(EC,{scope:r,triggerId:Sh(),triggerRef:m,contentId:Sh(),open:v,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(x=>!x),[y]),modal:d,children:f.jsx(cC,{...p,open:v,onOpenChange:y,dir:i,modal:d,children:a})})};Gb.displayName=du;var Vb="DropdownMenuTrigger",Yb=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,disabled:i=!1,...o}=t,c=qb(Vb,a),u=Hn(a);return f.jsx(uC,{asChild:!0,...u,children:f.jsx(Fn.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...o,ref:nu(r,c.triggerRef),onPointerDown:Rt(t.onPointerDown,d=>{!i&&d.button===0&&d.ctrlKey===!1&&(c.onOpenToggle(),c.open||d.preventDefault())}),onKeyDown:Rt(t.onKeyDown,d=>{i||(["Enter"," "].includes(d.key)&&c.onOpenToggle(),d.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});Yb.displayName=Vb;var Kb="DropdownMenuContent",Wb=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=qb(Kb,a),c=Hn(a),u=E.useRef(!1);return f.jsx(dC,{id:o.contentId,"aria-labelledby":o.triggerId,...c,...i,ref:r,onCloseAutoFocus:Rt(t.onCloseAutoFocus,d=>{u.current||o.triggerRef.current?.focus(),u.current=!1,d.preventDefault()}),onInteractOutside:Rt(t.onInteractOutside,d=>{const p=d.detail.originalEvent,m=p.button===0&&p.ctrlKey===!0,v=p.button===2||m;(!o.modal||v)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Wb.displayName=Kb;var AC="DropdownMenuGroup",jC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(fC,{...o,...i,ref:r})});jC.displayName=AC;var RC="DropdownMenuLabel",NC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(hC,{...o,...i,ref:r})});NC.displayName=RC;var TC="DropdownMenuItem",Xb=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(mC,{...o,...i,ref:r})});Xb.displayName=TC;var CC="DropdownMenuCheckboxItem",MC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(pC,{...o,...i,ref:r})});MC.displayName=CC;var OC="DropdownMenuRadioGroup",DC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(gC,{...o,...i,ref:r})});DC.displayName=OC;var kC="DropdownMenuRadioItem",LC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(vC,{...o,...i,ref:r})});LC.displayName=kC;var UC="DropdownMenuItemIndicator",zC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(yC,{...o,...i,ref:r})});zC.displayName=UC;var BC="DropdownMenuSeparator",PC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(xC,{...o,...i,ref:r})});PC.displayName=BC;var $C="DropdownMenuArrow",IC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(bC,{...o,...i,ref:r})});IC.displayName=$C;var FC="DropdownMenuSubTrigger",HC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(wC,{...o,...i,ref:r})});HC.displayName=FC;var qC="DropdownMenuSubContent",GC=E.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...i}=t,o=Hn(a);return f.jsx(_C,{...o,...i,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GC.displayName=qC;var VC=Gb,YC=Yb,KC=Wb,WC=Xb;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QC=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,i)=>i?i.toUpperCase():a.toLowerCase()),Ry=t=>{const r=QC(t);return r.charAt(0).toUpperCase()+r.slice(1)},Qb=(...t)=>t.filter((r,a,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===a).join(" ").trim(),ZC=t=>{for(const r in t)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=E.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...d},p)=>E.createElement("svg",{ref:p,...JC,width:r,height:r,stroke:t,strokeWidth:i?Number(a)*24/Number(r):a,className:Qb("lucide",o),...!c&&!ZC(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,v])=>E.createElement(m,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=(t,r)=>{const a=E.forwardRef(({className:i,...o},c)=>E.createElement(eM,{ref:c,iconNode:r,className:Qb(`lucide-${XC(Ry(t))}`,`lucide-${t}`,i),...o}));return a.displayName=Ry(t),a};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Zb=mn("arrow-down",tM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rM=mn("arrow-left",nM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Jb=mn("arrow-up",aM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],sM=mn("badge-percent",iM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],lM=mn("building",oM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uM=mn("check",cM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ew=mn("copy",dM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],hM=mn("ellipsis",fM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pM=mn("file-text",mM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],tw=mn("grip-vertical",gM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],yM=mn("lock-open",vM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bM=mn("lock",xM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_M=mn("palette",wM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],EM=mn("pencil",SM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ch=mn("plus",AM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ny=mn("search",jM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fm=mn("trash-2",RM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],TM=mn("user",NM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nw=mn("x",CM);function MM({onOpen:t,onDuplicate:r,onPdf:a,onDelete:i,align:o="end"}){return f.jsxs(VC,{children:[f.jsx(YC,{asChild:!0,children:f.jsx("button",{className:"text-gray-400 hover:text-gray-700 px-2","aria-label":"Azioni preventivo",children:f.jsx(hM,{className:"h-5 w-5",strokeWidth:2.5})})}),f.jsxs(KC,{side:"bottom",align:o,className:"rounded-lg border bg-white p-1 shadow-lg text-sm",children:[f.jsx(wc,{onSelect:t,children:"Apri"}),f.jsx(wc,{onSelect:r,children:"Duplica"}),f.jsx(wc,{onSelect:a,children:"Scarica PDF"}),i&&f.jsxs(f.Fragment,{children:[f.jsx(OM,{}),f.jsx(wc,{destructive:!0,onSelect:i,children:"Elimina"})]})]})]})}function wc({children:t,onSelect:r,destructive:a=!1}){return f.jsx(WC,{onSelect:i=>{i.preventDefault(),r()},className:`px-3 py-2 rounded-md cursor-pointer outline-none hover:bg-gray-100 ${a?"text-red-600 hover:bg-red-50":""}`,children:t})}function OM(){return f.jsx("div",{className:"my-1 h-px bg-gray-200"})}function hm(...t){return t.filter(Boolean).join(" ")}const _n=E.forwardRef(function({variant:r="primary",className:a,...i},o){const u=r==="primary"?"btn-primary":r==="ghost"?"btn-ghost":"btn-outline";return f.jsx("button",{ref:o,className:hm("btn",u,a),...i})}),DM=E.forwardRef(function({className:r,...a},i){return f.jsx("input",{ref:i,className:hm("input",r),...a})});function Ua({className:t,...r}){return f.jsx("div",{className:hm("card",t),...r})}function kM({quoteId:t}){const[r,a]=E.useState(!0),[i,o]=E.useState(null),[c,u]=E.useState(null);if(E.useEffect(()=>{let v=!0;return(async()=>{try{a(!0),o(null);const{data:y,error:x}=await en.from("quotes").select("id, manual_totals, items_json").eq("id",t).maybeSingle();if(x)throw x;if(!y){v&&u({totalNet:0,counts:{}});return}const{data:w,error:N}=await en.from("quote_versions").select("id, created_at").eq("quote_id",t).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(N)throw N;let S=0;if(w?.id){const{data:U,error:k}=await en.from("quote_charges").select("amount").eq("quote_version_id",w.id);if(k)throw k;S=(U??[]).reduce((Y,re)=>Y+Number(re?.amount??0),0)}let M=(Array.isArray(y.manual_totals)?y.manual_totals:[]).reduce((U,k)=>{const Y=Number(k?.amount??0);return U+(Number.isFinite(Y)?Y:0)},0)+S;if(w?.id){const{data:U,error:k}=await en.from("quote_totals").select("total_discount_pct, total_discount_abs").eq("quote_version_id",w.id).maybeSingle();if(k)throw k;U?.total_discount_pct&&(M*=1-Number(U.total_discount_pct)/100),U?.total_discount_abs&&(M-=Number(U.total_discount_abs))}M<0&&(M=0);const L=Array.isArray(y.items_json)?y.items_json:[],F={};for(const U of L){const k=typeof U?.kind=="string"?U.kind:"altro",Y=Number(U?.qty??1);F[k]=(F[k]??0)+(Number.isFinite(Y)?Y:0)}v&&u({totalNet:M,counts:F})}catch(y){v&&o(y.message||"Errore caricamento anteprima")}finally{v&&a(!1)}})(),()=>{v=!1}},[t]),r)return f.jsx("div",{className:"mt-3 border-t pt-3 text-xs text-gray-500",children:f.jsx("div",{className:"h-3 w-40 bg-gray-200 rounded animate-pulse"})});if(i)return f.jsx("div",{className:"mt-3 border-t pt-3 text-xs text-red-600",children:i});if(!c)return null;const d={finestra:"Finestre",cassonetto:"Cassonetti",zanzariera:"Zanzariere",persiana:"Persiane",tapparella:"Tapparelle",custom:"Voci custom",altro:"Altro"},p=["finestra","porta_finestra","scorrevole","cassonetto","zanzariera","persiana","tapparella","custom","altro"],m=Object.entries(c.counts).filter(([,v])=>v>0).sort((v,y)=>p.indexOf(v[0])-p.indexOf(y[0]));return f.jsxs("div",{className:"mt-3 border-t pt-3 flex items-center justify-between text-xs text-gray-700",children:[f.jsx("div",{className:"min-w-0 flex flex-wrap items-center gap-1.5",children:m.length===0?f.jsx("span",{className:"badge-soft",children:""}):m.map(([v,y])=>f.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-1 border border-gray-200 bg-white/60 shadow-sm",title:d[v]??v,children:[f.jsx(LM,{kind:v}),f.jsxs("span",{className:"truncate max-w-[14ch]",children:[y," ",d[v]??v]})]},v))}),f.jsxs("div",{className:"ml-4 shrink-0 text-right",children:[f.jsx("div",{className:"uppercase tracking-wide text-[10px] text-gray-500",children:"Totale (senza IVA)"}),f.jsxs("div",{className:"font-mono text-sm font-semibold",children:[" ",c.totalNet.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})}function LM({kind:t}){const r="inline-block align-[-2px]";switch(t){case"finestra":return f.jsxs("svg",{className:r,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12",stroke:"currentColor",strokeWidth:"1.5"})]});case"cassonetto":return f.jsxs("svg",{className:r,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("rect",{x:"4",y:"6",width:"16",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("rect",{x:"6.5",y:"8.5",width:"11",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"1.2"})]});case"zanzariera":return f.jsxs("svg",{className:r,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M7 7l10 10M17 7L7 17",stroke:"currentColor",strokeWidth:"1"})]});case"persiana":return f.jsxs("svg",{className:r,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"1.5",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M7 7h10M7 10h10M7 13h10M7 16h10",stroke:"currentColor",strokeWidth:"1.2"})]});case"tapparella":return f.jsxs("svg",{className:r,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("rect",{x:"5",y:"4",width:"14",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("rect",{x:"5",y:"9",width:"14",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("rect",{x:"5",y:"14",width:"14",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]});case"custom":default:return f.jsx("svg",{className:r,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:f.jsx("path",{d:"M12 3l2.5 6.5L21 12l-6.5 2.5L12 21l-2.5-6.5L3 12l6.5-2.5L12 3z",stroke:"currentColor",strokeWidth:"1.5"})})}}const Xf=12,Ty=2e4,UM=["bozza","inviato","accettato","rifiutato","scaduto"];function zM(t){const r=new Map,a=[];for(const o of t)if(o.reference_key){const c=o.reference_key;r.has(c)||r.set(c,[]),r.get(c).push(o)}else a.push(o);const i=[];for(const[,o]of r){o.sort((d,p)=>(p.created_at??"").localeCompare(d.created_at??""));const c=o[0],u=o.slice(1).map(d=>d.number).filter(Boolean);i.push({...c,groupCount:o.length,siblingsNumbers:u})}return i.push(...a),i.sort((o,c)=>(c.created_at??"").localeCompare(o.created_at??"")),i}function BM(t){try{return new Date(t).toLocaleDateString("it-IT",{day:"2-digit",month:"short",year:"numeric"})}catch{return""}}function PM(t){switch(t){case"bozza":return"#9ca3af";case"inviato":return"#3b82f6";case"accettato":return"#10b981";case"rifiutato":return"#ef4444";case"scaduto":return"#f59e0b"}}function Cy(t){if(!t)return"no-date";const r=new Date(t);return Number.isNaN(r.getTime())?"no-date":`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`}function $M(t){if(!t)return"Senza data";const r=new Date(t);return Number.isNaN(r.getTime())?"Senza data":r.toLocaleDateString("it-IT",{month:"long",year:"numeric"})}function IM(){const t=Fh(),[r,a]=E.useState(!1),[i,o]=E.useState([]),[c,u]=E.useState(1),[d,p]=E.useState(!0),[m,v]=E.useState(""),[y,x]=E.useState(""),[w,N]=E.useState(new Set),[S,R]=E.useState(null),[A,M]=E.useState({}),L=E.useRef(null);E.useEffect(()=>{const G=setTimeout(()=>x(m.trim()),300);return()=>clearTimeout(G)},[m]),E.useEffect(()=>{const G=H=>{if(H.key==="/"){const de=document.getElementById("dashboard-search");de&&(H.preventDefault(),de.focus())}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[]),E.useEffect(()=>{U(1,!0)},[]),E.useEffect(()=>{U(1,!0)},[Array.from(w).join(","),y]);const F=E.useCallback(G=>{let H=G;if(w.size>0&&(H=H.in("status",Array.from(w))),y){const de=y,le=`customer_name.ilike.%${de}%,number.ilike.%${de}%,job_address.ilike.%${de}%,reference.ilike.%${de}%`;H=H.or(le)}return H},[w,y]);E.useEffect(()=>{if(!d||r)return;const G=L.current;if(!G)return;const H=new IntersectionObserver(de=>{for(const le of de)if(le.isIntersecting){U(c+1);break}},{rootMargin:"200px"});return H.observe(G),()=>H.disconnect()},[c,d,r]);async function U(G=1,H=!1){try{a(!0),H&&M({});const de=(G-1)*Xf,le=de+Xf-1,P=F(en.from("quotes").select("id, number, status, customer_name, job_address, created_at, validity_days, reference, reference_key").order("created_at",{ascending:!1}).range(de,le)),Z=H?F(en.from("quotes").select("reference_key, created_at").not("reference_key","is",null).order("created_at",{ascending:!1}).range(0,Ty-1)):null,se=H?F(en.from("quotes").select("id, created_at").is("reference_key",null).order("created_at",{ascending:!1}).range(0,Ty-1)):null,oe={data:null,error:null},[z,W,pe]=await Promise.all([P,Z??Promise.resolve(oe),se??Promise.resolve(oe)]),{data:ae,error:_e}=z;if(_e)throw _e;if(H){if(W?.error)throw W.error;if(pe?.error)throw pe.error;const Ee={},ke=Me=>{const fe=Cy(Me);Ee[fe]=(Ee[fe]??0)+1};if(Array.isArray(W?.data)){const Me=new Set;for(const fe of W.data){const ce=typeof fe.reference_key=="string"?fe.reference_key:null;!ce||Me.has(ce)||(Me.add(ce),ke(fe.created_at))}}if(Array.isArray(pe?.data))for(const Me of pe.data)ke(Me.created_at);M(Ee)}const Re=ae??[];p(Re.length===Xf),u(G),o(Ee=>{const ke=H?Re:[...Ee,...Re];return zM(ke)})}catch(de){console.error(de),Nn.error(de.message||"Errore caricamento preventivi")}finally{a(!1)}}function k(G){const H=new Set(w);H.has(G)?H.delete(G):H.add(G),N(H)}async function Y(){try{a(!0);const{data:G,error:H}=await en.rpc("fn_create_quote",{p_customer_type:"privato",p_customer_name:"Cliente temporaneo",p_customer_email:null,p_customer_phone:null,p_job_address:null,p_price_list_id:null,p_vat:"22",p_validity_days:15,p_terms:"Pagamenti a 30gg.",p_notes:null});if(H)throw H;const de=G?.[0];Nn.success(`Bozza creata: ${de.quote_number}`),t(`/quotes/${de.quote_id}`)}catch(G){Nn.error(G.message||"Errore creazione preventivo")}finally{a(!1)}}async function re(G){try{a(!0);const{data:H,error:de}=await en.from("quotes").select("*").eq("id",G.id).maybeSingle();if(de)throw de;if(!H)throw new Error("Preventivo non trovato");const le={status:"bozza",customer_type:H.customer_type??"privato",customer_name:H.customer_name??null,customer_email:H.customer_email??null,customer_phone:H.customer_phone??null,job_address:H.job_address??null,validity_days:H.validity_days??15,vat:H.vat??"22",manual_totals:H.manual_totals??null,items_json:H.items_json??null,shipping_included:H.shipping_included??null,profile_system:H.profile_system??null,notes:H.notes??null,reference:H.reference??null};Object.prototype.hasOwnProperty.call(H,"years")&&(le.years=H.years??0);const{data:P,error:Z}=await en.rpc("fn_create_quote",{p_customer_type:le.customer_type,p_customer_name:le.customer_name??"Cliente duplicato",p_customer_email:le.customer_email??null,p_customer_phone:le.customer_phone??null,p_job_address:le.job_address??null,p_price_list_id:null,p_vat:le.vat??"22",p_validity_days:le.validity_days??15,p_terms:null,p_notes:null});if(Z)throw Z;const se=Array.isArray(P)?P[0]:P,oe=se?.quote_id??se?.id;if(!oe)throw new Error("Errore creazione duplicato");const{error:z}=await en.from("quotes").update({manual_totals:le.manual_totals,items_json:le.items_json,shipping_included:le.shipping_included,profile_system:le.profile_system,notes:le.notes,reference:le.reference??null,years:le.years??void 0}).eq("id",oe);if(z)throw z;Nn.success("Preventivo duplicato"),t(`/quotes/${oe}`)}catch(H){console.error(H),Nn.error(H?.message||"Errore duplicazione preventivo")}finally{a(!1)}}async function me(G){if(window.confirm(`Eliminare il preventivo ${G.number}? Questa azione  irreversibile.`))try{R(G.id);const{data:de,error:le}=await en.from("quote_versions").select("id").eq("quote_id",G.id);if(le)throw le;const P=(de??[]).map(se=>se.id);if(P.length>0){const se=en.from("quote_items").delete().in("quote_version_id",P),oe=en.from("quote_charges").delete().in("quote_version_id",P),z=en.from("quote_totals").delete().in("quote_version_id",P),[W,pe,ae]=await Promise.all([se,oe,z]);if(W.error)throw W.error;if(pe.error)throw pe.error;if(ae.error)throw ae.error;const _e=await en.from("quote_versions").delete().eq("quote_id",G.id);if(_e.error)throw _e.error}const Z=await en.from("quotes").delete().eq("id",G.id);if(Z.error)throw Z.error;o(se=>se.filter(oe=>oe.id!==G.id)),Nn.success(`Preventivo ${G.number} eliminato`)}catch(de){console.error(de),Nn.error(de.message||"Errore durante leliminazione")}finally{R(null)}}const xe=E.useMemo(()=>{const G={bozza:0,inviato:0,accettato:0,rifiutato:0,scaduto:0};for(const H of i)G[H.status]++;return G},[i]),ee=E.useMemo(()=>{const G=new Map;for(const de of i){const le=Cy(de.created_at),P=$M(de.created_at);G.has(le)||G.set(le,{key:le,label:P,items:[]}),G.get(le).items.push(de)}const H=Array.from(G.values());H.sort((de,le)=>de.key==="no-date"?1:le.key==="no-date"?-1:le.key.localeCompare(de.key));for(const de of H)de.items.sort((le,P)=>(P.created_at??"").localeCompare(le.created_at??""));return H},[i]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[f.jsx("div",{className:"flex items-center gap-3",children:f.jsxs("div",{children:[f.jsx("h1",{className:"leading-tight",children:"Preventivi"}),f.jsx("div",{className:"mt-0.5 text-sm text-gray-600",children:"Gestisci e crea preventivi per i tuoi clienti"})]})}),f.jsx(_n,{onClick:Y,disabled:r,children:"+ Nuovo preventivo"})]}),f.jsx("div",{className:"md:sticky md:top-[52px] md:z-10 md:border-b md:bg-[color:var(--bg)]/90 md:backdrop-blur",children:f.jsxs("div",{className:"py-3 flex flex-col gap-3 md:flex-row md:items-center",children:[f.jsxs("div",{className:"w-full md:w-[28rem] relative",children:[f.jsx("svg",{"aria-hidden":"true",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M12.9 14.32a8 8 0 111.414-1.414l4.387 4.387a1 1 0 01-1.414 1.414l-4.387-4.387zM14 8a6 6 0 11-12 0 6 6 0 0112 0z",clipRule:"evenodd"})}),f.jsx(DM,{id:"dashboard-search",value:m,onChange:G=>v(G.target.value),placeholder:"Cerca per numero, cliente o via",className:"pl-9 text-base md:text-sm",inputMode:"search"}),f.jsx("span",{className:"hidden md:inline absolute right-2 top-1/2 -translate-y-1/2 kbd",children:"/"})]}),f.jsx("div",{role:"tablist","aria-label":"Stato preventivi",className:"overflow-x-auto -mx-2 md:mx-0 px-2 flex flex-nowrap md:flex-wrap md:overflow-visible [-webkit-overflow-scrolling:touch]",children:f.jsxs("div",{className:"inline-flex bg-gray-100 rounded-xl p-1 shadow-inner min-w-0",children:[UM.map(G=>{const H=w.has(G),de=G.charAt(0).toUpperCase()+G.slice(1),le=xe[G];return f.jsxs("button",{role:"tab","aria-selected":H,onClick:()=>k(G),className:["shrink-0 px-3 py-1.5 text-sm rounded-lg transition",H?"bg-white shadow-sm ring-1 ring-gray-200 text-gray-900":"text-gray-600 hover:bg-white/60"].join(" "),title:`${le} visibili in questa pagina`,children:[f.jsx("span",{className:"font-medium",children:de}),typeof le=="number"&&le>0&&f.jsxs("span",{className:H?"ml-1 text-gray-900/70":"ml-1 text-gray-500",children:[" ",le]})]},G)}),f.jsx("button",{role:"tab","aria-selected":w.size===0,onClick:()=>N(new Set),className:"shrink-0 px-3 py-1.5 text-sm rounded-lg text-gray-600 hover:bg-white/60",title:"Mostra tutti",children:"Azzera"})]})})]})}),i.length===0&&!r?f.jsxs(Ua,{className:"text-center py-10 text-gray-600",children:["Nessun preventivo trovato.",f.jsx("div",{className:"mt-3",children:f.jsx(_n,{onClick:Y,children:"Crea il primo preventivo"})})]}):f.jsxs("div",{className:"space-y-6",children:[ee.map(G=>{const H=A[G.key]??G.items.length;return f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"md:sticky md:top-[96px] md:z-10 md:bg-[color:var(--bg)]/85 md:backdrop-blur border-b py-1",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm font-semibold text-gray-800 capitalize",children:G.label}),f.jsxs("div",{className:"text-xs text-gray-500",children:[H," preventivi"]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.items.map(de=>f.jsx(HM,{q:de,onOpen:()=>t(`/quotes/${de.id}`),onDuplicate:()=>void re(de),onPdf:()=>Nn.info("PDF: in arrivo"),onDelete:()=>me(de),onDeleteDisabled:S===de.id,onFilterByReference:le=>v(le)},de.id))})]},G.key)}),r&&f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Array.from({length:4}).map((G,H)=>f.jsx(GM,{},`s-${H}`))})]}),d&&f.jsx("div",{ref:L,className:"h-8"})]})}function FM(t,r){if(!t)return null;const a=new Date(t),i=new Date(a);i.setDate(a.getDate()+(r||0));const o=i.getTime()-Date.now();return Math.ceil(o/(1e3*60*60*24))}function HM({q:t,onOpen:r,onDuplicate:a,onPdf:i,onDelete:o,onDeleteDisabled:c=!1,onFilterByReference:u}){const d=FM(t.created_at,t.validity_days),p=`card-accent card-accent--${t.status}`,m=d==null?"":d<0?`Scaduto da ${Math.abs(d)}g`:`Scade tra ${d}g`;return f.jsx(Ua,{className:`group ${p} transition-transform will-change-transform hover:-translate-y-px ${c?"opacity-60":""}`,children:f.jsxs("div",{role:"button",tabIndex:0,onClick:r,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&r()},children:[f.jsxs("div",{className:"flex items-start justify-between gap-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"text-[11px] font-semibold text-gray-900 tracking-tight truncate max-w-[28ch] flex items-center gap-2 font-mono",children:[f.jsx("span",{children:t.number}),t.created_at&&f.jsx("span",{className:"text-[11px] font-normal text-gray-500",children:BM(t.created_at)})]}),f.jsx("div",{className:"mt-0.5 text-lg font-semibold truncate max-w-[28ch]",children:t.customer_name??""}),(t.reference||t.job_address)&&f.jsx("div",{className:"mt-1 text-xs text-gray-700 truncate max-w-[38ch]",children:t.reference??t.job_address})]}),f.jsx("div",{className:c?"opacity-50 pointer-events-none":"",onClick:v=>v.stopPropagation(),children:f.jsx(MM,{onOpen:r,onDuplicate:a,onPdf:i,onDelete:o})})]}),f.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(qM,{s:t.status}),t.groupCount&&t.groupCount>1&&(t.reference||t.job_address)&&f.jsxs("button",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 border border-gray-200 text-xs text-gray-600 bg-white/60 hover:bg-white",title:t.siblingsNumbers&&t.siblingsNumbers.length?`Altri: ${t.siblingsNumbers.join(", ")}`:"Mostra tutti i preventivi con questo riferimento",onClick:v=>{v.stopPropagation(),u(t.reference??t.job_address)},children:["Versioni ",t.groupCount]})]}),f.jsx("div",{className:"text-xs text-gray-600",children:m})]}),f.jsx(kM,{quoteId:t.id})]})})}function qM({s:t}){const r=t.charAt(0).toUpperCase()+t.slice(1);return f.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border border-gray-200 bg-white/70 px-2 py-0.5 text-[11px]",children:[f.jsx("span",{"aria-hidden":!0,className:"inline-block h-1.5 w-1.5 rounded-full",style:{backgroundColor:PM(t)}}),f.jsx("span",{className:"font-medium",children:r})]})}function GM(){return f.jsxs(Ua,{className:"animate-pulse",children:[f.jsx("div",{className:"h-4 w-1/2 bg-gray-200 rounded"}),f.jsx("div",{className:"mt-3 h-3 w-2/3 bg-gray-200 rounded"}),f.jsx("div",{className:"mt-3 h-3 w-1/4 bg-gray-200 rounded"})]})}const My="quote-item-images";function VM(t){const r=t.name||"",a=r.lastIndexOf(".");return a===-1?"png":r.slice(a+1).toLowerCase()||"png"}async function kc(t,r){const a=`${r}/${crypto.randomUUID()}.${VM(t)}`,{error:i}=await en.storage.from(My).upload(a,t,{upsert:!1,contentType:t.type||"image/png"});if(i)throw i;const{data:o}=en.storage.from(My).getPublicUrl(a);if(!o?.publicUrl)throw new Error("Impossibile ottenere URL pubblico dell'immagine");return o.publicUrl}const Oy=t=>{let r;const a=new Set,i=(m,v)=>{const y=typeof m=="function"?m(r):m;if(!Object.is(y,r)){const x=r;r=v??(typeof y!="object"||y===null)?y:Object.assign({},r,y),a.forEach(w=>w(r,x))}},o=()=>r,d={setState:i,getState:o,getInitialState:()=>p,subscribe:m=>(a.add(m),()=>a.delete(m))},p=r=t(i,o,d);return d},YM=(t=>t?Oy(t):Oy),KM=t=>t;function WM(t,r=KM){const a=Te.useSyncExternalStore(t.subscribe,Te.useCallback(()=>r(t.getState()),[t,r]),Te.useCallback(()=>r(t.getInitialState()),[t,r]));return Te.useDebugValue(a),a}const XM=t=>{const r=YM(t),a=i=>WM(r,i);return Object.assign(a,r),a},QM=(t=>XM);function rw(t,r){let a;try{a=t()}catch{return}return{getItem:o=>{var c;const u=p=>p===null?null:JSON.parse(p,void 0),d=(c=a.getItem(o))!=null?c:null;return d instanceof Promise?d.then(u):u(d)},setItem:(o,c)=>a.setItem(o,JSON.stringify(c,void 0)),removeItem:o=>a.removeItem(o)}}const Mh=t=>r=>{try{const a=t(r);return a instanceof Promise?a:{then(i){return Mh(i)(a)},catch(i){return this}}}catch(a){return{then(i){return this},catch(i){return Mh(i)(a)}}}},ZM=(t,r)=>(a,i,o)=>{let c={storage:rw(()=>localStorage),partialize:S=>S,version:0,merge:(S,R)=>({...R,...S}),...r},u=!1;const d=new Set,p=new Set;let m=c.storage;if(!m)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...S)},i,o);const v=()=>{const S=c.partialize({...i()});return m.setItem(c.name,{state:S,version:c.version})},y=o.setState;o.setState=(S,R)=>(y(S,R),v());const x=t((...S)=>(a(...S),v()),i,o);o.getInitialState=()=>x;let w;const N=()=>{var S,R;if(!m)return;u=!1,d.forEach(M=>{var L;return M((L=i())!=null?L:x)});const A=((R=c.onRehydrateStorage)==null?void 0:R.call(c,(S=i())!=null?S:x))||void 0;return Mh(m.getItem.bind(m))(c.name).then(M=>{if(M)if(typeof M.version=="number"&&M.version!==c.version){if(c.migrate){const L=c.migrate(M.state,M.version);return L instanceof Promise?L.then(F=>[!0,F]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,M.state];return[!1,void 0]}).then(M=>{var L;const[F,U]=M;if(w=c.merge(U,(L=i())!=null?L:x),a(w,!0),F)return v()}).then(()=>{A?.(w,void 0),w=i(),u=!0,p.forEach(M=>M(w))}).catch(M=>{A?.(void 0,M)})};return o.persist={setOptions:S=>{c={...c,...S},S.storage&&(m=S.storage)},clearStorage:()=>{m?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>N(),hasHydrated:()=>u,onHydrate:S=>(d.add(S),()=>{d.delete(S)}),onFinishHydration:S=>(p.add(S),()=>{p.delete(S)})},c.skipHydration||N(),w||x},JM=ZM,Dy=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"id-"+Math.random().toString(36).slice(2)+Date.now().toString(36),On=QM()(JM((t,r)=>({items:[],setItems:a=>t({items:a}),addItem:a=>t({items:[...r().items,a]}),updateItem:(a,i)=>t({items:r().items.map(o=>o.id===a?{...o,...i}:o)}),replaceItem:(a,i)=>t({items:r().items.map(o=>o.id===a?i:o)}),removeItem:a=>t({items:r().items.filter(i=>i.id!==a)}),duplicateItem:a=>{const i=r().items.find(o=>o.id===a);i&&t({items:[...r().items,{...i,id:Dy()}]})},discount:null,setDiscount:a=>t({discount:a}),profileOverview:null,setProfileOverview:a=>t({profileOverview:a}),addPOFeature:a=>t(i=>{const o=i.profileOverview??{imageUrl:null,features:[]},c=a.id?a:{...a,id:Dy()};return{profileOverview:{...o,features:[...o.features,c]}}}),updatePOFeature:(a,i)=>t(o=>{const c=o.profileOverview??{imageUrl:null,features:[]},u=c.features.map(d=>d.id===a?{...d,...i}:d);return{profileOverview:{...c,features:u}}}),removePOFeature:a=>t(i=>{const o=i.profileOverview??{imageUrl:null,features:[]},c=o.features.filter(u=>u.id!==a);return{profileOverview:{...o,features:c}}}),movePOFeature:(a,i)=>t(o=>{const c=o.profileOverview??{imageUrl:null,features:[]},u=[...c.features],d=u.findIndex(v=>v.id===a);if(d===-1)return{profileOverview:c};const p=d+i;if(p<0||p>=u.length)return{profileOverview:c};const[m]=u.splice(d,1);return u.splice(p,0,m),{profileOverview:{...c,features:u}}}),updatePOFeatureByIndex:(a,i)=>t(o=>{const c=o.profileOverview??{imageUrl:null,features:[]},u=[...c.features];return u[a]?(u[a]={...u[a],...i},{profileOverview:{...c,features:u}}):{profileOverview:c}}),removePOFeatureByIndex:a=>t(i=>{const o=i.profileOverview??{imageUrl:null,features:[]},c=o.features.filter((u,d)=>d!==a);return{profileOverview:{...o,features:c}}}),movePOFeatureByIndex:(a,i)=>t(o=>{const c=o.profileOverview??{imageUrl:null,features:[]},u=[...c.features];if(a<0||a>=u.length||i<0||i>=u.length)return{profileOverview:c};const[d]=u.splice(a,1);return u.splice(i,0,d),{profileOverview:{...c,features:u}}}),clear:()=>t({items:[],discount:null,profileOverview:null})}),{name:"quote-store-v1",storage:rw(()=>localStorage),partialize:t=>({items:t.items,discount:t.discount,profileOverview:t.profileOverview})})),ky="/preventivatore/assets/finestra-CaBnCLGk.png",eO="/preventivatore/assets/cassonetto-Dg8eY6ok.png",tO="/preventivatore/assets/zanzariera-DwgVGK_D.png",nO="/preventivatore/assets/persiana-DDNzxk3Y.png",rO="/preventivatore/assets/tapparella-BlwTu2P7.png",aO=[{code:"RAL 1000",name:"Beige verdastro",hex:"#CCC58F"},{code:"RAL 1001",name:"Beige",hex:"#D1BC8A"},{code:"RAL 1002",name:"Giallo sabbia",hex:"#D2B773"},{code:"RAL 1003",name:"Giallo segnale",hex:"#F7BA0B"},{code:"RAL 1004",name:"Giallo oro",hex:"#E2B007"},{code:"RAL 1005",name:"Giallo miele",hex:"#C89F04"},{code:"RAL 1006",name:"Giallo mais",hex:"#E1A100"},{code:"RAL 1007",name:"Giallo narciso",hex:"#E79600"},{code:"RAL 1011",name:"Beige marrone",hex:"#AF804F"},{code:"RAL 1012",name:"Giallo limone",hex:"#D9C022"},{code:"RAL 1013",name:"Bianco perla",hex:"#E9E5CE"},{code:"RAL 1014",name:"Avorio",hex:"#DED09F"},{code:"RAL 1015",name:"Alvorio chiaro",hex:"#E6D2B5"},{code:"RAL 1016",name:"Giallo zolfo",hex:"#EDFF21"},{code:"RAL 1017",name:"Giallo zafferano",hex:"#F5D033"},{code:"RAL 1018",name:"Giallo zinco",hex:"#F8F32B"},{code:"RAL 1019",name:"Beige grigiastro",hex:"#9E9764"},{code:"RAL 1020",name:"Giallo oliva",hex:"#999950"},{code:"RAL 1021",name:"Giallo navone",hex:"#F3DA0B"},{code:"RAL 1023",name:"Giallo traffico",hex:"#FAD201"},{code:"RAL 1024",name:"Giallo ocra",hex:"#BA8F4C"},{code:"RAL 1027",name:"Giallo curry",hex:"#9D9101"},{code:"RAL 1028",name:"Giallo melone",hex:"#FFAB00"},{code:"RAL 1032",name:"Giallo ginestra",hex:"#E2A300"},{code:"RAL 1033",name:"Giallo dahla",hex:"#F99A1C"},{code:"RAL 1034",name:"Giallo pastello",hex:"#EB9C52"},{code:"RAL 1037",name:"Giallo sole",hex:"#EA9300"},{code:"RAL 2000",name:"Arancio giallastro",hex:"#ED760E"},{code:"RAL 2001",name:"Arancio rossastro",hex:"#BB4D00"},{code:"RAL 2002",name:"Arancio sanguigno",hex:"#C63927"},{code:"RAL 2003",name:"Arancio pastello",hex:"#FA842B"},{code:"RAL 2004",name:"Arancio puro",hex:"#E75B12"},{code:"RAL 2008",name:"Arancio rosso chiaro",hex:"#F3752C"},{code:"RAL 2009",name:"Arancio traffico",hex:"#E15501"},{code:"RAL 2010",name:"Arancio segnale",hex:"#D4652F"},{code:"RAL 2011",name:"Arancio profondo",hex:"#EC7C25"},{code:"RAL 2012",name:"Arancio salmone",hex:"#DB6850"},{code:"RAL 3000",name:"Rosso fuoco",hex:"#AB2524"},{code:"RAL 3001",name:"Rosso segnale",hex:"#A02128"},{code:"RAL 3002",name:"Rosso carminio",hex:"#962323"},{code:"RAL 3003",name:"Rosso rubino",hex:"#8D1D2C"},{code:"RAL 3004",name:"Rosso porpora",hex:"#701F29"},{code:"RAL 3005",name:"Rosso vino",hex:"#5E2028"},{code:"RAL 3007",name:"Rosso nerastro",hex:"#402225"},{code:"RAL 3009",name:"Rosso ossido",hex:"#703731"},{code:"RAL 3011",name:"Rosso marrone",hex:"#7C292B"},{code:"RAL 3012",name:"Rosso beige",hex:"#C68858"},{code:"RAL 3013",name:"Rosso pomodoro",hex:"#99332D"},{code:"RAL 3014",name:"Rosso antico",hex:"#D36E70"},{code:"RAL 3015",name:"Rosa chiaro",hex:"#E6A1B1"},{code:"RAL 3016",name:"Rosso corallo",hex:"#A6412D"},{code:"RAL 3017",name:"Rosso rosa",hex:"#D15965"},{code:"RAL 3018",name:"Rosso fragola",hex:"#CC4154"},{code:"RAL 3020",name:"Rosso traffico",hex:"#C1121C"},{code:"RAL 3022",name:"Rosso salmone",hex:"#D36D55"},{code:"RAL 3027",name:"Rosso lampone",hex:"#B42041"},{code:"RAL 3031",name:"Rosso oriente",hex:"#AC323B"},{code:"RAL 5000",name:"Blu violaceo",hex:"#384E70"},{code:"RAL 5001",name:"Blu verdastro",hex:"#1F4764"},{code:"RAL 5002",name:"Blu oltremare",hex:"#2B3C8E"},{code:"RAL 5003",name:"Blu zaffiro",hex:"#2A3756"},{code:"RAL 5004",name:"Blu nerastro",hex:"#20262E"},{code:"RAL 5005",name:"Blu segnale",hex:"#154889"},{code:"RAL 5007",name:"Blu brillante",hex:"#41678D"},{code:"RAL 5008",name:"Blu grigiastro",hex:"#313C48"},{code:"RAL 5009",name:"Blu azzurro",hex:"#2E5978"},{code:"RAL 5010",name:"Blu genziana",hex:"#13447C"},{code:"RAL 5011",name:"Blu acciaio",hex:"#232C3F"},{code:"RAL 5012",name:"Blu luce",hex:"#3481B8"},{code:"RAL 5013",name:"Blu cobalto",hex:"#232D53"},{code:"RAL 5014",name:"Blu colomba",hex:"#6C7C98"},{code:"RAL 5015",name:"Blu cielo",hex:"#2874B2"},{code:"RAL 5017",name:"Blu traffico",hex:"#0E518D"},{code:"RAL 5018",name:"Blu turchese",hex:"#21888F"},{code:"RAL 5019",name:"Blu capri",hex:"#1A5784"},{code:"RAL 5020",name:"Blu oceano",hex:"#0B4151"},{code:"RAL 5021",name:"Blu acqua",hex:"#257179"},{code:"RAL 5022",name:"Blu notte",hex:"#2B3244"},{code:"RAL 5023",name:"Blu distante",hex:"#4A6589"},{code:"RAL 5024",name:"Blu pastello",hex:"#6A93B0"},{code:"RAL 6000",name:"Verde patina",hex:"#327662"},{code:"RAL 6001",name:"Verde smeraldo",hex:"#28713E"},{code:"RAL 6002",name:"Verde foglia",hex:"#276235"},{code:"RAL 6003",name:"Verde oliva",hex:"#515645"},{code:"RAL 6004",name:"Verde bluastro",hex:"#1F4242"},{code:"RAL 6005",name:"Verde muschio",hex:"#2F4538"},{code:"RAL 6006",name:"Verde oliva grigio",hex:"#3E3F3A"},{code:"RAL 6007",name:"Verde bottiglia",hex:"#2C3222"},{code:"RAL 6008",name:"Verde bruno",hex:"#37342A"},{code:"RAL 6009",name:"Verde abete",hex:"#26392F"},{code:"RAL 6010",name:"Verde erba",hex:"#447C38"},{code:"RAL 6011",name:"Verde reseda",hex:"#68825B"},{code:"RAL 6012",name:"Verde nero",hex:"#313F36"},{code:"RAL 6013",name:"Verde canna",hex:"#7D7F66"},{code:"RAL 6014",name:"Verde oliva giallo",hex:"#474536"},{code:"RAL 6015",name:"Verde oliva nero",hex:"#3D3D37"},{code:"RAL 6016",name:"Verde turchese",hex:"#056A4E"},{code:"RAL 6017",name:"Verde maggio",hex:"#538C44"},{code:"RAL 6018",name:"Verde giallo",hex:"#639F38"},{code:"RAL 6019",name:"Verde bianco",hex:"#B9DABB"},{code:"RAL 6020",name:"Verde cromo",hex:"#36422F"},{code:"RAL 6021",name:"Verde pallido",hex:"#8C9C7B"},{code:"RAL 6022",name:"Verde bruno oliva",hex:"#3E3C32"},{code:"RAL 6024",name:"Verde traffico",hex:"#008455"},{code:"RAL 6025",name:"Verde felce",hex:"#527038"},{code:"RAL 6026",name:"Verde opale",hex:"#005D52"},{code:"RAL 6027",name:"Verde luce",hex:"#77BBBD"},{code:"RAL 6028",name:"Verde pino",hex:"#315444"},{code:"RAL 6029",name:"Verde menta",hex:"#167347"},{code:"RAL 6032",name:"Verde segnale",hex:"#2A7F54"},{code:"RAL 6033",name:"Turchese menta",hex:"#468682"},{code:"RAL 6034",name:"Turchese pastello",hex:"#7AACAC"},{code:"RAL 7000",name:"Grigio vaio",hex:"#7E8B92"},{code:"RAL 7001",name:"Grigio argento",hex:"#8F999F"},{code:"RAL 7002",name:"Grigio oliva",hex:"#817F68"},{code:"RAL 7003",name:"Grigio muschio",hex:"#7A7B6E"},{code:"RAL 7004",name:"Grigio segnale",hex:"#9EA0A1"},{code:"RAL 7005",name:"Grigio topo",hex:"#6B6E6B"},{code:"RAL 7006",name:"Grigio beige",hex:"#756F61"},{code:"RAL 7008",name:"Grigio kaki",hex:"#74664F"},{code:"RAL 7009",name:"Grigio verde",hex:"#5B6259"},{code:"RAL 7010",name:"Grigio tenda",hex:"#575D57"},{code:"RAL 7011",name:"Grigio ferro",hex:"#555D61"},{code:"RAL 7012",name:"Grigio basalto",hex:"#596163"},{code:"RAL 7013",name:"Grigio brunastro",hex:"#555548"},{code:"RAL 7015",name:"Grigio ardesia",hex:"#51565C"},{code:"RAL 7016",name:"Grigio antracite",hex:"#383E42"},{code:"RAL 7021",name:"Grigio nerastro",hex:"#2F3234"},{code:"RAL 7022",name:"Grigio ombra",hex:"#4B4D46"},{code:"RAL 7023",name:"Grigio calcestruzzo",hex:"#818479"},{code:"RAL 7024",name:"Grigio grafite",hex:"#474A51"},{code:"RAL 7026",name:"Grigio granito",hex:"#374447"},{code:"RAL 7030",name:"Grigio pietra",hex:"#939388"},{code:"RAL 7031",name:"Grigio bluastro",hex:"#5D6970"},{code:"RAL 7032",name:"Grigio ghiaia",hex:"#B8B799"},{code:"RAL 7033",name:"Grigio cemento",hex:"#7D8471"},{code:"RAL 7034",name:"Grigio giallastro",hex:"#939176"},{code:"RAL 7035",name:"Grigio luce",hex:"#D7D7D7"},{code:"RAL 7036",name:"Grigio platino",hex:"#9DA1AA"},{code:"RAL 7037",name:"Grigio polvere",hex:"#7D7F7D"},{code:"RAL 7038",name:"Grigio agata",hex:"#B5B8B1"},{code:"RAL 7039",name:"Grigio quarzo",hex:"#6C6960"},{code:"RAL 7040",name:"Grigio finestra",hex:"#9DA3A6"},{code:"RAL 7042",name:"Grigio traffico A",hex:"#8D948D"},{code:"RAL 7043",name:"Grigio traffico B",hex:"#4E5452"},{code:"RAL 7044",name:"Grigio seta",hex:"#CAC4B0"},{code:"RAL 7045",name:"Grigio tele 1",hex:"#8F9695"},{code:"RAL 7046",name:"Grigio tele 2",hex:"#82898F"},{code:"RAL 7047",name:"Grigio tele 4",hex:"#D0D0D0"},{code:"RAL 8000",name:"Marrone verde",hex:"#89693E"},{code:"RAL 8001",name:"Marrone ocra",hex:"#9C6B30"},{code:"RAL 8002",name:"Marrone segnale",hex:"#7B5141"},{code:"RAL 8003",name:"Marrone argilla",hex:"#80542F"},{code:"RAL 8004",name:"Marrone rame",hex:"#8F4E35"},{code:"RAL 8007",name:"Marrone capriolo",hex:"#6F4A2F"},{code:"RAL 8008",name:"Marrone oliva",hex:"#6F4F28"},{code:"RAL 8011",name:"Marrone noce",hex:"#5B3A29"},{code:"RAL 8012",name:"Marrone rosso",hex:"#663B36"},{code:"RAL 8014",name:"Marrone seppia",hex:"#49392D"},{code:"RAL 8015",name:"Marrone castagna",hex:"#633A34"},{code:"RAL 8016",name:"Marrone mogano",hex:"#4C2F27"},{code:"RAL 8017",name:"Marrone cioccolato",hex:"#45322E"},{code:"RAL 8019",name:"Marrone grigiastro",hex:"#403A3A"},{code:"RAL 8022",name:"Marrone nerastro",hex:"#212121"},{code:"RAL 8023",name:"Marrone arancio",hex:"#A65E2E"},{code:"RAL 8024",name:"Marrone beige",hex:"#79553D"},{code:"RAL 8025",name:"Marrone pallido",hex:"#755C48"},{code:"RAL 8028",name:"Marrone terra",hex:"#4E3B31"},{code:"RAL 9001",name:"Bianco crema",hex:"#EBE7D8"},{code:"RAL 9002",name:"Grigio bianco",hex:"#D7D7D7"},{code:"RAL 9003",name:"Bianco segnale",hex:"#F4F4F4"},{code:"RAL 9004",name:"Nero segnale",hex:"#282828"},{code:"RAL 9005",name:"Nero intenso",hex:"#0A0A0A"},{code:"RAL 9006",name:"Alluminio bianco",hex:"#A5A5A5"},{code:"RAL 9007",name:"Alluminio grigio",hex:"#8F8F8F"},{code:"RAL 9010",name:"Bianco puro",hex:"#FFFFFF"},{code:"RAL 9011",name:"Nero grafite",hex:"#1C1C1C"},{code:"RAL 9016",name:"Bianco traffico",hex:"#F1F5F9"},{code:"RAL 9017",name:"Nero traffico",hex:"#1E1E1E"},{code:"RAL 9018",name:"Bianco papiro",hex:"#D0D0D0"},{code:"Golden Oak",name:"Quercia Dorata",hex:"#D68029"},{code:"Noce",name:"Noce Scuro",hex:"#5D3A25"},{code:"Noce Chiaro",name:"Noce Chiaro",hex:"#8F5E38"},{code:"Winchester",name:"Winchester",hex:"#A87B4E"},{code:"Mogano",name:"Mogano",hex:"#4C2F27"},{code:"Ciliegio",name:"Ciliegio",hex:"#9C4533"}];function fu({previewColor:t,labelValue:r,onPreviewColorChange:a,onLabelChange:i,onRalSelect:o}){const[c,u]=E.useState(!1),[d,p]=E.useState(""),m=E.useRef(null),v=aO.filter(x=>x.code.toLowerCase().includes(d.toLowerCase())||x.name.toLowerCase().includes(d.toLowerCase()));E.useEffect(()=>{function x(w){m.current&&!m.current.contains(w.target)&&u(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const y=x=>{o?o(x):(a(x.hex),i(`${x.code} ${x.name}`)),u(!1),p("")};return f.jsxs("div",{className:"flex gap-2 w-full",ref:m,children:[f.jsxs("div",{className:"relative shrink-0",children:[f.jsxs("button",{type:"button",onClick:()=>u(!c),className:"w-10 h-10 rounded border shadow-sm ring-offset-1 focus:ring-2 focus:ring-blue-500 overflow-hidden relative",title:"Scegli colore da lista o personalizzato",children:[f.jsx("div",{className:"absolute inset-0",style:{backgroundColor:t||"#fff"}}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 opacity-0 hover:opacity-100 transition-opacity",children:f.jsx(Ny,{size:16,className:"text-white drop-shadow-md"})})]}),c&&f.jsxs("div",{className:"absolute top-full left-0 mt-2 w-[300px] bg-white border rounded-lg shadow-xl z-[9999] flex flex-col h-[320px]",children:[f.jsxs("div",{className:"p-2 border-b bg-gray-50 flex gap-2 items-center",children:[f.jsx(Ny,{size:16,className:"text-gray-400"}),f.jsx("input",{className:"flex-1 bg-transparent border-none text-sm focus:ring-0 px-0 outline-none",placeholder:"Cerca RAL...",value:d,onChange:x=>p(x.target.value),autoFocus:!0}),f.jsx("button",{onClick:()=>u(!1),children:f.jsx(nw,{size:16,className:"text-gray-400 hover:text-red-500"})})]}),f.jsx("div",{className:"p-2 border-b bg-purple-50/50",children:f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-black/5 p-1 rounded transition-colors",children:[f.jsx("div",{className:"relative w-8 h-8 rounded-full shadow-sm border overflow-hidden shrink-0",children:f.jsx("input",{type:"color",className:"absolute inset-0 w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4 p-0 border-0 cursor-pointer",value:t&&t.startsWith("#")?t:"#ffffff",onChange:x=>{const w={code:"CUSTOM",name:"Personalizzato",hex:x.target.value};o?o(w):(a(w.hex),i(w.name))}})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Custom / Personale"}),f.jsx("div",{className:"text-xs text-gray-500",children:"Scegli dalla tavolozza"})]})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-1",children:v.length===0?f.jsx("div",{className:"p-4 text-center text-xs text-gray-400",children:"Nessun colore trovato"}):f.jsx("div",{className:"grid grid-cols-1 gap-1",children:v.map(x=>f.jsxs("button",{type:"button",onClick:()=>y(x),className:"flex items-center gap-3 px-2 py-1.5 hover:bg-blue-50 rounded text-left transition-colors group w-full",children:[f.jsx("div",{className:"w-8 h-8 rounded border shrink-0 shadow-sm",style:{backgroundColor:x.hex}}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-700 truncate",children:x.code}),f.jsx("div",{className:"text-[11px] text-gray-500 truncate group-hover:text-blue-600",children:x.name})]}),r.includes(x.code)&&f.jsx(uM,{size:14,className:"text-blue-600"})]},x.code))})}),f.jsx("div",{className:"p-2 border-t bg-gray-50 text-center relative",children:f.jsxs("label",{className:"text-xs text-blue-600 hover:text-blue-800 font-medium cursor-pointer flex items-center justify-center gap-2 py-1",children:[f.jsx(_M,{size:14}),"Usa selettore manuale (Picker)",f.jsx("input",{type:"color",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",value:t,onChange:x=>{a(x.target.value)}})]})})]})]}),f.jsx("div",{className:"flex-1 relative",children:f.jsx("input",{type:"text",className:"input w-full",placeholder:"Descrizione colore (es. RAL 9010)",value:r,onChange:x=>i(x.target.value)})})]})}const iO=[{value:"fissa",label:"Fissa"},{value:"apre_sx",label:"Apertura Sinistra"},{value:"apre_dx",label:"Apertura Destra"},{value:"vasistas",label:"Vasistas"},{value:"apre_sx+vasistas",label:"Anta-ribalta Sinistra"},{value:"apre_dx+vasistas",label:"Anta-ribalta Destra"},{value:"scorrevole_sx",label:"Scorrevole Sinistra"},{value:"scorrevole_dx",label:"Scorrevole Destra"}],sO=()=>({height_ratio:1,cols:[{width_ratio:1,leaf:{state:"fissa"},handle:!1}]}),oO=()=>({width_ratio:1,leaf:{state:"fissa"},handle:!1}),_c=70,Sc=60,lO=["WDS 76 MD","WDS 76 AD","WDS 76 PORTE","WDS 76 SCORREVOLE","ULTRA 70","ULTRA 60"],aw=1,kr=Math.pow(10,aw),li=1,Dn=Math.round(li*kr);function Oa(t){return t.reduce((r,a)=>r+a,0)}const hi=t=>Math.max(li,t),Oo=t=>Math.max(li,Math.round(t*kr)/kr),wn=t=>Number.isFinite(t)?Oo(t).toFixed(aw).replace(/\.?0+$/,""):"0",Eo=t=>t===""||/^\d+([.,]\d{0,1})?$/.test(t),Ec=t=>{if(t==null)return null;const r=t.replace(",",".").trim();if(r==="")return null;const a=Number(r);return Number.isFinite(a)?Oo(a):null},iw=t=>Math.max(Dn,Math.round(hi(t)*kr)),mm=t=>t/kr,sw=(t,r)=>{const a=r>0?r/Math.max(1,t.length):1,i=t.map(c=>Number.isFinite(c)&&c>0?c:a),o=Oa(i);return o>0&&r>0&&o<=1.0001?i.map(c=>c*r):i.map(hi)},Kc=(t,r,a)=>{const i=r.length;if(i===0)return[];const o=Array(i).fill(a);let c=t-a*i;if(c<=0){const y=Array(i).fill(Math.floor(t/i));let x=t-Oa(y);for(let w=i-1;w>=0&&x>0;w-=1)y[w]+=1,x-=1;return y}const u=r.map(y=>Math.max(0,y)),d=Oa(u),p=d>0?u.map(y=>Math.floor(y/d*c)):Array(i).fill(Math.floor(c/i));let m=c-Oa(p);const v=o.map((y,x)=>y+p[x]);if(m>0)for(let y=i-1;y>=0&&m>0;y-=1)v[y]+=1,m-=1;else if(m<0)for(let y=i-1;y>=0&&m<0;y-=1){const x=v[y]-a;if(x<=0)continue;const w=Math.min(x,-m);v[y]-=w,m+=w}return v},Qf=(t,r)=>{if(r<=0)return[];const a=Math.round(hi(t)*kr);return Kc(a,Array(r).fill(1),Dn).map(mm)};function Zf(t,r,a,i){if(!t.length)return t;const o=Math.round(hi(r)*kr),u=sw(t.map(m=>m.height_ratio??0),r).map(iw);let d;if(typeof a=="number"&&a>=0&&a<t.length&&typeof i=="number"){const m=Math.min(Math.max(Dn,Math.round(hi(i)*kr)),o-Dn*Math.max(0,t.length-1)),v=u.map((N,S)=>S).filter(N=>N!==a),y=v.map(N=>u[N]),x=Math.max(0,o-m),w=Kc(x,y,Dn);d=Array(t.length).fill(Dn),d[a]=m,v.forEach((N,S)=>{d[N]=w[S]??Dn})}else d=Kc(o,u,Dn);const p=o-Oa(d);if(p!==0&&d.length>0){const m=d.length-1;d[m]=Math.max(Dn,d[m]+p)}return t.map((m,v)=>({...m,height_ratio:mm(d[v])}))}function Jf(t,r,a,i,o){if(!t.length)return t;const c=Math.round(hi(r)*kr),d=sw(t.map(S=>S.width_ratio??0),r).map(iw);let p=Array(t.length).fill(0);const m=new Set;Array.isArray(o)&&o.forEach((S,R)=>{S&&m.add(R)});let v=null;typeof a=="number"&&a>=0&&a<t.length&&typeof i=="number"&&(v=Math.min(Math.max(Dn,Math.round(hi(i)*kr)),c-Dn*Math.max(0,t.length-1)),m.add(a)),m.forEach(S=>{p[S]=S===a&&v!==null?v:d[S]});const y=Oa(Array.from(m).map(S=>p[S]||0)),x=Math.max(0,c-y),w=d.map((S,R)=>R).filter(S=>!m.has(S));if(w.length===0){if(p.length>0){const S=p.length-1;p[S]=Math.max(Dn,p[S]+(c-Oa(p)))}}else{const S=w.map(A=>d[A]),R=Kc(x,S,Dn);w.forEach((A,M)=>{p[A]=R[M]??Dn})}const N=c-Oa(p);if(N!==0&&p.length>0){const S=p.length-1;p[S]=Math.max(Dn,p[S]+N)}return t.map((S,R)=>({...S,width_ratio:mm(p[R])}))}function Ly({draft:t,onChange:r}){if(!t)return null;const a=t,[i,o]=E.useState(!0),u=a?.options?.gridWindow,d=fe=>{const ce=fe.height_ratio??0;return!ce||ce<=0?u?u.height_mm/Math.max(1,u.rows.length):0:ce<=1.0001&&u?ce*u.height_mm:ce},[p,m]=E.useState(typeof a.width_mm=="number"?wn(a.width_mm):""),[v,y]=E.useState(typeof a.height_mm=="number"?wn(a.height_mm):""),[x,w]=E.useState(String(a.qty??1)),[N,S]=E.useState({}),[R,A]=E.useState({}),[M,L]=E.useState({}),[F,U]=E.useState({}),[k,Y]=E.useState({}),re=fe=>{const ce=u?.rows?.[fe];return ce?ce.cols.map((we,je)=>!!k[`${fe}.${je}`]):[]},me=(fe,ce)=>{const we=`${fe}.${ce}`;Y(je=>({...je,[we]:!je[we]}))};if(E.useEffect(()=>{w(String(a.qty??1))},[a.qty]),E.useEffect(()=>{m(typeof a.width_mm=="number"?wn(a.width_mm):""),y(typeof a.height_mm=="number"?wn(a.height_mm):"")},[a.width_mm,a.height_mm]),E.useEffect(()=>{if(!u)return;const fe={},ce={},we={},je={},De={};u.rows.forEach((Oe,it)=>{fe[it]=wn(d(Oe)),ce[it]=String(Oe.cols.length),Oe.cols.forEach((We,qe)=>{we[`${it}.${qe}`]=wn(We.width_ratio??0),De[`${it}.${qe}`]=k[`${it}.${qe}`]??!1;const Ge=We.leaf?.horizontalBars?.[0];if(Ge&&Number.isFinite(Ge.offset_mm)){const Le=d(Oe),lt=Math.max(li,Math.min(Le,Ge.offset_mm)),ut=Ge.origin==="bottom"?lt:Math.max(li,Math.min(Le,Le-lt));je[`${it}.${qe}`]=wn(ut)}})}),S(fe),A(ce),L(we),U(je),Y(De)},[u?.rows]),E.useEffect(()=>{if(!u){const fe={width_mm:a.width_mm||1200,height_mm:a.height_mm||1500,frame_mm:_c,mullion_mm:Sc,rows:[{height_ratio:a.height_mm||1500,cols:[{width_ratio:a.width_mm||1200,leaf:{state:"fissa"},handle:!1}]}],glazing:"doppio",showDims:!0};r({...a,options:{...a.options,gridWindow:fe}})}},[u,a.width_mm,a.height_mm,r,a]),!u)return f.jsx("div",{children:"Caricamento..."});const xe=(fe={},ce={})=>{const we=a?.options?.gridWindow??{width_mm:a.width_mm||1200,height_mm:a.height_mm||1500,frame_mm:_c,mullion_mm:Sc,rows:[{height_ratio:a.height_mm||1500,cols:[{width_ratio:a.width_mm||1200,leaf:{state:"fissa"}}]}],glazing:"doppio",showDims:!0},je={...a,...fe,options:{...a.options,gridWindow:{...we,...ce}}};r(je)},ee=fe=>{xe({},fe)},G=fe=>{ee({rows:fe})},H=(fe,ce)=>{if(ce==="")return;const we=Ec(ce);if(we===null)return;const je=Oo(Math.max(100,we));if(fe==="width_mm"){const De=u.rows.map((Oe,it)=>{if(i){const We=Math.max(1,Oe.cols.length),qe=Qf(je,We);return{...Oe,cols:Oe.cols.map((Ge,Le)=>({...Ge,width_ratio:qe[Le]??qe[qe.length-1]??je/We}))}}return{...Oe,cols:Jf(Oe.cols,je,void 0,void 0,re(it))}});xe({width_mm:je},{width_mm:je,rows:De}),m(wn(je))}else{const De=Zf(u.rows,je);xe({height_mm:je},{height_mm:je,rows:De}),y(wn(je))}},de=()=>{const fe=u.height_mm,ce=[...u.rows,sO()];let we=ce;if(i){const je=Qf(fe,ce.length);we=ce.map((De,Oe)=>({...De,height_ratio:je[Oe]??je[je.length-1]??fe/ce.length}))}else we=Zf(ce,fe);G(we)},le=fe=>{u.rows.length<=1||G(u.rows.filter((ce,we)=>we!==fe))},P=(fe,ce)=>{const we=Math.max(1,ce||1),je=u.width_mm;let De=u.rows.map((Oe,it)=>{if(it!==fe)return Oe;let We=[...Oe.cols];const qe=We.length;if(we>qe)for(let Ge=0;Ge<we-qe;Ge++)We.push(oO());else we<qe&&(We=We.slice(0,we));if(We=We.map(Ge=>({...Ge,glazing:Ge.glazing??u.glazing})),i){const Ge=Qf(je,we),Le=We.map((lt,ut)=>({...lt,width_ratio:Ge[ut]??Ge[Ge.length-1]??je/we}));return{...Oe,cols:Le}}return{...Oe,cols:Jf(We,je,void 0,void 0,re(fe))}});G(De)},Z=(fe,ce,we)=>{const je=u.rows.map((De,Oe)=>{if(Oe===fe){const it=De.cols.map((We,qe)=>{if(qe!==ce)return We;const Ge={...We,leaf:{...We.leaf??{},state:we}};return we==="fissa"&&(Ge.handle=!1),Ge});return{...De,cols:it}}return De});G(je)},se=(fe,ce,we)=>{const je=u.rows.map((De,Oe)=>{if(Oe===fe){const it=De.cols.map((We,qe)=>qe!==ce?We:(We.leaf?.state??"fissa")==="fissa"?{...We,handle:!1}:{...We,handle:we});return{...De,cols:it}}return De});G(je)},oe=(fe,ce,we)=>{const je=u.frame_mm??_c,De=u.rows.map((Oe,it)=>{if(it!==fe)return Oe;const We=d(Oe),qe=Sc/2,Ge=Math.min(We/2,Math.max(qe,je*.12)),Le=Math.max(Ge,We-Ge),lt=typeof we=="number"?Math.min(Le,Math.max(Ge,Oo(we))):null,ut=Oe.cols.map((Xe,Ne)=>{if(Ne!==ce)return Xe;const Be={...Xe.leaf??{state:"fissa"}};return lt===null?Be.horizontalBars&&delete Be.horizontalBars:Be.horizontalBars=[{offset_mm:lt,origin:"bottom"}],{...Xe,leaf:Be}});return{...Oe,cols:ut}});G(De)},z=(fe,ce,we)=>{const je=u.rows.map((De,Oe)=>{if(Oe===fe){const it=De.cols.map((We,qe)=>qe===ce?{...We,glazing:we}:We);return{...De,cols:it}}return De});G(je)},W=(fe,ce)=>{const we=u.height_mm,je=Zf(u.rows,we,fe,ce);G(je)},pe=(fe,ce,we)=>{const je=u.width_mm,De=u.rows.map((Oe,it)=>it!==fe?Oe:{...Oe,cols:Jf(Oe.cols,je,ce,we,re(fe))});G(De)},ae=(fe,ce)=>{Eo(ce)&&S(we=>({...we,[fe]:ce}))},_e=fe=>{const ce=N[fe]??"";if(ce==="")return;const we=Ec(ce);we!==null&&(W(fe,we),S(je=>({...je,[fe]:wn(we)})))},Re=(fe,ce)=>{(ce===""||/^\d+$/.test(ce))&&A(we=>({...we,[fe]:ce}))},Ee=fe=>{const ce=R[fe]??"",we=ce===""?1:Math.max(1,Number(ce)||1);P(fe,we),A(je=>({...je,[fe]:String(we)}))},ke=(fe,ce,we)=>{Eo(we)&&L(je=>({...je,[`${fe}.${ce}`]:we}))},Me=(fe,ce)=>{const we=`${fe}.${ce}`,je=M[we]??"";if(je==="")return;const De=Ec(je);De!==null&&(pe(fe,ce,De),L(Oe=>({...Oe,[we]:wn(De)})))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Titolo voce"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. Portafinestra soggiorno",value:a.title??"",onChange:fe=>xe({title:fe.target.value})}),f.jsx("div",{className:"text-xs text-gray-500",children:"Usato come titolo in editor e PDF. Se vuoto, verr mostrato il tipo (es. Finestra)."})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Misure Totali e Quantit"}),f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Largh (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"decimal",pattern:"\\\\d+([.,]\\\\d{0,1})?",value:p,onChange:fe=>{const ce=fe.target.value;Eo(ce)&&m(ce)},onBlur:()=>{p!==""&&H("width_mm",p)}})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Altezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"decimal",pattern:"\\\\d+([.,]\\\\d{0,1})?",value:v,onChange:fe=>{const ce=fe.target.value;Eo(ce)&&y(ce)},onBlur:()=>{v!==""&&H("height_mm",v)}})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Quantit"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:x,onChange:fe=>{const ce=fe.target.value;(ce===""||/^\d+$/.test(ce))&&w(ce)},onBlur:()=>{const fe=x===""?1:Math.max(1,Number(x)||1);xe({qty:fe}),w(String(fe))}})]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx("input",{id:"autosplit",type:"checkbox",className:"h-4 w-4",checked:i,onChange:fe=>o(fe.target.checked)}),f.jsx("label",{htmlFor:"autosplit",children:"Ripartisci automaticamente la larghezza tra le ante"})]})]}),f.jsxs("section",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Struttura Finestra"}),f.jsx("button",{type:"button",onClick:de,className:"btn btn-sm",children:"+ Nuova riga"})]}),f.jsx("div",{className:"space-y-4",children:u.rows.map((fe,ce)=>f.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50/50 space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("label",{className:"text-xs text-gray-500",children:["Altezza ",ce+1," (mm)"]}),f.jsx("input",{className:"input",type:"text",inputMode:"decimal",pattern:"\\\\d+([.,]\\\\d{0,1})?",value:N[ce]??wn(d(fe)),onChange:we=>ae(ce,we.target.value),onBlur:()=>_e(ce),onWheel:we=>we.currentTarget.blur(),onKeyDown:we=>{(we.key==="ArrowUp"||we.key==="ArrowDown")&&we.preventDefault()}})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Numero Ante"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:R[ce]??String(fe.cols.length),onChange:we=>Re(ce,we.target.value),onBlur:()=>Ee(ce),onWheel:we=>we.currentTarget.blur(),onKeyDown:we=>{(we.key==="ArrowUp"||we.key==="ArrowDown")&&we.preventDefault()}}),f.jsx("div",{className:"mt-1 text-xs text-gray-500",children:` ${wn(u.width_mm/Math.max(1,fe.cols.length))} mm ad anta`})]}),u.rows.length>1&&f.jsx("button",{type:"button",onClick:()=>le(ce),className:"btn-icon text-gray-400 hover:text-red-500 mt-4",title:"Rimuovi riga",children:f.jsx(fm,{size:16})})]}),fe.cols.map((we,je)=>f.jsxs("div",{children:[f.jsxs("label",{className:"text-xs text-gray-500",children:["Apertura Anta ",ce+1,".",je+1]}),f.jsx("select",{className:"input",value:we.leaf?.state??"fissa",onChange:De=>Z(ce,je,De.target.value),children:iO.map(De=>f.jsx("option",{value:De.value,children:De.label},De.value))}),f.jsxs("div",{className:"mt-2",children:[f.jsxs("label",{className:"text-xs text-gray-500",children:["Vetro Anta ",ce+1,".",je+1]}),f.jsxs("select",{className:"input",value:we.glazing??u.glazing,onChange:De=>z(ce,je,De.target.value),children:[f.jsx("option",{value:"singolo",children:"Singolo"}),f.jsx("option",{value:"doppio",children:"Doppio"}),f.jsx("option",{value:"triplo",children:"Triplo"}),f.jsx("option",{value:"satinato",children:"Satinato"})]})]}),(()=>{const De=we.leaf?.state??"fissa",Oe=De!=="fissa",it=!!we.handle,We=`handle-${ce}-${je}`,qe=u.handle_height_mm;return f.jsxs("div",{className:"mt-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx("input",{id:We,type:"checkbox",className:"h-4 w-4",checked:it,disabled:!Oe,onChange:Ge=>se(ce,je,Ge.target.checked)}),f.jsx("label",{htmlFor:We,className:Oe?"":"text-gray-400 line-through",children:"Maniglia"})]}),it&&(De==="apre_sx"||De==="apre_dx")&&f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[f.jsx("span",{children:"Altezza da terra (mm)"}),f.jsx("input",{className:"input w-20",type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:String(Math.round((u.height_mm||1500)/2)),value:qe!=null?String(qe):"",onChange:Ge=>{const Le=Ge.target.value;if(Le===""||/^\d+$/.test(Le)){const lt=Le===""?void 0:Number(Le);ee({handle_height_mm:lt})}},onWheel:Ge=>Ge.currentTarget.blur(),onKeyDown:Ge=>{(Ge.key==="ArrowUp"||Ge.key==="ArrowDown")&&Ge.preventDefault()}})]})]})})(),(()=>{const De=`${ce}.${je}`,Oe=we.leaf?.horizontalBars?.[0],it=!!Oe,We=`bar-${ce}-${je}`,qe=d(fe);let Ge="";if(Oe&&Number.isFinite(Oe.offset_mm)){const Le=Math.max(li,Math.min(qe,Oe.offset_mm)),lt=Oe.origin==="bottom"?Le:Math.max(li,Math.min(qe,qe-Le));Ge=wn(lt)}return f.jsxs("div",{className:"mt-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx("input",{id:We,type:"checkbox",className:"h-4 w-4",checked:it,onChange:Le=>{if(Le.target.checked){const lt=u.frame_mm??_c,ut=Sc/2,Xe=Math.min(qe/2,Math.max(ut,lt*.12)),Ne=Math.max(Xe,qe-Xe),Ze=qe/2||Xe,Be=Oo(Math.min(Ne,Math.max(Xe,Ze)));oe(ce,je,Be),U(Ue=>({...Ue,[De]:wn(Be)}))}else oe(ce,je,null),U(lt=>{const ut={...lt};return delete ut[De],ut})}}),f.jsx("label",{htmlFor:We,children:"Traverso orizzontale"})]}),it&&f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Altezza dal bordo inferiore (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"decimal",pattern:"\\\\d+([.,]\\\\d{0,1})?",value:F[De]??Ge,onChange:Le=>{const lt=Le.target.value;Eo(lt)&&U(ut=>({...ut,[De]:lt}))},onBlur:()=>{const Le=F[De]??"";if(Le==="")return;const lt=Ec(Le);lt!==null&&(oe(ce,je,lt),U(ut=>({...ut,[De]:wn(lt)})))},onWheel:Le=>Le.currentTarget.blur(),onKeyDown:Le=>{(Le.key==="ArrowUp"||Le.key==="ArrowDown")&&Le.preventDefault()}})]})]})})(),(()=>{const De=wn(we.width_ratio??0);return f.jsxs("div",{className:"mt-2",children:[f.jsx("div",{className:"text-[11px] text-gray-400 mb-1",children:i?"Auto-ripartizione attiva: larghezze uguali sul totale":"Imposta larghezza TOTALE anta (mm)"}),i?f.jsxs("div",{className:"text-xs text-gray-600",children:["Larghezza totale stimata: ",f.jsxs("b",{children:[wn(u.width_mm/Math.max(1,fe.cols.length))," mm"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("label",{className:"text-xs text-gray-500",children:["Larghezza Anta ",ce+1,".",je+1," (totale mm)"]}),(()=>{const Oe=`${ce}.${je}`,it=!!k[Oe];return f.jsx("button",{type:"button",title:it?"Sblocco misura":"Blocca misura",onClick:()=>me(ce,je),className:"p-1 rounded",children:it?f.jsx(bM,{size:16}):f.jsx(yM,{size:16})})})()]}),f.jsx("input",{className:`input ${k[`${ce}.${je}`]?"bg-gray-100":""}`,type:"text",inputMode:"decimal",pattern:"\\\\d+([.,]\\\\d{0,1})?",value:M[`${ce}.${je}`]??De,onChange:Oe=>ke(ce,je,Oe.target.value),onBlur:()=>Me(ce,je),onWheel:Oe=>Oe.currentTarget.blur(),onKeyDown:Oe=>{(Oe.key==="ArrowUp"||Oe.key==="ArrowDown")&&Oe.preventDefault()}})]})]})})()]},je))]},ce))})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Vetro"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Stratigrafia vetro"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. 4-14-4-12-33.1 LowE",value:a.glass_spec??"",onChange:fe=>xe({glass_spec:fe.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Riferimento"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. Salotto",value:a.reference??"",onChange:fe=>xe({reference:fe.target.value})})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Finiture & Dati tecnici"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Colore profilo"}),f.jsx(fu,{previewColor:u?.frame_color??"#ffffff",labelValue:a.color??"",onPreviewColorChange:fe=>xe({},{frame_color:fe}),onLabelChange:fe=>xe({color:fe}),onRalSelect:fe=>{xe({color:`${fe.code} ${fe.name}`},{frame_color:fe.hex})}})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Colore cerniere"}),f.jsx("input",{className:"input w-full",type:"text",placeholder:"Es. Bianco / Inox / Nero",value:a.hinges_color??"",onChange:fe=>xe({hinges_color:fe.target.value})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Sistema profilo"}),f.jsxs("select",{className:"input w-full",value:a.profile_system??"",onChange:fe=>xe({profile_system:fe.target.value||null}),children:[f.jsx("option",{value:"",children:" Seleziona "}),lO.map(fe=>f.jsx("option",{value:fe,children:fe},fe))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Uw (W/mK)"}),f.jsx("input",{className:"input w-full",type:"number",min:"0",step:"0.01",placeholder:"Es. 1.3",value:typeof a.uw=="number"?String(a.uw):"",onChange:fe=>{const ce=fe.target.value,we=ce===""?null:Number(ce);xe({uw:ce===""||Number.isNaN(we)?null:we})}})]})]})]})]})}const cO=["015 BIANCO OPACO P9016","030 GRIGIO OPACO","090 ANTRACITE RUVIDO OPACO P7016 - NOVITA' 2024","097 NERO RUVIDO OPACO P9005 - NOVITA' 2024","110 PERLA OPACO P1013","202 MARRONE RUVIDO OPACO P8017 - NOVITA' 2024","210 BRONZO CHIARO OPACO","211 BRONZO SCURO OPACO","501 VERDE RUVIDO OPACO P6005 - NOVITA' 2024","700 ARGENTO ANODIZZATO","751 GRIGIO MAREZZATO","810 QUERCIA SCURA","811 QUERCIA CHIARA","888 LEGNO NON A CARTELLA","999 RAL NON A CARTELLA","000 GREZZO"],uO=["Tondo verticale molla","Tondo plus verticale molla","Tondo verticale catenella","Tondo verticale motore","Tondo laterale molla","Tondo doppia zanz laterale molla"],dO=["Tondo 38","Tondo 46","Tondo 65","Tondo 105"];function fO(t){const r=t.draft,a=t.onChange,[i,o]=E.useState(r?.qty==null?"1":String(r.qty)),[c,u]=E.useState(r?.width_mm==null?"":String(r.width_mm)),[d,p]=E.useState(r?.height_mm==null?"":String(r.height_mm));E.useEffect(()=>{o(r?.qty==null?"1":String(r?.qty)),u(r?.width_mm==null?"":String(r?.width_mm)),p(r?.height_mm==null?"":String(r?.height_mm))},[r?.qty,r?.width_mm,r?.height_mm]);const m=(A,M)=>{a({...r??{kind:"zanzariera"},[A]:M})},v=r?.misura_tipo??"vano",y=r?.modello??"",x=r?.tipologia??"Tondo verticale molla",w=r?.profilo_colore??"030 GRIGIO OPACO",N=r?.accessori_colore??"Nero",S=r?.mesh??"Antracite",R=r?.deceleratore??!0;return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Quantit"}),f.jsx("div",{className:"grid grid-cols-2 gap-2 items-start",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Pezzi"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i,onChange:A=>{const M=A.target.value;(M===""||/^\d+$/.test(M))&&o(M)},onBlur:()=>{const A=i===""?1:Math.max(1,Number(i)||1);m("qty",A),o(String(A))},onWheel:A=>A.currentTarget.blur(),onKeyDown:A=>{(A.key==="ArrowUp"||A.key==="ArrowDown")&&A.preventDefault()}})]})})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Modello & Tipologia"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Modello"}),f.jsxs("select",{className:"input",value:y,onChange:A=>m("modello",A.target.value||null),children:[f.jsx("option",{value:"",children:""}),dO.map(A=>f.jsx("option",{value:A,children:A},A))]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Tipologia"}),f.jsx("select",{className:"input",value:x,onChange:A=>m("tipologia",A.target.value||null),children:uO.map(A=>f.jsx("option",{value:A,children:A},A))})]})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Misure"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Larghezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:c,onChange:A=>{const M=A.target.value;(M===""||/^\d+$/.test(M))&&u(M)},onBlur:()=>{if(c==="")m("width_mm",null);else{const A=Number(c);m("width_mm",Number.isNaN(A)?null:A),u(Number.isNaN(A)?"":String(A))}},onWheel:A=>A.currentTarget.blur(),onKeyDown:A=>{(A.key==="ArrowUp"||A.key==="ArrowDown")&&A.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Altezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:d,onChange:A=>{const M=A.target.value;(M===""||/^\d+$/.test(M))&&p(M)},onBlur:()=>{if(d==="")m("height_mm",null);else{const A=Number(d);m("height_mm",Number.isNaN(A)?null:A),p(Number.isNaN(A)?"":String(A))}},onWheel:A=>A.currentTarget.blur(),onKeyDown:A=>{(A.key==="ArrowUp"||A.key==="ArrowDown")&&A.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Tipo di misura"}),f.jsx("select",{className:"input",value:v,onChange:A=>m("misura_tipo",A.target.value||null),children:f.jsx("option",{value:"vano",children:"Vano"})})]})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Colori & Rete"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Colore profilo"}),f.jsx("select",{className:"input",value:w,onChange:A=>m("profilo_colore",A.target.value||null),children:cO.map(A=>f.jsx("option",{value:A,children:A},A))})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Colore accessori"}),f.jsx("input",{className:"input",placeholder:"Nero",value:N,onChange:A=>m("accessori_colore",A.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Colore rete"}),f.jsx("input",{className:"input",placeholder:"Antracite",value:S,onChange:A=>m("mesh",A.target.value||null)})]})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Extra"}),f.jsxs("label",{className:"flex items-start gap-2 text-sm",children:[f.jsx("input",{type:"checkbox",checked:R,onChange:A=>m("deceleratore",A.target.checked)}),"Deceleratore"]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Riferimento"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. Bagno piccolo, Salotto...",value:r?.reference??"",onChange:A=>m("reference",A.target.value)})]})]})}const hO=["PVC","Alluminio coibentato","Legno coibentato"];function mO({draft:t,onChange:r}){if(!t)return null;const a=t,[i,o]=E.useState(a.width_mm==null?"":String(a.width_mm)),[c,u]=E.useState(a.height_mm==null?"":String(a.height_mm)),[d,p]=E.useState(a.depth_mm==null?"":String(a.depth_mm)),[m,v]=E.useState(a.celino_mm==null?"":String(a.celino_mm)),[y,x]=E.useState(a.qty==null?"1":String(a.qty));E.useEffect(()=>{!a.width_mm&&!a.height_mm&&!a.depth_mm&&r({...a,width_mm:1e3,height_mm:250,depth_mm:250})},[]),E.useEffect(()=>{o(a.width_mm==null?"":String(a.width_mm)),u(a.height_mm==null?"":String(a.height_mm)),p(a.depth_mm==null?"":String(a.depth_mm)),v(a.celino_mm==null?"":String(a.celino_mm)),x(a.qty==null?"1":String(a.qty))},[a.width_mm,a.height_mm,a.depth_mm,a.celino_mm,a.qty]);const w=(S,R)=>{r({...a,[S]:R})},N=(S,R)=>{const A=a.options||{};r({...a,options:{...A,[S]:R}})};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Misure"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Larghezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i,onChange:S=>{const R=S.target.value;(R===""||/^\d+$/.test(R))&&o(R)},onBlur:()=>{if(i==="")w("width_mm",null);else{const S=Number(i);w("width_mm",Number.isNaN(S)?null:S),o(Number.isNaN(S)?"":String(S))}},onWheel:S=>S.currentTarget.blur(),onKeyDown:S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&S.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Altezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:c,onChange:S=>{const R=S.target.value;(R===""||/^\d+$/.test(R))&&u(R)},onBlur:()=>{if(c==="")w("height_mm",null);else{const S=Number(c);w("height_mm",Number.isNaN(S)?null:S),u(Number.isNaN(S)?"":String(S))}},onWheel:S=>S.currentTarget.blur(),onKeyDown:S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&S.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Profondit (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:d,onChange:S=>{const R=S.target.value;(R===""||/^\d+$/.test(R))&&p(R)},onBlur:()=>{if(d==="")w("depth_mm",null);else{const S=Number(d);w("depth_mm",Number.isNaN(S)?null:S),p(Number.isNaN(S)?"":String(S))}},onWheel:S=>S.currentTarget.blur(),onKeyDown:S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&S.preventDefault()}})]})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Celino (Opzionale)"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Celino (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:m,onChange:S=>{const R=S.target.value;(R===""||/^\d+$/.test(R))&&v(R)},onBlur:()=>{if(m==="")w("celino_mm",null);else{const S=Number(m);w("celino_mm",Number.isNaN(S)?null:S),v(Number.isNaN(S)?"":String(S))}},onWheel:S=>S.currentTarget.blur(),onKeyDown:S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&S.preventDefault()}})]}),f.jsx("div",{className:"text-xs text-gray-500",children:"Estensione frontale per coprire il muro."})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Dettagli"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Materiale"}),f.jsx("select",{className:"input",value:a.material??"PVC",onChange:S=>w("material",S.target.value),children:hO.map(S=>f.jsx("option",{value:S,children:S},S))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Colore"}),f.jsx(fu,{previewColor:a.options?.previewColor??"#e8e8e8",labelValue:a.color??"",onPreviewColorChange:S=>N("previewColor",S),onLabelChange:S=>w("color",S||null),onRalSelect:S=>{const R=a.options||{};r({...a,color:`${S.code} ${S.name}`,options:{...R,previewColor:S.hex}})}})]})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Quantit e Riferimento"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Pezzi"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:y,onChange:S=>{const R=S.target.value;(R===""||/^\d+$/.test(R))&&x(R)},onBlur:()=>{const S=y===""?1:Math.max(1,Number(y)||1);w("qty",S),x(String(S))},onWheel:S=>S.currentTarget.blur(),onKeyDown:S=>{(S.key==="ArrowUp"||S.key==="ArrowDown")&&S.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Riferimento"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. Cucina",value:a.reference??"",onChange:S=>w("reference",S.target.value)})]})]})]})]})}const pO=["Alluminio","PVC","Altro"],gO=["Fisse","Regolabili"];function vO({draft:t,onChange:r}){if(!t)return null;const a=t,[i,o]=E.useState(a.width_mm==null?"":String(a.width_mm)),[c,u]=E.useState(a.height_mm==null?"":String(a.height_mm)),[d,p]=E.useState(a.qty==null?"1":String(a.qty)),[m,v]=E.useState(a.ante==null?"2":String(a.ante)),y=(x,w)=>{const N=a.options||{};r({...a,options:{...N,[x]:w}})};return E.useEffect(()=>{o(a.width_mm==null?"":String(a.width_mm)),u(a.height_mm==null?"":String(a.height_mm)),p(a.qty==null?"1":String(a.qty)),v(a.ante==null?"2":String(a.ante))},[a.width_mm,a.height_mm,a.qty,a.ante]),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Misure"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Larghezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&o(w)},onBlur:()=>{if(i==="")r({...a,width_mm:null});else{const x=Number(i);r({...a,width_mm:Number.isNaN(x)?null:x}),o(Number.isNaN(x)?"":String(x))}},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Altezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:c,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&u(w)},onBlur:()=>{if(c==="")r({...a,height_mm:null});else{const x=Number(c);r({...a,height_mm:Number.isNaN(x)?null:x}),u(Number.isNaN(x)?"":String(x))}},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Tipo di misura"}),f.jsx("select",{className:"input",value:a.misura_tipo??"luce",onChange:x=>r({...a,misura_tipo:x.target.value}),children:f.jsx("option",{value:"luce",children:"Luce"})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Numero ante"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:m,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&v(w)},onBlur:()=>{const x=m===""?2:Math.max(1,Number(m)||1);r({...a,ante:x}),v(String(x))},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Quantit"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:d,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&p(w)},onBlur:()=>{const x=d===""?1:Math.max(1,Number(d)||1);r({...a,qty:x}),p(String(x))},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Specifiche"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Materiale"}),f.jsx("select",{className:"input",value:a.material??"Alluminio",onChange:x=>r({...a,material:x.target.value}),children:pO.map(x=>f.jsx("option",{value:x,children:x},x))})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Lamelle"}),f.jsx("select",{className:"input",value:a.lamelle??"Fisse",onChange:x=>r({...a,lamelle:x.target.value}),children:gO.map(x=>f.jsx("option",{value:x,children:x},x))})]})]}),f.jsx("div",{className:"text-xs text-gray-400",children:"Telaio fisso non selezionabile"})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Colore"}),f.jsx(fu,{previewColor:a.options?.previewColor??"#e8e8e8",labelValue:a.color??"",onPreviewColorChange:x=>y("previewColor",x),onLabelChange:x=>r({...a,color:x||null}),onRalSelect:x=>{const w=a.options||{};r({...a,color:`${x.code} ${x.name}`,options:{...w,previewColor:x.hex}})}})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Riferimento"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. Bagno piccolo, Salotto...",value:a.reference??"",onChange:x=>r({...a,reference:x.target.value})})]})]})}const yO=["PVC","Alluminio","Alluminio coibentato"];function xO({draft:t,onChange:r}){const a=(x,w)=>r({...t,[x]:w}),i=(x,w)=>{const N=t.options||{};r({...t,options:{...N,[x]:w}})},[o,c]=E.useState(t.width_mm==null?"":String(t.width_mm)),[u,d]=E.useState(t.height_mm==null?"":String(t.height_mm)),[p,m]=E.useState(t.qty==null?"1":String(t.qty));E.useEffect(()=>{c(t.width_mm==null?"":String(t.width_mm)),d(t.height_mm==null?"":String(t.height_mm)),m(t.qty==null?"1":String(t.qty))},[t.width_mm,t.height_mm,t.qty]);const v=t.material??"PVC",y=t.color??"";return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Misure"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2 items-start",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Larghezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:o,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&c(w)},onBlur:()=>{if(o==="")a("width_mm",null);else{const x=Number(o);a("width_mm",Number.isNaN(x)?null:x),c(Number.isNaN(x)?"":String(x))}},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Altezza (mm)"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:u,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&d(w)},onBlur:()=>{if(u==="")a("height_mm",null);else{const x=Number(u);a("height_mm",Number.isNaN(x)?null:x),d(Number.isNaN(x)?"":String(x))}},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Quantit"}),f.jsx("input",{className:"input",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:p,onChange:x=>{const w=x.target.value;(w===""||/^\d+$/.test(w))&&m(w)},onBlur:()=>{const x=p===""?1:Math.max(1,Number(p)||1);a("qty",x),m(String(x))},onWheel:x=>x.currentTarget.blur(),onKeyDown:x=>{(x.key==="ArrowUp"||x.key==="ArrowDown")&&x.preventDefault()}})]})]})]}),f.jsxs("section",{className:"space-y-3",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Specifiche"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Materiale"}),f.jsx("select",{className:"input w-full",value:v,onChange:x=>a("material",x.target.value),children:yO.map(x=>f.jsx("option",{value:x,children:x},x))})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Colore"}),f.jsx(fu,{previewColor:t.options?.previewColor??"#e8e8e8",labelValue:y,onPreviewColorChange:x=>i("previewColor",x),onLabelChange:x=>a("color",x),onRalSelect:x=>{const w=t.options||{};r({...t,color:`${x.code} ${x.name}`,options:{...w,previewColor:x.hex}})}})]})]}),f.jsxs("section",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Riferimento"}),f.jsx("input",{className:"input",type:"text",placeholder:"es. Bagno piccolo, Salotto...",value:t.reference??"",onChange:x=>a("reference",x.target.value)})]})]})}const hu={finestra:{label:"Finestra",icon:ky,makeDefaults:()=>({id:crypto.randomUUID(),kind:"finestra",width_mm:1200,height_mm:1500,qty:1,price_mode:"per_mq",price_per_mq:300,price_total:null,color:null,glass:null,hinges_color:null,uw:1.3,profile_system:null,notes:null,reference:"",custom_fields:[],options:{gridWindow:{width_mm:1200,height_mm:1500,frame_mm:60,mullion_mm:40,glazing:"doppio",showDims:!0,rows:[{height_ratio:1,cols:[{width_ratio:.5,leaf:{state:"apre_dx"}},{width_ratio:.5,leaf:{state:"apre_sx+vasistas"}}]}]}}}),Form:Ly},cassonetto:{label:"Cassonetto",icon:eO,makeDefaults:()=>({id:crypto.randomUUID(),kind:"cassonetto",width_mm:900,height_mm:400,qty:1,price_mode:"total",price_total:0,notes:null,reference:"",custom_fields:[],material:"PVC",depth_mm:300,celino_mm:null}),Form:mO},zanzariera:{label:"Zanzariera",icon:tO,makeDefaults:()=>({id:crypto.randomUUID(),kind:"zanzariera",qty:1,price_mode:"per_mq",price_per_mq:120,price_per_piece:null,price_total:null,width_mm:1e3,height_mm:1500,misura_tipo:"vano",modello:"Tondo 46",tipologia:"Tondo verticale molla",profilo_colore:"030 GRIGIO OPACO",accessori_colore:"Nero",mesh:"Antracite",deceleratore:!0,notes:null,reference:"",custom_fields:[]}),Form:fO},persiana:{label:"Persiana",icon:nO,makeDefaults:()=>({id:crypto.randomUUID(),kind:"persiana",width_mm:1e3,height_mm:1400,qty:1,price_mode:"total",price_total:0,price_per_mq:null,notes:null,reference:"",custom_fields:[],material:"Alluminio",lamelle:"Fisse",ante:2,misura_tipo:"luce",color:""}),Form:vO},tapparella:{label:"Tapparella",icon:rO,makeDefaults:()=>({id:crypto.randomUUID(),kind:"tapparella",width_mm:1e3,height_mm:1400,qty:1,price_mode:"total",price_total:0,price_per_mq:null,notes:null,reference:"",custom_fields:[],material:"PVC",color:""}),Form:xO},custom:{label:"Voce personalizzata",icon:ky,makeDefaults:()=>({id:crypto.randomUUID(),kind:"custom",width_mm:1e3,height_mm:1e3,qty:1,price_mode:"total",price_total:0,price_per_mq:null,notes:null,reference:"",custom_fields:[],title:"Voce personalizzata"}),Form:Ly}};function bO({open:t,onClose:r,onPick:a}){const[i,o]=E.useState(""),c=E.useRef(null);E.useEffect(()=>{if(t){const d=setTimeout(()=>c.current?.focus(),50);return()=>clearTimeout(d)}},[t]);const u=E.useMemo(()=>{const d=i.trim().toLowerCase(),p=Object.entries(hu);return d?p.filter(([m,v])=>v.label.toLowerCase().includes(d)):p},[i]);return t?f.jsxs("div",{className:"fixed inset-0 z-50",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:r}),f.jsxs("div",{className:"absolute inset-x-0 top-16 mx-auto w-full max-w-3xl card p-4",children:[f.jsxs("div",{className:"flex items-center justify-between gap-2",children:[f.jsx("div",{className:"text-sm font-medium",children:"Aggiungi prodotto"}),f.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:r,children:"Chiudi"})]}),f.jsx("div",{className:"mt-3",children:f.jsx("input",{ref:c,className:"input w-full",placeholder:"Cerca categoria (es. finestra, cassonetto)",value:i,onChange:d=>o(d.target.value)})}),f.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3",children:u.map(([d,p])=>f.jsxs("button",{className:"group relative flex items-center gap-3 rounded-lg border bg-white p-3 text-left hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-black/10",onClick:()=>a(d),children:[f.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded border bg-white",children:f.jsx("img",{src:p.icon,alt:p.label,className:"max-h-8 max-w-8 object-contain"})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("div",{className:"font-medium leading-tight",children:p.label}),f.jsx("div",{className:"text-xs text-gray-500",children:"Clicca per configurare"})]}),f.jsx("span",{className:"absolute inset-0 rounded-lg ring-1 ring-inset ring-transparent group-hover:ring-gray-200"})]},String(d)))})]})]}):null}const Wc=t=>t&&t.length?t.reduce((r,a)=>r+a,0):0,wO=(t,r,a=0)=>{if(!r.length)return[];const i=Math.pow(10,Math.max(0,a)),o=Math.round(t*i),c=Wc(r);if(c<=0){const v=Math.floor(o/r.length),y=o-v*r.length;return r.map((x,w)=>(v+(w===r.length-1?y:0))/i)}const d=r.map(v=>o*v/c).map(v=>Math.floor(v));let p=o-Wc(d);const m=d.slice();if(p<0)for(let v=m.length-1;v>=0&&p<0;v-=1){const y=Math.min(m[v],Math.abs(p));m[v]-=y,p+=y}if(m.length){const v=m.length-1;m[v]+=p}return m.map(v=>v/i)},eh=(t,r)=>Number.isFinite(t)?Number(t.toFixed(r)).toFixed(r).replace(/\.?0+$/,""):"0";function _O(t){return t==="satinato"}function SO(){return{width_mm:1200,height_mm:1500,frame_mm:60,mullion_mm:20,glazing:"doppio",showDims:!0,rows:[{height_ratio:1,cols:[{width_ratio:1,leaf:{state:"fissa"}}]}]}}const th="#888888",EO="#E6B000",gr={FRAME_STROKE:"#222222",GLASS_FILL:"#D6EFFF",GLASS_STROKE:"#222222",BEAD_STROKE:"#222222",STROKE_WIDTH_FRAME:1.5,STROKE_WIDTH_SASH:2.5,STROKE_WIDTH_BEAD:1.5,STROKE_WIDTH_GLASS:.9};function AO({x:t,y:r,w:a,h:i,state:o}){const d="12, 8",p=()=>f.jsx("polygon",{points:`${t},${r+i} ${t+a/2},${r} ${t+a},${r+i}`,stroke:EO,strokeWidth:2.2,fill:"none",strokeLinejoin:"round"}),m=()=>f.jsx("polyline",{points:`${t+a},${r} ${t},${r+i/2} ${t+a},${r+i}`,stroke:th,strokeWidth:2,strokeDasharray:d,fill:"none",strokeLinejoin:"round"}),v=()=>f.jsx("polyline",{points:`${t},${r} ${t+a},${r+i/2} ${t},${r+i}`,stroke:th,strokeWidth:2,strokeDasharray:d,fill:"none",strokeLinejoin:"round"}),y=x=>{const w=Math.min(i*.5,100),N=w*3,S=r+i/2,R=t+a/2,A=x==="left"?R+N/2:R-N/2,M=x==="left"?R-N/2:R+N/2,L=x==="left"?`${M+w/2},${S-w/2} ${M},${S} ${M+w/2},${S+w/2}`:`${M-w/2},${S-w/2} ${M},${S} ${M-w/2},${S+w/2}`;return f.jsxs("g",{stroke:th,strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:A,y1:S,x2:M,y2:S}),f.jsx("polyline",{points:L})]})};switch(o){case"fissa":return null;case"vasistas":return p();case"apre_sx":return m();case"apre_dx":return v();case"apre_sx+vasistas":return f.jsxs("g",{children:[m(),p()]});case"apre_dx+vasistas":return f.jsxs("g",{children:[v(),p()]});case"scorrevole_sx":return y("left");case"scorrevole_dx":return y("right");default:return null}}function jO(t){switch(t){case"apre_sx":case"scorrevole_sx":case"apre_sx+vasistas":return"right";case"apre_dx":case"scorrevole_dx":case"apre_dx+vasistas":return"left";case"vasistas":return"top";default:return null}}function pm({cfg:t}){const r=t??SO(),{width_mm:a,height_mm:i,rows:o,mullion_mm:c,glazing:u}=r,d=r.showDims!==!1,p=34,m=a-p*2,v=i-p*2,y=(o.length-1)*c,x=v-y,w=Wc(o.map(Ne=>Ne.height_ratio)),N=Math.max(60,Math.min(a,i)),S=Math.max(1,Math.min(5,N/400)),R=Math.max(9,Math.min(24,N/28)),A=60,M=120,L=Math.max(R*10.2,R+80,a/60,i/60),F=Math.min(Math.max(L,A),M),U=F,k=1,Y=Math.max(26,Math.min(48,N/9));let re=Math.max(6,R*.5);const me=Y+U*1.3,xe=o.length>0?[0]:[],ee=o.length>1?o.map((Ne,Ze)=>Ze).filter(Ne=>Ne!==0):[],G=new Map;xe.forEach((Ne,Ze)=>G.set(Ne,Ze));const H=new Map;ee.forEach((Ne,Ze)=>H.set(Ne,Ze));const de=Math.max(70,F*1.15),le=Math.max(48,F),P=xe.length>0?de+(xe.length-1)*le+F:0,Z=ee.length>0?de+(ee.length-1)*le+F:0,se=Z,oe=Math.max(6,R*.5),z=Y+R*1.1;let W=oe+P,pe=z+Z+U*1.4+Y;W+=S,pe+=S;const ae=E.useMemo(()=>"satin-dots-pfeli3",[]),_e=`${S*3.5} ${S*2.2}`,Re=r.frame_color??"#ffffff",Ee=r.outline_color??"#000",ke=o.reduce((Ne,Ze,Be)=>{const Ue=x*Ze.height_ratio/w,T=p+Ne.offsetY,b=Ne.offsetMm,_=Ue;Ne.rowDimensions.push({rowIdx:Be,top:T,bottom:T+Ue,heightMm:_});const D=m,q=Ze.cols.map(Mt=>Number.isFinite(Mt.width_ratio)&&Mt.width_ratio>0?Mt.width_ratio:1),J=Wc(q),he=J>0?J:Ze.cols.length,Ke=wO(a,q,k);let ot=p;const et=[],dt=_>0?Ue/_:0,st=dt>0?dt*c:c;let un=!1,Tn=Ne.rowBars.get(Be);if(Tn||(Tn={positions:[],startMm:b,endMm:b+_,startPx:T,endPx:T+Ue},Ne.rowBars.set(Be,Tn)),Ze.cols.forEach((Mt,At)=>{const tn=ot,Ie=D*q[At]/he,mt=Math.max(55,p*1.7),Nt=14,Gt=tn,Cn=T,$=Ie,C=Ue,B=Gt+mt,K=Cn+mt,X=Math.max(0,$-mt*2),ye=Math.max(0,C-mt*2),ge=B+Nt,Ae=K+Nt,Ce=Math.max(0,X-Nt*2),Pe=Math.max(0,ye-Nt*2),$e=Mt.glazing??u;Ne.nodes.push(f.jsxs("g",{children:[f.jsx("rect",{x:Gt,y:Cn,width:$,height:C,fill:Re,stroke:gr.FRAME_STROKE,strokeWidth:gr.STROKE_WIDTH_SASH}),f.jsx("rect",{x:B,y:K,width:X,height:ye,fill:Re,stroke:gr.BEAD_STROKE,strokeWidth:gr.STROKE_WIDTH_BEAD}),f.jsx("rect",{x:ge,y:Ae,width:Ce,height:Pe,fill:gr.GLASS_FILL,stroke:gr.GLASS_STROKE,strokeWidth:gr.STROKE_WIDTH_GLASS}),_O($e)&&f.jsx("rect",{x:ge,y:Ae,width:Ce,height:Pe,fill:`url(#${ae})`,opacity:.6})]},`sash-group-${Be}-${At}`));const ze=Mt.leaf?.horizontalBars??[];ze.length&&dt>0&&[...ze].sort((Ft,He)=>(Ft?.offset_mm??0)-(He?.offset_mm??0)).forEach((Ft,He)=>{const ft=Number(Ft?.offset_mm);if(!Number.isFinite(ft))return;const Ve=Ft?.origin==="bottom"?ft:_-ft,Et=c/2,kt=Math.min(_/2,Math.max(Et,p*.12)),Ot=Math.max(kt,_-kt),pn=Math.min(Ot,Math.max(kt,Ve)),Kt=_-pn,at=T+Kt*dt,Vt=T+st/2,Xt=T+Ue-st/2,gn=Math.max(Vt,Math.min(Xt,at)),Yt=Math.max(st*.7,S*4);if(dt>0){const Zo=b+Kt;Tn.positions.push({absMm:Zo,absPx:gn})}const fr=Math.max(2,Math.min(st*1.15,Yt*.95)),ra=Math.max(2,Math.min(Ie*.06,p*.08)),sn=tn+ra,yi=Math.max(1,Ie-ra*2),Ba=gn-fr/2,Pa=Math.max(1,S/1.2);Ne.nodes.push(f.jsxs("g",{children:[f.jsx("rect",{x:sn,y:Ba,width:yi,height:fr,fill:Re}),f.jsx("line",{x1:sn,y1:Ba,x2:sn+yi,y2:Ba,stroke:Ee,strokeWidth:Pa,strokeLinecap:"square"}),f.jsx("line",{x1:sn,y1:Ba+fr,x2:sn+yi,y2:Ba+fr,stroke:Ee,strokeWidth:Pa,strokeLinecap:"square"})]},`hb-${Be}-${At}-${He}`))}),Ne.nodes.push(f.jsx(AO,{x:ge,y:Ae,w:Ce,h:Pe,state:Mt.leaf?.state??"fissa",stroke:Ee,strokeWidth:S},`o-${Be}-${At}`));const tt=At===0?0:tn,St=At===Ze.cols.length-1?a:tn+Ie,Dt=At<Ke.length?Ke[At]:Ie,gt=eh(Dt,k),rt=`${Math.round(tt)}-${Math.round(St)}`;if(Ne.seenSegments.has(rt)||(un=!0,Ne.seenSegments.add(rt)),et.push({x:(tt+St)/2,text:gt,start:tt,end:St}),Mt.handle){const xt=jO(Mt.leaf?.state);let Ft=null;const He=Math.min(a,i),ft=Math.max(6,He*.012),Ve=Math.max(60,He*.08),Et=Math.max(12,He*.018),kt=Math.max(5,He*.012),Ot=0,pn="#ffffff",Kt=Ee,at=Math.max(.5,S*.6),Vt=r.handle_height_mm;if(xt==="left"||xt==="right"){let Xt;typeof Vt=="number"&&Vt>0?(Xt=i-Vt,Xt=Math.max(T+mt+Ve/2,Math.min(T+Ue-mt-Ve/2,Xt))):Xt=T+Ue/2;const gn=xt==="left"?tn+mt*.5:tn+Ie-mt*.5;Ft=f.jsxs("g",{transform:`translate(${gn}, ${Xt})`,children:[f.jsx("rect",{x:-Et/2,y:-Ve*.15,width:Et,height:Ve*.3,rx:Ot,ry:Ot,fill:pn,stroke:Kt,strokeWidth:at}),f.jsx("rect",{x:-ft/2,y:-Ve/2,width:ft,height:Ve,rx:Ot,ry:Ot,fill:pn,stroke:Kt,strokeWidth:at}),f.jsx("rect",{x:-Et/2,y:-Ve/2-kt,width:Et,height:kt+Ot,rx:Ot,ry:Ot,fill:pn,stroke:Kt,strokeWidth:at})]})}else if(xt==="top"){const Xt=tn+Ie/2,gn=T+mt*.5;Ft=f.jsxs("g",{transform:`translate(${Xt}, ${gn})`,children:[f.jsx("rect",{x:-Ve*.15,y:-Et/2,width:Ve*.3,height:Et,rx:Ot,ry:Ot,fill:pn,stroke:Kt,strokeWidth:at}),f.jsx("rect",{x:-Ve/2,y:-ft/2,width:Ve,height:ft,rx:Ot,ry:Ot,fill:pn,stroke:Kt,strokeWidth:at}),f.jsx("rect",{x:Ve/2-Ot,y:-Et/2,width:kt+Ot,height:Et,rx:Ot,ry:Ot,fill:pn,stroke:Kt,strokeWidth:at})]})}Ft&&Ne.nodes.push(f.jsx("g",{children:Ft},`handle-${Be}-${At}`))}ot+=Ie}),Be<o.length-1){const At=T+Ue-c/2,tn=p,Ie=m,mt=c;Ne.nodes.push(f.jsx("rect",{x:tn,y:At,width:Ie,height:mt,fill:Re},`hz-fill-${Be}`))}if(et.length>0&&un){let Mt=null,At=null,tn=!1;G.has(Be)?et.length===1&&Math.abs(et[0].start)<.5&&Math.abs(et[0].end-a)<.5?tn=!0:(Mt=-(de+G.get(Be)*le),At="top"):H.has(Be)&&(Mt=i+de+H.get(Be)*le,At="bottom"),!tn&&Mt!==null&&At&&Ne.rowLabels.push({rowIdx:Be,y:Mt,position:At,rowTop:T,rowBottom:T+Ue,labels:et})}return Ne.offsetY+=Ue+c,Ne.offsetMm+=Ue+(Be<o.length-1?c:0),Ne},{nodes:[],offsetY:0,offsetMm:0,rowLabels:[],rowDimensions:[],seenSegments:new Set,rowBars:new Map,mullionLines:[],horzLines:[]}),Me=o.length>1?(()=>{const Ne=[0];for(let Be=0;Be<ke.rowDimensions.length-1;Be++){const Ue=ke.rowDimensions[Be].bottom,T=ke.rowDimensions[Be+1].top;Ne.push((Ue+T)/2)}Ne.push(i);const Ze=[];for(let Be=0;Be<Ne.length-1;Be++){const Ue=Ne[Be],T=Ne[Be+1],_=T-Ue;Ze.push({startPx:Ue,endPx:T,midPx:(Ue+T)/2,label:eh(_,k)})}return Ze})():[],fe=Array.from(ke.rowBars.entries()).map(([Ne,Ze])=>{if(!Ze.positions.length)return null;const Be=Ze.positions.filter(D=>Number.isFinite(D?.absMm)&&Number.isFinite(D?.absPx)).sort((D,q)=>D.absMm-q.absMm);if(!Be.length)return null;const Ue=[];if(Be.forEach(D=>{(!Ue.length||Math.abs(Ue[Ue.length-1].absMm-D.absMm)>.05)&&Ue.push(D)}),!Ue.length)return null;const T=[{absMm:Ze.startMm,absPx:Ze.startPx,type:"frame"},...Ue.map(D=>({absMm:D.absMm,absPx:D.absPx,type:"bar"})),{absMm:Ze.endMm,absPx:Ze.endPx,type:"frame"}],b=[],_=new Set;for(let D=0;D<T.length-1;D+=1){const q=T[D],J=T[D+1],he=J.absMm-q.absMm;if(he<=.05||q.type!=="bar"&&J.type!=="bar")continue;const Ke=eh(he,k),ot=(q.absPx+J.absPx)/2;_.add(q.absPx),_.add(J.absPx),b.push({startPx:q.absPx,endPx:J.absPx,midPx:ot,label:Ke})}return b.length?{rowIdx:Ne,segments:b,boundaries:Array.from(_).sort((D,q)=>D-q)}:null}).filter(Ne=>!!Ne),ce=Y+U*.8,we=U*1.8,je=(Me.length?1:0)+fe.length;if(je>0){const Ne=ce+(je-1)*we+U*1.6;re=Math.max(re,Ne)}const De=[];let Oe=0;const it=(Ne,Ze)=>{if(!Ne.length)return;const Be=Ze.slice().sort((_,D)=>_-D),Ue=a+ce+Oe*we,T=Ue-U*.6,b=Ue+U*.45;De.push({lineX:Ue,extX:T,textX:b,segments:Ne,boundaries:Be}),Oe+=1};if(fe.forEach(Ne=>{it(Ne.segments,Ne.boundaries)}),Me.length){const Ne=new Set;Me.forEach(Ze=>{Ne.add(Ze.startPx),Ne.add(Ze.endPx)}),it(Me,Array.from(Ne))}const We=i+se+Y+U*.9,qe=-(Y+U*.75),Ge=U*.6,Le=o.length>1,lt=o.length>0?o[o.length-1]:null,ut=lt?lt.cols.length===1||lt.cols.filter(Ne=>Number(Ne.width_ratio??1)>0).length===1:!1,Xe=!Le||!ut;return f.jsxs("svg",{viewBox:`${-me} ${-W} ${a+me+re} ${i+W+pe}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"Anteprima finestra",children:[f.jsx("defs",{children:f.jsxs("pattern",{id:ae,patternUnits:"userSpaceOnUse",width:30,height:30,children:[f.jsx("rect",{x:"0",y:"0",width:30,height:30,fill:"transparent"}),f.jsx("circle",{cx:7.5,cy:7.5,r:3,fill:"#d1d5db"})]})}),f.jsx("rect",{x:0,y:0,width:a,height:i,fill:Re,stroke:gr.FRAME_STROKE,strokeWidth:gr.STROKE_WIDTH_FRAME}),f.jsx("rect",{x:p,y:p,width:m,height:v,fill:"none",stroke:gr.FRAME_STROKE,strokeWidth:gr.STROKE_WIDTH_BEAD}),ke.nodes,d&&ke.rowLabels.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("g",{stroke:Ee,strokeWidth:S/1.5,strokeDasharray:_e,fill:"none",children:ke.rowLabels.map(Ne=>{const Ze=Ne.position==="top"?0:i,Be=Ne.position==="top"?Ne.y+Ge:Ne.y-Ge,Ue=new Set;return Ne.labels.forEach(T=>{Ue.add(Math.round(T.start*100)/100),Ue.add(Math.round(T.end*100)/100)}),Array.from(Ue).map((T,b)=>f.jsx("line",{x1:T,y1:Ze,x2:T,y2:Be},`row-ext-${Ne.rowIdx}-${b}`))})}),f.jsx("g",{style:{fontFamily:"sans-serif",textAnchor:"middle",fill:"#1f2937",fontSize:F},children:ke.rowLabels.map(({rowIdx:Ne,y:Ze,labels:Be})=>Be.map((Ue,T)=>f.jsx("text",{x:Ue.x,y:Ze,dominantBaseline:"middle",children:Ue.text},`row-label-${Ne}-${T}`)))})]}),d&&f.jsxs(f.Fragment,{children:[f.jsxs("g",{stroke:Ee,strokeWidth:S/1.5,strokeDasharray:_e,fill:"none",children:[Xe&&f.jsxs(f.Fragment,{children:[f.jsx("line",{x1:0,y1:i,x2:0,y2:We-Ge}),f.jsx("line",{x1:a,y1:i,x2:a,y2:We-Ge})]}),f.jsx("line",{x1:0,y1:0,x2:qe+Ge,y2:0}),f.jsx("line",{x1:0,y1:i,x2:qe+Ge,y2:i})]}),f.jsxs("g",{style:{fontFamily:"sans-serif",textAnchor:"middle",fill:"#1f2937",fontSize:U},children:[Xe&&f.jsx("text",{x:a/2,y:We+6,dominantBaseline:"hanging",children:Math.round(a)}),f.jsx("text",{x:qe,y:i/2,transform:`rotate(-90, ${qe}, ${i/2})`,dominantBaseline:"middle",children:Math.round(i)})]})]}),d&&De.length>0&&f.jsxs(f.Fragment,{children:[f.jsxs("g",{stroke:Ee,strokeWidth:S/1.5,strokeDasharray:_e,fill:"none",children:[De.flatMap((Ne,Ze)=>Ne.boundaries.map((Be,Ue)=>f.jsx("line",{x1:a,y1:Be,x2:Ne.extX,y2:Be},`bar-ext-${Ze}-${Ue}`))),De.flatMap((Ne,Ze)=>Ne.segments.map((Be,Ue)=>f.jsx("line",{x1:Ne.lineX,y1:Be.startPx,x2:Ne.lineX,y2:Be.endPx},`bar-line-${Ze}-${Ue}`)))]}),f.jsx("g",{style:{fontFamily:"sans-serif",textAnchor:"middle",fill:"#1f2937",fontSize:F},children:De.flatMap((Ne,Ze)=>Ne.segments.map((Be,Ue)=>f.jsx("text",{x:Ne.textX,y:Be.midPx,transform:`rotate(-90, ${Ne.textX}, ${Be.midPx})`,dominantBaseline:"middle",children:Be.label},`bar-label-${Ze}-${Ue}`)))})]})]})}async function Oh(t,r=640,a=640){const i={...t||{},showDims:!0},o=document.createElement("div");o.style.position="fixed",o.style.left="-99999px",o.style.top="-99999px",o.style.width=`${r}px`,o.style.height=`${a}px`,o.style.pointerEvents="none",document.body.appendChild(o);const c=Fo.createRoot(o);c.render(f.jsx("div",{style:{width:r,height:a},children:f.jsx(pm,{cfg:i,stroke:i.frame_color??"#222"})})),await new Promise(S=>setTimeout(S,0)),await new Promise(S=>requestAnimationFrame(()=>S(null)));const u=o.querySelector("svg");if(!u)throw console.error("windowToPng: nessun <svg> trovato nel container",{html:o.innerHTML.slice(0,200)}),c.unmount(),o.remove(),new Error("SVG non generato");u.setAttribute("width",String(r)),u.setAttribute("height",String(a)),u.getAttribute("xmlns")||u.setAttribute("xmlns","http://www.w3.org/2000/svg");const p=new XMLSerializer().serializeToString(u),m=new Blob([p],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(m),y=new Image;y.decoding="async",y.src=v,await new Promise((S,R)=>{y.onload=()=>S(),y.onerror=()=>R(new Error("Caricamento SVGIMG fallito"))});const x=document.createElement("canvas");x.width=r,x.height=a;const w=x.getContext("2d");if(!w)throw c.unmount(),o.remove(),URL.revokeObjectURL(v),new Error("Canvas non disponibile");return w.drawImage(y,0,0,r,a),c.unmount(),o.remove(),URL.revokeObjectURL(v),await new Promise((S,R)=>x.toBlob(A=>A?S(A):R(new Error("toBlob fallito")),"image/png",.92))}function nh(t,r){let i=t.replace(/[^0-9A-F]/gi,"");if(i.length===3&&(i=i.split("").map(p=>p+p).join("")),i.length!==6)return t;const o=parseInt(i,16);let c=(o>>16)+r,u=(o>>8&255)+r,d=(o&255)+r;return c=Math.max(0,Math.min(255,c)),u=Math.max(0,Math.min(255,u)),d=Math.max(0,Math.min(255,d)),"#"+((1<<24)+(c<<16)+(u<<8)+d).toString(16).slice(1)}function gm({cfg:t,stroke:r="#222"}){const{width_mm:a=1e3,height_mm:i=250,depth_mm:o=250,celino_mm:c=0}=t,u=t.color&&t.color.length>=3?t.color:null,d=u||"#fafafa",p=u?nh(u,-5):"#f4f4f5",m=u?nh(u,8):"#f0f0f0",v=u?nh(u,-10):"#e4e4e4",y=Math.PI/6,x=.7,w=(o||0)*Math.cos(y)*x,N=(o||0)*Math.sin(y)*x,S=(c||0)*Math.cos(y)*x,R=(c||0)*Math.sin(y)*x,A=1.5,M=Math.min(a,i)*.1,L=Math.max(60,Math.min(a,i)),F=Math.max(9,Math.min(24,L/28)),U=Math.max(42,Math.min(80,L/8)),k=Math.max(14,Math.min(30,L/14)),Y=k+U*1.3,re=k+U*1.6+A,me=Math.max(4,F*.3)+N+R+A,xe=Math.max(4,F*.3)+w+S,ee=i+k+U*.5,G=-(k+U*.75),H=`${-Y} ${-me} ${a+Y+xe} ${i+me+re}`;return f.jsxs("svg",{viewBox:H,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"Disegno tecnico del cassonetto",children:[f.jsxs("g",{stroke:r,fill:"none",strokeWidth:A,strokeLinejoin:"round",strokeLinecap:"round",children:[f.jsx("path",{d:`M ${w},${-N} L ${a+w},${-N} L ${a},0 L 0,0 Z`,fill:m}),f.jsx("path",{d:`M ${a},0 L ${a+w},${-N} L ${a+w},${i-N} L ${a},${i} Z`,fill:v}),f.jsx("rect",{x:"0",y:"0",width:a,height:i,fill:d}),f.jsx("rect",{x:M,y:M,width:a-M*2,height:i-M*2,fill:p}),f.jsx("rect",{x:"0",y:"0",width:a,height:i}),f.jsx("rect",{x:M,y:M,width:a-M*2,height:i-M*2}),c&&c>0&&f.jsx("line",{x1:a+w,y1:i-N,x2:a+w+S,y2:i-N-R,strokeDasharray:`${A*3} ${A*2}`})]}),f.jsxs("g",{style:{fontFamily:"sans-serif",textAnchor:"middle",fill:"#1f2937",fontSize:U},children:[f.jsx("text",{x:a/2,y:ee+6,dominantBaseline:"hanging",children:Math.round(a)}),f.jsx("text",{x:G,y:i/2,transform:`rotate(-90, ${G}, ${i/2})`,dominantBaseline:"middle",children:Math.round(i)})]})]})}async function Dh(t,r=640,a=640){const i=document.createElement("div");i.style.position="fixed",i.style.left="-99999px",i.style.top="-99999px",i.style.width=`${r}px`,i.style.height=`${a}px`,i.style.pointerEvents="none",document.body.appendChild(i);const o=Fo.createRoot(i);o.render(f.jsx("div",{style:{width:r,height:a},children:f.jsx(gm,{cfg:t})})),await new Promise(N=>setTimeout(N,50));const c=i.querySelector("svg");if(!c)throw o.unmount(),i.remove(),new Error("Cassonetto SVG non generato");c.setAttribute("width",String(r)),c.setAttribute("height",String(a)),c.getAttribute("xmlns")||c.setAttribute("xmlns","http://www.w3.org/2000/svg");const d=new XMLSerializer().serializeToString(c),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(p),v=new Image;v.decoding="async",v.src=m,await new Promise((N,S)=>{v.onload=()=>N(),v.onerror=R=>S(new Error(`Caricamento SVG in IMG fallito: ${R}`))});const y=document.createElement("canvas");y.width=r,y.height=a;const x=y.getContext("2d");if(!x)throw o.unmount(),i.remove(),URL.revokeObjectURL(m),new Error("Canvas non disponibile");return x.drawImage(v,0,0,r,a),o.unmount(),i.remove(),URL.revokeObjectURL(m),await new Promise((N,S)=>y.toBlob(R=>R?N(R):S(new Error("toBlob fallito")),"image/png",.92))}function Ac(t,r){let i=t.replace(/[^0-9A-F]/gi,"");if(i.length===3&&(i=i.split("").map(p=>p+p).join("")),i.length!==6)return t;const o=parseInt(i,16);let c=(o>>16)+r,u=(o>>8&255)+r,d=(o&255)+r;return c=Math.max(0,Math.min(255,c)),u=Math.max(0,Math.min(255,u)),d=Math.max(0,Math.min(255,d)),"#"+((1<<24)+(c<<16)+(u<<8)+d).toString(16).slice(1)}function vm({cfg:t,stroke:r="#000000",className:a}){const i=Math.max(200,Number(t.width_mm)||1200),o=Math.max(200,Number(t.height_mm)||1400),c=Math.max(1,Math.round(Number(t.ante??2)||2)),u=t.color&&t.color.length>=3?t.color:null,d=Math.max(1,Math.min(2.5,Math.min(i,o)*.003)),p=u?Ac(u,10):"#ffffff",m=u?Ac(u,-15):"#e8e8e8",v=u||"#f4f4f4",y=u?Ac(u,30):"#ffffff",x=u?Ac(u,-25):"#d6d6d6",w=Math.max(60,Math.min(i,o)),N=Math.max(9,Math.min(24,w/28)),S=Math.max(42,Math.min(80,w/16)),R=Math.max(14,Math.min(30,w/14)),A=R+S*1.3,M=R+S*1.6+d,L=Math.max(4,N*.3)+d,F=Math.max(4,N*.3),U=o+R+S*.5,k=-(R+S*.75),Y=`${-A} ${-L} ${i+A+F} ${o+L+M}`,re=Math.min(i,o)*.1,me=re,xe=re,ee=Math.max(20,i-re*2),G=Math.max(20,o-re*2),H=ee/c,de=H*.125,le=G*.0625,P=G*.875,Z=50,se=Math.max(.6,d*.7),oe=Math.max(.5,d*.6),z=Math.max(.6,d*.6),W=Math.max(2.6,z*2.6),pe=`persiana-slat-${u?u.replace(/[^a-z0-9]/gi,""):"std"}`;return f.jsxs("svg",{viewBox:Y,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":`Persiana ${i}x${o}, ${c} ante`,className:a,style:{display:"block"},children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:pe,x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"0%",stopColor:y}),f.jsx("stop",{offset:"40%",stopColor:v}),f.jsx("stop",{offset:"100%",stopColor:x})]})}),f.jsxs("g",{stroke:r,strokeWidth:d,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Array.from({length:c}).map((ae,_e)=>{const Ee=me+_e*H,ke=xe,Me=H,fe=G,ce=Ee+de,we=ke+le,je=Me-de*2,De=P,Oe=Math.max(6,W+z*3.6);return f.jsxs("g",{children:[f.jsx("rect",{x:Ee,y:ke,width:Me,height:fe,fill:p}),f.jsx("line",{x1:Ee+Me,y1:ke+2,x2:Ee+Me,y2:ke+fe,stroke:m,strokeWidth:d*1.2}),f.jsx("line",{x1:Ee+2,y1:ke+fe,x2:Ee+Me,y2:ke+fe,stroke:m,strokeWidth:d*1.2}),f.jsx("rect",{x:ce,y:we,width:je,height:De,fill:x,stroke:"none"}),f.jsx("rect",{x:ce,y:we,width:je,height:De,fill:"none",stroke:r,strokeWidth:oe}),f.jsx("rect",{x:ce+W,y:we+W,width:je-W*2,height:De-W*2,fill:"none",stroke:r,strokeWidth:z}),(()=>{const it=[],We=we+W,Ge=we+De-W-We,Le=Math.max(1,Math.round(Ge/Z)),lt=Ge/Le;for(let ut=0;ut<Le;ut++){const Xe=We+ut*lt;it.push(f.jsxs("g",{children:[f.jsx("rect",{x:ce+Oe,y:Xe,width:je-Oe*2,height:lt,fill:`url(#${pe})`,stroke:r,strokeWidth:se}),f.jsx("line",{x1:ce+Oe+1,y1:Xe+se,x2:ce+je-Oe-1,y2:Xe+se,stroke:y,strokeWidth:se*.4,strokeOpacity:.5})]},`slat-${_e}-${ut}`))}return it})()]},`leaf-${_e}`)}),c>1&&f.jsx("line",{x1:me+H,y1:xe,x2:me+H,y2:xe+G})]}),f.jsxs("g",{style:{fontFamily:"sans-serif",textAnchor:"middle",fill:"#1f2937",fontSize:S},children:[f.jsx("text",{x:i/2,y:U+6,dominantBaseline:"hanging",children:Math.round(t.width_mm)}),f.jsx("text",{x:k,y:o/2,transform:`rotate(-90, ${k}, ${o/2})`,dominantBaseline:"middle",children:Math.round(t.height_mm)})]})]})}async function ow(t,r=900,a=900){const i=document.createElement("div");i.style.position="fixed",i.style.left="-99999px",i.style.top="-99999px",i.style.width=`${r}px`,i.style.height=`${a}px`,i.style.pointerEvents="none",document.body.appendChild(i);const o=Fo.createRoot(i);o.render(f.jsx("div",{style:{width:r,height:a},children:f.jsx(vm,{cfg:t})})),await new Promise(N=>setTimeout(N,50));const c=i.querySelector("svg");if(!c)throw o.unmount(),i.remove(),new Error("Persiana SVG non generato");c.setAttribute("width",String(r)),c.setAttribute("height",String(a)),c.getAttribute("xmlns")||c.setAttribute("xmlns","http://www.w3.org/2000/svg");const d=new XMLSerializer().serializeToString(c),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(p),v=new Image;v.decoding="async",v.src=m,await new Promise((N,S)=>{v.onload=()=>N(),v.onerror=R=>S(new Error(`Caricamento SVG in IMG fallito: ${R}`))});const y=document.createElement("canvas");y.width=r,y.height=a;const x=y.getContext("2d");if(!x)throw o.unmount(),i.remove(),URL.revokeObjectURL(m),new Error("Canvas non disponibile");return x.drawImage(v,0,0,r,a),o.unmount(),i.remove(),URL.revokeObjectURL(m),await new Promise((N,S)=>y.toBlob(R=>R?N(R):S(new Error("toBlob fallito")),"image/png",.92))}function Ao(t,r){let i=t.replace(/[^0-9A-F]/gi,"");if(i.length===3&&(i=i.split("").map(p=>p+p).join("")),i.length!==6)return t;const o=parseInt(i,16);let c=(o>>16)+r,u=(o>>8&255)+r,d=(o&255)+r;return c=Math.max(0,Math.min(255,c)),u=Math.max(0,Math.min(255,u)),d=Math.max(0,Math.min(255,d)),"#"+((1<<24)+(c<<16)+(u<<8)+d).toString(16).slice(1)}function ym({cfg:t,stroke:r="#000000",className:a}){const i=Math.max(200,Number(t.width_mm)||1e3),o=Math.max(200,Number(t.height_mm)||1400),c=t.color&&t.color.length>=3?t.color:null,u=c?Ao(c,40):"#ffffff",d=c?Ao(c,20):"#f9f9f9",p=c||"#e8e8e8",m=c?Ao(c,-20):"#dcdcdc",v=c?Ao(c,-40):"#bfbfbf",y=c?Ao(c,-30):"#d0d0d0",x=Math.max(1,Math.min(2.5,Math.min(i,o)*.003)),w=Math.max(60,Math.min(i,o)),N=Math.max(9,Math.min(24,w/28)),S=Math.max(42,Math.min(80,w/16)),R=Math.max(14,Math.min(30,w/14)),A=R+S*1.3,M=R+S*1.6+x,L=Math.max(4,N*.3)+x,F=Math.max(4,N*.3),U=o+R+S*.5,k=-(R+S*.75),Y=Math.min(i,o)*.05,re=Y,me=Y,xe=i-Y*2,ee=o-Y*2,G=re,H=xe,de=ee,P=Math.max(4,Math.round(de/55)),Z=de/P,se=Z*.2,oe=Z*.8,z=`slatGradient-${c?c.replace(/[^a-z0-9]/gi,""):"std"}`;return f.jsxs("svg",{viewBox:`${-A} ${-L} ${i+A+F} ${o+L+M}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":`Tapparella ${i}x${o}`,className:a,style:{display:"block"},children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:z,x1:"0",x2:"0",y1:"0",y2:"1",children:[f.jsx("stop",{offset:"0%",stopColor:d}),f.jsx("stop",{offset:"20%",stopColor:u}),f.jsx("stop",{offset:"50%",stopColor:p}),f.jsx("stop",{offset:"90%",stopColor:m}),f.jsx("stop",{offset:"100%",stopColor:v})]})}),f.jsxs("g",{stroke:r,strokeWidth:x,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("g",{strokeWidth:x,children:Array.from({length:P}).map((W,pe)=>{const ae=pe===0,_e=pe===P-1,Re=me+pe*Z,Ee=Re+se/2,ke=Re+se;return f.jsxs("g",{children:[!ae&&f.jsxs("g",{children:[f.jsx("rect",{x:G,y:Re,width:H,height:se,fill:y,stroke:"none"}),f.jsx("line",{x1:G+H*.02,y1:Ee,x2:G+H*.98,y2:Ee,stroke:"#FFFFFF",strokeWidth:x*1.5,strokeDasharray:`${x*12} ${x*8}`,strokeLinecap:"butt",strokeOpacity:1})]}),_e?f.jsxs("g",{children:[f.jsx("rect",{x:G,y:ke,width:H,height:oe,fill:`url(#${z})`,stroke:r}),f.jsx("rect",{x:G,y:ke+oe-x*2,width:H,height:x*2,fill:"#444444",stroke:"none"}),f.jsx("circle",{cx:G+x*4,cy:ke+oe/2,r:x*1.5,fill:"#888",stroke:"none"}),f.jsx("circle",{cx:G+H-x*4,cy:ke+oe/2,r:x*1.5,fill:"#888",stroke:"none"})]}):f.jsxs("g",{children:[f.jsx("rect",{x:G,y:ae?Re:ke,width:H,height:ae?Z:oe,fill:`url(#${z})`,stroke:r}),f.jsx("line",{x1:G,y1:(ae?Re:ke)+(ae?Z:oe)*.2,x2:G+H,y2:(ae?Re:ke)+(ae?Z:oe)*.2,stroke:"white",strokeWidth:x,strokeOpacity:.5}),f.jsx("line",{x1:G,y1:(ae?Re:ke)+(ae?Z:oe)*.85,x2:G+H,y2:(ae?Re:ke)+(ae?Z:oe)*.85,stroke:r,strokeWidth:x*.5,strokeOpacity:.2})]})]},pe)})}),f.jsx("line",{x1:G,y1:me,x2:G+H,y2:me,stroke:r,strokeWidth:x*1.5})]}),f.jsxs("g",{style:{fontFamily:"sans-serif",textAnchor:"middle",fill:"#1f2937",fontSize:S},children:[f.jsx("text",{x:i/2,y:U+6,dominantBaseline:"hanging",children:Math.round(t.width_mm)}),f.jsx("text",{x:k,y:o/2,transform:`rotate(-90, ${k}, ${o/2})`,dominantBaseline:"middle",children:Math.round(t.height_mm)})]})]})}async function lw(t,r=640,a=640){const i=document.createElement("div");i.style.position="fixed",i.style.left="-99999px",i.style.top="-99999px",i.style.width=`${r}px`,i.style.height=`${a}px`,i.style.pointerEvents="none",document.body.appendChild(i);const o=Fo.createRoot(i);o.render(f.jsx("div",{style:{width:r,height:a},children:f.jsx(ym,{cfg:t})})),await new Promise(y=>setTimeout(y,50));const c=i.querySelector("svg");if(!c)throw o.unmount(),i.remove(),new Error("Tapparella SVG non generato");c.setAttribute("width",String(r)),c.setAttribute("height",String(a)),c.getAttribute("xmlns")||c.setAttribute("xmlns","http://www.w3.org/2000/svg");const d=new XMLSerializer().serializeToString(c),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(p),v=new Image;return v.crossOrigin="anonymous",new Promise((y,x)=>{v.onload=()=>{const w=document.createElement("canvas");w.width=r,w.height=a;const N=w.getContext("2d");if(!N){URL.revokeObjectURL(m),x(new Error("Canvas context null"));return}N.drawImage(v,0,0),URL.revokeObjectURL(m),w.toBlob(S=>{o.unmount(),i.remove(),S?y(S):x(new Error("Blob null"))},"image/png")},v.onerror=w=>{URL.revokeObjectURL(m),o.unmount(),i.remove(),x(w)},v.src=m})}const rh="___________________________________________________________________________________________________________";function RO(t,r){return t.replace("{days}",String(r))}function NO(t,r){const a=Number.isFinite(r?.validityDays)&&r?.validityDays?r.validityDays:15,i=RO(t.validityTemplate,a),o=t.paymentPlan.map(m=>({...m})),c=CO.slice(),u=t.sections.map(m=>({title:m.title,body:m.body.slice()})),d={title:t.privacy.title,body:t.privacy.body.slice()},p=[];return p.push(i.toUpperCase()),p.push(""),p.push(t.notesIntro.trim()),p.push(rh),p.push(rh),p.push(rh),p.push(""),p.push("CONDIZIONI"),p.push("- Termini e modalita di pagamento"),o.forEach((m,v)=>{p.push(`${v+1}. ${m.label}`),p.push(m.description.trim())}),c.forEach(m=>{p.push(m.trim())}),u.forEach(m=>{p.push(""),p.push(m.title.trim()),m.body.forEach(v=>{p.push(v.trim())})}),p.push(""),p.push(d.title.trim()),d.body.forEach(m=>{p.push(m.trim())}),p.push(""),p.push("Letto e confermato in ______________________ in data _____________________"),p.push("Cliente"),p.push("_________________________"),p.push("Fornitore"),p.push("_________________________"),{profileId:t.id,profileLabel:t.label,tagline:t.tagline,summary:t.summary,validityLabel:i,notesIntro:t.notesIntro,paymentPlan:o,sections:u,privacy:d,text:p.join(`
`)}}const TO=[{id:"privato",label:"Privati",tagline:"Formula 40  40  20",summary:"Tre fasi per accompagnare produzione, consegna e posa con cadenze equilibrate.",validityTemplate:"VALIDITA' OFFERTA: {days} GG DALLA PRESENTE",notesIntro:"Note del cliente (esigenze particolari in merito a termini di consegna, di pagamento e modifiche tecniche dell'ordine)",paymentPlan:[{label:"40% alla conferma",description:"Acconto a conferma dell'ordine comprensivo di posa in opera."},{label:"40% all'avviso di pronta merce",description:"Saldo intermedio da versare quando il materiale  pronto alla consegna presso il nostro magazzino."},{label:"20% a posa ultimata",description:"Saldo finale entro e non oltre 7 giorni dalla posa completata e collaudata."}],sections:[{title:"Consegna",body:["I tempi di consegna variano da 4 a 10 settimane dal ricevimento dell'acconto, in funzione della tipologia di prodotto richiesta.","I termini possono subire variazioni dovute a produzione o trasporto; in tal caso comunicheremo la nuova data di consegna. Se il ritardo supera 45 giorni e non  dovuto a forza maggiore, il cliente pu richiedere un indennizzo."]},{title:"Modifiche ordine in corso d'opera",body:["Il fornitore pu accettare o meno modifiche richieste in corso d'opera. Se la richiesta arriva dopo l'avvio della produzione, verranno ricalcolati prezzo e termini di consegna."]},{title:"Posa in opera",body:["Il costo della posa pu variare in fase di conferma ordine a seguito del rilievo tecnico definitivo.","Qualora durante i lavori emergano difformit rispetto alle condizioni pattuite, il cliente pu fissare un termine congruo (minimo 30 giorni) entro cui il fornitore dovr adeguarsi."]}],privacy:{title:"Privacy e trattamento dei dati",body:["La sottoscrizione del presente documento costituisce informativa ai sensi del Regolamento (UE) 2016/679 e del D.Lgs. 196/2003 s.m.i.; i dati saranno trattati in modo lecito, corretto e trasparente.","X S.R.L., con sede legale in Via San Giuseppe 95 - 21047 Saronno (VA), tratta dati identificativi, fiscali e tecnici del cliente per finalita precontrattuali, contrattuali, amministrative e di assistenza post vendita su base giuridica contrattuale e di obbligo legale.","I dati potranno essere comunicati a vettori, installatori, consulenti fiscali o enti pubblici nei limiti strettamente necessari all esecuzione del rapporto; non e previsto trasferimento extra UE salvo sistemi che garantiscano un adeguato livello di protezione.","Il cliente puo richiedere accesso, rettifica, limitazione, cancellazione o opposizione scrivendo a info@xinfissi.it; la conservazione avviene per il tempo necessario agli obblighi contrattuali e fiscali."]}},{id:"azienda",label:"Aziende",tagline:"Formula 50  50",summary:"Due tranche amministrative: conferma ordine e consegna/posa.",validityTemplate:"VALIDITA' OFFERTA: {days} GG DALLA PRESENTE",notesIntro:"Note del cliente (esigenze particolari in merito a termini di consegna, di pagamento e modifiche tecniche dell ordine)",paymentPlan:[{label:"50% alla conferma",description:"Acconto del 50% del totale (con o senza posa) da versare a conferma dell'ordine e per l'avvio della produzione."},{label:"50% prima della consegna/posa",description:"Saldo del 50% da corrispondere all'avviso di pronta merce e comunque prima della consegna o della posa in opera."}],sections:[{title:"Consegna",body:["Tempi indicativi 4-10 settimane dal ricevimento dell'acconto, variabili in base alla complessit del progetto e alle disponibilit produttive.","Eventuali variazioni dovute a produzione o logistica verranno comunicate prontamente. Ritardi oltre 45 giorni non dovuti a forza maggiore danno facolt di richiedere un indennizzo."]},{title:"Modifiche ordine in corso d'opera",body:["Richieste di modifica dopo l'avvio delle lavorazioni potranno essere accolte previo aggiornamento economico e ridefinizione dei tempi di consegna."]},{title:"Posa in opera / cantiere",body:["La voce posa pu subire conguagli dopo il rilievo tecnico definitivo e l'analisi delle condizioni di cantiere.","In caso di non conformit rilevate durante le lavorazioni il cliente pu fissare un termine (minimo 30 giorni) per l'adeguamento del fornitore alle condizioni pattuite."]}],privacy:{title:"Privacy e trattamento dei dati",body:["La presente offerta integra l'informativa privacy ai sensi del Regolamento (UE) 2016/679 e del D.Lgs. 196/2003 s.m.i.; il trattamento avviene nel rispetto dei principi di liceit, correttezza e trasparenza.","X S.R.L., Via San Giuseppe 95 - 21047 Saronno (VA), tratta dati societari e dei referenti aziendali per finalit contrattuali, amministrative, contabili e di tutela del credito, con basi giuridiche fondate sul contratto e sugli obblighi normativi.","I dati potranno essere comunicati a vettori, installatori, istituti di credito, consulenti o autorit competenti; eventuali trasferimenti extra UE avverranno solo verso soggetti che garantiscano misure adeguate.","Il cliente pu esercitare i diritti previsti dagli artt. 15-22 GDPR (accesso, rettifica, limitazione, portabilit, opposizione e cancellazione) scrivendo a info@xinfissi.it; la conservazione dura il tempo necessario all'esecuzione del contratto e degli obblighi di legge."]}}],SD={label:"Solo fornitura",tagline:"Formula 40  60",summary:"Formula 40  60 pensata per consegne senza installazione.",steps:[{label:"40% alla conferma",description:"Acconto iniziale per avviare produzione e bloccare i materiali."},{label:"60% all avviso di pronta merce",description:"Saldo da corrispondere prima del ritiro o spedizione del materiale."}]},CO=["Il cliente non potra ritrattare o ritardare i pagamenti dopo la sottoscrizione del contratto.","In caso di mancato saldo del 60% all avviso di pronta merce, la consegna non verra effettuata, la merce restera in giacenza presso il nostro magazzino e saranno addebitate le relative spese.","Eventuali contestazioni saranno prese in considerazione solo dopo l integrale pagamento e previo sopralluogo congiunto."],MO=t=>String(t??"").toLowerCase(),mu=[{id:"windows",label:"Finestre e portefinestre",match:t=>/finestr|serrament|scorrevol|portafin/i.test(t)},{id:"persiane",label:"Persiane",match:t=>/persian/i.test(t)},{id:"tapparelle",label:"Tapparelle",match:t=>/tapparell|avvolgibil/i.test(t)},{id:"zanzariere",label:"Zanzariere",match:t=>/zanzar/i.test(t)},{id:"cassonetti",label:"Cassonetti",match:t=>/casson/i.test(t)},{id:"custom",label:"Voci custom",match:t=>/custom|personalizzat/i.test(t)}],OO=new Set(mu.map(t=>t.id)),Lc=t=>`${t.toFixed(2)} m`,cw=t=>{const r=Number(t);return Number.isFinite(r)?r:null},Xc=(t,r)=>{for(const a of r){const i=cw(t[a]);if(i&&i>0)return i}return null},uw=t=>{const r=Xc(t,["width_mm","larghezza_mm","larghezza","width"]),a=Xc(t,["height_mm","altezza_mm","altezza","height"]),i=cw(t.qty)??1;if(!r||!a||r<=0||a<=0||!i||i<=0)return 0;const o=r*a/1e6;return dw(o*i)},dw=t=>Math.round((t+Number.EPSILON)*100)/100,DO=t=>{const r=Xc(t,["width_mm","larghezza_mm","larghezza","width"]),a=Xc(t,["height_mm","altezza_mm","altezza","height"]);return r&&a?`L ${Math.round(r)}  H ${Math.round(a)} mm`:r?`L ${Math.round(r)} mm`:a?`H ${Math.round(a)} mm`:null},fw=t=>{const r=MO(t?.kind),a=mu.find(i=>i.match(r));return a?a.id:null},xs=t=>{if(!Array.isArray(t))return[];const r=new Set;return t.map(a=>{const i=a?.group;if(!i||!OO.has(i)||r.has(i))return null;const o=a?.mode==="subset"?"subset":"all",c=Array.isArray(a?.itemIds)?Array.from(new Set(a.itemIds.filter(u=>typeof u=="string"&&u.trim().length>0))):void 0;return r.add(i),o==="subset"&&(!c||c.length===0)?null:{group:i,mode:o,itemIds:o==="subset"?c:void 0}}).filter(Boolean)},kO=(t,r)=>{const a=r.filter(o=>fw(o)===t.group);if(t.mode==="all")return a;const i=new Set(t.itemIds??[]);return a.filter(o=>i.has(String(o.id)))},hw=(t,r)=>{const a=xs(t);return a.length===0?[]:a.map(i=>{const o=mu.find(p=>p.id===i.group),c=kO(i,r);let u=0,d=0;return c.forEach(p=>{const m=uw(p);m>0?u+=m:d+=1}),{id:i.group,label:o.label,mq:dw(u),selectedCount:c.length,missingDimensions:d}})};function LO({draft:t,onChange:r}){const a=E.useRef(null),[i,o]=E.useState(t.width_mm==null?"":String(t.width_mm)),[c,u]=E.useState(t.height_mm==null?"":String(t.height_mm)),[d,p]=E.useState(t.qty==null?"1":String(t.qty));E.useEffect(()=>{o(t.width_mm==null?"":String(t.width_mm)),u(t.height_mm==null?"":String(t.height_mm)),p(t.qty==null?"1":String(t.qty))},[t.width_mm,t.height_mm,t.qty]);const m=(A,M)=>r({...t,[A]:M}),v=Array.isArray(t.custom_fields)?t.custom_fields:[],y=t.__previewUrl||t.image_url||null,x=(A,M)=>{const L=v.slice();L[A]={...L[A],...M},m("custom_fields",L)},w=()=>{const A=v.concat({key:crypto.randomUUID(),label:"",value:""});m("custom_fields",A)},N=A=>{const M=v.slice();M.splice(A,1),m("custom_fields",M)},S=A=>{const M=A.target.files?.[0];if(!M)return;if(!M.type.startsWith("image/")){A.target.value="";return}const L=URL.createObjectURL(M);r({...t,__pickedFile:M,__previewUrl:L}),A.target.value=""},R=()=>{const A=t.__previewUrl;A&&URL.revokeObjectURL(A);const M={...t};delete M.__pickedFile,delete M.__previewUrl,M.image_url=void 0,r(M)};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Titolo voce"}),f.jsx("input",{className:"input",placeholder:"Es. Voce personalizzata",value:t.title??"",onChange:A=>m("title",A.target.value)})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Riferimento (opzionale)"}),f.jsx("input",{className:"input",placeholder:"Es. bagno piccolo / salotto",value:t.reference??"",onChange:A=>m("reference",A.target.value)})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Larghezza (mm)"}),f.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"input",value:i,onChange:A=>{const M=A.target.value;(M===""||/^\d+$/.test(M))&&o(M)},onBlur:()=>{if(i==="")m("width_mm",null);else{const A=Number(i);m("width_mm",Number.isNaN(A)?null:A),o(Number.isNaN(A)?"":String(A))}},onWheel:A=>A.currentTarget.blur(),onKeyDown:A=>{(A.key==="ArrowUp"||A.key==="ArrowDown")&&A.preventDefault()},placeholder:"es. 1200"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Altezza (mm)"}),f.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"input",value:c,onChange:A=>{const M=A.target.value;(M===""||/^\d+$/.test(M))&&u(M)},onBlur:()=>{if(c==="")m("height_mm",null);else{const A=Number(c);m("height_mm",Number.isNaN(A)?null:A),u(Number.isNaN(A)?"":String(A))}},onWheel:A=>A.currentTarget.blur(),onKeyDown:A=>{(A.key==="ArrowUp"||A.key==="ArrowDown")&&A.preventDefault()},placeholder:"es. 1500"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Quantit"}),f.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"input",value:d,onChange:A=>{const M=A.target.value;(M===""||/^\d+$/.test(M))&&p(M)},onBlur:()=>{const A=d===""?1:Math.max(1,Number(d)||1);m("qty",A),p(String(A))},onWheel:A=>A.currentTarget.blur(),onKeyDown:A=>{(A.key==="ArrowUp"||A.key==="ArrowDown")&&A.preventDefault()},placeholder:"1"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-600",children:"Immagine voce"}),y?f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:y,alt:"Anteprima",className:"h-24 w-24 object-contain rounded border bg-white"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>a.current?.click(),children:"Cambia immagine"}),f.jsx("button",{type:"button",className:"btn btn-sm",onClick:R,children:"Rimuovi"})]})]}):f.jsxs("div",{className:"rounded border border-dashed p-4 text-sm text-gray-600 flex items-center justify-between",children:[f.jsx("span",{children:"Nessuna immagine. Caricane una dal dispositivo."}),f.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>a.current?.click(),children:"Carica immagine"})]}),f.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:S})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-xs font-medium text-gray-600",children:"Voci"}),f.jsx("button",{type:"button",className:"btn btn-sm",onClick:w,children:"+ Aggiungi voce"})]}),v.length===0?f.jsx("div",{className:"rounded border border-dashed p-4 text-sm text-gray-500",children:"Nessuna voce. Premi Aggiungi voce."}):f.jsx("div",{className:"space-y-2",children:v.map((A,M)=>f.jsxs("div",{className:"grid grid-cols-[1fr_1fr_40px] gap-2 items-center",children:[f.jsx("input",{className:"input",placeholder:"Nome (es. Colore)",value:typeof(A.label??A.name)=="string"?A.label??A.name:"",onChange:L=>x(M,{label:L.target.value})}),f.jsx("input",{className:"input",placeholder:"Valore (es. Oro)",value:typeof A.value=="string"?A.value:"",onChange:L=>x(M,{value:L.target.value})}),f.jsx("button",{type:"button",className:"h-9 w-9 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50",onClick:()=>N(M),"aria-label":"Rimuovi",children:""})]},A.key))})]})]})}function jc(t){return new Promise((r,a)=>{const i=new FileReader;i.onload=()=>r(String(i.result||"")),i.onerror=()=>a(i.error||new Error("FileReader error")),i.readAsDataURL(t)})}function UO(t){return new Promise((r,a)=>{const i=new FileReader;i.onload=()=>r(String(i.result||"")),i.onerror=()=>a(i.error||new Error("FileReader error")),i.readAsDataURL(t)})}function zO({draft:t,onChange:r}){const a=Array.isArray(t?.custom_fields)?t.custom_fields:[],i=d=>{r({...t,custom_fields:d})},o=(d,p)=>{const m=a.slice();m[d]={...m[d],...p},i(m)},c=()=>{i([...a,{key:crypto.randomUUID?.()||String(Date.now()+Math.random()),name:"",value:""}])},u=d=>{const p=a.slice();p.splice(d,1),i(p)};return f.jsxs("section",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Dettagli aggiuntivi"}),f.jsx("button",{type:"button",className:"btn btn-sm",onClick:c,children:"+ Aggiungi campo"})]}),a.length===0?f.jsx("div",{className:"rounded border border-dashed p-4 text-sm text-gray-500",children:"Nessun campo. Premi + Aggiungi campo."}):f.jsx("div",{className:"space-y-2",children:a.map((d,p)=>f.jsxs("div",{className:"grid grid-cols-[1fr_1fr_40px] gap-2 items-center",children:[f.jsx("input",{className:"input",placeholder:"Titolo (es. Colore maniglia)",value:typeof d.name=="string"&&d.name?d.name:typeof d.label=="string"?d.label:"",onChange:m=>o(p,{name:m.target.value})}),f.jsx("input",{className:"input",placeholder:"Valore (es. Nero opaco)",value:typeof d.value=="string"?d.value:"",onChange:m=>o(p,{value:m.target.value})}),f.jsx("button",{type:"button",className:"h-9 w-9 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50",onClick:()=>u(p),"aria-label":"Rimuovi",children:""})]},d.key??p))})]})}function ah(t){const r=t?.options?.cassonetto??{},a=typeof r.celino_mm=="number"?r.celino_mm:typeof t?.celino_mm=="number"?t.celino_mm:typeof t?.extension_mm=="number"?t.extension_mm:typeof t?.spalletta_mm=="number"?t.spalletta_mm:null;return{width_mm:Number(r.width_mm??t?.width_mm)||1e3,height_mm:Number(r.height_mm??t?.height_mm)||600,depth_mm:Number(r.depth_mm??t?.depth_mm)||200,celino_mm:a,color:t?.options?.previewColor||r.color||t?.color||null,showDims:!0}}function BO({draft:t,editingId:r,onChange:a,onCancel:i,onSave:o}){const c=hu[t.kind];if(!c)return null;const u=E.useMemo(()=>t.kind==="finestra"&&!!t?.options?.gridWindow,[t.kind,t?.options?.gridWindow]),d=E.useMemo(()=>t.kind==="cassonetto",[t.kind]),p=E.useMemo(()=>t.kind==="persiana",[t.kind]),m=E.useMemo(()=>t.kind==="tapparella",[t.kind]),v=t?.__previewUrl||t?.image_url||c?.icon||"",y=r?`Modifica ${c.label}`:`Nuova ${c.label}`,x=t.kind==="custom"?LO:c.Form;function w(R){const A=R.target.files?.[0];if(!A)return;const M=URL.createObjectURL(A),L=t?.__previewUrl;L&&L.startsWith("blob:")&&URL.revokeObjectURL(L),UO(A).then(F=>{a({...t,__previewUrl:M,__pickedFile:A,image_url:F})}).catch(()=>{a({...t,__previewUrl:M,__pickedFile:A})})}async function N(){let R={...t};try{let A=null;if(u){const M=R.options.gridWindow;A=await Oh(M,900,900)}else if(d){const M=R?.options?.cassonetto??ah(R),L=await Dh(M,900,900),F=await jc(L);R={...R,options:{...R.options,cassonetto:M},__previewUrl:F,image_url:F}}else if(p){const M={width_mm:Number(R?.width_mm)||1e3,height_mm:Number(R?.height_mm)||1400,ante:Number(R?.ante)||2,color:R?.options?.previewColor||null},L=await ow(M,900,900),F=await jc(L);R={...R,__previewUrl:F,image_url:F}}else if(m){const M={width_mm:Number(R?.width_mm)||1e3,height_mm:Number(R?.height_mm)||1400,color:R?.options?.previewColor||R?.color||null},L=await lw(M,900,900),F=await jc(L);R={...R,__previewUrl:F,image_url:F}}if(A){const M=await jc(A);R={...R,__previewUrl:M,image_url:M},a(R)}}catch(A){console.warn("Generazione PNG al salvataggio fallita",A)}o()}const S=E.useMemo(()=>{if(u)return`${t.width_mm||1} / ${t.height_mm||1}`;if(d){const R=t?.options?.cassonetto??ah(t);return`${R.width_mm||2} / ${R.height_mm||1}`}return p?`${t.width_mm||2} / ${t.height_mm||1}`:m?`${t.width_mm||2} / ${t.height_mm||1}`:"1 / 1"},[u,d,p,m,t]);return f.jsxs("div",{className:"fixed inset-0 z-50",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:i}),f.jsx("div",{className:"absolute inset-0 flex items-start md:items-center justify-center p-4",children:f.jsxs("div",{className:"w-full max-w-[640px] card p-4 overflow-auto max-h-[90vh]",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm font-medium",children:y}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(_n,{variant:"ghost",onClick:i,children:"Annulla"}),f.jsx(_n,{onClick:N,children:r?"Salva":"Aggiungi"})]})]}),f.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:[f.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",children:f.jsxs("div",{className:"relative w-full rounded border bg-white flex items-center justify-center overflow-hidden",style:{aspectRatio:S},children:[u?f.jsx(pm,{cfg:t.options.gridWindow,stroke:t.options?.gridWindow?.frame_color??t.color??"#222"}):d?typeof t?.image_url=="string"&&t.image_url.startsWith("data:")?f.jsx("img",{src:t.image_url,alt:c?.label||"Anteprima",className:"max-w-full max-h-full object-contain"}):f.jsx(gm,{cfg:t?.options?.cassonetto??ah(t)}):p?f.jsx(vm,{cfg:{width_mm:Number(t.width_mm)||1e3,height_mm:Number(t.height_mm)||1400,ante:Number(t.ante)||2,color:t.options?.previewColor||null}}):m?f.jsx(ym,{cfg:{width_mm:Number(t.width_mm)||1e3,height_mm:Number(t.height_mm)||1400,color:t.options?.previewColor||t.color||null}}):v?f.jsx("img",{src:v,alt:c?.label||"Anteprima",className:"max-w-full max-h-full object-contain"},v):f.jsx("div",{className:"text-sm text-gray-400",children:"Nessuna immagine"}),!u&&!d&&!p&&!m&&f.jsx("div",{className:"absolute bottom-2 right-2",children:f.jsxs("label",{className:"inline-flex items-center justify-center h-8 px-2 rounded border bg-white text-xs cursor-pointer hover:bg-gray-50",children:["Carica",f.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp,image/svg+xml",className:"hidden",onChange:w})]})})]})}),f.jsxs("div",{className:"space-y-4",children:[x?f.jsx(x,{draft:t,onChange:a}):null,t.kind!=="custom"?f.jsx(zO,{draft:t,onChange:a}):null]})]})]})})]})}const PO=t=>{const r=t?.title??t?.label??t?.kind,a=String(r??"").trim();return a||"Voce"};function $O({open:t,row:r,items:a,onClose:i,onSave:o}){const[c,u]=E.useState({}),d=E.useMemo(()=>{const U={windows:[],persiane:[],tapparelle:[],zanzariere:[],cassonetti:[],custom:[]};return a.forEach(k=>{const Y=fw(k);Y&&(U[Y]=[...U[Y],k])}),U},[a]);E.useEffect(()=>{if(!t||!r)return;const U=xs(r?.surfaces),k={};U.forEach(Y=>{const re=new Set((d[Y.group]??[]).map(xe=>String(xe.id))),me=Y.itemIds?.filter(xe=>re.has(String(xe)))??[];k[Y.group]={mode:Y.mode,itemIds:Y.mode==="subset"?me:[]}}),u(k)},[t,r,d]),E.useEffect(()=>{u(U=>{const k={};return Object.entries(U).forEach(([Y,re])=>{const me=Y,xe=d[me]??[];if(xe.length!==0)if(re.mode==="subset"){const ee=new Set(xe.map(H=>String(H.id))),G=re.itemIds.filter(H=>ee.has(H));k[me]={mode:"subset",itemIds:G}}else k[me]=re}),k})},[d]);const p=E.useMemo(()=>mu.filter(U=>(d[U.id]?.length??0)>0),[d]),m=E.useMemo(()=>Object.entries(c).map(([U,k])=>({group:U,mode:k.mode,itemIds:k.itemIds})),[c]),v=E.useMemo(()=>xs(m),[m]),y=E.useMemo(()=>hw(v,a),[v,a]),x=E.useMemo(()=>{const U=new Map;return y.forEach(k=>U.set(k.id,k)),U},[y]),N=m.filter(U=>U.mode==="subset"&&(!U.itemIds||U.itemIds.length===0)).map(U=>U.group).length>0,S=U=>{const k=c[U];return k?k.mode:"none"},R=U=>c[U]?.itemIds??[],A=(U,k)=>{u(Y=>{const re={...Y};if(k==="none")return delete re[U],re;const me=re[U];return re[U]={mode:k==="all"?"all":"subset",itemIds:k==="subset"?me?.itemIds??[]:[]},re})},M=(U,k)=>{u(Y=>{const re=Y[U]??{mode:"subset",itemIds:[]};if(re.mode!=="subset")return Y;const xe=re.itemIds.includes(k)?re.itemIds.filter(ee=>ee!==k):[...re.itemIds,k];return{...Y,[U]:{mode:"subset",itemIds:xe}}})},L=()=>{o(v),i()};if(!t||!r)return null;const F=r.label?.trim()?r.label:"Voce senza titolo";return f.jsxs("div",{className:"fixed inset-0 z-50",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:i}),f.jsxs("div",{className:"absolute inset-x-0 top-10 mx-auto flex w-full max-w-4xl flex-col rounded-2xl bg-white p-5 shadow-2xl",children:[f.jsxs("div",{className:"flex items-start justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Metratura collegata"}),f.jsx("div",{className:"text-xl font-semibold text-gray-900",children:F})]}),f.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-800",onClick:i,children:"Chiudi"})]}),y.length>0?f.jsx("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:y.map(U=>f.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-100 bg-emerald-50 px-3 py-1 font-medium text-emerald-800",children:[f.jsx("span",{className:"text-emerald-900",children:Lc(U.mq)}),U.missingDimensions>0&&f.jsxs("span",{className:"text-[10px] text-amber-700",children:[" ",U.missingDimensions," senza dimensioni"]})]},U.id))}):f.jsx("div",{className:"mt-4 rounded-lg border border-dashed border-gray-300 bg-gray-50 px-3 py-2 text-xs text-gray-600",children:"Seleziona quali voci del preventivo contribuire devono contribuire alla metratura mostrata accanto a questa categoria."}),f.jsx("div",{className:"mt-4 space-y-4 overflow-y-auto pr-1",style:{maxHeight:"60vh"},children:p.length===0?f.jsx("div",{className:"rounded-lg border border-dashed border-gray-300 bg-white/80 px-4 py-6 text-center text-sm text-gray-500",children:"Nessuna voce del preventivo dispone di dimensioni per calcolare la metratura."}):p.map(U=>{const k=S(U.id),Y=R(U.id),re=d[U.id]??[],me=x.get(U.id),xe=k==="subset",ee=xe&&Y.length===0;return f.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[f.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-gray-900",children:U.label}),f.jsxs("div",{className:"text-xs text-gray-500",children:[re.length," voce",re.length===1?"":"i"," disponibili"]})]}),me&&f.jsx("div",{className:"text-xs font-semibold text-emerald-700",children:Lc(me.mq)})]}),f.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs font-medium",children:["none","all","subset"].map(G=>f.jsxs("button",{type:"button",className:`rounded-full border px-3 py-1 transition ${k===G?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 text-gray-600 hover:border-gray-300"}`,onClick:()=>A(U.id,G),children:[G==="none"&&"Nessuna",G==="all"&&"Tutte",G==="subset"&&"Seleziona voci"]},G))}),xe&&f.jsxs("div",{className:"mt-3 space-y-2",children:[re.map(G=>{const H=String(G.id),de=Y.includes(H),le=DO(G),P=uw(G),Z=Number(G?.qty??1);return f.jsxs("label",{className:`flex cursor-pointer items-center gap-3 rounded-lg border px-3 py-2 text-sm ${de?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:[f.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:de,onChange:()=>M(U.id,H)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:PO(G)}),f.jsxs("div",{className:"text-[11px] text-gray-500",children:[le??"Dimensioni mancanti",P>0&&`  ${Lc(P)}`]})]}),Z>1&&f.jsxs("span",{className:"text-[11px] text-gray-500",children:["x",Z]})]},H)}),ee&&f.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800",children:"Seleziona almeno una voce da includere."})]})]},U.id)})}),f.jsxs("div",{className:"mt-5 flex items-center justify-between border-t pt-3",children:[f.jsx("div",{className:"text-xs text-gray-500",children:y.length===0?"Nessuna metratura verr stampata per questa categoria.":"I valori includono quantit e dimensioni (in m)."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(_n,{variant:"outline",onClick:i,children:"Annulla"}),f.jsx(_n,{onClick:L,disabled:N,children:"Salva"})]})]})]})]})}function IO(t){const r=t.width_mm*t.height_mm/1e6;return Math.round(r*100)/100}function ci(t){return new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(t||0)}function FO({manualTotals:t,itemsArray:r,dragTotalId:a,piecesStr:i,amountStr:o,totalExcluded:c,hasDiscount:u,discountedTotal:d,discountMode:p,discountPct:m,discountFinal:v,showDiscountEditor:y,onAddRow:x,onUpdateRow:w,onRemoveRow:N,onMoveRow:S,onTotalDragStart:R,onTotalDragOver:A,onTotalDrop:M,onPiecesChange:L,onPiecesBlur:F,onAmountChange:U,onAmountBlur:k,onOpenSurfaceModal:Y,onToggleDiscountEditor:re,onSetDiscountMode:me,onSetDiscountPct:xe,onSetDiscountFinal:ee,onClearDiscount:G}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-between gap-2",children:[f.jsx("h2",{children:"Riepilogo costi"}),f.jsxs(_n,{variant:"ghost",onClick:x,children:[f.jsx(Ch,{size:16})," Aggiungi costo"]})]}),t.length===0?f.jsx("div",{className:"mt-4 rounded border border-dashed p-6 text-center text-sm text-gray-600",children:"Aggiungi le voci di costo per categoria (es. Finestre, Zanzariere, Montaggio)."}):f.jsx("div",{className:"mt-4 space-y-3",children:t.map(H=>{const de=hw(H.surfaces,r);return f.jsx("div",{className:`rounded-lg border p-3 bg-white/60 ${a===H.id?"ring-2 ring-gray-300":""}`,draggable:!0,onDragStart:le=>R(le,H.id),onDragOver:A,onDrop:le=>M(le,H.id),children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"cursor-grab text-gray-400 hover:text-gray-700",title:"Trascina per riordinare",children:f.jsx(tw,{size:16})}),f.jsx("input",{className:"input flex-1 min-w-0",placeholder:"Es. Finestre / Portoncino cantina / Montaggio",value:H.label,onChange:le=>w(H.id,{label:le.target.value})}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{type:"button",className:"h-9 w-9 shrink-0 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50","aria-label":"Sposta su",title:"Sposta su",onClick:()=>S(H.id,-1),children:f.jsx(Jb,{size:16})}),f.jsx("button",{type:"button",className:"h-9 w-9 shrink-0 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50","aria-label":"Sposta gi",title:"Sposta gi",onClick:()=>S(H.id,1),children:f.jsx(Zb,{size:16})}),f.jsx("button",{type:"button",className:"h-9 w-9 shrink-0 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50","aria-label":"Rimuovi riga",onClick:()=>N(H.id),title:"Rimuovi",children:f.jsx(fm,{size:16})})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-20",children:f.jsx("input",{className:"input w-full text-right",type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"pz.",value:i[H.id]??(typeof H.pieces=="number"?String(H.pieces):""),onChange:le=>L(H.id,le.target.value),onBlur:()=>F(H.id),onWheel:le=>le.currentTarget.blur(),onKeyDown:le=>{(le.key==="ArrowUp"||le.key==="ArrowDown")&&le.preventDefault()}})}),f.jsx("div",{className:"flex-1 sm:flex-none sm:w-40",children:f.jsx("input",{className:"input w-full text-right",type:"text",inputMode:"decimal",value:o[H.id]??(H.amount===0?"":String(H.amount)),onChange:le=>U(H.id,le.target.value),onBlur:()=>k(H.id),onWheel:le=>le.currentTarget.blur(),onKeyDown:le=>{(le.key==="ArrowUp"||le.key==="ArrowDown")&&le.preventDefault()},placeholder:"0,00"})}),f.jsx("span",{className:"hidden sm:inline text-sm text-gray-500",children:""})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-md border border-dashed border-gray-200 bg-white/70 px-3 py-2 text-xs",children:[f.jsx("div",{className:"flex flex-1 flex-wrap items-center gap-1.5",children:de.length===0?f.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-[11px] text-gray-500",children:"Nessuna metratura collegata"}):de.map(le=>f.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-gray-200 bg-gray-50 px-2 py-0.5 font-medium text-gray-700",children:[f.jsx("span",{className:"text-gray-900",children:Lc(le.mq)}),le.missingDimensions>0&&f.jsxs("span",{className:"text-[10px] text-amber-700",children:[" ",le.missingDimensions," senza dimensioni"]})]},`${H.id}-${le.id}`))}),f.jsx("button",{type:"button",className:"text-xs font-medium text-emerald-700 hover:text-emerald-900",onClick:()=>Y(H.id),children:"Configura metratura"})]})]})},H.id)})}),f.jsx("div",{className:"mt-3",children:f.jsxs("button",{type:"button",className:"w-full inline-flex items-center justify-center gap-2 rounded-md border border-dashed px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-50",onClick:x,children:[f.jsx(Ch,{size:16})," Aggiungi costo"]})}),f.jsxs("div",{className:"mt-4 border-t pt-3 space-y-2 relative",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm text-gray-600",children:"Totale (IVA esclusa)"}),f.jsxs("div",{className:"flex items-center gap-2",children:[u?f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-sm text-gray-500 line-through",children:ci(c)}),f.jsx("div",{className:"text-[11px] text-gray-500",children:p==="pct"?`Sconto ${m}%`:"Totale impostato manualmente"})]}):f.jsx("div",{className:"text-xl font-semibold",children:ci(c)}),f.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-md border px-2.5 py-1.5 text-sm hover:bg-gray-50",onClick:re,title:"Applica sconto",children:[f.jsx(sM,{size:14})," Sconto"]})]})]}),y&&f.jsxs("div",{className:"absolute right-0 mt-2 w-80 rounded-lg border bg-white p-3 shadow-lg z-10",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-sm font-medium",children:"Imposta sconto"}),f.jsx("button",{className:"text-gray-500 hover:text-gray-800",onClick:re,children:f.jsx(nw,{size:16})})]}),f.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[f.jsx("button",{className:`rounded-md border px-2 py-1.5 ${p==="pct"?"bg-gray-900 text-white":"hover:bg-gray-50"}`,onClick:()=>me("pct"),children:"In percentuale"}),f.jsx("button",{className:`rounded-md border px-2 py-1.5 ${p==="final"?"bg-gray-900 text-white":"hover:bg-gray-50"}`,onClick:()=>me("final"),children:"Sul totale"})]}),p==="pct"?f.jsxs("div",{className:"mt-3",children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Sconto (%)"}),f.jsx("input",{className:"input w-full",type:"number",min:0,max:100,step:"0.5",value:m??"",onChange:H=>xe(H.target.value===""?null:Number(H.target.value))}),f.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["Nuovo totale: ",f.jsx("b",{children:ci(Math.max(0,c*(1-(m??0)/100)))})]})]}):f.jsxs("div",{className:"mt-3",children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Nuovo totale (IVA esclusa)"}),f.jsx("input",{className:"input w-full",type:"number",min:0,step:"0.01",value:v??"",onChange:H=>ee(H.target.value===""?null:Number(H.target.value))})]}),f.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[f.jsx("button",{className:"text-sm text-red-600 hover:underline",onClick:G,children:"Rimuovi sconto"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(_n,{variant:"outline",onClick:re,children:"Annulla"}),f.jsx(_n,{onClick:re,children:"Applica"})]})]})]}),u&&f.jsxs("div",{className:"flex items-center justify-between rounded-md px-3 py-2",style:{background:"#e8f7ec"},children:[f.jsx("div",{className:"text-sm font-medium text-gray-800",children:"Totale scontato (IVA esclusa)"}),f.jsx("div",{className:"text-xl font-bold",children:ci(d)})]})]})]})}function HO({item:t,position:r,onEdit:a,onDuplicate:i,onRemove:o}){const c=hu[t.kind],u=t.kind==="custom",d=/^(finestra|portafinestra|scorrevole|tapparella|persiana|cassonetto)$/i.test(String(t.kind)),p=t.__previewUrl,m=t.image_url,v=p||m||c?.icon,y=typeof t.title=="string"?t.title.trim():"",x=y||(u?"(Senza titolo)":c?.label??String(t.kind).toUpperCase());return f.jsx("div",{className:"card p-3",children:f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[f.jsxs("div",{className:"relative w-[88px] h-[88px] sm:w-[110px] sm:h-[110px] shrink-0 rounded border bg-white flex items-center justify-center",children:[f.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-5 h-5 rounded bg-gray-100 text-gray-500 text-[10px] font-medium flex items-center justify-center border border-gray-200",children:r}),t.kind==="finestra"&&t?.options?.gridWindow?f.jsx(pm,{cfg:t.options.gridWindow,stroke:t.options?.gridWindow?.frame_color??t.color??"#222"}):t.kind==="cassonetto"?f.jsx(gm,{cfg:{width_mm:t.width_mm??1e3,height_mm:t.height_mm??250,depth_mm:t.depth_mm??null,celino_mm:t.celino_mm??t.extension_mm??null,color:t.options?.previewColor}}):t.kind==="persiana"?f.jsx(vm,{cfg:{width_mm:t.width_mm??1e3,height_mm:t.height_mm??1400,ante:t.ante??2,color:t.options?.previewColor}}):t.kind==="tapparella"?f.jsx(ym,{cfg:{width_mm:t.width_mm??1e3,height_mm:t.height_mm??1400,color:t.options?.previewColor}}):v?f.jsx("img",{src:v,alt:x,loading:"lazy",className:"max-w-[80%] max-h-[80%] object-contain"}):null,!d&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute bottom-1 left-0 right-0 text-center text-[11px] text-gray-700",children:typeof t.width_mm=="number"?`${t.width_mm} mm`:""}),f.jsx("div",{className:"absolute top-0 bottom-0 left-1 flex items-center",children:f.jsx("div",{className:"-rotate-90 origin-left text-[11px] text-gray-700",children:typeof t.height_mm=="number"?`${t.height_mm} mm`:""})})]})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:["                        ",f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"font-medium truncate",children:x}),t.reference&&f.jsx("div",{className:"text-xs text-gray-500 mt-0.5 truncate",children:t.reference})]}),f.jsxs("div",{className:"flex items-center gap-1 md:gap-3",children:[f.jsx("div",{className:"text-sm text-gray-600 whitespace-nowrap",children:t.width_mm&&t.height_mm?`${t.qty}  ${IO(t)} m`:`${t.qty}`}),f.jsx(_n,{variant:"ghost","aria-label":"Modifica",title:"Modifica",onClick:()=>a(t),children:f.jsx(EM,{size:16})}),f.jsx(_n,{variant:"ghost","aria-label":"Duplica",title:"Duplica",onClick:()=>i(t.id),children:f.jsx(ew,{size:16})}),f.jsx(_n,{variant:"ghost","aria-label":"Rimuovi voce",title:"Rimuovi voce",onClick:()=>o(t.id),children:f.jsx(fm,{size:16})})]})]}),f.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-1 text-sm text-gray-700",children:[(typeof t.width_mm=="number"||typeof t.height_mm=="number")&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Misure:"})," ",typeof t.width_mm=="number"&&typeof t.height_mm=="number"?f.jsxs(f.Fragment,{children:["L ",t.width_mm,"  H ",t.height_mm," mm"]}):typeof t.width_mm=="number"?f.jsxs(f.Fragment,{children:["L ",t.width_mm," mm"]}):f.jsxs(f.Fragment,{children:["H ",t.height_mm," mm"]})]}),t.color&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Colore:"})," ",t.color]}),t.glass&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Vetro:"})," ",t.glass]}),t.hinges_color&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Cerniere:"})," ",t.hinges_color]}),typeof t.uw=="number"&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Uw (trasmittanza termica):"})," ",t.uw," W/mK"]}),t.kind==="zanzariera"&&f.jsxs(f.Fragment,{children:[t.modello&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Modello:"})," ",t.modello]}),t.tipologia&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Tipologia:"})," ",t.tipologia]}),(t.rete_colore||t.mesh)&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Colore rete:"})," ",t.rete_colore??t.mesh]})]}),t.kind==="finestra"&&t.profile_system&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Sistema profilo:"})," ",t.profile_system]}),t.kind==="cassonetto"&&f.jsxs(f.Fragment,{children:[t.material&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Materiale:"})," ",t.material]}),t.depth_mm&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Profondit:"})," ",t.depth_mm," mm"]}),t.celino_mm&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Celino:"})," ",t.celino_mm," mm"]})]}),t.kind==="persiana"&&f.jsxs(f.Fragment,{children:[t.material&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Materiale:"})," ",t.material]}),t.lamelle&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Lamelle:"})," ",t.lamelle]}),typeof t.con_telaio<"u"&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Telaio:"})," ",t.con_telaio?"Con telaio":"Senza telaio"]}),t.color&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Colore:"})," ",t.color]})]}),t.kind==="tapparella"&&f.jsxs(f.Fragment,{children:[t.material&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Materiale:"})," ",t.material]}),t.color&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Colore:"})," ",t.color]}),t.width_mm&&t.height_mm&&f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Dimensioni:"})," ",t.width_mm,"",t.height_mm," mm"]})]}),Array.isArray(t.custom_fields)&&t.custom_fields.map((w,N)=>{const S=(w?.label??w?.name??w?.key??"").toString().trim(),R=(w?.value??"").toString().trim();return!S||!R?null:f.jsxs("div",{children:[f.jsxs("span",{className:"text-gray-500",children:[S,":"]})," ",R]},w?.key??`${S}-${R}-${N}`)})]})]})]})})}function qO({itemsArray:t,onOpenPicker:r,onItemDragStart:a,onItemDragOver:i,onItemDrop:o,onMoveItemRow:c,onEditItem:u,onDuplicateItem:d,onRemoveItem:p}){return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{children:"Voci del preventivo"}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(_n,{variant:"ghost",onClick:r,children:[f.jsx(Ch,{size:16})," Aggiungi voce"]})})]}),t.length===0?f.jsxs("div",{className:"mt-4 rounded border border-dashed p-6 text-center text-sm text-gray-600",children:["Nessuna voce. Premi ",f.jsx("span",{className:"font-medium",children:"Aggiungi"})," e scegli la categoria."]}):f.jsx("div",{className:"mt-4 space-y-3",children:t.map((m,v)=>f.jsxs("div",{className:"relative group rounded-lg",draggable:!0,onDragStart:y=>a(y,m.id),onDragOver:i,onDrop:y=>o(y,m.id),children:[f.jsx("div",{className:"absolute -left-6 top-3 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab text-gray-400 hover:text-gray-700",title:"Trascina per riordinare",children:f.jsx(tw,{size:16})}),f.jsxs("div",{className:"absolute -right-6 top-3 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{type:"button",className:"h-8 w-8 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50",title:"Sposta su",onClick:()=>c(m.id,-1),children:f.jsx(Jb,{size:16})}),f.jsx("button",{type:"button",className:"h-8 w-8 inline-flex items-center justify-center rounded-md border bg-white hover:bg-gray-50",title:"Sposta gi",onClick:()=>c(m.id,1),children:f.jsx(Zb,{size:16})})]}),f.jsx(HO,{item:m,position:v+1,onEdit:u,onDuplicate:d,onRemove:p})]},m.id))})]})}function GO({quote:t,saving:r,hasDiscount:a,totalExcluded:i,discountedTotal:o,discountMode:c,discountPct:u,onBackClick:d,onStatusChange:p,onOpenPdf:m,onDuplicate:v}){return f.jsxs("div",{className:"flex items-start justify-between gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs(eu,{to:"/",onClick:d,className:"inline-flex items-center gap-1 text-sm text-gray-600 hover:text-gray-900",children:[f.jsx(rM,{size:16})," Indietro"]}),f.jsxs("h1",{children:[t.number," ",f.jsxs("span",{className:"text-gray-500 font-normal",children:[" ",t.customer_name??""]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("select",{className:"input !py-1 !h-7 w-25 text-sm",value:t.status,onChange:y=>p(y.target.value),children:[f.jsx("option",{value:"bozza",children:"Bozza"}),f.jsx("option",{value:"inviato",children:"Inviato"}),f.jsx("option",{value:"accettato",children:"Accettato"}),f.jsx("option",{value:"rifiutato",children:"Rifiutato"}),f.jsx("option",{value:"scaduto",children:"Scaduto"})]}),t.created_at&&f.jsxs("span",{className:"text-sm text-gray-500",children:["Creato ",new Date(t.created_at).toLocaleString()]}),r&&f.jsx("span",{className:"text-xs text-gray-500",children:"Salvataggio"})]})]}),f.jsxs("div",{className:"text-right space-y-2",children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Totale documento (IVA esclusa)"}),a?f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-sm text-gray-500 line-through",children:ci(i)}),f.jsx("div",{className:"text-2xl font-bold tracking-tight",children:ci(o)}),c==="pct"&&f.jsxs("div",{className:"text-xs text-gray-600",children:["Sconto ",u,"%"]})]}):f.jsx("div",{className:"text-2xl font-bold tracking-tight",children:ci(i)}),f.jsxs("div",{className:"flex items-center justify-end gap-2",children:[f.jsxs(_n,{className:"bg-gray-800 text-white hover:bg-gray-900",onClick:m,children:[f.jsx(pM,{size:16})," PDF"]}),f.jsxs(_n,{variant:"outline",onClick:v,children:[f.jsx(ew,{size:16})," Duplica"]})]})]})]})}const VO="/preventivatore/assets/alumil-s77-CN26bkCK.png",YO="/preventivatore/assets/wds-76-md-DyI19aQb.jpg",KO="/preventivatore/assets/wds-76-ad-CK_BxW3b.jpg",WO="/preventivatore/assets/WDS%2070%20doppio%20vetro-CcTlz0h6.jpg",XO="/preventivatore/assets/WDS%2076%20AD%20doppio%20vetro-uG3m0Rjg.jpeg",QO="/preventivatore/assets/wds%2076%20md%20doppio%20vetro%20sfondo%20bianco-CLLeKKql.jpg",ZO="/preventivatore/assets/x-premium-76-porte-CAjDrTnu.jpg",JO="/preventivatore/assets/x-premium-76-scorrevole-D-CVdKa2.jpg",eD="/preventivatore/assets/x-ultra-70-BXe1-Exm.jpg",tD="/preventivatore/assets/x-ultra-60-BLW8bv_l.jpg",$t=(t,r,a)=>({id:crypto.randomUUID(),eyebrow:t,title:r,description:a}),Uy=[{key:"alumil-s77",label:"Alumil S77",imageUrl:VO,features:[$t("Modello","Alumil S77","Sistema in alluminio per la massima performance."),$t("Profondit telaio","77 mm","Garantisce alta stabilit e isolamento."),$t("Guarnizioni","3","Tripla guarnizione per elevata tenuta allaria, acqua e rumore."),$t("Taglio termico","Caldo","Riduce la dispersione termica e acustica.")]},{key:"wds-76-md",label:"WDS 76 MD",imageUrl:YO,imageUrlDouble:QO,features:[$t("Modello","WDS 76 MD","Profilo in PVC Premium"),$t("Larghezza profilo","76 mm","Struttura robusta per serramenti moderni."),$t("Numero camere","6","Ottimo isolamento termico e acustico."),$t("Numero guarnizioni","3","Tenuta efficace ad aria e acqua.")]},{key:"wds-76-ad",label:"WDS 76 AD",imageUrl:KO,imageUrlDouble:XO,features:[$t("Modello","WDS 76 AD","Profilo in PVC Premium"),$t("Larghezza profilo","76 mm","Soluzione versatile e conveniente."),$t("Numero camere","5","Buon isolamento termico."),$t("Numero guarnizioni","2","Protezione dagli agenti atmosferici.")]},{key:"x-premium-76-porte",label:"X Premium 76 Porte",imageUrl:ZO,features:[$t("Modello","X Premium 76 Porte","Profilo per porte in PVC."),$t("Larghezza profilo","76 mm","Rigidit adeguata per portoncini."),$t("Numero camere","4","Equilibrio tra peso e isolamento."),$t("Numero guarnizioni","2","Chiusura affidabile.")]},{key:"x-premium-76-scorrevole",label:"X Premium 76 Scorrevole",imageUrl:JO,features:[$t("Modello","X Premium 76 Scorrevole","Profilo per sistemi scorrevoli."),$t("Larghezza profilo","146 mm","Struttura maggiorata per scorrevoli."),$t("Larghezza anta","76 mm","Modulo anta standard."),$t("Camere nellanta","5","Rigidezza e isolamento.")]},{key:"x-ultra-70",label:"X Ultra 70",imageUrl:eD,imageUrlDouble:WO,features:[$t("Modello","X Ultra 70","Finestra in PVC ad alte prestazioni."),$t("Larghezza profilo","70 mm","Compatta e isolante."),$t("Numero camere","5","Buon isolamento termico."),$t("Numero guarnizioni","2","Tenuta efficace.")]},{key:"x-ultra-60",label:"X Ultra 60",imageUrl:tD,features:[$t("Modello","X Ultra 60","Soluzione entry con ottimo rapporto qualit/prezzo."),$t("Larghezza profilo","60 mm","Profilo snello."),$t("Numero camere","3","Isolamento essenziale."),$t("Numero guarnizioni","2","Protezione dagli agenti atmosferici.")]}],ih=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"id-"+Math.random().toString(36).slice(2)+Date.now().toString(36);function nD(...t){return t.filter(Boolean).join(" ")}function rD(){const[t,r]=E.useState(!1),[a,i]=E.useState(null),[o,c]=E.useState(null),u=On(ee=>ee.profileOverview),d=On(ee=>ee.setProfileOverview),p=On(ee=>ee.addPOFeature),m=On(ee=>ee.updatePOFeature),v=On(ee=>ee.removePOFeature),y=On(ee=>ee.movePOFeature),x=On(ee=>ee?.quote?.id)||"profile-overview",w=u?.imageUrl??null,N=u?.features??[],S=a?Uy.find(ee=>ee.key===a):null,R=o==="doppio"?"Doppio vetro":o==="triplo"?"Triplo vetro":null,A=E.useRef(null),M=()=>u??{imageUrl:null,features:[]};function L(ee,G){return G==="doppio"?ee.imageUrlDouble??ee.imageUrl??null:ee.imageUrlTriple??ee.imageUrl??null}function F(ee,G){const de=(ee.features||[]).map(P=>({...P,id:ih()})).filter(P=>{const Z=String(P.eyebrow||"").toLowerCase(),se=String(P.title||"").toLowerCase();return!(Z.includes("vetro")||se.includes("vetro"))}),le=L(ee,G);d?.({imageUrl:le,features:de}),i(ee?.key??null),c(G)}const U=()=>{const ee={id:ih(),eyebrow:"",title:"",description:""};if(p)p(ee);else{const G=M();d?.({...G,features:[...N,ee]})}},k=(ee,G,H)=>{if(m)m(ee,{[G]:H});else{const de=M();d?.({...de,features:N.map(le=>le.id===ee?{...le,[G]:H}:le)})}},Y=ee=>{if(v)v(ee);else{const G=M();d?.({...G,features:N.filter(H=>H.id!==ee)})}},re=(ee,G)=>{if(y){y(ee,G);return}const H=N.findIndex(se=>se.id===ee);if(H===-1)return;const de=H+G;if(de<0||de>=N.length)return;const le=[...N],[P]=le.splice(H,1);le.splice(de,0,P);const Z=M();d?.({...Z,features:le})},me=ee=>{const G=M();d?.({...G,imageUrl:ee})},xe=async ee=>{try{const G=await kc(ee,String(x));if(G){me(G),A.current&&(A.current.value="");return}const H=new FileReader;H.onload=de=>{me(String(de.target?.result||"")),A.current&&(A.current.value="")},H.readAsDataURL(ee)}catch{const G=new FileReader;G.onload=H=>{me(String(H.target?.result||"")),A.current&&(A.current.value="")},G.readAsDataURL(ee)}};return f.jsxs(Ua,{className:"w-full md:col-span-2",children:[f.jsxs("button",{type:"button",onClick:()=>r(ee=>!ee),className:"w-full flex items-center justify-between gap-3 group","aria-expanded":t,children:[f.jsxs("div",{className:"text-left",children:[f.jsx("h2",{className:"text-lg font-semibold",children:"Panoramica profilo"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Aggiungi unimmagine e le caratteristiche del sistema. Le voci saranno impaginate automaticamente a due colonne."})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-gray-500 hidden sm:inline",children:N.length>0?`${N.length} caratteristiche`:"Nessuna caratteristica"}),f.jsx("span",{className:`inline-block transition-transform duration-200 ${t?"rotate-180":""}`,"aria-hidden":!0,children:""})]})]}),!t&&(w||S||R)&&f.jsxs("div",{className:"mt-3 rounded-lg border bg-white/60 p-3 flex items-center gap-3",children:[f.jsx("div",{className:"h-12 w-16 shrink-0 rounded-md border bg-white flex items-center justify-center overflow-hidden",children:w?f.jsx("img",{src:w,alt:"Profilo selezionato",className:"h-full w-full object-contain"}):f.jsx("div",{className:"h-full w-full bg-gradient-to-br from-gray-50 to-gray-100"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"text-sm font-semibold truncate",children:S?.label??"Profilo personalizzato"}),R&&f.jsx("div",{className:"text-xs text-gray-500",children:R})]})]}),t&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-base",children:"Modelli rapidi"}),f.jsx("p",{className:"text-xs text-gray-500",children:"Scegli un profilo e il vetro: limmagine si aggiorna subito."})]}),f.jsxs("button",{type:"button",onClick:()=>{const ee={imageUrl:null,features:[{id:ih(),eyebrow:"",title:"",description:""}]};d?.(ee)},className:"inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold text-emerald-700 hover:text-emerald-800 hover:border-emerald-300 hover:bg-emerald-50 transition",children:[f.jsx("span",{className:"text-sm",children:""})," Nuovo modello"]})]}),f.jsxs("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[f.jsxs("button",{type:"button",onClick:()=>{d?.(null),r(!1),i(null),c(null)},className:"group rounded-xl border bg-white hover:shadow-md transition text-left focus:outline-none focus:ring-2 focus:ring-emerald-500/40",title:"Nessuna",children:[f.jsx("div",{className:"h-24 w-full bg-white flex items-center justify-center p-3 border-b rounded-t-xl",children:f.jsx("div",{className:"h-full w-full bg-[repeating-linear-gradient(45deg,#f3f4f6,#f3f4f6_6px,#ffffff_6px,#ffffff_12px)] rounded-lg"})}),f.jsxs("div",{className:"px-3 py-3",children:[f.jsx("div",{className:"text-xs font-semibold truncate",children:"Nessuna"}),f.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Svuota sezione"})]})]}),Uy.map(ee=>{const G=ee.imageUrl||"";return f.jsxs("div",{className:"group rounded-xl border bg-white hover:shadow-md transition text-left focus-within:ring-2 focus-within:ring-emerald-500/40 "+(a===ee.key?"border-emerald-500 ring-1 ring-emerald-300/70":""),children:[f.jsx("div",{className:"h-24 w-full bg-white flex items-center justify-center p-3 border-b rounded-t-xl",children:G?f.jsx("img",{src:G,alt:ee.label,className:"max-h-full max-w-full object-contain"}):f.jsx("div",{className:"h-full w-full bg-gradient-to-br from-gray-50 to-gray-100"})}),f.jsxs("div",{className:"px-3 py-3",children:[f.jsx("div",{className:"text-xs font-semibold truncate",children:ee.label}),f.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Seleziona vetro"}),f.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[f.jsx("button",{type:"button",onClick:()=>F(ee,"doppio"),className:"text-[11px] font-semibold rounded-lg border px-2 py-1.5 transition "+(a===ee.key&&o==="doppio"?"bg-emerald-600 text-white border-emerald-600":"hover:bg-emerald-50 hover:border-emerald-300"),title:"Doppio vetro",children:"2x vetro"}),f.jsx("button",{type:"button",onClick:()=>F(ee,"triplo"),className:"text-[11px] font-semibold rounded-lg border px-2 py-1.5 transition "+(a===ee.key&&o==="triplo"?"bg-emerald-600 text-white border-emerald-600":"hover:bg-emerald-50 hover:border-emerald-300"),title:"Triplo vetro",children:"3x vetro"})]})]})]},ee.key)})]})]}),f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Immagine superiore"}),w?f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:w,alt:"Anteprima",className:"rounded-lg border shadow-sm max-h-60 w-full object-contain bg-white"}),f.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[f.jsx(_n,{variant:"ghost",onClick:()=>A.current?.click(),children:"Sostituisci"}),f.jsx(_n,{variant:"ghost",onClick:()=>me(null),children:"Rimuovi"}),f.jsx("span",{className:"hidden sm:inline h-4 w-px bg-gray-300"}),f.jsx("span",{className:"text-xs text-gray-500",children:"PNG / JPG consigliati  max 46MB"}),f.jsx("input",{ref:A,className:"hidden",type:"file",accept:"image/*",onChange:ee=>{const G=ee.target.files?.[0];G&&xe(G)}})]})]}):f.jsxs("div",{className:nD("border border-dashed rounded-lg p-6 text-center","text-gray-500 bg-gray-50 hover:bg-gray-100 transition cursor-pointer"),role:"button",tabIndex:0,onClick:()=>A.current?.click(),onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&(ee.preventDefault(),A.current?.click())},onDragOver:ee=>{ee.preventDefault(),ee.stopPropagation()},onDrop:ee=>{ee.preventDefault();const G=ee.dataTransfer.files?.[0];G&&xe(G)},children:[f.jsx("div",{className:"text-[15px] sm:text-sm",children:"Trascina unimmagine qui o clicca per caricarla"}),f.jsx("input",{ref:A,className:"hidden",type:"file",accept:"image/*",onChange:ee=>{const G=ee.target.files?.[0];G&&xe(G)}})]})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"font-medium",children:"Caratteristiche"}),f.jsx("div",{className:"sm:hidden",children:f.jsx(_n,{variant:"ghost",onClick:U,children:"+ Aggiungi"})})]}),N.length===0&&f.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Nessuna caratteristica aggiunta. Clicca Aggiungi per iniziare."}),f.jsx("div",{className:"mt-2 space-y-1.5",children:N.map((ee,G)=>f.jsxs("div",{className:"rounded-md border p-1.5 bg-gray-50/50",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsxs("div",{className:"text-xs text-gray-500",children:["Voce #",G+1]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{className:"text-[11px] text-gray-500 hover:text-gray-700",onClick:()=>re(ee.id,-1),title:"Sposta su",children:""}),f.jsx("button",{className:"text-[11px] text-gray-500 hover:text-gray-700",onClick:()=>re(ee.id,1),title:"Sposta gi",children:""}),f.jsx("button",{className:"text-[11px] text-red-600 hover:underline",onClick:()=>Y(ee.id),title:"Rimuovi voce",children:"Rimuovi"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_1fr_2fr] gap-2 items-center",children:[f.jsx("label",{className:"sr-only",htmlFor:`po-eyebrow-${ee.id}`,children:"Eyebrow"}),f.jsx("input",{id:`po-eyebrow-${ee.id}`,className:"input text-sm",placeholder:"Eyebrow",value:ee.eyebrow,onChange:H=>k(ee.id,"eyebrow",H.target.value)}),f.jsx("label",{className:"sr-only",htmlFor:`po-title-${ee.id}`,children:"Titolo"}),f.jsx("input",{id:`po-title-${ee.id}`,className:"input text-sm font-semibold",placeholder:"Titolo",value:ee.title,onChange:H=>k(ee.id,"title",H.target.value)}),f.jsx("label",{className:"sr-only",htmlFor:`po-desc-${ee.id}`,children:"Descrizione"}),f.jsx("textarea",{id:`po-desc-${ee.id}`,className:"input text-sm h-9 resize-none",placeholder:"Descrizione breve",value:ee.description,onChange:H=>k(ee.id,"description",H.target.value),rows:1})]})]},ee.id))})]}),N.length>0&&f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"font-medium mb-2",children:"Anteprima"}),w&&f.jsx("img",{src:w,alt:"Anteprima sezione",className:"rounded-md border bg-white w-full max-h-40 object-contain mb-3"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:N.map(ee=>f.jsxs("div",{className:"pb-4",children:[ee.eyebrow&&f.jsx("div",{className:"text-[12px] text-gray-500 mb-1",children:ee.eyebrow}),ee.title&&f.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight mb-2",children:ee.title}),ee.description&&f.jsx("div",{className:"text-gray-600 leading-snug text-[14px]",children:ee.description}),f.jsx("div",{className:"h-[2px] bg-emerald-500 mt-4"})]},`preview-${ee.id}`))})]})]})]})}function aD({quote:t,piva:r,defaultInstallTime:a,updateField:i,onPivaChange:o,parseNotesMap:c,setNoteKey:u}){return f.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[f.jsxs(Ua,{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Cliente"}),f.jsxs("div",{className:"inline-flex rounded-md border bg-white overflow-hidden",children:[f.jsxs("button",{type:"button",className:`px-3 py-1.5 text-sm ${(t.customer_type??"privato")==="privato"?"bg-gray-900 text-white":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>i("customer_type","privato"),children:[f.jsx(TM,{size:14})," Privato"]}),f.jsxs("button",{type:"button",className:`px-3 py-1.5 text-sm border-l ${(t.customer_type??"privato")==="azienda"?"bg-gray-900 text-white":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>i("customer_type","azienda"),children:[f.jsx(lM,{size:14})," Azienda"]})]})]}),(t.customer_type??"privato")==="privato"?f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Nome e cognome"}),f.jsx("input",{className:"input",placeholder:"Nome cliente",value:t.customer_name??"",onChange:d=>i("customer_name",d.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Email"}),f.jsx("input",{className:"input",placeholder:"email@esempio.it",value:t.customer_email??"",onChange:d=>i("customer_email",d.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Telefono"}),f.jsx("input",{className:"input",placeholder:"es. 333 1234567",value:t.customer_phone??"",onChange:d=>i("customer_phone",d.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Indirizzo lavori"}),f.jsx("input",{className:"input",placeholder:"Via, n, citt",value:t.job_address??"",onChange:d=>i("job_address",d.target.value||null)})]})]}):f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Ragione sociale"}),f.jsx("input",{className:"input",placeholder:"Nome azienda",value:t.customer_name??"",onChange:d=>i("customer_name",d.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"P.IVA"}),f.jsx("input",{className:"input",placeholder:"es. IT01234567890",value:r,onChange:d=>o(d.target.value)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Email"}),f.jsx("input",{className:"input",placeholder:"email@azienda.it",value:t.customer_email??"",onChange:d=>i("customer_email",d.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Telefono"}),f.jsx("input",{className:"input",placeholder:"es. 02 1234567",value:t.customer_phone??"",onChange:d=>i("customer_phone",d.target.value||null)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Indirizzo lavori"}),f.jsx("input",{className:"input",placeholder:"Via, n, citt",value:t.job_address??"",onChange:d=>i("job_address",d.target.value||null)})]})]})]}),f.jsxs(Ua,{children:[f.jsx("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Dati documento"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Data emissione"}),f.jsx("input",{type:"date",className:"input",value:t.issue_date??"",onChange:d=>i("issue_date",d.target.value)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Termine di completamento"}),f.jsx("input",{className:"input",placeholder:"es. 6-8 settimane",value:t.install_time??a,onChange:d=>i("install_time",d.target.value||a)})]}),f.jsxs("div",{children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Validit offerta (giorni)"}),f.jsx("input",{className:"input",type:"number",min:1,value:t.validity_days??15,onChange:d=>{const p=d.target.value===""?15:Math.max(1,parseInt(d.target.value||"15",10));i("validity_days",p)}})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Mostra totale IVA inclusa"}),f.jsx("div",{className:"flex items-center gap-2",children:(()=>{const d=c(t?.notes),p=d.SHOW_TOTAL_INCL==="true",m=d.VAT_PERCENT??String(t.vat??"22");return f.jsxs(f.Fragment,{children:[f.jsx("input",{id:"show_total_incl",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-emerald-600",checked:p,onChange:v=>u("SHOW_TOTAL_INCL",v.target.checked?"true":"false")}),f.jsx("input",{type:"number",className:"input w-24",min:0,max:100,value:m,onChange:v=>{const y=v.target.value===""?null:Math.max(0,Math.min(100,Number(v.target.value)));u("VAT_PERCENT",y==null?null:String(y))}})]})})()})]})]}),f.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 pt-1",children:[f.jsx("input",{id:"shipping_included",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:t.shipping_included!==!1,onChange:d=>i("shipping_included",d.target.checked)}),f.jsx("label",{htmlFor:"shipping_included",className:"text-sm text-gray-600",children:"Mostra Trasporto incluso nel PDF"})]})]})]}),f.jsx(rD,{})]})}const zy="6-8 settimane",iD={id:"privato",label:"Termini standard",tagline:"",summary:"",validityTemplate:"VALIDITA' OFFERTA: {days} GG DALLA PRESENTE",notesIntro:"Note del cliente (termini particolari o richieste specifiche).",paymentPlan:[],sections:[],privacy:{title:"Privacy e trattamento dei dati",body:[]}},sD=()=>({id:crypto.randomUUID(),label:"",amount:0,pieces:null}),oD=t=>{const r=typeof t?.id=="string"?t.id:crypto.randomUUID(),a=typeof t?.label=="string"?t.label:"",i=Number(t?.amount),o=Number.isFinite(i)?i:0,c=typeof t?.pieces=="number"&&Number.isFinite(t.pieces)?t.pieces:null,u=xs(t?.surfaces),d={id:r,label:a,amount:o,pieces:c};return u.length>0&&(d.surfaces=u),d},lD=t=>Array.isArray(t)?t.map(oD):[];function ai(t){return new Promise((r,a)=>{const i=new FileReader;i.onload=()=>r(String(i.result)),i.onerror=o=>a(o),i.readAsDataURL(t)})}function By(t,r){const[a,i]=t.split(",");if(!a||!i)throw new Error("URL dati dell'immagine non valido");const c=a.match(/data:(.*?)(;base64)?$/i)?.[1]??"application/octet-stream",u=atob(i),d=new Uint8Array(u.length);for(let m=0;m<u.length;m+=1)d[m]=u.charCodeAt(m);if(typeof File=="function")return new File([d],r,{type:c});const p=new Blob([d],{type:c});return p.name=r,p}function cD(){const{id:t}=mE(),r=Fh(),[a,i]=E.useState(null),[o,c]=E.useState(null),[u,d]=E.useState(!1),[p,m]=E.useState([]),[v,y]=E.useState(null),x=v?p.find(C=>C.id===v)??null:null,w=()=>m(C=>[...C,sD()]),N=(C,B)=>m(K=>K.map(X=>{if(X.id!==C)return X;const ye={...X,...B};if(Object.prototype.hasOwnProperty.call(B,"surfaces")){const ge=xs(B?.surfaces);ge.length>0?ye.surfaces=ge:delete ye.surfaces}return ye})),S=C=>m(B=>B.filter(K=>K.id!==C)),[R,A]=E.useState({}),[M,L]=E.useState({});E.useEffect(()=>{const C={},B={};p.forEach(K=>{C[K.id]=typeof K.pieces=="number"&&isFinite(K.pieces)?String(K.pieces):"",B[K.id]=typeof K.amount=="number"&&isFinite(K.amount)&&K.amount!==0?String(K.amount):""}),A(C),L(B)},[p]);const F=(C,B)=>{(B===""||/^\d+$/.test(B))&&A(K=>({...K,[C]:B}))},U=C=>{const B=R[C]??"",K=B===""?null:Math.max(0,parseInt(B||"0",10));N(C,{pieces:K}),A(X=>({...X,[C]:B===""?"":String(K)}))},k=C=>C.replace(",","."),Y=(C,B)=>{if(B===""){L(K=>({...K,[C]:""}));return}/^\d+([.,]\d{0,2})?$/.test(B)&&L(K=>({...K,[C]:B}))},re=C=>{const B=M[C]??"";if(B===""){N(C,{amount:0}),L(ge=>({...ge,[C]:""}));return}const K=Number(k(B)),X=Number.isFinite(K)?Math.max(0,K):0;N(C,{amount:X});const ye=/[.,]/.test(B);L(ge=>({...ge,[C]:ye?X.toFixed(2).replace(".",","):String(X)}))},[me,xe]=E.useState("");E.useEffect(()=>{if(!a)return;const B=(a.notes||"").match(/P\.IVA:\s*([^;]+)(;|$)/i);if(B){const K=B[1].trim();K!==me&&xe(K)}},[a?.id]);function ee(C){de("P.IVA",C||null)}function G(C){const B={};if(!C)return B;const K=C.split(";").map(X=>X).filter(X=>X.trim());for(const X of K){const ye=X.match(/^([^:]+)\s*:\s*([\s\S]+)$/);if(ye){const Ae=ye[1].trim().toUpperCase(),Ce=ye[2]??"",Pe=Ae==="NOTE_INTERNE"?String(Ce).replace(/^\s+/,""):String(Ce).trim();B[Ae]=Pe}}return B}function H(C){const B=[];for(const[K,X]of Object.entries(C)){const ye=X==null?"":String(X);if(ye.trim()==="")continue;const ge=K.toUpperCase()==="NOTE_INTERNE";B.push(`${K}: ${ge?ye:ye.trim()}`)}return B.length?B.join("; "):null}function de(C,B){const K=a?.notes??"",X=G(String(K)),ye=C.toUpperCase(),ge=B==null?"":String(B);ge.trim()===""?delete X[ye]:X[ye]=ye==="NOTE_INTERNE"?ge:ge.trim();const Ae=H(X);Mt("notes",Ae)}const[le,P]=E.useState(!1),[Z,se]=E.useState(null),[oe,z]=E.useState(null),[W,pe]=E.useState(null),[ae,_e]=E.useState(!1),Re=E.useRef(new Set);E.useEffect(()=>{if(!a)return;const C=Z==="pct"&&typeof oe=="number"&&oe>0?{mode:"pct",pct:oe,final:null}:Z==="final"&&typeof W=="number"&&W>=0?{mode:"final",pct:null,final:W}:null,B=a.discount_json??null;JSON.stringify(B)!==JSON.stringify(C)&&(i({...a,discount_json:C}),At({discount_json:C}))},[Z,oe,W]);function Ee(C,B,K){const X=C.slice();if(B<0||B>=X.length||K<0||K>=X.length)return X;const[ye]=X.splice(B,1);return X.splice(K,0,ye),X}const[ke,Me]=E.useState(null),[fe,ce]=E.useState(null);function we(C,B){m(K=>{const X=K.findIndex(ge=>ge.id===C);if(X===-1)return K;const ye=X+B;return Ee(K,X,ye)})}function je(C,B){Me(B),C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",B)}function De(C){C.preventDefault(),C.dataTransfer.dropEffect="move"}function Oe(C,B){C.preventDefault();const K=ke||C.dataTransfer.getData("text/plain");!K||K===B||(m(X=>{const ye=X.findIndex(Ae=>Ae.id===K),ge=X.findIndex(Ae=>Ae.id===B);return ye===-1||ge===-1?X:Ee(X,ye,ge)}),Me(null))}function it(C,B){const K=Array.isArray(Le)?Le.slice():Le&&typeof Le=="object"?Object.values(Le):[],X=K.findIndex(Ae=>Ae?.id===C);if(X===-1)return;const ye=Math.max(0,Math.min(K.length-1,X+B));if(ye===X)return;const ge=Ee(K,X,ye);ut(ge)}function We(C,B){ce(B),C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",B)}function qe(C){C.preventDefault(),C.dataTransfer.dropEffect="move"}function Ge(C,B){C.preventDefault();const K=fe||C.dataTransfer.getData("text/plain");if(!K||K===B)return;const X=Array.isArray(Le)?Le.slice():Le&&typeof Le=="object"?Object.values(Le):[],ye=X.findIndex(Ce=>Ce?.id===K),ge=X.findIndex(Ce=>Ce?.id===B);if(ye===-1||ge===-1){ce(null);return}const Ae=Ee(X,ye,ge);ut(Ae),ce(null)}const Le=On(C=>C.items),lt=Array.isArray(Le)?Le:Le&&typeof Le=="object"?Object.values(Le):[],ut=On(C=>C.setItems),Xe=On(C=>C.addItem),Ne=On(C=>C.replaceItem),Ze=On(C=>C.duplicateItem),Be=On(C=>C.removeItem),Ue=On(C=>C.profileOverview),T=On(C=>C.setProfileOverview),[b,_]=E.useState(!1),[D,q]=E.useState(null),[J,he]=E.useState(null),Ke=!!D,ot=TO[0]??iD,et=E.useMemo(()=>NO(ot,{validityDays:a?.validity_days??15}),[ot,a?.validity_days]);function dt(C){const B=hu[C].makeDefaults();he(null),q(B)}function st(C){he(C.id),q(JSON.parse(JSON.stringify(C)))}async function un(){if(!D)return;let C={...D};const B=a?.id?String(a.id):null,K=C.__pickedFile;if(K){let ge=null;if(B)try{ge=await kc(K,B)}catch(Ae){console.warn("Upload file personalizzato fallito",Ae)}try{if(ge)C.image_url=ge,C.__previewUrl=ge,delete C.__needsUpload;else{const Ae=await ai(K);C.image_url=Ae,C.__previewUrl=Ae,C.__needsUpload="user-file"}}catch(Ae){console.warn("Conversione file  data URL fallita",Ae)}finally{delete C.__pickedFile}}else delete C.__pickedFile;const X=String(C.kind).toLowerCase()==="cassonetto";if(!K&&X)try{const ge={width_mm:Number(C.width_mm)||0,height_mm:Number(C.height_mm)||0,depth_mm:C.depth_mm??null,celino_mm:C.celino_mm??C.extension_mm??null,color:C.options?.previewColor||null};if(ge.width_mm>0&&ge.height_mm>0){const Ae=await Dh(ge,640,640),Ce=await ai(Ae);C.image_url=Ce,C.__previewUrl=Ce,delete C.__needsUpload}}catch(ge){console.warn("Rasterizzazione cassonetto  PNG fallita",ge)}const ye=!!C?.options?.gridWindow;if(!K&&ye)try{const ge=await Oh(C.options.gridWindow,640,640),Ae=await ai(ge);C.image_url=Ae,C.__previewUrl=Ae,delete C.__needsUpload}catch(ge){console.warn("Rasterizzazione finestra  PNG fallita",ge)}if(typeof C.image_url=="string"&&C.image_url.startsWith("data:")&&(C.__needsUpload==="user-file"||C.__needsUpload===!0)&&B)try{const ge=`item-${C.id||Date.now()}.png`,Ae=By(String(C.image_url),ge),Ce=await kc(Ae,B);Ce&&(C.image_url=Ce,C.__previewUrl=Ce,delete C.__needsUpload)}catch(ge){console.warn("Upload immagine da data URL fallito",ge)}J?(Ne(J,{...C,id:J}),Nn.success("Voce aggiornata")):(Xe(C),Nn.success("Voce aggiunta")),q(null),he(null)}async function Tn(){if(!a){Nn.error("Preventivo non caricato");return}try{const C=await Promise.all(Le.map(async rt=>{const{__previewUrl:xt,__pickedFile:Ft,...He}=rt??{};if(He?.options?.gridWindow)try{const ft=await Oh(He.options.gridWindow,640,640),Ve=await ai(ft);He.image_url=Ve}catch(ft){console.warn("Rasterizzazione finestra  PNG fallita",ft);const Ve=typeof He.image_url=="string"?He.image_url.trim():"",Et=/^https?:\/\//i.test(Ve),kt=/^data:image\//i.test(Ve);He.image_url=Et||kt?Ve:void 0}else if(String(He?.kind||"").toLowerCase()==="cassonetto")try{const ft={width_mm:Number(He.width_mm)||0,height_mm:Number(He.height_mm)||0,depth_mm:He.depth_mm??null,celino_mm:He.celino_mm??He.extension_mm??null,color:He.options?.previewColor||null};if(ft.width_mm>0&&ft.height_mm>0){const Ve=await Dh(ft,640,640),Et=await ai(Ve);He.image_url=Et}else{const Ve=typeof He.image_url=="string"?He.image_url.trim():"",Et=/^https?:\/\//i.test(Ve),kt=/^data:image\//i.test(Ve);He.image_url=Et||kt?Ve:void 0}}catch(ft){console.warn("Rasterizzazione cassonetto  PNG fallita",ft);const Ve=typeof He.image_url=="string"?He.image_url.trim():"",Et=/^https?:\/\//i.test(Ve),kt=/^data:image\//i.test(Ve);He.image_url=Et||kt?Ve:void 0}else if(String(He?.kind||"").toLowerCase()==="persiana")try{const ft=He.options?.previewColor,Ve={width_mm:Number(He.width_mm)||1e3,height_mm:Number(He.height_mm)||1400,ante:Number(He.ante)||2,color:ft},Et=await ow(Ve,640,640),kt=await ai(Et);He.image_url=kt}catch(ft){console.warn("Rasterizzazione persiana  PNG fallita",ft);const Ve=typeof He.image_url=="string"?He.image_url.trim():"",Et=/^https?:\/\//i.test(Ve),kt=/^data:image\//i.test(Ve);He.image_url=Et||kt?Ve:void 0}else if(String(He?.kind||"").toLowerCase()==="tapparella")try{const ft=He.options?.previewColor,Ve={width_mm:Number(He.width_mm)||1e3,height_mm:Number(He.height_mm)||1400,color:ft},Et=await lw(Ve,640,640),kt=await ai(Et);He.image_url=kt}catch(ft){console.warn("Rasterizzazione tapparella  PNG fallita",ft);const Ve=typeof He.image_url=="string"?He.image_url.trim():"",Et=/^https?:\/\//i.test(Ve),kt=/^data:image\//i.test(Ve);He.image_url=Et||kt?Ve:void 0}else{const ft=typeof He.image_url=="string"?He.image_url.trim():"",Ve=/^https?:\/\//i.test(ft),Et=/^data:image\//i.test(ft);He.image_url=Ve||Et?ft:void 0}return He})),[{pdf:B},K]=await Promise.all([ui(()=>import("./react-pdf.browser-CjrA6A-n.js"),[]),ui(()=>import("./QuotePDF-C_tkfNto.js"),__vite__mapDeps([0,1]))]);if(!K?.default){Nn.error("Componente PDF mancante");return}const X=p.map(rt=>({label:rt.label||"-",amount:Number.isFinite(Number(rt.amount))?Number(rt.amount):0,pieces:typeof rt.pieces=="number"&&isFinite(rt.pieces)&&rt.pieces>0?rt.pieces:null,surfaces:rt.surfaces?xs(rt.surfaces):void 0})),ye=X.reduce((rt,xt)=>rt+(xt.amount||0),0),ge=Z==="pct"&&typeof oe=="number"&&oe>0||Z==="final"&&typeof W=="number"&&W>=0,Ae=Z==="pct"?Math.max(0,ye*(1-(oe??0)/100)):Z==="final"&&W!=null?Math.max(0,W):ye,Ce=a.customer_type==="azienda"?me&&me.trim()||(a.notes?.match(/P\.IVA:\s*([^;]+)(;|$)/i)?.[1]?.trim()??null):null,Pe=G(a?.notes),$e=Pe.SHOW_TOTAL_INCL==="true",ze=Number.isFinite(Number(Pe.VAT_PERCENT))?Number(Pe.VAT_PERCENT):Number.isFinite(Number(a.vat))?Number(a.vat):22,tt={companyLogoUrl:o?.logo_url??null,quoteNumber:a.number??null,issueDate:a.issue_date||new Date().toISOString().slice(0,10),installTime:a.install_time||null,totalMq:typeof a.total_mq=="number"?a.total_mq:null,profileSystem:a.profile_system||null,vatRateLabel:`IVA ${a.vat??"22"}%`,customer:{name:a.customer_name||null,address:a.job_address||null,email:a.customer_email||null,phone:a.customer_phone||null,vat:Ce},showShippingIncluded:a.shipping_included!==!1,catTotals:X,totalExcluded:ye,validityDays:a.validity_days??15,validityLabel:et.validityLabel||`VALIDITA' OFFERTA: ${a.validity_days??15} giorni`,terms:et.text,termsStructured:et,items:C,profileOverview:Ue?{imageUrl:Ue.imageUrl??null,features:(Ue.features||[]).map(rt=>({eyebrow:rt.eyebrow,title:rt.title,description:rt.description}))}:null,discount:ge?{mode:Z,pct:Z==="pct"?oe??null:null,final:Z==="final"?W??null:null,originalTotal:ye,discountedTotal:Ae}:null,showTotalIncl:$e,vatPercent:ze},St=f.jsx(K.default,{...tt}),Dt=await B(St).toBlob(),gt=URL.createObjectURL(Dt);window.open(gt,"_blank")}catch(C){Nn.error(C?.message||"Errore apertura PDF")}}E.useEffect(()=>{(async()=>{const{data:C,error:B}=await en.from("quotes").select("*").eq("id",t).maybeSingle();if(B){Nn.error(B.message);return}i(C),m(lD(C?.manual_totals));const K=Array.isArray(C?.items_json)?C.items_json:[];ut(K),T(C?.profile_overview??null);const X=C?.discount_json;if(X&&typeof X=="object"){const ye=X.mode==="pct"||X.mode==="final"?X.mode:null;se(ye),z(ye==="pct"&&typeof X.pct=="number"?X.pct:null),pe(ye==="final"&&typeof X.final=="number"?X.final:null)}else se(null),z(null),pe(null)})()},[t,ut]),E.useEffect(()=>{(async()=>{const{data:C}=await en.from("app_settings").select("value").eq("key","branding").maybeSingle();C?.value&&c(C.value)})()},[]),E.useEffect(()=>{a&&At({manual_totals:p})},[p]),E.useEffect(()=>{a&&((!a.install_time||!a.install_time.trim())&&Mt("install_time",zy),a.shipping_included==null&&Mt("shipping_included",!0))},[a]),E.useEffect(()=>{if(!a?.id||ae)return;const C=Array.isArray(Le)?Le:[],B=C.map((X,ye)=>({item:X,idx:ye})).filter(({item:X,idx:ye})=>{const ge=X?.__needsUpload;if(!(ge==="user-file"||ge===!0))return!1;const Ce=typeof X?.image_url=="string"?X.image_url:null;if(!Ce||!Ce.startsWith("data:"))return!1;const Pe=String(X?.id??`idx-${ye}`);return!Re.current.has(Pe)});if(B.length===0)return;let K=!1;return _e(!0),(async()=>{const X=C.slice();let ye=!1;for(const{item:ge,idx:Ae}of B){const Ce=String(ge?.id??`idx-${Ae}`);try{const Pe=`item-${Ce}-${Date.now()}.png`,$e=By(String(ge.image_url),Pe),ze=await kc($e,String(a.id));if(K)return;if(ze){const tt={...ge,image_url:ze,__previewUrl:ge.__previewUrl??ze};delete tt.__needsUpload,X[Ae]=tt,ye=!0}else Re.current.add(Ce)}catch(Pe){Re.current.add(Ce),console.warn("Migrazione immagine base64 fallita",Pe)}}!K&&ye&&ut(X),K||_e(!1)})(),()=>{K=!0,_e(!1)}},[a?.id,Le,ae,ut]),E.useEffect(()=>{a&&et.text&&a.terms!==et.text&&Mt("terms",et.text)},[a?.terms,et.text]),E.useEffect(()=>{if(!a||ae)return;const C=Array.isArray(Le)?Le.map((X,ye)=>({item:X,key:String(X?.id??`idx-${ye}`),image:typeof X?.image_url=="string"?X.image_url:null,needsUpload:X?.__needsUpload==="user-file"||X?.__needsUpload===!0})):[];if(C.some(({image:X,key:ye,needsUpload:ge})=>ge&&!!X&&X.startsWith("data:")&&!Re.current.has(ye)))return;const K=C.map(({item:X})=>{if(!X||typeof X!="object")return X;const{__pickedFile:ye,__previewUrl:ge,__needsUpload:Ae,...Ce}=X;return typeof Ce.image_url=="string"&&(Ce.image_url.startsWith("blob:")||Ce.image_url.startsWith("data:"))&&delete Ce.image_url,Ce});At({items_json:K})},[Le,ae]),E.useEffect(()=>{if(!a)return;const C=Ue,B=!!C?.imageUrl||Array.isArray(C?.features)&&C.features.length>0;At({profile_overview:B?C:null})},[Ue]);function Mt(C,B){a&&a[C]!==B&&(i({...a,[C]:B}),At({[C]:B}))}const At=uD(async C=>{if(a)try{d(!0);const{error:B}=await en.from("quotes").update(C).eq("id",a.id);if(B)throw B}catch(B){Nn.error(B.message||"Errore salvataggio")}finally{d(!1)}},500);function tn(){Nn.info("Duplica preventivo in arrivo")}const Ie=p.reduce((C,B)=>C+(Number(B.amount)||0),0),Nt=E.useMemo(()=>G(a?.notes),[a?.notes]).NOTE_INTERNE??"",Gt=Z==="pct"&&typeof oe=="number"&&oe>0||Z==="final"&&typeof W=="number"&&W>=0,Cn=Z==="pct"?Math.max(0,Ie*(1-(oe??0)/100)):Z==="final"&&W!=null?Math.max(0,W):Ie,$=C=>{C.preventDefault();const B=typeof window<"u"?window.history.state:null,K=typeof B?.idx=="number"?B.idx:null;K!==null&&K>0?r(-1):r("/",{replace:!0})};return a?f.jsxs("div",{className:"space-y-6",children:[f.jsx(GO,{quote:a,saving:u,hasDiscount:Gt,totalExcluded:Ie,discountedTotal:Cn,discountMode:Z,discountPct:oe,onBackClick:$,onStatusChange:C=>Mt("status",C),onOpenPdf:Tn,onDuplicate:tn}),f.jsxs("div",{className:"rounded-xl border border-dashed border-amber-200 bg-[#FFFCF4] px-4 py-3 shadow-[0_1px_0_rgba(0,0,0,0.04)]",children:[f.jsx("div",{className:"flex items-start justify-between gap-2",children:f.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-amber-700",children:"Note interne"})}),f.jsx("textarea",{className:"mt-2 w-full rounded-lg border border-dashed border-amber-200/80 bg-[#FFFEF8] px-3 py-2 text-sm text-gray-800 placeholder:text-amber-700/60 focus:outline-none focus:ring-2 focus:ring-amber-100",placeholder:"Appunti interni segreti (non visibili al cliente nel pdf)",rows:3,value:Nt,onChange:C=>de("NOTE_INTERNE",C.target.value)})]}),f.jsx(aD,{quote:a,piva:me,defaultInstallTime:zy,updateField:Mt,onPivaChange:C=>{xe(C),ee(C)},parseNotesMap:G,setNoteKey:de}),f.jsx(Ua,{children:f.jsx(FO,{manualTotals:p,itemsArray:lt,dragTotalId:ke,piecesStr:R,amountStr:M,totalExcluded:Ie,hasDiscount:Gt,discountedTotal:Cn,discountMode:Z,discountPct:oe,discountFinal:W,showDiscountEditor:le,onAddRow:w,onUpdateRow:N,onRemoveRow:S,onMoveRow:we,onTotalDragStart:je,onTotalDragOver:De,onTotalDrop:Oe,onPiecesChange:F,onPiecesBlur:U,onAmountChange:Y,onAmountBlur:re,onOpenSurfaceModal:y,onToggleDiscountEditor:()=>{P(C=>!C),Z||se("pct")},onSetDiscountMode:se,onSetDiscountPct:z,onSetDiscountFinal:pe,onClearDiscount:()=>{se(null),z(null),pe(null)}})}),f.jsx(Ua,{children:f.jsx(qO,{itemsArray:lt,onOpenPicker:()=>_(!0),onItemDragStart:We,onItemDragOver:qe,onItemDrop:Ge,onMoveItemRow:it,onEditItem:st,onDuplicateItem:Ze,onRemoveItem:Be})}),f.jsx(bO,{open:b,onClose:()=>_(!1),onPick:C=>{_(!1),dt(C)}}),Ke&&D&&f.jsx(BO,{draft:D,editingId:J,onChange:C=>q(C),onCancel:()=>{q(null),he(null)},onSave:un}),f.jsx($O,{open:!!x,row:x,items:lt,onClose:()=>y(null),onSave:C=>{x&&N(x.id,{surfaces:C}),y(null)}})]}):f.jsx("div",{className:"animate-pulse h-8 w-40 rounded bg-gray-200"})}function uD(t,r=400){const a=E.useRef(null);return(...i)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>t(...i),r)}}window.Buffer=window.Buffer||x2.Buffer;window.process=window.process||_2;const dD=r2([{path:"/",element:f.jsx(E2,{}),children:[{index:!0,element:f.jsx(IM,{})},{path:"quotes/:id",element:f.jsx(cD,{})}]}]);N1.createRoot(document.getElementById("root")).render(f.jsxs(Te.StrictMode,{children:[f.jsx(p2,{router:dD}),f.jsx(nS,{richColors:!0,position:"top-right"})]}));export{CO as G,Te as R,SD as S,TO as T,bD as _,Lc as a,hw as b,eO as c,x1 as d,fD as e,ky as f,Io as g,E as h,f as j,xs as n,nO as p,g2 as r,rO as t,S2 as x,tO as z};
